"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[179],{2313:(zt,He,N)=>{N.d(He,{nm:()=>Yn});var h=N(2122),ge=(N(4650),N(3692),N(259),N(5861)),Ie=N(9681),be=N(4859),ae=N(2090),Ee=N(1877);const X=new Map,se={activated:!1,tokenObservers:[]},le={initialized:!1,enabled:!1};function ze(Fe){return X.get(Fe)||Object.assign({},se)}function it(){return le}const vt="https://content-firebaseappcheck.googleapis.com/v1",et="exchangeDebugToken",dt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Qe{constructor(Me,je,lt,Lt,rn){if(this.operation=Me,this.retryPolicy=je,this.getWaitDuration=lt,this.lowerBound=Lt,this.upperBound=rn,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>rn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Me){var je=this;return(0,ge.Z)(function*(){je.stop();try{je.pending=new ae.BH,yield function We(Fe){return new Promise(Me=>{setTimeout(Me,Fe)})}(je.getNextRun(Me)),je.pending.resolve(),yield je.pending.promise,je.pending=new ae.BH,yield je.operation(),je.pending.resolve(),yield je.pending.promise,je.process(!0).catch(()=>{})}catch(lt){je.retryPolicy(lt)?je.process(!1).catch(()=>{}):je.stop()}})()}getNextRun(Me){if(Me)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),je}}}const Xe=new ae.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ct(Fe,Me){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,ge.Z)(function*({url:Fe,body:Me},je){const lt={"Content-Type":"application/json"},Lt=je.getImmediate({optional:!0});if(Lt){const Xn=yield Lt.getHeartbeatsHeader();Xn&&(lt["X-Firebase-Client"]=Xn)}const rn={method:"POST",body:JSON.stringify(Me),headers:lt};let $t,lr;try{$t=yield fetch(Fe,rn)}catch(Xn){throw Xe.create("fetch-network-error",{originalErrorMessage:Xn?.message})}if(200!==$t.status)throw Xe.create("fetch-status-error",{httpStatus:$t.status});try{lr=yield $t.json()}catch(Xn){throw Xe.create("fetch-parse-error",{originalErrorMessage:Xn?.message})}const kn=lr.ttl.match(/^([\d.]+)(s)$/);if(!kn||!kn[2]||isNaN(Number(kn[1])))throw Xe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${lr.ttl}`});const xr=1e3*Number(kn[1]),mi=Date.now();return{token:lr.token,expireTimeMillis:mi+xr,issuedAtTimeMillis:mi}})).apply(this,arguments)}const Ke="firebase-app-check-database",ht=1,tt="firebase-app-check-store";let mt=null;function Cn(Fe,Me){return wn.apply(this,arguments)}function wn(){return(wn=(0,ge.Z)(function*(Fe,Me){const lt=(yield function Gt(){return mt||(mt=new Promise((Fe,Me)=>{try{const je=indexedDB.open(Ke,ht);je.onsuccess=lt=>{Fe(lt.target.result)},je.onerror=lt=>{var Lt;Me(Xe.create("storage-open",{originalErrorMessage:null===(Lt=lt.target.error)||void 0===Lt?void 0:Lt.message}))},je.onupgradeneeded=lt=>{0===lt.oldVersion&&lt.target.result.createObjectStore(tt,{keyPath:"compositeKey"})}}catch(je){Me(Xe.create("storage-open",{originalErrorMessage:je?.message}))}}),mt)}()).transaction(tt,"readwrite"),rn=lt.objectStore(tt).put({compositeKey:Fe,value:Me});return new Promise(($t,lr)=>{rn.onsuccess=kn=>{$t()},lt.onerror=kn=>{var xr;lr(Xe.create("storage-set",{originalErrorMessage:null===(xr=kn.target.error)||void 0===xr?void 0:xr.message}))}})})).apply(this,arguments)}const xe=new Ee.Yd("@firebase/app-check");function ft(Fe,Me){return(0,ae.hl)()?function mn(Fe,Me){return Cn(function zn(Fe){return`${Fe.options.appId}-${Fe.name}`}(Fe),Me)}(Fe,Me).catch(je=>{xe.warn(`Failed to write token to IndexedDB. Error: ${je}`)}):Promise.resolve()}function Fn(){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,ge.Z)(function*(){const Fe=it();if(Fe.enabled&&Fe.token)return Fe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Nr={error:"UNKNOWN_ERROR"};function Jn(Fe){return ae.US.encodeString(JSON.stringify(Fe),!1)}function Xt(Fe){return en.apply(this,arguments)}function en(){return(en=(0,ge.Z)(function*(Fe,Me=!1){const je=Fe.app;!function Ue(Fe){if(!ze(Fe).activated)throw Xe.create("use-before-activation",{appName:Fe.name})}(je);const lt=ze(je);let rn,Lt=lt.token;if(Lt&&!vr(Lt)&&(lt.token=void 0,Lt=void 0),!Lt){const kn=yield lt.cachedTokenPromise;kn&&(vr(kn)?Lt=kn:yield ft(je,void 0))}if(!Me&&Lt&&vr(Lt))return{token:Lt.token};let lr,$t=!1;if(function St(){return it().enabled}()){lt.exchangeTokenPromise||(lt.exchangeTokenPromise=Ct(function Be(Fe,Me){const{projectId:je,appId:lt,apiKey:Lt}=Fe.options;return{url:`${vt}/projects/${je}/apps/${lt}:${et}?key=${Lt}`,body:{debug_token:Me}}}(je,yield Fn()),Fe.heartbeatServiceProvider).finally(()=>{lt.exchangeTokenPromise=void 0}),$t=!0);const kn=yield lt.exchangeTokenPromise;return yield ft(je,kn),lt.token=kn,{token:kn.token}}try{lt.exchangeTokenPromise||(lt.exchangeTokenPromise=lt.provider.getToken().finally(()=>{lt.exchangeTokenPromise=void 0}),$t=!0),Lt=yield ze(je).exchangeTokenPromise}catch(kn){"appCheck/throttled"===kn.code?xe.warn(kn.message):xe.error(kn),rn=kn}return Lt?rn?lr=vr(Lt)?{token:Lt.token,internalError:rn}:Ti(rn):(lr={token:Lt.token},lt.token=Lt,yield ft(je,Lt)):lr=Ti(rn),$t&&function _r(Fe,Me){const je=ze(Fe).tokenObservers;for(const lt of je)try{"EXTERNAL"===lt.type&&null!=Me.error?lt.error(Me.error):lt.next(Me)}catch{}}(je,lr),lr})).apply(this,arguments)}function yr(Fe,Me){const je=ze(Fe),lt=je.tokenObservers.filter(Lt=>Lt.next!==Me);0===lt.length&&je.tokenRefresher&&je.tokenRefresher.isRunning()&&je.tokenRefresher.stop(),je.tokenObservers=lt}function Wn(Fe){const{app:Me}=Fe,je=ze(Me);let lt=je.tokenRefresher;lt||(lt=function hr(Fe){const{app:Me}=Fe;return new Qe((0,ge.Z)(function*(){let lt;if(lt=ze(Me).token?yield Xt(Fe,!0):yield Xt(Fe),lt.error)throw lt.error;if(lt.internalError)throw lt.internalError}),()=>!0,()=>{const je=ze(Me);if(je.token){let lt=je.token.issuedAtTimeMillis+.5*(je.token.expireTimeMillis-je.token.issuedAtTimeMillis)+3e5;return lt=Math.min(lt,je.token.expireTimeMillis-3e5),Math.max(0,lt-Date.now())}return 0},dt.RETRIAL_MIN_WAIT,dt.RETRIAL_MAX_WAIT)}(Fe),je.tokenRefresher=lt),!lt.isRunning()&&je.isTokenAutoRefreshEnabled&&lt.start()}function vr(Fe){return Fe.expireTimeMillis-Date.now()>0}function Ti(Fe){return{token:Jn(Nr),error:Fe}}class Zn{constructor(Me,je){this.app=Me,this.heartbeatServiceProvider=je}_delete(){const{tokenObservers:Me}=ze(this.app);for(const je of Me)yr(this.app,je.next);return Promise.resolve()}}const Br="app-check-internal";!function ai(){(0,Ie._registerComponent)(new be.wA("app-check",Fe=>function rr(Fe,Me){return new Zn(Fe,Me)}(Fe.getProvider("app").getImmediate(),Fe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Fe,Me,je)=>{Fe.getProvider(Br).initialize()})),(0,Ie._registerComponent)(new be.wA(Br,Fe=>function Pn(Fe){return{getToken:Me=>Xt(Fe,Me),addTokenListener:Me=>function Vt(Fe,Me,je,lt){const{app:Lt}=Fe,rn=ze(Lt);if(rn.tokenObservers=[...rn.tokenObservers,{next:je,error:lt,type:Me}],rn.token&&vr(rn.token)){const lr=rn.token;Promise.resolve().then(()=>{je({token:lr.token}),Wn(Fe)}).catch(()=>{})}rn.cachedTokenPromise.then(()=>Wn(Fe))}(Fe,"INTERNAL",Me),removeTokenListener:Me=>yr(Fe.app,Me)}}(Fe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ie.registerVersion)("@firebase/app-check","0.6.4")}();class Yn{constructor(){return(0,h.vb)("app-check")}}typeof window<"u"&&window},3692:(zt,He,N)=>{N.d(He,{Ot:()=>G}),N(259),N(4650);class G{constructor(ve){return ve}}},1205:(zt,He,N)=>{N.d(He,{zQ:()=>Ve,rT:()=>At,f7:()=>Ct,L6:()=>he,_Q:()=>Ue,lh:()=>Tt,Qv:()=>Xe,nw:()=>Pt});var h=N(4650),z=N(7579),G=N(9646),q=N(9751),ge=N(8996),Ie=N(6451),be=N(5363),ae=N(3900),Ee=N(4004),X=N(6063);class se extends z.x{constructor(Ke=1/0,ht=1/0,tt=X.l){super(),this._bufferSize=Ke,this._windowTime=ht,this._timestampProvider=tt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ht===1/0,this._bufferSize=Math.max(1,Ke),this._windowTime=Math.max(1,ht)}next(Ke){const{isStopped:ht,_buffer:tt,_infiniteTimeWindow:yt,_timestampProvider:mt,_windowTime:Gt}=this;ht||(tt.push(Ke),!yt&&tt.push(mt.now()+Gt)),this._trimBuffer(),super.next(Ke)}_subscribe(Ke){this._throwIfClosed(),this._trimBuffer();const ht=this._innerSubscribe(Ke),{_infiniteTimeWindow:tt,_buffer:yt}=this,mt=yt.slice();for(let Gt=0;Gt<mt.length&&!Ke.closed;Gt+=tt?1:2)Ke.next(mt[Gt]);return this._checkFinalizedStatuses(Ke),ht}_trimBuffer(){const{_bufferSize:Ke,_timestampProvider:ht,_buffer:tt,_infiniteTimeWindow:yt}=this,mt=(yt?1:2)*Ke;if(Ke<1/0&&mt<tt.length&&tt.splice(0,tt.length-mt),!yt){const Gt=ht.now();let Wt=0;for(let mn=1;mn<tt.length&&tt[mn]<=Gt;mn+=2)Wt=mn;Wt&&tt.splice(0,Wt+1)}}}var le=N(3099);function ze(Be,Ke,ht){let tt,yt=!1;return Be&&"object"==typeof Be?({bufferSize:tt=1/0,windowTime:Ke=1/0,refCount:yt=!1,scheduler:ht}=Be):tt=Be??1/0,(0,le.B)({connector:()=>new se(tt,Ke,ht),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:yt})}var Oe=N(590),it=N(576);function vt(Be,Ke){return(0,it.m)(Ke)?(0,ae.w)(()=>Be,Ke):(0,ae.w)(()=>Be)}var qe=N(9468),ut=N(9300),et=N(2122),dt=N(2011),ve=N(6895),Qe=N(2313);N(9260);const Xe=new h.OlP("angularfire2.auth.use-emulator"),he=new h.OlP("angularfire2.auth.settings"),Ue=new h.OlP("angularfire2.auth.tenant-id"),At=new h.OlP("angularfire2.auth.langugage-code"),Tt=new h.OlP("angularfire2.auth.use-device-language"),Ct=new h.OlP("angularfire.auth.persistence"),Pt=(Be,Ke,ht,tt,yt,mt,Gt,Wt)=>(0,dt.cc)(`${Be.name}.auth`,"AngularFireAuth",Be.name,()=>{const mn=Ke.runOutsideAngular(()=>Be.auth());if(ht&&mn.useEmulator(...ht),tt&&(mn.tenantId=tt),mn.languageCode=yt,mt&&mn.useDeviceLanguage(),Gt)for(const[kt,Zt]of Object.entries(Gt))mn.settings[kt]=Zt;return Wt&&mn.setPersistence(Wt),mn},[ht,tt,yt,mt,Gt,Wt]);let Ve=(()=>{class Be{constructor(ht,tt,yt,mt,Gt,Wt,mn,kt,Zt,Cn,wn,Ln){const Nn=new z.x,zn=(0,G.of)(void 0).pipe((0,be.Q)(Gt.outsideAngular),(0,ae.w)(()=>mt.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,9800)))),(0,Ee.U)(()=>(0,dt.on)(ht,mt,tt)),(0,Ee.U)(xe=>Pt(xe,mt,Wt,kt,Zt,Cn,mn,wn)),ze({bufferSize:1,refCount:!1}));if((0,ve.PM)(yt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{zn.pipe((0,Oe.P)()).subscribe();const un=zn.pipe((0,ae.w)(Ut=>Ut.getRedirectResult().then(on=>on,()=>null)),et.iC,ze({bufferSize:1,refCount:!1})),ce=zn.pipe((0,ae.w)(Ut=>new q.y(on=>({unsubscribe:mt.runOutsideAngular(()=>Ut.onAuthStateChanged(St=>on.next(St),St=>on.error(St),()=>on.complete()))})))),ft=zn.pipe((0,ae.w)(Ut=>new q.y(on=>({unsubscribe:mt.runOutsideAngular(()=>Ut.onIdTokenChanged(St=>on.next(St),St=>on.error(St),()=>on.complete()))}))));this.authState=un.pipe(vt(ce),(0,qe.R)(Gt.outsideAngular),(0,be.Q)(Gt.insideAngular)),this.user=un.pipe(vt(ft),(0,qe.R)(Gt.outsideAngular),(0,be.Q)(Gt.insideAngular)),this.idToken=this.user.pipe((0,ae.w)(Ut=>Ut?(0,ge.D)(Ut.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,ae.w)(Ut=>Ut?(0,ge.D)(Ut.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Ie.T)(un,Nn,this.authState.pipe((0,ut.h)(Ut=>!Ut))).pipe((0,Ee.U)(Ut=>Ut?.user?Ut:null),(0,qe.R)(Gt.outsideAngular),(0,be.Q)(Gt.insideAngular))}return(0,dt.pX)(this,zn,mt,{spy:{apply:(xe,un,ce)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&ce.then(ft=>Nn.next(ft))}}})}}return Be.\u0275fac=function(ht){return new(ht||Be)(h.LFG(dt.Dh),h.LFG(dt.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(et.HU),h.LFG(Xe,8),h.LFG(he,8),h.LFG(Ue,8),h.LFG(At,8),h.LFG(Tt,8),h.LFG(Ct,8),h.LFG(Qe.nm,8))},Be.\u0275prov=h.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"any"}),Be})()},33:(zt,He,N)=>{N.d(He,{ST:()=>Ft,yb:()=>_t});var h=N(4650),z=N(4986),G=N(9751),q=N(8996),ge=N(9646),Ie=N(2122),be=N(8675),ae=N(4482),Ee=N(5403);function X(){return(0,ae.e)((oe,x)=>{let B,de=!1;oe.subscribe((0,Ee.x)(x,Te=>{const ie=B;B=Te,de&&x.next([ie,Te]),de=!0}))})}var se=N(4004),le=N(5026),ze=N(4671);function it(oe,x){return oe===x}var vt=N(9300),qe=N(2011),ut=N(6895),dt=(N(9800),N(3942)),ve=N(5525),Qe=N(2090),We=N(4859);function he(oe,x){if(void 0===x)return{merge:!1};if(void 0!==x.mergeFields&&void 0!==x.merge)throw new ve.WA("invalid-argument",`Invalid options passed to function ${oe}(): You cannot specify both "merge" and "mergeFields".`);return x}function Ue(){if(typeof Uint8Array>"u")throw new ve.WA("unimplemented","Uint8Arrays are not available in this environment.")}function At(){if(!(0,ve.Me)())throw new ve.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tt{constructor(x){this._delegate=x}static fromBase64String(x){return At(),new Tt(ve.Jj.fromBase64String(x))}static fromUint8Array(x){return Ue(),new Tt(ve.Jj.fromUint8Array(x))}toBase64(){return At(),this._delegate.toBase64()}toUint8Array(){return Ue(),this._delegate.toUint8Array()}isEqual(x){return this._delegate.isEqual(x._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ct(oe){return function Pt(oe,x){if("object"!=typeof oe||null===oe)return!1;const B=oe;for(const de of x)if(de in B&&"function"==typeof B[de])return!0;return!1}(oe,["next","error","complete"])}class Ve{enableIndexedDbPersistence(x,B){return(0,ve.ST)(x._delegate,{forceOwnership:B})}enableMultiTabIndexedDbPersistence(x){return(0,ve.fH)(x._delegate)}clearIndexedDbPersistence(x){return(0,ve.Fc)(x._delegate)}}class Ze{constructor(x,B,de){this._delegate=B,this._persistenceProvider=de,this.INTERNAL={delete:()=>this.terminate()},x instanceof ve.l7||(this._appCompat=x)}get _databaseId(){return this._delegate._databaseId}settings(x){const B=this._delegate._getSettings();!x.merge&&B.host!==x.host&&(0,ve.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),x.merge&&delete(x=Object.assign(Object.assign({},B),x)).merge,this._delegate._setSettings(x)}useEmulator(x,B,de={}){(0,ve.at)(this._delegate,x,B,de)}enableNetwork(){return(0,ve.Ix)(this._delegate)}disableNetwork(){return(0,ve.TF)(this._delegate)}enablePersistence(x){let B=!1,de=!1;return x&&(B=!!x.synchronizeTabs,de=!!x.experimentalForceOwningTab,(0,ve.Wi)("synchronizeTabs",B,"experimentalForceOwningTab",de)),B?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,de)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,ve.Mx)(this._delegate)}onSnapshotsInSync(x){return(0,ve.sc)(this._delegate,x)}get app(){if(!this._appCompat)throw new ve.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(x){try{return new Nn(this,(0,ve.hJ)(this._delegate,x))}catch(B){throw Gt(B,"collection()","Firestore.collection()")}}doc(x){try{return new mt(this,(0,ve.JU)(this._delegate,x))}catch(B){throw Gt(B,"doc()","Firestore.doc()")}}collectionGroup(x){try{return new Cn(this,(0,ve.B$)(this._delegate,x))}catch(B){throw Gt(B,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(x){return(0,ve.i3)(this._delegate,B=>x(new ht(this,B)))}batch(){return(0,ve.qY)(this._delegate),new tt(new ve.PU(this._delegate,x=>(0,ve.GL)(this._delegate,x)))}loadBundle(x){return(0,ve.Pb)(this._delegate,x)}namedQuery(x){return(0,ve.L$)(this._delegate,x).then(B=>B?new Cn(this,B):null)}}class Be extends ve.u7{constructor(x){super(),this.firestore=x}convertBytes(x){return new Tt(new ve.Jj(x))}convertReference(x){const B=this.convertDocumentKey(x,this.firestore._databaseId);return mt.forKey(B,this.firestore,null)}}class ht{constructor(x,B){this._firestore=x,this._delegate=B,this._userDataWriter=new Be(x)}get(x){const B=zn(x);return this._delegate.get(B).then(de=>new kt(this._firestore,new ve.xU(this._firestore._delegate,this._userDataWriter,de._key,de._document,de.metadata,B.converter)))}set(x,B,de){const Te=zn(x);return de?(he("Transaction.set",de),this._delegate.set(Te,B,de)):this._delegate.set(Te,B),this}update(x,B,de,...Te){const ie=zn(x);return 2===arguments.length?this._delegate.update(ie,B):this._delegate.update(ie,B,de,...Te),this}delete(x){const B=zn(x);return this._delegate.delete(B),this}}class tt{constructor(x){this._delegate=x}set(x,B,de){const Te=zn(x);return de?(he("WriteBatch.set",de),this._delegate.set(Te,B,de)):this._delegate.set(Te,B),this}update(x,B,de,...Te){const ie=zn(x);return 2===arguments.length?this._delegate.update(ie,B):this._delegate.update(ie,B,de,...Te),this}delete(x){const B=zn(x);return this._delegate.delete(B),this}commit(){return this._delegate.commit()}}class yt{constructor(x,B,de){this._firestore=x,this._userDataWriter=B,this._delegate=de}fromFirestore(x,B){const de=new ve.$q(this._firestore._delegate,this._userDataWriter,x._key,x._document,x.metadata,null);return this._delegate.fromFirestore(new Zt(this._firestore,de),B??{})}toFirestore(x,B){return B?this._delegate.toFirestore(x,B):this._delegate.toFirestore(x)}static getInstance(x,B){const de=yt.INSTANCES;let Te=de.get(x);Te||(Te=new WeakMap,de.set(x,Te));let ie=Te.get(B);return ie||(ie=new yt(x,new Be(x),B),Te.set(B,ie)),ie}}yt.INSTANCES=new WeakMap;class mt{constructor(x,B){this.firestore=x,this._delegate=B,this._userDataWriter=new Be(x)}static forPath(x,B,de){if(x.length%2!=0)throw new ve.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${x.canonicalString()} has ${x.length}`);return new mt(B,new ve.my(B._delegate,de,new ve.Ky(x)))}static forKey(x,B,de){return new mt(B,new ve.my(B._delegate,de,x))}get id(){return this._delegate.id}get parent(){return new Nn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(x){try{return new Nn(this.firestore,(0,ve.hJ)(this._delegate,x))}catch(B){throw Gt(B,"collection()","DocumentReference.collection()")}}isEqual(x){return(x=(0,Qe.m9)(x))instanceof ve.my&&(0,ve.Eo)(this._delegate,x)}set(x,B){B=he("DocumentReference.set",B);try{return B?(0,ve.pl)(this._delegate,x,B):(0,ve.pl)(this._delegate,x)}catch(de){throw Gt(de,"setDoc()","DocumentReference.set()")}}update(x,B,...de){try{return 1===arguments.length?(0,ve.r7)(this._delegate,x):(0,ve.r7)(this._delegate,x,B,...de)}catch(Te){throw Gt(Te,"updateDoc()","DocumentReference.update()")}}delete(){return(0,ve.oe)(this._delegate)}onSnapshot(...x){const B=Wt(x),de=mn(x,Te=>new kt(this.firestore,new ve.xU(this.firestore._delegate,this._userDataWriter,Te._key,Te._document,Te.metadata,this._delegate.converter)));return(0,ve.cf)(this._delegate,B,de)}get(x){let B;return B="cache"===x?.source?(0,ve.kl)(this._delegate):"server"===x?.source?(0,ve.Xk)(this._delegate):(0,ve.QT)(this._delegate),B.then(de=>new kt(this.firestore,new ve.xU(this.firestore._delegate,this._userDataWriter,de._key,de._document,de.metadata,this._delegate.converter)))}withConverter(x){return new mt(this.firestore,this._delegate.withConverter(x?yt.getInstance(this.firestore,x):null))}}function Gt(oe,x,B){return oe.message=oe.message.replace(x,B),oe}function Wt(oe){for(const x of oe)if("object"==typeof x&&!Ct(x))return x;return{}}function mn(oe,x){var B,de;let Te;return Te=Ct(oe[0])?oe[0]:Ct(oe[1])?oe[1]:"function"==typeof oe[0]?{next:oe[0],error:oe[1],complete:oe[2]}:{next:oe[1],error:oe[2],complete:oe[3]},{next:ie=>{Te.next&&Te.next(x(ie))},error:null===(B=Te.error)||void 0===B?void 0:B.bind(Te),complete:null===(de=Te.complete)||void 0===de?void 0:de.bind(Te)}}class kt{constructor(x,B){this._firestore=x,this._delegate=B}get ref(){return new mt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(x){return this._delegate.data(x)}get(x,B){return this._delegate.get(x,B)}isEqual(x){return(0,ve.qK)(this._delegate,x._delegate)}}class Zt extends kt{data(x){const B=this._delegate.data(x);return(0,ve.K9)(void 0!==B,"Document in a QueryDocumentSnapshot should exist"),B}}class Cn{constructor(x,B){this.firestore=x,this._delegate=B,this._userDataWriter=new Be(x)}where(x,B,de){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.ar)(x,B,de)))}catch(Te){throw Gt(Te,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(x,B){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.Xo)(x,B)))}catch(de){throw Gt(de,/(orderBy|where)\(\)/,"Query.$1()")}}limit(x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.b9)(x)))}catch(B){throw Gt(B,"limit()","Query.limit()")}}limitToLast(x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.vh)(x)))}catch(B){throw Gt(B,"limitToLast()","Query.limitToLast()")}}startAt(...x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.e0)(...x)))}catch(B){throw Gt(B,"startAt()","Query.startAt()")}}startAfter(...x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.TQ)(...x)))}catch(B){throw Gt(B,"startAfter()","Query.startAfter()")}}endBefore(...x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.Lx)(...x)))}catch(B){throw Gt(B,"endBefore()","Query.endBefore()")}}endAt(...x){try{return new Cn(this.firestore,(0,ve.IO)(this._delegate,(0,ve.Wu)(...x)))}catch(B){throw Gt(B,"endAt()","Query.endAt()")}}isEqual(x){return(0,ve.iE)(this._delegate,x._delegate)}get(x){let B;return B="cache"===x?.source?(0,ve.UQ)(this._delegate):"server"===x?.source?(0,ve.zN)(this._delegate):(0,ve.PL)(this._delegate),B.then(de=>new Ln(this.firestore,new ve.W(this.firestore._delegate,this._userDataWriter,this._delegate,de._snapshot)))}onSnapshot(...x){const B=Wt(x),de=mn(x,Te=>new Ln(this.firestore,new ve.W(this.firestore._delegate,this._userDataWriter,this._delegate,Te._snapshot)));return(0,ve.cf)(this._delegate,B,de)}withConverter(x){return new Cn(this.firestore,this._delegate.withConverter(x?yt.getInstance(this.firestore,x):null))}}class wn{constructor(x,B){this._firestore=x,this._delegate=B}get type(){return this._delegate.type}get doc(){return new Zt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ln{constructor(x,B){this._firestore=x,this._delegate=B}get query(){return new Cn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(x=>new Zt(this._firestore,x))}docChanges(x){return this._delegate.docChanges(x).map(B=>new wn(this._firestore,B))}forEach(x,B){this._delegate.forEach(de=>{x.call(B,new Zt(this._firestore,de))})}isEqual(x){return(0,ve.qK)(this._delegate,x._delegate)}}class Nn extends Cn{constructor(x,B){super(x,B),this.firestore=x,this._delegate=B}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const x=this._delegate.parent;return x?new mt(this.firestore,x):null}doc(x){try{return new mt(this.firestore,void 0===x?(0,ve.JU)(this._delegate):(0,ve.JU)(this._delegate,x))}catch(B){throw Gt(B,"doc()","CollectionReference.doc()")}}add(x){return(0,ve.ET)(this._delegate,x).then(B=>new mt(this.firestore,B))}isEqual(x){return(0,ve.Eo)(this._delegate,x._delegate)}withConverter(x){return new Nn(this.firestore,this._delegate.withConverter(x?yt.getInstance(this.firestore,x):null))}}function zn(oe){return(0,ve.Cf)(oe,ve.my)}class xe{constructor(...x){this._delegate=new ve.Lz(...x)}static documentId(){return new xe(ve.Xb.keyField().canonicalString())}isEqual(x){return(x=(0,Qe.m9)(x))instanceof ve.Lz&&this._delegate._internalPath.isEqual(x._internalPath)}}class un{constructor(x){this._delegate=x}static serverTimestamp(){const x=(0,ve.Bt)();return x._methodName="FieldValue.serverTimestamp",new un(x)}static delete(){const x=(0,ve.AK)();return x._methodName="FieldValue.delete",new un(x)}static arrayUnion(...x){const B=(0,ve.vr)(...x);return B._methodName="FieldValue.arrayUnion",new un(B)}static arrayRemove(...x){const B=(0,ve.Ab)(...x);return B._methodName="FieldValue.arrayRemove",new un(B)}static increment(x){const B=(0,ve.nP)(x);return B._methodName="FieldValue.increment",new un(B)}isEqual(x){return this._delegate.isEqual(x._delegate)}}const ce={Firestore:Ze,GeoPoint:ve.F8,Timestamp:ve.EK,Blob:Tt,Transaction:ht,WriteBatch:tt,DocumentReference:mt,DocumentSnapshot:kt,Query:Cn,QueryDocumentSnapshot:Zt,QuerySnapshot:Ln,CollectionReference:Nn,FieldPath:xe,FieldValue:un,setLogLevel:function Ke(oe){(0,ve.Ub)(oe)},CACHE_SIZE_UNLIMITED:ve.IX};!function Ut(oe){(function ft(oe,x){oe.INTERNAL.registerComponent(new We.wA("firestore-compat",B=>{const de=B.getProvider("app-compat").getImmediate(),Te=B.getProvider("firestore").getImmediate();return x(de,Te)},"PUBLIC").setServiceProps(Object.assign({},ce)))})(oe,(x,B)=>new Ze(x,B,new Ve)),oe.registerVersion("@firebase/firestore-compat","0.3.6")}(dt.Z);var on=N(1205),St=N(2313),Fn=N(9260);function jn(oe,x){return function Tr(oe,x=z.z){return new G.y(B=>{let de;return null!=x?x.schedule(()=>{de=oe.onSnapshot({includeMetadataChanges:!0},B)}):de=oe.onSnapshot({includeMetadataChanges:!0},B),()=>{de?.()}})}(oe,x)}function Jn(oe,x){return jn(oe,x).pipe((0,se.U)(B=>({payload:B,type:"query"})))}function Xt(oe,x){return Jn(oe,x).pipe((0,be.O)(void 0),X(),(0,se.U)(([B,de])=>{const Te=de.payload.docChanges(),ie=Te.map(ue=>({type:ue.type,payload:ue}));return B&&JSON.stringify(B.payload.metadata)!==JSON.stringify(de.payload.metadata)&&de.payload.docs.forEach((ue,we)=>{const $e=Te.find(xt=>xt.doc.ref.isEqual(ue.ref)),Pe=B?.payload.docs.find(xt=>xt.ref.isEqual(ue.ref));$e&&JSON.stringify($e.doc.metadata)===JSON.stringify(ue.metadata)||!$e&&Pe&&JSON.stringify(Pe.metadata)===JSON.stringify(ue.metadata)||ie.push({type:"modified",payload:{oldIndex:we,newIndex:we,type:"modified",doc:ue}})}),ie}))}function en(oe,x,B){return Xt(oe,B).pipe((0,le.R)((de,Te)=>function Vt(oe,x,B){return x.forEach(de=>{B.indexOf(de.type)>-1&&(oe=function Wn(oe,x){switch(x.type){case"added":if(!oe[x.newIndex]||!oe[x.newIndex].doc.ref.isEqual(x.doc.ref))return yr(oe,x.newIndex,0,x);break;case"modified":if(null==oe[x.oldIndex]||oe[x.oldIndex].doc.ref.isEqual(x.doc.ref)){if(x.oldIndex!==x.newIndex){const B=oe.slice();return B.splice(x.oldIndex,1),B.splice(x.newIndex,0,x),B}return yr(oe,x.newIndex,1,x)}break;case"removed":if(oe[x.oldIndex]&&oe[x.oldIndex].doc.ref.isEqual(x.doc.ref))return yr(oe,x.oldIndex,1)}return oe}(oe,de))}),oe}(de,Te.map(ie=>ie.payload),x),[]),function Oe(oe,x=ze.y){return oe=oe??it,(0,ae.e)((B,de)=>{let Te,ie=!0;B.subscribe((0,Ee.x)(de,ue=>{const we=x(ue);(ie||!oe(Te,we))&&(ie=!1,Te=we,de.next(ue))}))})}(),(0,se.U)(de=>de.map(Te=>({type:Te.type,payload:Te}))))}function yr(oe,x,B,...de){const Te=oe.slice();return Te.splice(x,B,...de),Te}function hr(oe){return(!oe||0===oe.length)&&(oe=["added","removed","modified"]),oe}class _r{constructor(x,B,de){this.ref=x,this.query=B,this.afs=de}stateChanges(x){let B=Xt(this.query,this.afs.schedulers.outsideAngular);return x&&x.length>0&&(B=B.pipe((0,se.U)(de=>de.filter(Te=>x.indexOf(Te.type)>-1)))),B.pipe((0,be.O)(void 0),X(),(0,vt.h)(([de,Te])=>Te.length>0||!de),(0,se.U)(([de,Te])=>Te),Ie.iC)}auditTrail(x){return this.stateChanges(x).pipe((0,le.R)((B,de)=>[...B,...de],[]))}snapshotChanges(x){const B=hr(x);return en(this.query,B,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(x={}){return Jn(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(B=>B.payload.docs.map(de=>x.idField?Object.assign(Object.assign({},de.data()),{[x.idField]:de.id}):de.data())),Ie.iC)}get(x){return(0,q.D)(this.query.get(x)).pipe(Ie.iC)}add(x){return this.ref.add(x)}doc(x){return new vr(this.ref.doc(x),this.afs)}}class vr{constructor(x,B){this.ref=x,this.afs=B}set(x,B){return this.ref.set(x,B)}update(x){return this.ref.update(x)}delete(){return this.ref.delete()}collection(x,B){const de=this.ref.collection(x),{ref:Te,query:ie}=Sr(de,B);return new _r(Te,ie,this.afs)}snapshotChanges(){return function Nr(oe,x){return jn(oe,x).pipe((0,be.O)(void 0),X(),(0,se.U)(([B,de])=>de.exists?B?.exists?{payload:de,type:"modified"}:{payload:de,type:"added"}:{payload:de,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(x={}){return this.snapshotChanges().pipe((0,se.U)(({payload:B})=>x.idField?Object.assign(Object.assign({},B.data()),{[x.idField]:B.id}):B.data()))}get(x){return(0,q.D)(this.ref.get(x)).pipe(Ie.iC)}}class Ti{constructor(x,B){this.query=x,this.afs=B}stateChanges(x){return x&&0!==x.length?Xt(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(B=>B.filter(de=>x.indexOf(de.type)>-1)),(0,vt.h)(B=>B.length>0),Ie.iC):Xt(this.query,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}auditTrail(x){return this.stateChanges(x).pipe((0,le.R)((B,de)=>[...B,...de],[]))}snapshotChanges(x){const B=hr(x);return en(this.query,B,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(x={}){return Jn(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(de=>de.payload.docs.map(Te=>x.idField?Object.assign({[x.idField]:Te.id},Te.data()):Te.data())),Ie.iC)}get(x){return(0,q.D)(this.query.get(x)).pipe(Ie.iC)}}const Zn=new h.OlP("angularfire2.enableFirestorePersistence"),rr=new h.OlP("angularfire2.firestore.persistenceSettings"),Pn=new h.OlP("angularfire2.firestore.settings"),_n=new h.OlP("angularfire2.firestore.use-emulator");function Sr(oe,x=(B=>B)){return{query:x(oe),ref:oe}}let Ft=(()=>{class oe{constructor(B,de,Te,ie,ue,we,$e,Pe,xt,_e,Ce,ne,Se,at,wt,nn,Un){this.schedulers=$e;const pr=(0,qe.on)(B,we,de),Cr=xt;_e&&(0,on.nw)(pr,we,Ce,Se,at,wt,ne,nn),[this.firestore,this.persistenceEnabled$]=(0,qe.cc)(`${pr.name}.firestore`,"AngularFirestore",pr.name,()=>{const Br=we.runOutsideAngular(()=>pr.firestore());if(ie&&Br.settings(ie),Cr&&Br.useEmulator(...Cr),Te&&!(0,ut.PM)(ue)){const ai=()=>{try{return(0,q.D)(Br.enablePersistence(Pe||void 0).then(()=>!0,()=>!1))}catch(gr){return typeof console<"u"&&console.warn(gr),(0,ge.of)(!1)}};return[Br,we.runOutsideAngular(ai)]}return[Br,(0,ge.of)(!1)]},[ie,Cr,Te])}collection(B,de){let Te;Te="string"==typeof B?this.firestore.collection(B):B;const{ref:ie,query:ue}=Sr(Te,de),we=this.schedulers.ngZone.run(()=>ie);return new _r(we,ue,this)}collectionGroup(B,de){const Te=de||(ue=>ue),ie=this.firestore.collectionGroup(B);return new Ti(Te(ie),this)}doc(B){let de;de="string"==typeof B?this.firestore.doc(B):B;const Te=this.schedulers.ngZone.run(()=>de);return new vr(Te,this)}createId(){return this.firestore.collection("_").doc().id}}return oe.\u0275fac=function(B){return new(B||oe)(h.LFG(qe.Dh),h.LFG(qe.xv,8),h.LFG(Zn,8),h.LFG(Pn,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ie.HU),h.LFG(rr,8),h.LFG(_n,8),h.LFG(on.zQ,8),h.LFG(on.Qv,8),h.LFG(on.L6,8),h.LFG(on._Q,8),h.LFG(on.rT,8),h.LFG(on.lh,8),h.LFG(on.f7,8),h.LFG(St.nm,8))},oe.\u0275prov=h.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"any"}),oe})(),_t=(()=>{class oe{constructor(){Fn.Z.registerVersion("angularfire",Ie.q4.full,"fst-compat")}static enablePersistence(B){return{ngModule:oe,providers:[{provide:Zn,useValue:!0},{provide:rr,useValue:B}]}}}return oe.\u0275fac=function(B){return new(B||oe)},oe.\u0275mod=h.oAB({type:oe}),oe.\u0275inj=h.cJS({providers:[Ft]}),oe})()},377:(zt,He,N)=>{N.d(He,{Q1:()=>Sn,TE:()=>$s});var h=N(9751),z=N(9646),G=N(8996),q=N(4986),ge=N(4482),Ie=N(5403),ae=N(4004),Ee=N(3900),X=N(2122),se=N(4650),le=N(2011),ze=N(3942),Oe=N(5861),it=N(9681),vt=N(2090),qe=N(4859);const ut="firebasestorage.googleapis.com",et="storageBucket";class We extends vt.ZR{constructor(L,re,me=0){super(Xe(L),`Firebase Storage: ${re} (${Xe(L)})`),this.status_=me,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(L){this.status_=L}_codeEquals(L){return Xe(L)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(L){this.customData.serverResponse=L,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var pt=(()=>{return(U=pt||(pt={})).UNKNOWN="unknown",U.OBJECT_NOT_FOUND="object-not-found",U.BUCKET_NOT_FOUND="bucket-not-found",U.PROJECT_NOT_FOUND="project-not-found",U.QUOTA_EXCEEDED="quota-exceeded",U.UNAUTHENTICATED="unauthenticated",U.UNAUTHORIZED="unauthorized",U.UNAUTHORIZED_APP="unauthorized-app",U.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",U.INVALID_CHECKSUM="invalid-checksum",U.CANCELED="canceled",U.INVALID_EVENT_NAME="invalid-event-name",U.INVALID_URL="invalid-url",U.INVALID_DEFAULT_BUCKET="invalid-default-bucket",U.NO_DEFAULT_BUCKET="no-default-bucket",U.CANNOT_SLICE_BLOB="cannot-slice-blob",U.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",U.NO_DOWNLOAD_URL="no-download-url",U.INVALID_ARGUMENT="invalid-argument",U.INVALID_ARGUMENT_COUNT="invalid-argument-count",U.APP_DELETED="app-deleted",U.INVALID_ROOT_OPERATION="invalid-root-operation",U.INVALID_FORMAT="invalid-format",U.INTERNAL_ERROR="internal-error",U.UNSUPPORTED_ENVIRONMENT="unsupported-environment",pt;var U})();function Xe(U){return"storage/"+U}function he(){return new We(pt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ve(){return new We(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ze(){return new We(pt.CANCELED,"User canceled the upload/download.")}function tt(){return new We(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wt(U){return new We(pt.INVALID_ARGUMENT,U)}function mn(){return new We(pt.APP_DELETED,"The Firebase app was deleted.")}function kt(U){return new We(pt.INVALID_ROOT_OPERATION,"The operation '"+U+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zt(U,L){return new We(pt.INVALID_FORMAT,"String does not match format '"+U+"': "+L)}function Cn(U){throw new We(pt.INTERNAL_ERROR,"Internal error: "+U)}class wn{constructor(L,re){this.bucket=L,this.path_=re}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const L=encodeURIComponent;return"/b/"+L(this.bucket)+"/o/"+L(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(L,re){let me;try{me=wn.makeFromUrl(L,re)}catch{return new wn(L,"")}if(""===me.path)return me;throw function Ke(U){return new We(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+U+"'.")}(L)}static makeFromUrl(L,re){let me=null;const D="([A-Za-z0-9.\\-_]+)",W=new RegExp("^gs://"+D+"(/(.*))?$","i");function ct(Xr){Xr.path_=decodeURIComponent(Xr.path)}const Kn=re.replace(/[.]/g,"\\."),Ir=[{regex:W,indices:{bucket:1,path:3},postModify:function E(Xr){"/"===Xr.path.charAt(Xr.path.length-1)&&(Xr.path_=Xr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Kn}/v[A-Za-z0-9_]+/b/${D}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ct},{regex:new RegExp(`^https?://${re===ut?"(?:storage.googleapis.com|storage.cloud.google.com)":re}/${D}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ct}];for(let Xr=0;Xr<Ir.length;Xr++){const Es=Ir[Xr],hi=Es.regex.exec(L);if(hi){let fi=hi[Es.indices.path];fi||(fi=""),me=new wn(hi[Es.indices.bucket],fi),Es.postModify(me);break}}if(null==me)throw function Be(U){return new We(pt.INVALID_URL,"Invalid URL '"+U+"'.")}(L);return me}}class Ln{constructor(L){this.promise_=Promise.reject(L)}getPromise(){return this.promise_}cancel(L=!1){}}function ft(U){return"string"==typeof U||U instanceof String}function Ut(U){return on()&&U instanceof Blob}function on(){return typeof Blob<"u"&&!(0,vt.UG)()}function St(U,L,re,me){if(me<L)throw Wt(`Invalid value for '${U}'. Expected ${L} or greater.`);if(me>re)throw Wt(`Invalid value for '${U}'. Expected ${re} or less.`)}function Fn(U,L,re){let me=L;return null==re&&(me=`https://${L}`),`${re}://${me}/v0${U}`}function Tr(U){const L=encodeURIComponent;let re="?";for(const me in U)U.hasOwnProperty(me)&&(re=re+(L(me)+"=")+L(U[me])+"&");return re=re.slice(0,-1),re}var jn=(()=>{return(U=jn||(jn={}))[U.NO_ERROR=0]="NO_ERROR",U[U.NETWORK_ERROR=1]="NETWORK_ERROR",U[U.ABORT=2]="ABORT",jn;var U})();function Nr(U,L){const re=U>=500&&U<600,D=-1!==[408,429].indexOf(U),E=-1!==L.indexOf(U);return re||D||E}class Jn{constructor(L,re,me,D,E,I,W,Ae,ct,dn,Kn,$n=!0){this.url_=L,this.method_=re,this.headers_=me,this.body_=D,this.successCodes_=E,this.additionalRetryCodes_=I,this.callback_=W,this.errorCallback_=Ae,this.timeout_=ct,this.progressCallback_=dn,this.connectionFactory_=Kn,this.retry=$n,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((or,ar)=>{this.resolve_=or,this.reject_=ar,this.start_()})}start_(){const re=(me,D)=>{const E=this.resolve_,I=this.reject_,W=D.connection;if(D.wasSuccessCode)try{const Ae=this.callback_(W,W.getResponse());!function xe(U){return void 0!==U}(Ae)?E():E(Ae)}catch(Ae){I(Ae)}else if(null!==W){const Ae=he();Ae.serverResponse=W.getErrorText(),I(this.errorCallback_?this.errorCallback_(W,Ae):Ae)}else I(D.canceled?this.appDelete_?mn():Ze():Ve())};this.canceled_?re(0,new Xt(!1,null,!0)):this.backoffId_=function Nn(U,L,re){let me=1,D=null,E=null,I=!1,W=0;function Ae(){return 2===W}let ct=!1;function dn(...Fr){ct||(ct=!0,L.apply(null,Fr))}function Kn(Fr){D=setTimeout(()=>{D=null,U(or,Ae())},Fr)}function $n(){E&&clearTimeout(E)}function or(Fr,...as){if(ct)return void $n();if(Fr)return $n(),void dn.call(null,Fr,...as);if(Ae()||I)return $n(),void dn.call(null,Fr,...as);let Ir;me<64&&(me*=2),1===W?(W=2,Ir=0):Ir=1e3*(me+Math.random()),Kn(Ir)}let ar=!1;function Hr(Fr){ar||(ar=!0,$n(),!ct&&(null!==D?(Fr||(W=2),clearTimeout(D),Kn(0)):Fr||(W=1)))}return Kn(0),E=setTimeout(()=>{I=!0,Hr(!0)},re),Hr}((me,D)=>{if(D)return void me(!1,new Xt(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const I=W=>{null!==this.progressCallback_&&this.progressCallback_(W.loaded,W.lengthComputable?W.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(I),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(I),this.pendingConnection_=null;const W=E.getErrorCode()===jn.NO_ERROR,Ae=E.getStatus();if(!W||Nr(Ae,this.additionalRetryCodes_)&&this.retry){const dn=E.getErrorCode()===jn.ABORT;return void me(!1,new Xt(!1,null,dn))}const ct=-1!==this.successCodes_.indexOf(Ae);me(!0,new Xt(ct,E))})},re,this.timeout_)}getPromise(){return this.promise_}cancel(L){this.canceled_=!0,this.appDelete_=L||!1,null!==this.backoffId_&&function zn(U){U(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Xt{constructor(L,re,me){this.wasSuccessCode=L,this.connection=re,this.canceled=!!me}}function vr(...U){const L=function _r(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==L){const re=new L;for(let me=0;me<U.length;me++)re.append(U[me]);return re.getBlob()}if(on())return new Blob(U);throw new We(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pn{constructor(L,re){this.data=L,this.contentType=re||null}}function _n(U,L){switch(U){case rr.RAW:return new Pn(Sr(L));case rr.BASE64:case rr.BASE64URL:return new Pn(_t(U,L));case rr.DATA_URL:return new Pn(function x(U){const L=new oe(U);return L.base64?_t(rr.BASE64,L.rest):function Ft(U){let L;try{L=decodeURIComponent(U)}catch{throw Zt(rr.DATA_URL,"Malformed data URL.")}return Sr(L)}(L.rest)}(L),function B(U){return new oe(U).contentType}(L))}throw he()}function Sr(U){const L=[];for(let re=0;re<U.length;re++){let me=U.charCodeAt(re);me<=127?L.push(me):me<=2047?L.push(192|me>>6,128|63&me):55296==(64512&me)?re<U.length-1&&56320==(64512&U.charCodeAt(re+1))?(me=65536|(1023&me)<<10|1023&U.charCodeAt(++re),L.push(240|me>>18,128|me>>12&63,128|me>>6&63,128|63&me)):L.push(239,191,189):56320==(64512&me)?L.push(239,191,189):L.push(224|me>>12,128|me>>6&63,128|63&me)}return new Uint8Array(L)}function _t(U,L){switch(U){case rr.BASE64:{const D=-1!==L.indexOf("-"),E=-1!==L.indexOf("_");if(D||E)throw Zt(U,"Invalid character '"+(D?"-":"_")+"' found: is it base64url encoded?");break}case rr.BASE64URL:{const D=-1!==L.indexOf("+"),E=-1!==L.indexOf("/");if(D||E)throw Zt(U,"Invalid character '"+(D?"+":"/")+"' found: is it base64 encoded?");L=L.replace(/-/g,"+").replace(/_/g,"/");break}}let re;try{re=function Zn(U){if(typeof atob>"u")throw function Gt(U){return new We(pt.UNSUPPORTED_ENVIRONMENT,`${U} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(U)}(L)}catch(D){throw D.message.includes("polyfill")?D:Zt(U,"Invalid character found")}const me=new Uint8Array(re.length);for(let D=0;D<re.length;D++)me[D]=re.charCodeAt(D);return me}class oe{constructor(L){this.base64=!1,this.contentType=null;const re=L.match(/^data:([^,]+)?,/);if(null===re)throw Zt(rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const me=re[1]||null;null!=me&&(this.base64=function de(U,L){return U.length>=L.length&&U.substring(U.length-L.length)===L}(me,";base64"),this.contentType=this.base64?me.substring(0,me.length-7):me),this.rest=L.substring(L.indexOf(",")+1)}}class Te{constructor(L,re){let me=0,D="";Ut(L)?(this.data_=L,me=L.size,D=L.type):L instanceof ArrayBuffer?(re?this.data_=new Uint8Array(L):(this.data_=new Uint8Array(L.byteLength),this.data_.set(new Uint8Array(L))),me=this.data_.length):L instanceof Uint8Array&&(re?this.data_=L:(this.data_=new Uint8Array(L.length),this.data_.set(L)),me=L.length),this.size_=me,this.type_=D}size(){return this.size_}type(){return this.type_}slice(L,re){if(Ut(this.data_)){const D=function Ti(U,L,re){return U.webkitSlice?U.webkitSlice(L,re):U.mozSlice?U.mozSlice(L,re):U.slice?U.slice(L,re):null}(this.data_,L,re);return null===D?null:new Te(D)}{const me=new Uint8Array(this.data_.buffer,L,re-L);return new Te(me,!0)}}static getBlob(...L){if(on()){const re=L.map(me=>me instanceof Te?me.data_:me);return new Te(vr.apply(null,re))}{const re=L.map(I=>ft(I)?_n(rr.RAW,I).data:I.data_);let me=0;re.forEach(I=>{me+=I.byteLength});const D=new Uint8Array(me);let E=0;return re.forEach(I=>{for(let W=0;W<I.length;W++)D[E++]=I[W]}),new Te(D,!0)}}uploadData(){return this.data_}}function ie(U){let L;try{L=JSON.parse(U)}catch{return null}return function ce(U){return"object"==typeof U&&!Array.isArray(U)}(L)?L:null}function $e(U){const L=U.lastIndexOf("/",U.length-2);return-1===L?U:U.slice(L+1)}function Pe(U,L){return L}class xt{constructor(L,re,me,D){this.server=L,this.local=re||L,this.writable=!!me,this.xform=D||Pe}}let _e=null;function ne(){if(_e)return _e;const U=[];U.push(new xt("bucket")),U.push(new xt("generation")),U.push(new xt("metageneration")),U.push(new xt("name","fullPath",!0));const re=new xt("name");re.xform=function L(E,I){return function Ce(U){return!ft(U)||U.length<2?U:$e(U)}(I)},U.push(re);const D=new xt("size");return D.xform=function me(E,I){return void 0!==I?Number(I):I},U.push(D),U.push(new xt("timeCreated")),U.push(new xt("updated")),U.push(new xt("md5Hash",null,!0)),U.push(new xt("cacheControl",null,!0)),U.push(new xt("contentDisposition",null,!0)),U.push(new xt("contentEncoding",null,!0)),U.push(new xt("contentLanguage",null,!0)),U.push(new xt("contentType",null,!0)),U.push(new xt("metadata","customMetadata",!0)),_e=U,_e}function wt(U,L,re){const me=ie(L);return null===me?null:function at(U,L,re){const me={type:"file"},D=re.length;for(let E=0;E<D;E++){const I=re[E];me[I.local]=I.xform(me,L[I.server])}return function Se(U,L){Object.defineProperty(U,"ref",{get:function re(){const E=new wn(U.bucket,U.fullPath);return L._makeStorageReference(E)}})}(me,U),me}(U,me,re)}function Un(U,L){const re={},me=L.length;for(let D=0;D<me;D++){const E=L[D];E.writable&&(re[E.server]=U[E.local])}return JSON.stringify(re)}const pr="prefixes",Cr="items";class gr{constructor(L,re,me,D){this.url=L,this.method=re,this.handler=me,this.timeout=D,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qr(U){if(!U)throw he()}function Yn(U,L){return function re(me,D){const E=wt(U,D,L);return qr(null!==E),E}}function Vn(U){return function L(re,me){let D;return D=401===re.getStatus()?re.getErrorText().includes("Firebase App Check token is invalid")?function Ct(){return new We(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Tt(){return new We(pt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===re.getStatus()?function At(U){return new We(pt.QUOTA_EXCEEDED,"Quota for bucket '"+U+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(U.bucket):403===re.getStatus()?function Pt(U){return new We(pt.UNAUTHORIZED,"User does not have permission to access '"+U+"'.")}(U.path):me,D.status=re.getStatus(),D.serverResponse=me.serverResponse,D}}function wr(U){const L=Vn(U);return function re(me,D){let E=L(me,D);return 404===me.getStatus()&&(E=function Ue(U){return new We(pt.OBJECT_NOT_FOUND,"Object '"+U+"' does not exist.")}(U.path)),E.serverResponse=D.serverResponse,E}}function Er(U,L,re){const D=Fn(L.fullServerUrl(),U.host,U._protocol),I=U.maxOperationRetryTime,W=new gr(D,"GET",Yn(U,re),I);return W.errorHandler=wr(L),W}function ri(U,L,re,me,D){const E={};E.prefix=L.isRoot?"":L.path+"/",re&&re.length>0&&(E.delimiter=re),me&&(E.pageToken=me),D&&(E.maxResults=D);const W=Fn(L.bucketOnlyServerUrl(),U.host,U._protocol),ct=U.maxOperationRetryTime,dn=new gr(W,"GET",function Us(U,L){return function re(me,D){const E=function ai(U,L,re){const me=ie(re);return null===me?null:function Br(U,L,re){const me={prefixes:[],items:[],nextPageToken:re.nextPageToken};if(re[pr])for(const D of re[pr]){const E=D.replace(/\/$/,""),I=U._makeStorageReference(new wn(L,E));me.prefixes.push(I)}if(re[Cr])for(const D of re[Cr]){const E=U._makeStorageReference(new wn(L,D.name));me.items.push(E)}return me}(U,L,me)}(U,L,D);return qr(null!==E),E}}(U,L.bucket),ct);return dn.urlParams=E,dn.errorHandler=Vn(L),dn}function Nt(U,L,re){const me=Object.assign({},re);return me.fullPath=U.path,me.size=L.size(),me.contentType||(me.contentType=function bn(U,L){return U&&U.contentType||L&&L.type()||"application/octet-stream"}(null,L)),me}class ir{constructor(L,re,me,D){this.current=L,this.total=re,this.finalized=!!me,this.metadata=D||null}}function br(U,L){let re=null;try{re=U.getResponseHeader("X-Goog-Upload-Status")}catch{qr(!1)}return qr(!!re&&-1!==(L||["active"]).indexOf(re)),re}const Lt={STATE_CHANGED:"state_changed"},rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $t(U){switch(U){case"running":case"pausing":case"canceling":return rn.RUNNING;case"paused":return rn.PAUSED;case"success":return rn.SUCCESS;case"canceled":return rn.CANCELED;default:return rn.ERROR}}class lr{constructor(L,re,me){if(function un(U){return"function"==typeof U}(L)||null!=re||null!=me)this.next=L,this.error=re??void 0,this.complete=me??void 0;else{const E=L;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function kn(U){return(...L)=>{Promise.resolve().then(()=>U(...L))}}let xr=null;class mi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jn.NO_ERROR,this.sendPromise_=new Promise(L=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jn.ABORT,L()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jn.NETWORK_ERROR,L()}),this.xhr_.addEventListener("load",()=>{L()})})}send(L,re,me,D){if(this.sent_)throw Cn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(re,L,!0),void 0!==D)for(const E in D)D.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,D[E].toString());return void 0!==me?this.xhr_.send(me):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(L){return this.xhr_.getResponseHeader(L)}addUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",L)}removeUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",L)}}class Xn extends mi{initXhr(){this.xhr_.responseType="text"}}function $r(){return xr?xr():new Xn}class er{constructor(L,re,me=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=L,this._blob=re,this._metadata=me,this._mappings=ne(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=D=>{if(this._request=void 0,this._chunkMultiplier=1,D._codeEquals(pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(Nr(D.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();D=Ve()}this._error=D,this._transition("error")}},this._metadataErrorHandler=D=>{this._request=void 0,D._codeEquals(pt.CANCELED)?this.completeTransitions_():(this._error=D,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((D,E)=>{this._resolve=D,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const L=this._transferred;return re=>this._updateProgress(L+re)}_shouldDoResumable(L){return L.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(L){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([re,me])=>{switch(this._state){case"running":L(re,me);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((L,re)=>{const me=function Fe(U,L,re,me,D){const E=L.bucketOnlyServerUrl(),I=Nt(L,me,D),W={name:I.fullPath},Ae=Fn(E,U.host,U._protocol),dn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${me.size()}`,"X-Goog-Upload-Header-Content-Type":I.contentType,"Content-Type":"application/json; charset=utf-8"},Kn=Un(I,re),ar=new gr(Ae,"POST",function or(Hr){let Fr;br(Hr);try{Fr=Hr.getResponseHeader("X-Goog-Upload-URL")}catch{qr(!1)}return qr(ft(Fr)),Fr},U.maxUploadRetryTime);return ar.urlParams=W,ar.headers=dn,ar.body=Kn,ar.errorHandler=Vn(L),ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),D=this._ref.storage._makeRequest(me,$r,L,re);this._request=D,D.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const L=this._uploadUrl;this._resolveToken((re,me)=>{const D=function Me(U,L,re,me){const Ae=new gr(re,"POST",function E(ct){const dn=br(ct,["active","final"]);let Kn=null;try{Kn=ct.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qr(!1)}Kn||qr(!1);const $n=Number(Kn);return qr(!isNaN($n)),new ir($n,me.size(),"final"===dn)},U.maxUploadRetryTime);return Ae.headers={"X-Goog-Upload-Command":"query"},Ae.errorHandler=Vn(L),Ae}(this._ref.storage,this._ref._location,L,this._blob),E=this._ref.storage._makeRequest(D,$r,re,me);this._request=E,E.getPromise().then(I=>{this._request=void 0,this._updateProgress(I.current),this._needToFetchStatus=!1,I.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const L=262144*this._chunkMultiplier,re=new ir(this._transferred,this._blob.size()),me=this._uploadUrl;this._resolveToken((D,E)=>{let I;try{I=function lt(U,L,re,me,D,E,I,W){const Ae=new ir(0,0);if(I?(Ae.current=I.current,Ae.total=I.total):(Ae.current=0,Ae.total=me.size()),me.size()!==Ae.total)throw function yt(){return new We(pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ct=Ae.total-Ae.current;let dn=ct;D>0&&(dn=Math.min(dn,D));const Kn=Ae.current;let or="";or=0===dn?"finalize":ct===dn?"upload, finalize":"upload";const ar={"X-Goog-Upload-Command":or,"X-Goog-Upload-Offset":`${Ae.current}`},Hr=me.slice(Kn,Kn+dn);if(null===Hr)throw tt();const Ir=new gr(re,"POST",function Fr(Xr,Es){const hi=br(Xr,["active","final"]),js=Ae.current+dn,fi=me.size();let bo;return bo="final"===hi?Yn(L,E)(Xr,Es):null,new ir(js,fi,"final"===hi,bo)},L.maxUploadRetryTime);return Ir.headers=ar,Ir.body=Hr.uploadData(),Ir.progressCallback=W||null,Ir.errorHandler=Vn(U),Ir}(this._ref._location,this._ref.storage,me,this._blob,L,this._mappings,re,this._makeProgressCallback())}catch(Ae){return this._error=Ae,void this._transition("error")}const W=this._ref.storage._makeRequest(I,$r,D,E,!1);this._request=W,W.getPromise().then(Ae=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ae.current),Ae.finalized?(this._metadata=Ae.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((L,re)=>{const me=Er(this._ref.storage,this._ref._location,this._mappings),D=this._ref.storage._makeRequest(me,$r,L,re);this._request=D,D.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((L,re)=>{const me=function In(U,L,re,me,D){const E=L.bucketOnlyServerUrl(),I={"X-Goog-Upload-Protocol":"multipart"},Ae=function W(){let Ir="";for(let Xr=0;Xr<2;Xr++)Ir+=Math.random().toString().slice(2);return Ir}();I["Content-Type"]="multipart/related; boundary="+Ae;const ct=Nt(L,me,D),dn=Un(ct,re),or=Te.getBlob("--"+Ae+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+dn+"\r\n--"+Ae+"\r\nContent-Type: "+ct.contentType+"\r\n\r\n",me,"\r\n--"+Ae+"--");if(null===or)throw tt();const ar={name:ct.fullPath},Hr=Fn(E,U.host,U._protocol),as=U.maxUploadRetryTime,ur=new gr(Hr,"POST",Yn(U,re),as);return ur.urlParams=ar,ur.headers=I,ur.body=or.uploadData(),ur.errorHandler=Vn(L),ur}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),D=this._ref.storage._makeRequest(me,$r,L,re);this._request=D,D.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(L){const re=this._transferred;this._transferred=L,this._transferred!==re&&this._notifyObservers()}_transition(L){if(this._state!==L)switch(L){case"canceling":case"pausing":this._state=L,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const re="paused"===this._state;this._state=L,re&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=L,this._notifyObservers();break;case"canceled":this._error=Ze(),this._state=L,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const L=$t(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:L,metadata:this._metadata,task:this,ref:this._ref}}on(L,re,me,D){const E=new lr(re||void 0,me||void 0,D||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(L,re){return this._promise.then(L,re)}catch(L){return this.then(null,L)}_addObserver(L){this._observers.push(L),this._notifyObserver(L)}_removeObserver(L){const re=this._observers.indexOf(L);-1!==re&&this._observers.splice(re,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(re=>{this._notifyObserver(re)})}_finishPromise(){if(void 0!==this._resolve){let L=!0;switch($t(this._state)){case rn.SUCCESS:kn(this._resolve.bind(null,this.snapshot))();break;case rn.CANCELED:case rn.ERROR:kn(this._reject.bind(null,this._error))();break;default:L=!1}L&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(L){switch($t(this._state)){case rn.RUNNING:case rn.PAUSED:L.next&&kn(L.next.bind(L,this.snapshot))();break;case rn.SUCCESS:L.complete&&kn(L.complete.bind(L))();break;default:L.error&&kn(L.error.bind(L,this._error))()}}resume(){const L="paused"===this._state||"pausing"===this._state;return L&&this._transition("running"),L}pause(){const L="running"===this._state;return L&&this._transition("pausing"),L}cancel(){const L="running"===this._state||"pausing"===this._state;return L&&this._transition("canceling"),L}}class ni{constructor(L,re){this._service=L,this._location=re instanceof wn?re:wn.makeFromUrl(re,L.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(L,re){return new ni(L,re)}get root(){const L=new wn(this._location.bucket,"");return this._newRef(this._service,L)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $e(this._location.path)}get storage(){return this._service}get parent(){const L=function ue(U){if(0===U.length)return null;const L=U.lastIndexOf("/");return-1===L?"":U.slice(0,L)}(this._location.path);if(null===L)return null;const re=new wn(this._location.bucket,L);return new ni(this._service,re)}_throwIfRoot(L){if(""===this._location.path)throw kt(L)}}function $o(U,L,re){return li.apply(this,arguments)}function li(){return(li=(0,Oe.Z)(function*(U,L,re){const D=yield Oi(U,{pageToken:re});L.prefixes.push(...D.prefixes),L.items.push(...D.items),null!=D.nextPageToken&&(yield $o(U,L,D.nextPageToken))})).apply(this,arguments)}function Oi(U,L){null!=L&&"number"==typeof L.maxResults&&St("options.maxResults",1,1e3,L.maxResults);const re=L||{},me=ri(U.storage,U._location,"/",re.pageToken,re.maxResults);return U.storage.makeRequestWithTokens(me,$r)}function yi(U){U._throwIfRoot("getDownloadURL");const L=function tn(U,L,re){const D=Fn(L.fullServerUrl(),U.host,U._protocol),I=U.maxOperationRetryTime,W=new gr(D,"GET",function Si(U,L){return function re(me,D){const E=wt(U,D,L);return qr(null!==E),function nn(U,L,re,me){const D=ie(L);if(null===D||!ft(D.downloadTokens))return null;const E=D.downloadTokens;if(0===E.length)return null;const I=encodeURIComponent;return E.split(",").map(ct=>{const Kn=U.fullPath;return Fn("/b/"+I(U.bucket)+"/o/"+I(Kn),re,me)+Tr({alt:"media",token:ct})})[0]}(E,D,U.host,U._protocol)}}(U,re),I);return W.errorHandler=wr(L),W}(U.storage,U._location,ne());return U.storage.makeRequestWithTokens(L,$r).then(re=>{if(null===re)throw function mt(){return new We(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return re})}function As(U,L){const re=function we(U,L){const re=L.split("/").filter(me=>me.length>0).join("/");return 0===U.length?re:U+"/"+re}(U._location.path,L),me=new wn(U._location.bucket,re);return new ni(U.storage,me)}function Jr(U,L){if(U instanceof Ks){const re=U;if(null==re._bucket)throw function ht(){return new We(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+et+"' property when initializing the app?")}();const me=new ni(re,re._bucket);return null!=L?Jr(me,L):me}return void 0!==L?As(U,L):U}function xi(U,L){if(L&&function Bs(U){return/^[A-Za-z]+:\/\//.test(U)}(L)){if(U instanceof Ks)return function sr(U,L){return new ni(U,L)}(U,L);throw Wt("To use ref(service, url), the first argument must be a Storage instance.")}return Jr(U,L)}function Vi(U,L){const re=L?.[et];return null==re?null:wn.makeFromBucketSpec(re,U)}class Ks{constructor(L,re,me,D,E){this.app=L,this._authProvider=re,this._appCheckProvider=me,this._url=D,this._firebaseVersion=E,this._bucket=null,this._host=ut,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=D?wn.makeFromBucketSpec(D,this._host):Vi(this._host,this.app.options)}get host(){return this._host}set host(L){this._host=L,this._bucket=null!=this._url?wn.makeFromBucketSpec(this._url,L):Vi(L,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(L){St("time",0,Number.POSITIVE_INFINITY,L),this._maxUploadRetryTime=L}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(L){St("time",0,Number.POSITIVE_INFINITY,L),this._maxOperationRetryTime=L}_getAuthToken(){var L=this;return(0,Oe.Z)(function*(){if(L._overrideAuthToken)return L._overrideAuthToken;const re=L._authProvider.getImmediate({optional:!0});if(re){const me=yield re.getToken();if(null!==me)return me.accessToken}return null})()}_getAppCheckToken(){var L=this;return(0,Oe.Z)(function*(){const re=L._appCheckProvider.getImmediate({optional:!0});return re?(yield re.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(L=>L.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(L){return new ni(this,L)}_makeRequest(L,re,me,D,E=!0){if(this._deleted)return new Ln(mn());{const I=function hr(U,L,re,me,D,E,I=!0){const W=Tr(U.urlParams),Ae=U.url+W,ct=Object.assign({},U.headers);return function yr(U,L){L&&(U["X-Firebase-GMPID"]=L)}(ct,L),function en(U,L){null!==L&&L.length>0&&(U.Authorization="Firebase "+L)}(ct,re),function Vt(U,L){U["X-Firebase-Storage-Version"]="webjs/"+(L??"AppManager")}(ct,E),function Wn(U,L){null!==L&&(U["X-Firebase-AppCheck"]=L)}(ct,me),new Jn(Ae,U.method,ct,U.body,U.successCodes,U.additionalRetryCodes,U.handler,U.errorHandler,U.timeout,U.progressCallback,D,I)}(L,this._appId,me,D,re,this._firebaseVersion,E);return this._requests.add(I),I.getPromise().then(()=>this._requests.delete(I),()=>this._requests.delete(I)),I}}makeRequestWithTokens(L,re){var me=this;return(0,Oe.Z)(function*(){const[D,E]=yield Promise.all([me._getAuthToken(),me._getAppCheckToken()]);return me._makeRequest(L,re,D,E).getPromise()})()}}const Zs="@firebase/storage";function vi(U,L){return xi(U=(0,vt.m9)(U),L)}function is(U,{instanceIdentifier:L}){const re=U.getProvider("app").getImmediate(),me=U.getProvider("auth-internal"),D=U.getProvider("app-check-internal");return new Ks(re,me,D,L,it.SDK_VERSION)}!function ys(){(0,it._registerComponent)(new qe.wA("storage",is,"PUBLIC").setMultipleInstances(!0)),(0,it.registerVersion)(Zs,"0.11.2",""),(0,it.registerVersion)(Zs,"0.11.2","esm2017")}();class _s{constructor(L,re,me){this._delegate=L,this.task=re,this.ref=me}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ss{constructor(L,re){this._delegate=L,this._ref=re,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _s(this._delegate.snapshot,this,this._ref)}then(L,re){return this._delegate.then(me=>{if(L)return L(new _s(me,this,this._ref))},re)}on(L,re,me,D){let E;return re&&(E="function"==typeof re?I=>re(new _s(I,this,this._ref)):{next:re.next?I=>re.next(new _s(I,this,this._ref)):void 0,complete:re.complete||void 0,error:re.error||void 0}),this._delegate.on(L,E,me||void 0,D||void 0)}}class No{constructor(L,re){this._delegate=L,this._service=re}get prefixes(){return this._delegate.prefixes.map(L=>new Bn(L,this._service))}get items(){return this._delegate.items.map(L=>new Bn(L,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bn{constructor(L,re){this._delegate=L,this.storage=re}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(L){const re=function Xs(U,L){return As(U,L)}(this._delegate,L);return new Bn(re,this.storage)}get root(){return new Bn(this._delegate.root,this.storage)}get parent(){const L=this._delegate.parent;return null==L?null:new Bn(L,this.storage)}put(L,re){return this._throwIfRoot("put"),new ss(function Qs(U,L,re){return function Kr(U,L,re){return U._throwIfRoot("uploadBytesResumable"),new er(U,new Te(L),re)}(U=(0,vt.m9)(U),L,re)}(this._delegate,L,re),this)}putString(L,re=rr.RAW,me){this._throwIfRoot("putString");const D=_n(re,L),E=Object.assign({},me);return null==E.contentType&&null!=D.contentType&&(E.contentType=D.contentType),new ss(new er(this._delegate,new Te(D.data,!0),E),this)}listAll(){return function Js(U){return function ui(U){const L={prefixes:[],items:[]};return $o(U,L).then(()=>L)}(U=(0,vt.m9)(U))}(this._delegate).then(L=>new No(L,this.storage))}list(L){return function gs(U,L){return Oi(U=(0,vt.m9)(U),L)}(this._delegate,L||void 0).then(re=>new No(re,this.storage))}getMetadata(){return function _i(U){return function es(U){U._throwIfRoot("getMetadata");const L=Er(U.storage,U._location,ne());return U.storage.makeRequestWithTokens(L,$r)}(U=(0,vt.m9)(U))}(this._delegate)}updateMetadata(L){return function Ms(U,L){return function ts(U,L){U._throwIfRoot("updateMetadata");const re=function Dt(U,L,re,me){const E=Fn(L.fullServerUrl(),U.host,U._protocol),W=Un(re,me),ct=U.maxOperationRetryTime,dn=new gr(E,"PATCH",Yn(U,me),ct);return dn.headers={"Content-Type":"application/json; charset=utf-8"},dn.body=W,dn.errorHandler=wr(L),dn}(U.storage,U._location,L,ne());return U.storage.makeRequestWithTokens(re,$r)}(U=(0,vt.m9)(U),L)}(this._delegate,L)}getDownloadURL(){return function Eo(U){return yi(U=(0,vt.m9)(U))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Jo(U){return function si(U){U._throwIfRoot("deleteObject");const L=function an(U,L){const me=Fn(L.fullServerUrl(),U.host,U._protocol),W=new gr(me,"DELETE",function I(Ae,ct){},U.maxOperationRetryTime);return W.successCodes=[200,204],W.errorHandler=wr(L),W}(U.storage,U._location);return U.storage.makeRequestWithTokens(L,$r)}(U=(0,vt.m9)(U))}(this._delegate)}_throwIfRoot(L){if(""===this._delegate._location.path)throw kt(L)}}class Ni{constructor(L,re){this.app=L,this._delegate=re}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(L){if(vs(L))throw Wt("ref() expected a child path but got a URL, use refFromURL instead.");return new Bn(vi(this._delegate,L),this)}refFromURL(L){if(!vs(L))throw Wt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wn.makeFromUrl(L,this._delegate.host)}catch{throw Wt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bn(vi(this._delegate,L),this)}setMaxUploadRetryTime(L){this._delegate.maxUploadRetryTime=L}setMaxOperationRetryTime(L){this._delegate.maxOperationRetryTime=L}useEmulator(L,re,me={}){!function rs(U,L,re,me={}){!function ko(U,L,re,me={}){U.host=`${L}:${re}`,U._protocol="http";const{mockUserToken:D}=me;D&&(U._overrideAuthToken="string"==typeof D?D:(0,vt.Sg)(D,U.app.options.projectId))}(U,L,re,me)}(this._delegate,L,re,me)}}function vs(U){return/^[A-Za-z]+:\/\//.test(U)}function zr(U,{instanceIdentifier:L}){const re=U.getProvider("app-compat").getImmediate(),me=U.getProvider("storage").getImmediate({identifier:L});return new Ni(re,me)}!function co(U){const L={TaskState:rn,TaskEvent:Lt,StringFormat:rr,Storage:Ni,Reference:Bn};U.INTERNAL.registerComponent(new qe.wA("storage-compat",zr,"PUBLIC").setServiceProps(L).setMultipleInstances(!0)),U.registerVersion("@firebase/storage-compat","0.3.2")}(ze.Z);var Pr=N(2313),qi=N(9260);function Pi(U){const L=function Zr(U){return new h.y(L=>{const re=I=>L.next(I);re(U.snapshot);const E=U.on("state_changed",re);return U.then(I=>{re(I),L.complete()},I=>{re(U.snapshot),(I=>{L.error(I)})(I)}),function(){E()}}).pipe(function be(U,L=q.z){return(0,ge.e)((re,me)=>{let D=null,E=null,I=null;const W=()=>{if(D){D.unsubscribe(),D=null;const ct=E;E=null,me.next(ct)}};function Ae(){const ct=I+U,dn=L.now();if(dn<ct)return D=this.schedule(void 0,ct-dn),void me.add(D);W()}re.subscribe((0,Ie.x)(me,ct=>{E=ct,I=L.now(),D||(D=L.schedule(Ae,U),me.add(D))},()=>{W(),me.complete()},void 0,()=>{E=D=null}))})}(0))}(U);return{task:U,then:U.then.bind(U),catch:U.catch.bind(U),pause:U.pause.bind(U),cancel:U.cancel.bind(U),resume:U.resume.bind(U),snapshotChanges:()=>L,percentageChanges:()=>L.pipe((0,ae.U)(re=>re.bytesTransferred/re.totalBytes*100))}}function ws(U){return{getDownloadURL:()=>(0,z.of)(void 0).pipe(X.fc,(0,Ee.w)(()=>U.getDownloadURL()),X.iC),getMetadata:()=>(0,z.of)(void 0).pipe(X.fc,(0,Ee.w)(()=>U.getMetadata()),X.iC),delete:()=>(0,G.D)(U.delete()),child:L=>ws(U.child(L)),updateMetadata:L=>(0,G.D)(U.updateMetadata(L)),put:(L,re)=>Pi(U.put(L,re)),putString:(L,re,me)=>Pi(U.putString(L,re,me)),list:L=>(0,G.D)(U.list(L)),listAll:()=>(0,G.D)(U.listAll())}}const Cs=new se.OlP("angularfire2.storageBucket"),Ki=new se.OlP("angularfire2.storage.maxUploadRetryTime"),xs=new se.OlP("angularfire2.storage.maxOperationRetryTime"),eo=new se.OlP("angularfire2.storage.use-emulator");let Sn=(()=>{class U{constructor(re,me,D,E,I,W,Ae,ct,dn,Kn){const $n=(0,le.on)(re,I,me);this.storage=(0,le.cc)(`${$n.name}.storage.${D}`,"AngularFireStorage",$n.name,()=>{const or=I.runOutsideAngular(()=>$n.storage(D||void 0)),ar=dn;return ar&&or.useEmulator(...ar),Ae&&or.setMaxUploadRetryTime(Ae),ct&&or.setMaxOperationRetryTime(ct),or},[Ae,ct])}ref(re){return ws(this.storage.ref(re))}refFromURL(re){return ws(this.storage.refFromURL(re))}upload(re,me,D){return ws(this.storage.ref(re)).put(me,D)}}return U.\u0275fac=function(re){return new(re||U)(se.LFG(le.Dh),se.LFG(le.xv,8),se.LFG(Cs,8),se.LFG(se.Lbi),se.LFG(se.R0b),se.LFG(X.HU),se.LFG(Ki,8),se.LFG(xs,8),se.LFG(eo,8),se.LFG(Pr.nm,8))},U.\u0275prov=se.Yz7({token:U,factory:U.\u0275fac,providedIn:"any"}),U})(),ho=(()=>{class U{}return U.\u0275fac=function(re){return new(re||U)},U.\u0275mod=se.oAB({type:U}),U.\u0275inj=se.cJS({}),U})(),$s=(()=>{class U{constructor(){qi.Z.registerVersion("angularfire",X.q4.full,"gcs-compat")}}return U.\u0275fac=function(re){return new(re||U)},U.\u0275mod=se.oAB({type:U}),U.\u0275inj=se.cJS({providers:[Sn],imports:[ho]}),U})()},2011:(zt,He,N)=>{N.d(He,{Dh:()=>ae,GT:()=>Ie,cc:()=>Oe,hO:()=>ze,on:()=>X,pX:()=>ge,xv:()=>Ee});var h=N(4650),z=N(9260),G=N(2122);zt=N.hmd(zt);const q=["ngOnDestroy"],ge=(ut,et,dt,ve={})=>new Proxy(ut,{get:(Qe,We)=>dt.runOutsideAngular(()=>{var pt;if(ut[We])return!(null===(pt=ve?.spy)||void 0===pt)&&pt.get&&ve.spy.get(We,ut[We]),ut[We];if(q.indexOf(We)>-1)return()=>{};const Xe=et.toPromise().then(he=>{const Ue=he&&he[We];return"function"==typeof Ue?Ue.bind(he):Ue&&Ue.then?Ue.then(At=>dt.run(()=>At)):dt.run(()=>Ue)});return new Proxy(()=>{},{get:(he,Ue)=>Xe[Ue],apply:(he,Ue,At)=>Xe.then(Tt=>{var Ct;const Pt=Tt&&Tt(...At);return!(null===(Ct=ve?.spy)||void 0===Ct)&&Ct.apply&&ve.spy.apply(We,At,Pt),Pt})})})}),Ie=(ut,et)=>{et.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(ve=>{Object.defineProperty(ut.prototype,ve,Object.getOwnPropertyDescriptor(dt.prototype||dt,ve))})})};class be{constructor(et){return et}}const ae=new h.OlP("angularfire2.app.options"),Ee=new h.OlP("angularfire2.app.name");function X(ut,et,dt){const Qe="object"==typeof dt&&dt||{};Qe.name=Qe.name||"string"==typeof dt&&dt||"[DEFAULT]";const pt=z.Z.apps.filter(Xe=>Xe&&Xe.name===Qe.name)[0]||et.runOutsideAngular(()=>z.Z.initializeApp(ut,Qe));try{JSON.stringify(ut)!==JSON.stringify(pt.options)&&se("error",`${pt.name} Firebase App already initialized with different options${zt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(pt)}const se=(ut,...et)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ut](...et)},le={provide:be,useFactory:X,deps:[ae,h.R0b,[new h.FiY,Ee]]};let ze=(()=>{class ut{constructor(dt){z.Z.registerVersion("angularfire",G.q4.full,"core"),z.Z.registerVersion("angularfire",G.q4.full,"app-compat"),z.Z.registerVersion("angular",h.q4F.full,dt.toString())}static initializeApp(dt,ve){return{ngModule:ut,providers:[{provide:ae,useValue:dt},{provide:Ee,useValue:ve}]}}}return ut.\u0275fac=function(dt){return new(dt||ut)(h.LFG(h.Lbi))},ut.\u0275mod=h.oAB({type:ut}),ut.\u0275inj=h.cJS({providers:[le]}),ut})();function Oe(ut,et,dt,ve,Qe){const[,We,pt]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===ut)||[];if(We)return function it(ut,et){try{return ut.toString()===et.toString()}catch{return ut===et}}(Qe,pt)||(qe("error",`${et} was already initialized on the ${dt} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:Qe,was:pt})),We;{const Xe=ve();return globalThis.\u0275AngularfireInstanceCache.push([ut,Xe,Qe]),Xe}}const vt=!!zt.hot,qe=(ut,...et)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ut](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(zt,He,N)=>{N.d(He,{q4:()=>Go,iC:()=>Dn,fc:()=>sn,HU:()=>K,vb:()=>C,JM:()=>v});var h=N(4650),z=N(259),G=N(5861),q=N(9681),ge=N(2090),Ie=N(4859),be=N(1877),ae=N(8766);const Ee="@firebase/installations",X="0.6.4",se=1e4,le=`w:${X}`,ze="FIS_v2",Oe="https://firebaseinstallations.googleapis.com/v1",it=36e5,et=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(O){return O instanceof ge.ZR&&O.code.includes("request-failed")}function ve({projectId:O}){return`${Oe}/projects/${O}/installations`}function Qe(O){return{token:O.token,requestStatus:2,expiresIn:Tt(O.expiresIn),creationTime:Date.now()}}function We(O,R){return pt.apply(this,arguments)}function pt(){return(pt=(0,G.Z)(function*(O,R){const fe=(yield R.json()).error;return et.create("request-failed",{requestName:O,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Xe({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function Ue(O){return At.apply(this,arguments)}function At(){return(At=(0,G.Z)(function*(O){const R=yield O();return R.status>=500&&R.status<600?O():R})).apply(this,arguments)}function Tt(O){return Number(O.replace("s","000"))}function Ve(){return(Ve=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:R},{fid:Z}){const fe=ve(O),Ne=Xe(O),Ye=R.getImmediate({optional:!0});if(Ye){const Rn=yield Ye.getHeartbeatsHeader();Rn&&Ne.append("x-firebase-client",Rn)}const yn={method:"POST",headers:Ne,body:JSON.stringify({fid:Z,authVersion:ze,appId:O.appId,sdkVersion:le})},gn=yield Ue(()=>fetch(fe,yn));if(gn.ok){const Rn=yield gn.json();return{fid:Rn.fid||Z,registrationStatus:2,refreshToken:Rn.refreshToken,authToken:Qe(Rn.authToken)}}throw yield We("Create Installation",gn)})).apply(this,arguments)}function Ze(O){return new Promise(R=>{setTimeout(R,O)})}const Ke=/^[cdef][\w-]{21}$/,ht="";function tt(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const Z=function yt(O){return function Be(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Ke.test(Z)?Z:ht}catch{return ht}}function mt(O){return`${O.appName}!${O.appId}`}const Gt=new Map;function Wt(O,R){const Z=mt(O);Zt(Z,R),function Cn(O,R){const Z=function Ln(){return!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=O=>{Zt(O.data.key,O.data.fid)}),wn}();Z&&Z.postMessage({key:O,fid:R}),function Nn(){0===Gt.size&&wn&&(wn.close(),wn=null)}()}(Z,R)}function Zt(O,R){const Z=Gt.get(O);if(Z)for(const fe of Z)fe(R)}let wn=null;const zn="firebase-installations-database",xe=1,un="firebase-installations-store";let ce=null;function ft(){return ce||(ce=(0,ae.X3)(zn,xe,{upgrade:(O,R)=>{0===R&&O.createObjectStore(un)}})),ce}function Ut(O,R){return on.apply(this,arguments)}function on(){return(on=(0,G.Z)(function*(O,R){const Z=mt(O),Ne=(yield ft()).transaction(un,"readwrite"),Ye=Ne.objectStore(un),Rt=yield Ye.get(Z);return yield Ye.put(R,Z),yield Ne.done,(!Rt||Rt.fid!==R.fid)&&Wt(O,R.fid),R})).apply(this,arguments)}function St(O){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,G.Z)(function*(O){const R=mt(O),fe=(yield ft()).transaction(un,"readwrite");yield fe.objectStore(un).delete(R),yield fe.done})).apply(this,arguments)}function Tr(O,R){return jn.apply(this,arguments)}function jn(){return(jn=(0,G.Z)(function*(O,R){const Z=mt(O),Ne=(yield ft()).transaction(un,"readwrite"),Ye=Ne.objectStore(un),Rt=yield Ye.get(Z),yn=R(Rt);return void 0===yn?yield Ye.delete(Z):yield Ye.put(yn,Z),yield Ne.done,yn&&(!Rt||Rt.fid!==yn.fid)&&Wt(O,yn.fid),yn})).apply(this,arguments)}function Nr(O){return Jn.apply(this,arguments)}function Jn(){return Jn=(0,G.Z)(function*(O){let R;const Z=yield Tr(O.appConfig,fe=>{const Ne=function Xt(O){return vr(O||{fid:tt(),registrationStatus:0})}(fe),Ye=function en(O,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(et.create("app-offline"))};const Z={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},fe=function Vt(O,R){return yr.apply(this,arguments)}(O,Z);return{installationEntry:Z,registrationPromise:fe}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:Wn(O)}:{installationEntry:R}}(O,Ne);return R=Ye.registrationPromise,Ye.installationEntry});return Z.fid===ht?{installationEntry:yield R}:{installationEntry:Z,registrationPromise:R}}),Jn.apply(this,arguments)}function yr(){return yr=(0,G.Z)(function*(O,R){try{const Z=yield function Pt(O,R){return Ve.apply(this,arguments)}(O,R);return Ut(O.appConfig,Z)}catch(Z){throw dt(Z)&&409===Z.customData.serverCode?yield St(O.appConfig):yield Ut(O.appConfig,{fid:R.fid,registrationStatus:0}),Z}}),yr.apply(this,arguments)}function Wn(O){return hr.apply(this,arguments)}function hr(){return(hr=(0,G.Z)(function*(O){let R=yield _r(O.appConfig);for(;1===R.registrationStatus;)yield Ze(100),R=yield _r(O.appConfig);if(0===R.registrationStatus){const{installationEntry:Z,registrationPromise:fe}=yield Nr(O);return fe||Z}return R})).apply(this,arguments)}function _r(O){return Tr(O,R=>{if(!R)throw et.create("installation-not-found");return vr(R)})}function vr(O){return function Ti(O){return 1===O.registrationStatus&&O.registrationTime+se<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function rr(){return(rr=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:R},Z){const fe=function Pn(O,{fid:R}){return`${ve(O)}/${R}/authTokens:generate`}(O,Z),Ne=function he(O,{refreshToken:R}){const Z=Xe(O);return Z.append("Authorization",function Ct(O){return`${ze} ${O}`}(R)),Z}(O,Z),Ye=R.getImmediate({optional:!0});if(Ye){const Rn=yield Ye.getHeartbeatsHeader();Rn&&Ne.append("x-firebase-client",Rn)}const yn={method:"POST",headers:Ne,body:JSON.stringify({installation:{sdkVersion:le,appId:O.appId}})},gn=yield Ue(()=>fetch(fe,yn));if(gn.ok)return Qe(yield gn.json());throw yield We("Generate Auth Token",gn)})).apply(this,arguments)}function _n(O){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,G.Z)(function*(O,R=!1){let Z;const fe=yield Tr(O.appConfig,Ye=>{if(!de(Ye))throw et.create("not-registered");const Rt=Ye.authToken;if(!R&&function Te(O){return 2===O.requestStatus&&!function ie(O){const R=Date.now();return R<O.creationTime||O.creationTime+O.expiresIn<R+it}(O)}(Rt))return Ye;if(1===Rt.requestStatus)return Z=function Ft(O,R){return _t.apply(this,arguments)}(O,R),Ye;{if(!navigator.onLine)throw et.create("app-offline");const yn=function ue(O){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:R})}(Ye);return Z=function x(O,R){return B.apply(this,arguments)}(O,yn),yn}});return Z?yield Z:fe.authToken}),Sr.apply(this,arguments)}function _t(){return(_t=(0,G.Z)(function*(O,R){let Z=yield oe(O.appConfig);for(;1===Z.authToken.requestStatus;)yield Ze(100),Z=yield oe(O.appConfig);const fe=Z.authToken;return 0===fe.requestStatus?_n(O,R):fe})).apply(this,arguments)}function oe(O){return Tr(O,R=>{if(!de(R))throw et.create("not-registered");return function we(O){return 1===O.requestStatus&&O.requestTime+se<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function B(){return B=(0,G.Z)(function*(O,R){try{const Z=yield function Zn(O,R){return rr.apply(this,arguments)}(O,R),fe=Object.assign(Object.assign({},R),{authToken:Z});return yield Ut(O.appConfig,fe),Z}catch(Z){if(!dt(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const fe=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Ut(O.appConfig,fe)}else yield St(O.appConfig);throw Z}}),B.apply(this,arguments)}function de(O){return void 0!==O&&2===O.registrationStatus}function Pe(){return(Pe=(0,G.Z)(function*(O){const R=O,{installationEntry:Z,registrationPromise:fe}=yield Nr(R);return fe?fe.catch(console.error):_n(R).catch(console.error),Z.fid})).apply(this,arguments)}function _e(){return _e=(0,G.Z)(function*(O,R=!1){const Z=O;return yield function Ce(O){return ne.apply(this,arguments)}(Z),(yield _n(Z,R)).token}),_e.apply(this,arguments)}function ne(){return(ne=(0,G.Z)(function*(O){const{registrationPromise:R}=yield Nr(O);R&&(yield R)})).apply(this,arguments)}function ai(O){return et.create("missing-app-config-values",{valueName:O})}const gr="installations",Yn=O=>{const R=O.getProvider("app").getImmediate(),Z=function Br(O){if(!O||!O.options)throw ai("App Configuration");if(!O.name)throw ai("App Name");const R=["projectId","apiKey","appId"];for(const Z of R)if(!O.options[Z])throw ai(Z);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(R);return{app:R,appConfig:Z,heartbeatServiceProvider:(0,q._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},Us=O=>{const R=O.getProvider("app").getImmediate(),Z=(0,q._getProvider)(R,gr).getImmediate();return{getId:()=>function $e(O){return Pe.apply(this,arguments)}(Z),getToken:Ne=>function xt(O){return _e.apply(this,arguments)}(Z,Ne)}};(function Si(){(0,q._registerComponent)(new Ie.wA(gr,Yn,"PUBLIC")),(0,q._registerComponent)(new Ie.wA("installations-internal",Us,"PRIVATE"))})(),(0,q.registerVersion)(Ee,X),(0,q.registerVersion)(Ee,X,"esm2017");const Vn="@firebase/remote-config",tn=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $r{constructor(R,Z,fe,Ne){this.client=R,this.storage=Z,this.storageCache=fe,this.logger=Ne}isCachedDataFresh(R,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-Z,Ne=fe<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${Ne}.`),Ne}fetch(R){var Z=this;return(0,G.Z)(function*(){const[fe,Ne]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(Ne&&Z.isCachedDataFresh(R.cacheMaxAgeMillis,fe))return Ne;R.eTag=Ne&&Ne.eTag;const Ye=yield Z.client.fetch(R),Rt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ye.status&&Rt.push(Z.storage.setLastSuccessfulFetchResponse(Ye)),yield Promise.all(Rt),Ye})()}}function Ai(O=navigator){return O.languages&&O.languages[0]||O.language}class ii{constructor(R,Z,fe,Ne,Ye,Rt){this.firebaseInstallations=R,this.sdkVersion=Z,this.namespace=fe,this.projectId=Ne,this.apiKey=Ye,this.appId=Rt}fetch(R){var Z=this;return(0,G.Z)(function*(){const[fe,Ne]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,yn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},gn={sdk_version:Z.sdkVersion,app_instance_id:fe,app_instance_id_token:Ne,app_id:Z.appId,language_code:Ai()},Rn={method:"POST",headers:yn,body:JSON.stringify(gn)},nr=fetch(Rt,Rn),Hn=new Promise((zs,Rs)=>{R.signal.addEventListener(()=>{const $u=new Error("The operation was aborted.");$u.name="AbortError",Rs($u)})});let Ui;try{yield Promise.race([nr,Hn]),Ui=yield nr}catch(zs){let Rs="fetch-client-network";throw"AbortError"===zs?.name&&(Rs="fetch-timeout"),tn.create(Rs,{originalErrorMessage:zs?.message})}let ji=Ui.status;const sa=Ui.headers.get("ETag")||void 0;let Bu,Va;if(200===Ui.status){let zs;try{zs=yield Ui.json()}catch(Rs){throw tn.create("fetch-client-parse",{originalErrorMessage:Rs?.message})}Bu=zs.entries,Va=zs.state}if("INSTANCE_STATE_UNSPECIFIED"===Va?ji=500:"NO_CHANGE"===Va?ji=304:("NO_TEMPLATE"===Va||"EMPTY_CONFIG"===Va)&&(Bu={}),304!==ji&&200!==ji)throw tn.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:sa,config:Bu}})()}}class er{constructor(R,Z){this.client=R,this.storage=Z}fetch(R){var Z=this;return(0,G.Z)(function*(){const fe=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(R,fe)})()}attemptFetch(R,{throttleEndTimeMillis:Z,backoffCount:fe}){var Ne=this;return(0,G.Z)(function*(){yield function Mi(O,R){return new Promise((Z,fe)=>{const Ne=Math.max(R-Date.now(),0),Ye=setTimeout(Z,Ne);O.addEventListener(()=>{clearTimeout(Ye),fe(tn.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,Z);try{const Ye=yield Ne.client.fetch(R);return yield Ne.storage.deleteThrottleMetadata(),Ye}catch(Ye){if(!function Ro(O){if(!(O instanceof ge.ZR&&O.customData))return!1;const R=Number(O.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Ye))throw Ye;const Rt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(fe),backoffCount:fe+1};return yield Ne.storage.setThrottleMetadata(Rt),Ne.attemptFetch(R,Rt)}})()}}class Vs{constructor(R,Z,fe,Ne,Ye){this.app=R,this._client=Z,this._storageCache=fe,this._storage=Ne,this._logger=Ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ki(O,R){const Z=O.target.error||void 0;return tn.create(R,{originalErrorMessage:Z&&Z?.message})}const Kr="app_namespace_store";class li{constructor(R,Z,fe,Ne=function $o(){return new Promise((O,R)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=fe=>{R(ki(fe,"storage-open"))},Z.onsuccess=fe=>{O(fe.target.result)},Z.onupgradeneeded=fe=>{0===fe.oldVersion&&fe.target.result.createObjectStore(Kr,{keyPath:"compositeKey"})}}catch(Z){R(tn.create("storage-open",{originalErrorMessage:Z?.message}))}})}()){this.appId=R,this.appName=Z,this.namespace=fe,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var Z=this;return(0,G.Z)(function*(){const fe=yield Z.openDbPromise;return new Promise((Ne,Ye)=>{const yn=fe.transaction([Kr],"readonly").objectStore(Kr),gn=Z.createCompositeKey(R);try{const Rn=yn.get(gn);Rn.onerror=nr=>{Ye(ki(nr,"storage-get"))},Rn.onsuccess=nr=>{const Hn=nr.target.result;Ne(Hn?Hn.value:void 0)}}catch(Rn){Ye(tn.create("storage-get",{originalErrorMessage:Rn?.message}))}})})()}set(R,Z){var fe=this;return(0,G.Z)(function*(){const Ne=yield fe.openDbPromise;return new Promise((Ye,Rt)=>{const gn=Ne.transaction([Kr],"readwrite").objectStore(Kr),Rn=fe.createCompositeKey(R);try{const nr=gn.put({compositeKey:Rn,value:Z});nr.onerror=Hn=>{Rt(ki(Hn,"storage-set"))},nr.onsuccess=()=>{Ye()}}catch(nr){Rt(tn.create("storage-set",{originalErrorMessage:nr?.message}))}})})()}delete(R){var Z=this;return(0,G.Z)(function*(){const fe=yield Z.openDbPromise;return new Promise((Ne,Ye)=>{const yn=fe.transaction([Kr],"readwrite").objectStore(Kr),gn=Z.createCompositeKey(R);try{const Rn=yn.delete(gn);Rn.onerror=nr=>{Ye(ki(nr,"storage-delete"))},Rn.onsuccess=()=>{Ne()}}catch(Rn){Ye(tn.create("storage-delete",{originalErrorMessage:Rn?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class Oi{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,G.Z)(function*(){const Z=R.storage.getLastFetchStatus(),fe=R.storage.getLastSuccessfulFetchTimestampMillis(),Ne=R.storage.getActiveConfig(),Ye=yield Z;Ye&&(R.lastFetchStatus=Ye);const Rt=yield fe;Rt&&(R.lastSuccessfulFetchTimestampMillis=Rt);const yn=yield Ne;yn&&(R.activeConfig=yn)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function si(){return As.apply(this,arguments)}function As(){return(As=(0,G.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function es(){(0,q._registerComponent)(new Ie.wA("remote-config",function O(R,{instanceIdentifier:Z}){const fe=R.getProvider("app").getImmediate(),Ne=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tn.create("registration-window");if(!(0,ge.hl)())throw tn.create("indexed-db-unavailable");const{projectId:Ye,apiKey:Rt,appId:yn}=fe.options;if(!Ye)throw tn.create("registration-project-id");if(!Rt)throw tn.create("registration-api-key");if(!yn)throw tn.create("registration-app-id");const gn=new li(yn,fe.name,Z=Z||"firebase"),Rn=new Oi(gn),nr=new be.Yd(Vn);nr.logLevel=be.in.ERROR;const Hn=new ii(Ne,q.SDK_VERSION,Z,Ye,Rt,yn),Ui=new er(Hn,gn),ji=new $r(Ui,gn,Rn,nr),sa=new Vs(fe,ji,Rn,gn,nr);return function je(O){const R=(0,ge.m9)(O);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(sa),sa},"PUBLIC").setMultipleInstances(!0)),(0,q.registerVersion)(Vn,"0.4.4"),(0,q.registerVersion)(Vn,"0.4.4","esm2017")}();const Bs="/firebase-messaging-sw.js",sr="/firebase-cloud-messaging-push-scope",Jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xi="https://fcmregistrations.googleapis.com/v1",Vi="google.c.a.c_id",ko="google.c.a.c_l",Ks="google.c.a.ts",Zs="google.c.a.e";var ps=(()=>{return(O=ps||(ps={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",ps;var O})();function Bi(O){const R=new Uint8Array(O);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ys(O){const Z=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(Z),Ne=new Uint8Array(fe.length);for(let Ye=0;Ye<fe.length;++Ye)Ne[Ye]=fe.charCodeAt(Ye);return Ne}const Wi="fcm_token_details_db",Qs=5,_i="fcm_token_object_Store";function gs(){return gs=(0,G.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ye=>Ye.name).includes(Wi))return null;let R=null;return(yield(0,ae.X3)(Wi,Qs,{upgrade:(fe=(0,G.Z)(function*(Ne,Ye,Rt,yn){var gn;if(Ye<2||!Ne.objectStoreNames.contains(_i))return;const Rn=yn.objectStore(_i),nr=yield Rn.index("fcmSenderId").get(O);if(yield Rn.clear(),nr)if(2===Ye){const Hn=nr;if(!Hn.auth||!Hn.p256dh||!Hn.endpoint)return;R={token:Hn.fcmToken,createTime:null!==(gn=Hn.createTime)&&void 0!==gn?gn:Date.now(),subscriptionOptions:{auth:Hn.auth,p256dh:Hn.p256dh,endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:"string"==typeof Hn.vapidKey?Hn.vapidKey:Bi(Hn.vapidKey)}}}else if(3===Ye){const Hn=nr;R={token:Hn.fcmToken,createTime:Hn.createTime,subscriptionOptions:{auth:Bi(Hn.auth),p256dh:Bi(Hn.p256dh),endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:Bi(Hn.vapidKey)}}}else if(4===Ye){const Hn=nr;R={token:Hn.fcmToken,createTime:Hn.createTime,subscriptionOptions:{auth:Bi(Hn.auth),p256dh:Bi(Hn.p256dh),endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:Bi(Hn.vapidKey)}}}}),function(Ye,Rt,yn,gn){return fe.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Wi),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),function Js(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:R}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}(R)?R:null;var fe}),gs.apply(this,arguments)}const Eo="firebase-messaging-database",Jo=1,vi="firebase-messaging-store";let Xs=null;function Os(){return Xs||(Xs=(0,ae.X3)(Eo,Jo,{upgrade:(O,R)=>{0===R&&O.createObjectStore(vi)}})),Xs}function rs(O){return ms.apply(this,arguments)}function ms(){return ms=(0,G.Z)(function*(O){const R=ss(O),fe=yield(yield Os()).transaction(vi).objectStore(vi).get(R);if(fe)return fe;{const Ne=yield function Ms(O){return gs.apply(this,arguments)}(O.appConfig.senderId);if(Ne)return yield $i(O,Ne),Ne}}),ms.apply(this,arguments)}function $i(O,R){return is.apply(this,arguments)}function is(){return(is=(0,G.Z)(function*(O,R){const Z=ss(O),Ne=(yield Os()).transaction(vi,"readwrite");return yield Ne.objectStore(vi).put(R,Z),yield Ne.done,R})).apply(this,arguments)}function _s(){return(_s=(0,G.Z)(function*(O){const R=ss(O),fe=(yield Os()).transaction(vi,"readwrite");yield fe.objectStore(vi).delete(R),yield fe.done})).apply(this,arguments)}function ss({appConfig:O}){return O.appId}const Bn=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ni(O,R){return vs.apply(this,arguments)}function vs(){return(vs=(0,G.Z)(function*(O,R){const Z=yield Pr(O),fe=Zr(R),Ne={method:"POST",headers:Z,body:JSON.stringify(fe)};let Ye;try{Ye=yield(yield fetch(co(O.appConfig),Ne)).json()}catch(Rt){throw Bn.create("token-subscribe-failed",{errorInfo:Rt?.toString()})}if(Ye.error)throw Bn.create("token-subscribe-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw Bn.create("token-subscribe-no-token");return Ye.token})).apply(this,arguments)}function lo(){return(lo=(0,G.Z)(function*(O,R){const Z=yield Pr(O),fe=Zr(R.subscriptionOptions),Ne={method:"PATCH",headers:Z,body:JSON.stringify(fe)};let Ye;try{Ye=yield(yield fetch(`${co(O.appConfig)}/${R.token}`,Ne)).json()}catch(Rt){throw Bn.create("token-update-failed",{errorInfo:Rt?.toString()})}if(Ye.error)throw Bn.create("token-update-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw Bn.create("token-update-no-token");return Ye.token})).apply(this,arguments)}function Fi(O,R){return zr.apply(this,arguments)}function zr(){return(zr=(0,G.Z)(function*(O,R){const fe={method:"DELETE",headers:yield Pr(O)};try{const Ye=yield(yield fetch(`${co(O.appConfig)}/${R}`,fe)).json();if(Ye.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:Ye.error.message})}catch(Ne){throw Bn.create("token-unsubscribe-failed",{errorInfo:Ne?.toString()})}})).apply(this,arguments)}function co({projectId:O}){return`${xi}/projects/${O}/registrations`}function Pr(O){return qi.apply(this,arguments)}function qi(){return(qi=(0,G.Z)(function*({appConfig:O,installations:R}){const Z=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Zr({p256dh:O,auth:R,endpoint:Z,vapidKey:fe}){const Ne={web:{endpoint:Z,auth:R,p256dh:O}};return fe!==Jr&&(Ne.web.applicationPubKey=fe),Ne}const Pi=6048e5;function Cs(){return Cs=(0,G.Z)(function*(O){const R=yield function $s(O,R){return U.apply(this,arguments)}(O.swRegistration,O.vapidKey),Z={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:R.endpoint,auth:Bi(R.getKey("auth")),p256dh:Bi(R.getKey("p256dh"))},fe=yield rs(O.firebaseDependencies);if(fe){if(function L(O,R){return R.vapidKey===O.vapidKey&&R.endpoint===O.endpoint&&R.auth===O.auth&&R.p256dh===O.p256dh}(fe.subscriptionOptions,Z))return Date.now()>=fe.createTime+Pi?function eo(O,R){return Sn.apply(this,arguments)}(O,{token:fe.token,createTime:Date.now(),subscriptionOptions:Z}):fe.token;try{yield Fi(O.firebaseDependencies,fe.token)}catch(Ne){console.warn(Ne)}return os(O.firebaseDependencies,Z)}return os(O.firebaseDependencies,Z)}),Cs.apply(this,arguments)}function xs(){return xs=(0,G.Z)(function*(O){const R=yield rs(O.firebaseDependencies);R&&(yield Fi(O.firebaseDependencies,R.token),yield function ys(O){return _s.apply(this,arguments)}(O.firebaseDependencies));const Z=yield O.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()}),xs.apply(this,arguments)}function Sn(){return Sn=(0,G.Z)(function*(O,R){try{const Z=yield function jr(O,R){return lo.apply(this,arguments)}(O.firebaseDependencies,R),fe=Object.assign(Object.assign({},R),{token:Z,createTime:Date.now()});return yield $i(O.firebaseDependencies,fe),Z}catch(Z){throw yield function Ki(O){return xs.apply(this,arguments)}(O),Z}}),Sn.apply(this,arguments)}function os(O,R){return ho.apply(this,arguments)}function ho(){return(ho=(0,G.Z)(function*(O,R){const fe={token:yield Ni(O,R),createTime:Date.now(),subscriptionOptions:R};return yield $i(O,fe),fe.token})).apply(this,arguments)}function U(){return(U=(0,G.Z)(function*(O,R){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ys(R)})})).apply(this,arguments)}function re(O){const R={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function me(O,R){if(!R.notification)return;O.notification={};const Z=R.notification.title;Z&&(O.notification.title=Z);const fe=R.notification.body;fe&&(O.notification.body=fe);const Ne=R.notification.image;Ne&&(O.notification.image=Ne);const Ye=R.notification.icon;Ye&&(O.notification.icon=Ye)}(R,O),function D(O,R){R.data&&(O.data=R.data)}(R,O),function E(O,R){var Z,fe,Ne,Ye,Rt;if(!(R.fcmOptions||null!==(Z=R.notification)&&void 0!==Z&&Z.click_action))return;O.fcmOptions={};const yn=null!==(Ne=null===(fe=R.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==Ne?Ne:null===(Ye=R.notification)||void 0===Ye?void 0:Ye.click_action;yn&&(O.fcmOptions.link=yn);const gn=null===(Rt=R.fcmOptions)||void 0===Rt?void 0:Rt.analytics_label;gn&&(O.fcmOptions.analyticsLabel=gn)}(R,O),R}function W(O,R){const Z=[];for(let fe=0;fe<O.length;fe++)Z.push(O.charAt(fe)),fe<R.length&&Z.push(R.charAt(fe));return Z.join("")}function ct(O){return Bn.create("missing-app-config-values",{valueName:O})}W("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),W("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dn{constructor(R,Z,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function Ae(O){if(!O||!O.options)throw ct("App Configuration Object");if(!O.name)throw ct("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=O;for(const fe of R)if(!Z[fe])throw ct(fe);return{appName:O.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:Ne,installations:Z,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function Kn(O){return $n.apply(this,arguments)}function $n(){return($n=(0,G.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(Bs,{scope:sr}),O.swRegistration.update().catch(()=>{})}catch(R){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function ar(){return(ar=(0,G.Z)(function*(O,R){if(!R&&!O.swRegistration&&(yield Kn(O)),R||!O.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");O.swRegistration=R}})).apply(this,arguments)}function Fr(){return(Fr=(0,G.Z)(function*(O,R){R?O.vapidKey=R:O.vapidKey||(O.vapidKey=Jr)})).apply(this,arguments)}function ur(){return ur=(0,G.Z)(function*(O,R){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield function Hr(O,R){return Fr.apply(this,arguments)}(O,R?.vapidKey),yield function or(O,R){return ar.apply(this,arguments)}(O,R?.serviceWorkerRegistration),function ws(O){return Cs.apply(this,arguments)}(O)}),ur.apply(this,arguments)}function Xr(){return(Xr=(0,G.Z)(function*(O,R,Z){const fe=function Es(O){switch(O){case ps.NOTIFICATION_CLICKED:return"notification_open";case ps.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(R);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:Z[Vi],message_name:Z[ko],message_time:Z[Ks],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function js(){return js=(0,G.Z)(function*(O,R){const Z=R.data;if(!Z.isFirebaseMessaging)return;O.onMessageHandler&&Z.messageType===ps.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(re(Z)):O.onMessageHandler.next(re(Z)));const fe=Z.data;(function I(O){return"object"==typeof O&&!!O&&Vi in O})(fe)&&"1"===fe[Zs]&&(yield function Ir(O,R,Z){return Xr.apply(this,arguments)}(O,Z.messageType,fe))}),js.apply(this,arguments)}const fi="@firebase/messaging",ha=O=>{const R=new dn(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function hi(O,R){return js.apply(this,arguments)}(R,Z)),R},Hs=O=>{const R=O.getProvider("messaging").getImmediate();return{getToken:fe=>function as(O,R){return ur.apply(this,arguments)}(R,fe)}};function Xo(){return fo.apply(this,arguments)}function fo(){return(fo=(0,G.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Io(){(0,q._registerComponent)(new Ie.wA("messaging",ha,"PUBLIC")),(0,q._registerComponent)(new Ie.wA("messaging-internal",Hs,"PRIVATE")),(0,q.registerVersion)(fi,"0.12.4"),(0,q.registerVersion)(fi,"0.12.4","esm2017")}();const to="analytics",Do="firebase_id",pi="origin",jo=6e4,bt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rr="https://www.googletagmanager.com/gtag/js",Lr=new be.Yd("@firebase/analytics"),Qt=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function En(O){if(!O.startsWith(Rr)){const R=Qt.create("invalid-gtag-resource",{gtagURL:O});return Lr.warn(R.message),""}return O}function Nu(O){return Promise.all(O.map(R=>R.catch(Z=>Z)))}function P(){return(P=(0,G.Z)(function*(O,R,Z,fe,Ne,Ye){const Rt=fe[Ne];try{if(Rt)yield R[Rt];else{const gn=(yield Nu(Z)).find(Rn=>Rn.measurementId===Ne);gn&&(yield R[gn.appId])}}catch(yn){Lr.error(yn)}O("config",Ne,Ye)})).apply(this,arguments)}function ye(){return(ye=(0,G.Z)(function*(O,R,Z,fe,Ne){try{let Ye=[];if(Ne&&Ne.send_to){let Rt=Ne.send_to;Array.isArray(Rt)||(Rt=[Rt]);const yn=yield Nu(Z);for(const gn of Rt){const Rn=yn.find(Hn=>Hn.measurementId===gn),nr=Rn&&R[Rn.appId];if(!nr){Ye=[];break}Ye.push(nr)}}0===Ye.length&&(Ye=Object.values(R)),yield Promise.all(Ye),O("event",fe,Ne||{})}catch(Ye){Lr.error(Ye)}})).apply(this,arguments)}const Dr=30,qn=new class Ur{constructor(R={},Z=1e3){this.throttleMetadata=R,this.intervalMillis=Z}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,Z){this.throttleMetadata[R]=Z}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function wi(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function Ar(){return(Ar=(0,G.Z)(function*(O){var R;const{appId:Z,apiKey:fe}=O,Ne={method:"GET",headers:wi(fe)},Ye=bt.replace("{app-id}",Z),Rt=yield fetch(Ye,Ne);if(200!==Rt.status&&304!==Rt.status){let yn="";try{const gn=yield Rt.json();null!==(R=gn.error)&&void 0!==R&&R.message&&(yn=gn.error.message)}catch{}throw Qt.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:yn})}return Rt.json()})).apply(this,arguments)}function On(){return(On=(0,G.Z)(function*(O,R=qn,Z){const{appId:fe,apiKey:Ne,measurementId:Ye}=O.options;if(!fe)throw Qt.create("no-app-id");if(!Ne){if(Ye)return{measurementId:Ye,appId:fe};throw Qt.create("no-api-key")}const Rt=R.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yn=new Yr;return setTimeout((0,G.Z)(function*(){yn.abort()}),void 0!==Z?Z:jo),cn({appId:fe,apiKey:Ne,measurementId:Ye},Rt,yn,R)})).apply(this,arguments)}function cn(O,R,Z){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,G.Z)(function*(O,{throttleEndTimeMillis:R,backoffCount:Z},fe,Ne=qn){var Ye;const{appId:Rt,measurementId:yn}=O;try{yield function tr(O,R){return new Promise((Z,fe)=>{const Ne=Math.max(R-Date.now(),0),Ye=setTimeout(Z,Ne);O.addEventListener(()=>{clearTimeout(Ye),fe(Qt.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(fe,R)}catch(gn){if(yn)return Lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${gn?.message}]`),{appId:Rt,measurementId:yn};throw gn}try{const gn=yield function ln(O){return Ar.apply(this,arguments)}(O);return Ne.deleteThrottleMetadata(Rt),gn}catch(gn){const Rn=gn;if(!function bs(O){if(!(O instanceof ge.ZR&&O.customData))return!1;const R=Number(O.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Rn)){if(Ne.deleteThrottleMetadata(Rt),yn)return Lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Rn?.message}]`),{appId:Rt,measurementId:yn};throw gn}const nr=503===Number(null===(Ye=Rn?.customData)||void 0===Ye?void 0:Ye.httpStatus)?(0,ge.$s)(Z,Ne.intervalMillis,Dr):(0,ge.$s)(Z,Ne.intervalMillis),Hn={throttleEndTimeMillis:Date.now()+nr,backoffCount:Z+1};return Ne.setThrottleMetadata(Rt,Hn),Lr.debug(`Calling attemptFetch again in ${nr} millis`),cn(O,Hn,fe,Ne)}}),Ci.apply(this,arguments)}class Yr{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let qt,Fo;function go(){return(go=(0,G.Z)(function*(O,R,Z,fe,Ne){if(Ne&&Ne.global)O("event",Z,fe);else{const Ye=yield R;O("event",Z,Object.assign(Object.assign({},fe),{send_to:Ye}))}})).apply(this,arguments)}function va(){return(va=(0,G.Z)(function*(){if(!(0,ge.hl)())return Lr.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(O){return Lr.warn(Qt.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function ro(){return ro=(0,G.Z)(function*(O,R,Z,fe,Ne,Ye,Rt){var yn;const gn=function po(O){return On.apply(this,arguments)}(O);gn.then(ji=>{Z[ji.measurementId]=ji.appId,O.options.measurementId&&ji.measurementId!==O.options.measurementId&&Lr.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${ji.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ji=>Lr.error(ji)),R.push(gn);const Rn=function So(){return va.apply(this,arguments)}().then(ji=>{if(ji)return fe.getId()}),[nr,Hn]=yield Promise.all([gn,Rn]);(function vn(O){const R=window.document.getElementsByTagName("script");for(const Z of Object.values(R))if(Z.src&&Z.src.includes(Rr)&&Z.src.includes(O))return Z;return null})(Ye)||function st(O,R){const Z=function Jt(O,R){let Z;return window.trustedTypes&&(Z=window.trustedTypes.createPolicy(O,R)),Z}("firebase-js-sdk-policy",{createScriptURL:En}),fe=document.createElement("script"),Ne=`${Rr}?l=${O}&id=${R}`;fe.src=Z?Z?.createScriptURL(Ne):Ne,fe.async=!0,document.head.appendChild(fe)}(Ye,nr.measurementId),Fo&&(Ne("consent","default",Fo),function ta(O){Fo=O}(void 0)),Ne("js",new Date);const Ui=null!==(yn=Rt?.config)&&void 0!==yn?yn:{};return Ui[pi]="firebase",Ui.update=!0,null!=Hn&&(Ui[Do]=Hn),Ne("config",nr.measurementId,Ui),qt&&(Ne("set",qt),function _a(O){qt=O}(void 0)),nr.measurementId}),ro.apply(this,arguments)}class io{constructor(R){this.app=R}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},Lo=[];const Zi={};let Ca,us,wa="dataLayer",Uo="gtag",Fu=!1;function Ea(O,R,Z){!function Ri(){const O=[];if((0,ge.ru)()&&O.push("This is a browser extension environment."),(0,ge.zI)()||O.push("Cookies are not available."),O.length>0){const R=O.map((fe,Ne)=>`(${Ne+1}) ${fe}`).join(" "),Z=Qt.create("invalid-analytics-context",{errorInfo:R});Lr.warn(Z.message)}}();const fe=O.options.appId;if(!fe)throw Qt.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw Qt.create("no-api-key");Lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gi[fe])throw Qt.create("already-exists",{id:fe});if(!Fu){!function b(O){let R=[];Array.isArray(window[O])?R=window[O]:window[O]=R}(wa);const{wrappedGtag:Ye,gtagCore:Rt}=function Mt(O,R,Z,fe,Ne){let Ye=function(...Rt){window[fe].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(Ye=window[Ne]),window[Ne]=function nt(O,R,Z,fe){function Ye(){return Ye=(0,G.Z)(function*(Rt,yn,gn){try{"event"===Rt?yield function Y(O,R,Z,fe,Ne){return ye.apply(this,arguments)}(O,R,Z,yn,gn):"config"===Rt?yield function $(O,R,Z,fe,Ne,Ye){return P.apply(this,arguments)}(O,R,Z,fe,yn,gn):"consent"===Rt?O("consent","update",gn):O("set",yn)}catch(Rn){Lr.error(Rn)}}),Ye.apply(this,arguments)}return function Ne(Rt,yn,gn){return Ye.apply(this,arguments)}}(Ye,O,R,Z),{gtagCore:Ye,wrappedGtag:window[Ne]}}(gi,Lo,Zi,wa,Uo);us=Ye,Ca=Rt,Fu=!0}return gi[fe]=function rt(O,R,Z,fe,Ne,Ye,Rt){return ro.apply(this,arguments)}(O,Lo,Zi,R,Ca,wa,Z),new io(O)}function Qr(){return na.apply(this,arguments)}function na(){return(na=(0,G.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}const Lu="@firebase/analytics";!function tc(){(0,q._registerComponent)(new Ie.wA(to,(R,{options:Z})=>Ea(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,q._registerComponent)(new Ie.wA("analytics-internal",function O(R){try{const Z=R.getProvider(to).getImmediate();return{logEvent:(fe,Ne,Ye)=>function ec(O,R,Z,fe){O=(0,ge.m9)(O),function Ho(O,R,Z,fe,Ne){return go.apply(this,arguments)}(us,gi[O.app.options.appId],R,Z,fe).catch(Ne=>Lr.error(Ne))}(Z,fe,Ne,Ye)}}catch(Z){throw Qt.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,q.registerVersion)(Lu,"0.9.5"),(0,q.registerVersion)(Lu,"0.9.5","esm2017")}();var Uu=N(4408),cu=N(7565);const ba=new class rc extends cu.v{}(class nc extends Uu.o{constructor(R,Z){super(R,Z),this.scheduler=R,this.work=Z}schedule(R,Z=0){return Z>0?super.schedule(R,Z):(this.delay=Z,this.state=R,this.scheduler.flush(this),this)}execute(R,Z){return Z>0||this.closed?super.execute(R,Z):this._execute(R,Z)}requestAsyncId(R,Z,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(R,Z,fe):(R.flush(this),0)}});var Il=N(4986),di=N(8505),La=N(5363),Ao=N(9468);const Go=new h.GfV("7.5.0"),ls="__angularfire_symbol__analyticsIsSupportedValue",Mo="__angularfire_symbol__analyticsIsSupported",Ua="__angularfire_symbol__remoteConfigIsSupportedValue",Ia="__angularfire_symbol__remoteConfigIsSupported",mo="__angularfire_symbol__messagingIsSupportedValue",Ei="__angularfire_symbol__messagingIsSupported";function v(O,R,Z){if(R){if(1===R.length)return R[0];const Ye=R.filter(Rt=>Rt.app===Z);if(1===Ye.length)return Ye[0]}return Z.container.getProvider(O).getImmediate({optional:!0})}globalThis[Mo]||(globalThis[Mo]=Qr().then(O=>globalThis[ls]=O).catch(()=>globalThis[ls]=!1)),globalThis[Ei]||(globalThis[Ei]=Xo().then(O=>globalThis[mo]=O).catch(()=>globalThis[mo]=!1)),globalThis[Ia]||(globalThis[Ia]=si().then(O=>globalThis[Ua]=O).catch(()=>globalThis[Ua]=!1));const C=(O,R)=>{const Z=R?[R]:(0,z.C6)(),fe=[];return Z.forEach(Ne=>{Ne.container.getProvider(O).instances.forEach(Rt=>{fe.includes(Rt)||fe.push(Rt)})}),fe};function g(){}class A{constructor(R,Z=ba){this.zone=R,this.delegate=Z}now(){return this.delegate.now()}schedule(R,Z,fe){const Ne=this.zone;return this.delegate.schedule(function(Rt){Ne.runGuarded(()=>{R.apply(this,[Rt])})},Z,fe)}}class k{constructor(R){this.zone=R,this.task=null}call(R,Z){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",g,{},g,g)),Z.pipe((0,di.b)({next:fe,complete:fe,error:fe})).subscribe(R).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let K=(()=>{class O{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new A(Zone.current)),this.insideAngular=Z.run(()=>new A(Zone.current,Il.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(Z){return new(Z||O)(h.LFG(h.R0b))},O.\u0275prov=h.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function ee(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function sn(O){return O.pipe((0,La.Q)(ee().outsideAngular))}function Dn(O){return ee(),function Gr(O){return function(Z){return(Z=Z.lift(new k(O.ngZone))).pipe((0,Ao.R)(O.outsideAngular),(0,La.Q)(O.insideAngular))}}(ee())(O)}},5525:(zt,He,N)=>{N.d(He,{u7:()=>yf,Jj:()=>Ou,IX:()=>t_,my:()=>Xi,xU:()=>Ql,Lz:()=>_l,WA:()=>b,F8:()=>Gc,$q:()=>oh,W:()=>xa,EK:()=>On,PU:()=>Jm,l7:()=>Z,Ky:()=>qt,Xb:()=>Yr,Cf:()=>Or,K9:()=>Nu,Me:()=>Le,yq:()=>Lr,Wi:()=>Om,ET:()=>_f,Ab:()=>uh,vr:()=>P_,Fc:()=>km,hJ:()=>xm,B$:()=>hf,at:()=>eg,oe:()=>b_,AK:()=>ey,TF:()=>Nm,JU:()=>Au,ST:()=>Rm,fH:()=>n_,Ix:()=>i_,Wu:()=>g_,Lx:()=>p_,qY:()=>Ss,GL:()=>ah,QT:()=>Ev,kl:()=>Zm,Xk:()=>bv,PL:()=>Gn,UQ:()=>w_,zN:()=>C_,nP:()=>lh,b9:()=>c_,vh:()=>d_,Pb:()=>Fm,L$:()=>Lm,cf:()=>vf,sc:()=>ds,Xo:()=>l_,IO:()=>jm,iE:()=>tg,Eo:()=>e_,i3:()=>Xm,Bt:()=>ty,pl:()=>E_,Ub:()=>jo,qK:()=>yg,TQ:()=>f_,e0:()=>h_,r7:()=>Xc,Mx:()=>r_,ar:()=>Hm});var ae,h=N(5861),z=N(9681),G=N(4859),q=N(1877),ge=N(2090),Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},be={},Ee=Ee||{},X=Ie||self;function se(){}function le(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var it="closure_uid_"+(1e9*Math.random()>>>0),vt=0;function qe(i,e,t){return i.call.apply(i.bind,arguments)}function ut(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function et(i,e,t){return(et=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qe:ut).apply(null,arguments)}function dt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ve(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,d){for(var m=Array(arguments.length-2),T=2;T<arguments.length;T++)m[T-2]=arguments[T];return e.prototype[u].apply(o,m)}}function Qe(){this.s=this.s,this.o=this.o}Qe.prototype.s=!1,Qe.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Oe(i){Object.prototype.hasOwnProperty.call(i,it)&&i[it]||(i[it]=++vt)}(this)},Qe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Xe(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function he(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(le(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let m=0;m<d;m++)i[u+m]=o[m]}else i.push(o)}}function Ue(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{X.addEventListener("test",se,e),X.removeEventListener("test",se,e)}catch{}return i}();function Tt(i){return/^[\s\xa0]*$/.test(i)}var Ct=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Pt(i,e){return i<e?-1:i>e?1:0}function Ve(){var i=X.navigator;return i&&(i=i.userAgent)?i:""}function Ze(i){return-1!=Ve().indexOf(i)}function Be(i){return Be[" "](i),i}Be[" "]=se;var kt,i,ht=Ze("Opera"),tt=Ze("Trident")||Ze("MSIE"),yt=Ze("Edge"),mt=yt||tt,Gt=Ze("Gecko")&&!(-1!=Ve().toLowerCase().indexOf("webkit")&&!Ze("Edge"))&&!(Ze("Trident")||Ze("MSIE"))&&!Ze("Edge"),Wt=-1!=Ve().toLowerCase().indexOf("webkit")&&!Ze("Edge");function mn(){var i=X.document;return i?i.documentMode:void 0}e:{var Zt="",Cn=(i=Ve(),Gt?/rv:([^\);]+)(\)|;)/.exec(i):yt?/Edge\/([\d\.]+)/.exec(i):tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Wt?/WebKit\/(\S+)/.exec(i):ht?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Cn&&(Zt=Cn?Cn[1]:""),tt){var wn=mn();if(null!=wn&&wn>parseFloat(Zt)){kt=String(wn);break e}}kt=Zt}var Ln={};var un=X.document&&tt&&(mn()||parseInt(kt,10))||void 0;function ce(i,e){if(Ue.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Gt){e:{try{Be(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ft[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ce.X.h.call(this)}}ve(ce,Ue);var ft={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),on=0;function St(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++on,this.ba=this.ea=!1}function Fn(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Tr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function jn(i){const e={};for(const t in i)e[t]=i[t];return e}const Nr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Nr.length;d++)t=Nr[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Xt(i){this.src=i,this.g={},this.h=0}function en(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=pt(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Fn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Vt(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}Xt.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var m=Vt(i,e,o,u);return-1<m?(e=i[m],t||(e.ea=!1)):((e=new St(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var yr="closure_lm_"+(1e6*Math.random()|0),Wn={};function hr(i,e,t,o,u){if(o&&o.once)return Ti(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)hr(i,e[d],t,o,u);return null}return t=_t(t),i&&i[Ut]?i.N(e,t,ze(o)?!!o.capture:!!o,u):_r(i,e,t,!1,o,u)}function _r(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var m=ze(u)?!!u.capture:!!u,T=Sr(i);if(T||(i[yr]=T=new Xt(i)),(t=T.add(e,t,o,m,d)).proxy)return t;if(o=function vr(){const e=_n;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)At||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Pn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Ti(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Ti(i,e[d],t,o,u);return null}return t=_t(t),i&&i[Ut]?i.O(e,t,ze(o)?!!o.capture:!!o,u):_r(i,e,t,!0,o,u)}function Zn(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)Zn(i,e[d],t,o,u);else o=ze(o)?!!o.capture:!!o,t=_t(t),i&&i[Ut]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Vt(d=i.g[e],t,o,u))&&(Fn(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Sr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Vt(e,t,o,u)),(t=-1<i?e[i]:null)&&rr(t))}function rr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Ut])en(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Pn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Sr(e))?(en(t,i),0==t.h&&(t.src=null,e[yr]=null)):Fn(i)}}}function Pn(i){return i in Wn?Wn[i]:Wn[i]="on"+i}function _n(i,e){if(i.ba)i=!0;else{e=new ce(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&rr(i),i=t.call(o,e)}return i}function Sr(i){return(i=i[yr])instanceof Xt?i:null}var Ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(i){return"function"==typeof i?i:(i[Ft]||(i[Ft]=function(e){return i.handleEvent(e)}),i[Ft])}function oe(){Qe.call(this),this.i=new Xt(this),this.P=this,this.I=null}function x(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Ue(e,i);else if(e instanceof Ue)e.target=e.target||i;else{var u=e;Jn(e=new Ue(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=B(m,o,!0,e)&&u}if(u=B(m=e.g=i,o,!0,e)&&u,u=B(m,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=B(m=e.g=t[d],o,!1,e)&&u}function B(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ba&&m.capture==t){var T=m.listener,F=m.ha||m.src;m.ea&&en(i.i,m),u=!1!==T.call(F,o)&&u}}return u&&!o.defaultPrevented}ve(oe,Qe),oe.prototype[Ut]=!0,oe.prototype.removeEventListener=function(i,e,t,o){Zn(this,i,e,t,o)},oe.prototype.M=function(){if(oe.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Fn(t[o]);delete i.g[e],i.h--}}this.I=null},oe.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},oe.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var de=X.JSON.stringify;function Te(){var i=ne;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var xt,ue=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new we,i=>i.reset());class we{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $e(i){X.setTimeout(()=>{throw i},0)}function Pe(i,e){xt||function _e(){var i=X.Promise.resolve(void 0);xt=function(){i.then(Se)}}(),Ce||(xt(),Ce=!0),ne.add(i,e)}var Ce=!1,ne=new class ie{constructor(){this.h=this.g=null}add(e,t){const o=ue.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Se(){for(var i;i=Te();){try{i.h.call(i.g)}catch(t){$e(t)}var e=ue;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ce=!1}function at(i,e){oe.call(this),this.h=i||1,this.g=e||X,this.j=et(this.lb,this),this.l=Date.now()}function wt(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function nn(i,e,t){if("function"==typeof i)t&&(i=et(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=et(i.handleEvent,i)}return 2147483647<Number(e)?-1:X.setTimeout(i,e||0)}function Un(i){i.g=nn(()=>{i.g=null,i.i&&(i.i=!1,Un(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ve(at,oe),(ae=at.prototype).ca=!1,ae.R=null,ae.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),x(this,"tick"),this.ca&&(wt(this),this.start()))}},ae.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ae.M=function(){at.X.M.call(this),wt(this),delete this.g};class pr extends Qe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Un(this)}M(){super.M(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(i){Qe.call(this),this.h=i,this.g={}}ve(Cr,Qe);var Br=[];function ai(i,e,t,o){Array.isArray(t)||(t&&(Br[0]=t.toString()),t=Br);for(var u=0;u<t.length;u++){var d=hr(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function gr(i){Tr(i.g,function(e,t){this.g.hasOwnProperty(t)&&rr(e)},i),i.g={}}function qr(){this.g=!0}function Si(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return de(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Cr.prototype.M=function(){Cr.X.M.call(this),gr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qr.prototype.Aa=function(){this.g=!1},qr.prototype.info=function(){};var Er={},ri=null;function Et(){return ri=ri||new oe}function tn(i){Ue.call(this,Er.Pa,i)}function Dt(i){const e=Et();x(e,new tn(e))}function an(i,e){Ue.call(this,Er.STAT_EVENT,i),this.stat=e}function bn(i){const e=Et();x(e,new an(e,i))}function Nt(i,e){Ue.call(this,Er.Qa,i),this.size=e}function In(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){i()},e)}Er.Pa="serverreachability",ve(tn,Ue),Er.STAT_EVENT="statevent",ve(an,Ue),Er.Qa="timingevent",ve(Nt,Ue);var ir={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},br={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Fe(){}function je(){}Fe.prototype.h=null;var $t,lt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Lt(){Ue.call(this,"d")}function rn(){Ue.call(this,"c")}function lr(){}function kn(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new Cr(this),this.O=mi,this.T=new at(i=mt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}ve(Lt,Ue),ve(rn,Ue),ve(lr,Fe),lr.prototype.g=function(){return new XMLHttpRequest},lr.prototype.i=function(){return{}},$t=new lr;var mi=45e3,Xn={},$r={};function Ai(i,e,t){i.K=1,i.v=Jr(yi(e)),i.s=t,i.P=!0,ii(i,null)}function ii(i,e){i.F=Date.now(),ni(i),i.A=yi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Ms(t.i,"t",o),i.C=0,t=i.l.H,i.h=new xr,i.g=Es(i.l,t?e:null,!i.s),0<i.N&&(i.L=new pr(et(i.La,i,i.g),i.N)),ai(i.S,i.g,"readystatechange",i.ib),e=i.H?jn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Dt(),function Yn(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var m="",T=d.split("&"),F=0;F<T.length;F++){var H=T[F].split("=");if(1<H.length){var te=H[0];H=H[1];var De=te.split("_");m=2<=De.length&&"type"==De[1]?m+(te+"=")+H+"&":m+(te+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Mi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Ro(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=er(i,t),u==$r){4==e&&(i.o=4,bn(14),o=!1),Si(i.j,i.m,null,"[Incomplete Response]");break}if(u==Xn){i.o=4,bn(15),Si(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Si(i.j,i.m,u,null),fs(i,u)}Mi(i)&&u!=$r&&u!=Xn&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,bn(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),or(e),e.K=!0,bn(11))):(Si(i.j,i.m,t,"[Invalid Chunked Response]"),Kr(i),ki(i))}function er(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?$r:(t=Number(e.substring(t,o)),isNaN(t)?Xn:(o+=1)+t>e.length?$r:(e=e.substr(o,t),i.C=o+t,e))}function ni(i){i.V=Date.now()+i.O,uo(i,i.O)}function uo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=In(et(i.gb,i),e)}function Vs(i){i.B&&(X.clearTimeout(i.B),i.B=null)}function ki(i){0==i.l.G||i.I||Fr(i.l,i)}function Kr(i){Vs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,wt(i.T),gr(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||rs(t.h,i)))if(!i.J&&rs(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Hr(t),D(t)}$n(t),bn(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=In(et(t.cb,t),6e3));if(1>=Os(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ur(t,11)}else if((i.J||t.g==i)&&Hr(t),!Tt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.T=H[0],H=H[1],2==t.G)if("c"==H[0]){t.I=H[1],t.ka=H[2];const te=H[3];null!=te&&(t.ma=te,t.j.info("VER="+t.ma));const De=H[4];null!=De&&(t.Ca=De,t.j.info("SVER="+t.Ca));const Ge=H[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(t.J=o=1.5*Ge,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const It=i.g;if(It){const Ht=It.g?It.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ht){var d=o.h;d.g||-1==Ht.indexOf("spdy")&&-1==Ht.indexOf("quic")&&-1==Ht.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(ms(d,d.h),d.h=null))}if(o.D){const fn=It.g?It.g.getResponseHeader("X-HTTP-Session-Id"):null;fn&&(o.za=fn,sr(o.F,o.D,fn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var m=i;if((o=t).sa=Xr(o,o.H?o.ka:null,o.V),m.J){$i(o.h,m);var T=m,F=o.J;F&&T.setTimeout(F),T.B&&(Vs(T),ni(T)),o.g=m}else Kn(o);0<t.i.length&&I(t)}else"stop"!=H[0]&&"close"!=H[0]||ur(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?ur(t,7):me(t):"noop"!=H[0]&&t.l&&t.l.wa(H),t.A=0)}Dt()}catch{}}function li(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(le(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function $o(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(le(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function ui(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(le(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(ae=kn.prototype).setTimeout=function(i){this.O=i},ae.ib=function(i){i=i.target;const e=this.L;e&&3==os(i)?e.l():this.La(i)},ae.La=function(i){try{if(i==this.g)e:{const te=os(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>te)&&(3!=te||mt||this.g&&(this.h.h||this.g.fa()||ho(this.g)))){this.I||4!=te||7==e||Dt(),Vs(this);var t=this.g.aa();this.Y=t;t:if(Mi(this)){var o=ho(this.g);i="";var u=o.length,d=4==os(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),ki(this);var m="";break t}this.h.i=new X.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.fa();if(this.i=200==t,function Us(i,e,t,o,u,d,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.U,te,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tt(T)){var H=T;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,bn(12),Kr(this),ki(this);break e}Si(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fs(this,t)}this.P?(Ro(this,te,m),mt&&this.i&&3==te&&(ai(this.S,this.T,"tick",this.hb),this.T.start())):(Si(this.j,this.m,m,null),fs(this,m)),4==te&&Kr(this),this.i&&!this.I&&(4==te?Fr(this.l,this):(this.i=!1,ni(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,bn(12)):(this.o=0,bn(13)),Kr(this),ki(this)}}}catch{}},ae.hb=function(){if(this.g){var i=os(this.g),e=this.g.fa();this.C<e.length&&(Vs(this),Ro(this,i,e),this.i&&4!=i&&ni(this))}},ae.cancel=function(){this.I=!0,Kr(this)},ae.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Vn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dt(),bn(17)),Kr(this),this.o=2,ki(this)):uo(this,this.V-i)};var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ts){this.h=void 0!==e?e:i.h,si(this,i.j),this.s=i.s,this.g=i.g,As(this,i.m),this.l=i.l,e=i.i;var t=new Ys;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Bs(this,t),this.o=i.o}else i&&(t=String(i).match(Oi))?(this.h=!!e,si(this,t[1]||"",!0),this.s=xi(t[2]||""),this.g=xi(t[3]||"",!0),As(this,t[4]),this.l=xi(t[5]||"",!0),Bs(this,t[6]||"",!0),this.o=xi(t[7]||"")):(this.h=!!e,this.i=new Ys(null,this.h))}function yi(i){return new ts(i)}function si(i,e,t){i.j=t?xi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function As(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Bs(i,e,t){e instanceof Ys?(i.i=e,function Js(i,e){e&&!i.j&&(Wi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Qs(this,o),Ms(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Vi(e,ps)),i.i=new Ys(e,i.h))}function sr(i,e,t){i.i.set(e,t)}function Jr(i){return sr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function xi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Vi(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ko),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ko(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ts.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Vi(e,Ks,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Vi(e,Ks,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Vi(t,"/"==t.charAt(0)?ns:Zs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Vi(t,Bi)),i.join("")};var Ks=/[#\/\?@]/g,Zs=/[#\?:]/g,ns=/[#\?]/g,ps=/[#\?@]/g,Bi=/#/g;function Ys(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Wi(i){i.g||(i.g=new Map,i.h=0,i.i&&function es(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qs(i,e){Wi(i),e=gs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function _i(i,e){return Wi(i),e=gs(i,e),i.g.has(e)}function Ms(i,e,t){Qs(i,e),0<t.length&&(i.i=null,i.g.set(gs(i,e),Xe(t)),i.h+=t.length)}function gs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Jo(i){this.l=i||vi,i=X.PerformanceNavigationTiming?0<(i=X.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(X.g&&X.g.Ga&&X.g.Ga()&&X.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ae=Ys.prototype).add=function(i,e){Wi(this),this.i=null,i=gs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ae.forEach=function(i,e){Wi(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},ae.oa=function(){Wi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},ae.W=function(i){Wi(this);let e=[];if("string"==typeof i)_i(this,i)&&(e=e.concat(this.g.get(gs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ae.set=function(i,e){return Wi(this),this.i=null,_i(this,i=gs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ae.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),m=this.W(o);for(o=0;o<m.length;o++){var u=d;""!==m[o]&&(u+="="+encodeURIComponent(String(m[o]))),i.push(u)}}return this.i=i.join("&")};var vi=10;function Xs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Os(i){return i.h?1:i.g?i.g.size:0}function rs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ms(i,e){i.g?i.g.add(e):i.h=e}function $i(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function is(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Xe(i.i)}function ys(){}function _s(){this.g=new ys}function ss(i,e,t){const o=t||"";try{li(i,function(u,d){let m=u;ze(u)&&(m=de(u)),e.push(o+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Bn(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Ni(i){this.l=i.ac||null,this.j=i.jb||!1}function vs(i,e){oe.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=jr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jo.prototype.cancel=function(){if(this.i=is(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ys.prototype.stringify=function(i){return X.JSON.stringify(i,void 0)},ys.prototype.parse=function(i){return X.JSON.parse(i,void 0)},ve(Ni,Fe),Ni.prototype.g=function(){return new vs(this.l,this.j)},Ni.prototype.i=function(i){return function(){return i}}({}),ve(vs,oe);var jr=0;function lo(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Fi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,zr(i)}function zr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ae=vs.prototype).open=function(i,e){if(this.readyState!=jr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,zr(this)},ae.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||X).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fi(this)),this.readyState=jr},ae.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lo(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},ae.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Fi(this):zr(this),3==this.readyState&&lo(this)}},ae.Va=function(i){this.g&&(this.response=this.responseText=i,Fi(this))},ae.Ua=function(i){this.g&&(this.response=i,Fi(this))},ae.ga=function(){this.g&&Fi(this)},ae.setRequestHeader=function(i,e){this.v.append(i,e)},ae.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ae.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var co=X.JSON.parse;function Pr(i){oe.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qi,this.K=this.L=!1}ve(Pr,oe);var qi="",Zr=/^https?$/i,Pi=["POST","PUT"];function Cs(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ki(i),eo(i)}function Ki(i){i.D||(i.D=!0,x(i,"complete"),x(i,"error"))}function xs(i){if(i.h&&typeof Ee<"u"&&(!i.C[1]||4!=os(i)||2!=i.aa()))if(i.v&&4==os(i))nn(i.Ha,0,i);else if(x(i,"readystatechange"),4==os(i)){i.h=!1;try{const T=i.aa();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===T){var u=String(i.H).match(Oi)[1]||null;if(!u&&X.self&&X.self.location){var d=X.self.location.protocol;u=d.substr(0,d.length-1)}o=!Zr.test(u?u.toLowerCase():"")}t=o}if(t)x(i,"complete"),x(i,"success");else{i.m=6;try{var m=2<os(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.aa()+"]",Ki(i)}}finally{eo(i)}}}function eo(i,e){if(i.g){Sn(i);const t=i.g,o=i.C[0]?se:null;i.g=null,i.C=null,e||x(i,"ready");try{t.onreadystatechange=o}catch{}}}function Sn(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(X.clearTimeout(i.A),i.A=null)}function os(i){return i.g?i.g.readyState:0}function ho(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case qi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(i){let e="";return Tr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function U(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=$s(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):sr(i,e,t))}function L(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function re(i){this.Ca=0,this.i=[],this.j=new qr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=L("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=L("baseRetryDelayMs",5e3,i),this.bb=L("retryDelaySeedMs",1e4,i),this.$a=L("forwardChannelMaxRetries",2,i),this.ta=L("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Jo(i&&i.concurrentRequestLimit),this.Fa=new _s,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function me(i){if(E(i),3==i.G){var e=i.U++,t=yi(i.F);sr(t,"SID",i.I),sr(t,"RID",e),sr(t,"TYPE","terminate"),ct(i,t),(e=new kn(i,i.j,e,void 0)).K=2,e.v=Jr(yi(t)),t=!1,X.navigator&&X.navigator.sendBeacon&&(t=X.navigator.sendBeacon(e.v.toString(),"")),!t&&X.Image&&((new Image).src=e.v,t=!0),t||(e.g=Es(e.l,null),e.g.da(e.v)),e.F=Date.now(),ni(e)}Ir(i)}function D(i){i.g&&(or(i),i.g.cancel(),i.g=null)}function E(i){D(i),i.u&&(X.clearTimeout(i.u),i.u=null),Hr(i),i.h.cancel(),i.m&&("number"==typeof i.m&&X.clearTimeout(i.m),i.m=null)}function I(i){Xs(i.h)||i.m||(i.m=!0,Pe(i.Ja,i),i.C=0)}function Ae(i,e){var t;t=e?e.m:i.U++;const o=yi(i.F);sr(o,"SID",i.I),sr(o,"RID",t),sr(o,"AID",i.T),ct(i,o),i.o&&i.s&&U(o,i.o,i.s),t=new kn(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=dn(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ms(i.h,t),Ai(t,o,e)}function ct(i,e){i.ia&&Tr(i.ia,function(t,o){sr(e,o,t)}),i.l&&li({},function(t,o){sr(e,o,t)})}function dn(i,e,t){t=Math.min(i.i.length,t);var o=i.l?et(i.l.Ra,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let T=!0;for(let F=0;F<t;F++){let H=u[F].h;const te=u[F].g;if(H-=d,0>H)d=Math.max(0,u[F].h-100),T=!1;else try{ss(te,m,"req"+H+"_")}catch{o&&o(te)}}if(T){o=m.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Kn(i){i.g||i.u||(i.Z=1,Pe(i.Ia,i),i.A=0)}function $n(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=In(et(i.Ia,i),as(i,i.A)),i.A++,0))}function or(i){null!=i.B&&(X.clearTimeout(i.B),i.B=null)}function ar(i){i.g=new kn(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=yi(i.sa);sr(e,"RID","rpc"),sr(e,"SID",i.I),sr(e,"CI",i.L?"0":"1"),sr(e,"AID",i.T),sr(e,"TYPE","xmlhttp"),ct(i,e),i.o&&i.s&&U(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Jr(yi(e)),t.s=null,t.P=!0,ii(t,i)}function Hr(i){null!=i.v&&(X.clearTimeout(i.v),i.v=null)}function Fr(i,e){var t=null;if(i.g==e){Hr(i),or(i),i.g=null;var o=2}else{if(!rs(i.h,e))return;t=e.D,$i(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;x(o=Et(),new Nt(o,t)),I(i)}else Kn(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function W(i,e){return!(Os(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=In(et(i.Ja,i,e),as(i,i.C)),i.C++,0)))}(i,e)||2==o&&$n(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:ur(i,5);break;case 4:ur(i,10);break;case 3:ur(i,6);break;default:ur(i,2)}}function as(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ur(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=et(i.kb,i);t||(t=new ts("//www.google.com/images/cleardot.gif"),X.location&&"http"==X.location.protocol||si(t,"https"),Jr(t)),function No(i,e){const t=new qr;if(X.Image){const o=new Image;o.onload=dt(Bn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=dt(Bn,t,o,"TestLoadImage: error",!1,e),o.onabort=dt(Bn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=dt(Bn,t,o,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else bn(2);i.G=0,i.l&&i.l.va(e),Ir(i),E(i)}function Ir(i){if(i.G=0,i.la=[],i.l){const e=is(i.h);(0!=e.length||0!=i.i.length)&&(he(i.la,e),he(i.la,i.i),i.h.i.length=0,Xe(i.i),i.i.length=0),i.l.ua()}}function Xr(i,e,t){var o=t instanceof ts?yi(t):new ts(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),As(o,o.m);else{var u=X.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new ts(null,void 0);o&&si(d,o),e&&(d.g=e),u&&As(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&sr(o,t,e),sr(o,"VER",i.ma),ct(i,o),o}function Es(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&i.Da&&!i.ra?new Ni({jb:!0}):i.ra)).Ka(i.H),e}function hi(){}function js(){if(tt&&!(10<=Number(un)))throw Error("Environmental error: no available transport.")}function fi(i,e){oe.call(this),this.g=new re(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Tt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Hs(this)}function bo(i){Lt.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ha(){rn.call(this),this.status=1}function Hs(i){this.g=i}(ae=Pr.prototype).Ka=function(i){this.L=i},ae.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$t.g(),this.C=function Me(i){return i.h||(i.h=i.i())}(this.u?this.u:$t),this.g.onreadystatechange=et(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Cs(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=X.FormData&&i instanceof X.FormData,!(0<=pt(Pi,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,m]of t)this.g.setRequestHeader(d,m);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sn(this),0<this.B&&((this.K=function ws(i){return tt&&function Nn(){return function Ke(i){var e=Ln;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Ct(String(kt)).split("."),t=Ct("9").split("."),o=Math.max(e.length,t.length);for(let m=0;0==i&&m<o;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Pt(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Pt(0==u[2].length,0==d[2].length)||Pt(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=et(this.qa,this)):this.A=nn(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Cs(this,d)}},ae.qa=function(){typeof Ee<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,x(this,"timeout"),this.abort(8))},ae.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,x(this,"complete"),x(this,"abort"),eo(this))},ae.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eo(this,!0)),Pr.X.M.call(this)},ae.Ha=function(){this.s||(this.F||this.v||this.l?xs(this):this.fb())},ae.fb=function(){xs(this)},ae.aa=function(){try{return 2<os(this)?this.g.status:-1}catch{return-1}},ae.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ae.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),co(e)}},ae.Ea=function(){return this.m},ae.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ae=re.prototype).ma=8,ae.G=1,ae.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new kn(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=jn(d),Jn(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dn(this,u,e),sr(t=yi(this.F),"RID",i),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),ct(this,t),d&&(this.N?e="headers="+encodeURIComponent(String($s(d)))+"&"+e:this.o&&U(t,this.o,d)),ms(this.h,u),this.Ya&&sr(t,"TYPE","init"),this.O?(sr(t,"$req",e),sr(t,"SID","null"),u.Z=!0,Ai(u,t,null)):Ai(u,t,e),this.G=2}}else 3==this.G&&(i?Ae(this,i):0==this.i.length||Xs(this.h)||Ae(this))},ae.Ia=function(){if(this.u=null,ar(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=In(et(this.eb,this),i)}},ae.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bn(10),D(this),ar(this))},ae.cb=function(){null!=this.v&&(this.v=null,D(this),$n(this),bn(19))},ae.kb=function(i){i?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))},(ae=hi.prototype).xa=function(){},ae.wa=function(){},ae.va=function(){},ae.ua=function(){},ae.Ra=function(){},js.prototype.g=function(i,e){return new fi(i,e)},ve(fi,oe),fi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;bn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Xr(i,null,i.V),I(i)},fi.prototype.close=function(){me(this.g)},fi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=de(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&I(e)},fi.prototype.M=function(){this.g.l=null,delete this.j,me(this.g),delete this.g,fi.X.M.call(this)},ve(bo,Lt),ve(ha,rn),ve(Hs,hi),Hs.prototype.xa=function(){x(this.g,"a")},Hs.prototype.wa=function(i){x(this.g,new bo(i))},Hs.prototype.va=function(i){x(this.g,new ha)},Hs.prototype.ua=function(){x(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,fi.prototype.send=fi.prototype.u,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,br.COMPLETE="complete",je.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",oe.prototype.listen=oe.prototype.N,Pr.prototype.listenOnce=Pr.prototype.O,Pr.prototype.getLastError=Pr.prototype.Oa,Pr.prototype.getLastErrorCode=Pr.prototype.Ea,Pr.prototype.getStatus=Pr.prototype.aa,Pr.prototype.getResponseJson=Pr.prototype.Sa,Pr.prototype.getResponseText=Pr.prototype.fa,Pr.prototype.send=Pr.prototype.da,Pr.prototype.setWithCredentials=Pr.prototype.Ka;var Io=be.createWebChannelTransport=function(){return new js},Xo=be.getStatEventTarget=function(){return Et()},fo=be.ErrorCode=ir,Ru=be.EventType=br,Pa=be.Event=Er,Ra=be.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ku=be.FetchXmlHttpFactory=Ni,ea=be.WebChannel=je,fa=be.XhrIo=Pr;const Za="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let to="9.19.0";const Do=new q.Yd("@firebase/firestore");function pi(){return Do.logLevel}function jo(i){Do.setLogLevel(i)}function bt(i,...e){if(Do.logLevel<=q.in.DEBUG){const t=e.map(ka);Do.debug(`Firestore (${to}): ${i}`,...t)}}function Rr(i,...e){if(Do.logLevel<=q.in.ERROR){const t=e.map(ka);Do.error(`Firestore (${to}): ${i}`,...t)}}function Lr(i,...e){if(Do.logLevel<=q.in.WARN){const t=e.map(ka);Do.warn(`Firestore (${to}): ${i}`,...t)}}function ka(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Qt(i="Unexpected state"){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+i;throw Rr(e),new Error(e)}function En(i,e){i||Qt()}function Nu(i,e){i||Qt()}function Jt(i,e){return i}const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ${constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class P{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class ye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nt{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let m=new $;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new $,e.enqueueRetryable(()=>d(this.currentUser))};const T=()=>{const H=m;e.enqueueRetryable((0,h.Z)(function*(){yield H.promise,yield d(o.currentUser)}))},F=H=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(H=>F(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?F(H):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new $)}},0),T()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(En("string"==typeof o.accessToken),new P(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new ci(e)}}class Mt{constructor(e,t,o){this.h=e,this.l=t,this.m=o,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class vn{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Mt(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mr{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const o=d=>{null!=d.error&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.T;return this.T=d.token,bt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.I.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.I.getImmediate({optional:!0});d?u(d):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.T=t.token,new Dr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qn(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class wi{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=qn(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function ln(i,e){return i<e?-1:i>e?1:0}function Ar(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function po(i){return i+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new b(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new b(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new b(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new On(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cn(e)}static min(){return new cn(new On(0,0))}static max(){return new cn(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ci{constructor(e,t,o){void 0===t?t=0:t>e.length&&Qt(),void 0===o?o=e.length-t:o>e.length-t&&Qt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ci.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tr extends Ci{construct(e,t,o){return new tr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new b(st.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new tr(t)}static emptyPath(){return new tr([])}}const bs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends Ci{construct(e,t,o){return new Yr(e,t,o)}static isValidIdentifier(e){return bs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new b(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let m=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new b(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new b(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===T?(m=!m,u++):"."!==T||m?(o+=T,u++):(d(),u++)}if(d(),m)throw new b(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(tr.fromString(e))}static fromName(e){return new qt(tr.fromString(e).popFirst(5))}static empty(){return new qt(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new tr(e.slice()))}}class Ho{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function go(i){return i.fields.find(e=>2===e.kind)}function no(i){return i.fields.filter(e=>2!==e.kind)}Ho.UNKNOWN_ID=-1;class To{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ps{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ps(0,Li.min())}}function ma(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=cn.fromTimestamp(1e9===o?new On(t+1,0):new On(t,o));return new Li(u,qt.empty(),e)}function ya(i){return new Li(i.readTime,i.key,-1)}class Li{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Li(cn.min(),qt.empty(),-1)}static max(){return new Li(cn.max(),qt.empty(),-1)}}function Fo(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(i.documentKey,e.documentKey),0!==t?t:ln(i.largestBatchId,e.largestBatchId))}const ta="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _a{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function So(i){return va.apply(this,arguments)}function va(){return va=(0,h.Z)(function*(i){if(i.code!==st.FAILED_PRECONDITION||i.message!==ta)throw i;bt("LocalStore","Unexpectedly lost primary lease")}),va.apply(this,arguments)}class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rt?t:rt.resolve(t)}catch(t){return rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.reject(t)}static resolve(e){return new rt((t,o)=>{t(e)})}static reject(e){return new rt((t,o)=>{o(e)})}static waitFor(e){return new rt((t,o)=>{let u=0,d=0,m=!1;e.forEach(T=>{++u,T.next(()=>{++d,m&&d===u&&t()},F=>o(F))}),m=!0,d===u&&t()})}static or(e){let t=rt.resolve(!1);for(const o of e)t=t.next(u=>u?rt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new rt((o,u)=>{const d=e.length,m=new Array(d);let T=0;for(let F=0;F<d;F++){const H=F;t(e[H]).next(te=>{m[H]=te,++T,T===d&&o(m)},te=>u(te))}})}static doWhile(e,t){return new rt((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class ro{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new $,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Lo(e,t.error)):this.R.resolve()},this.transaction.onerror=o=>{const u=us(o.target.error);this.R.reject(new Lo(e,u))}}static open(e,t,o,u){try{return new ro(t,e.transaction(u,o))}catch(d){throw new Lo(t,d)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(bt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wa(t)}}class io{constructor(e,t,o){this.name=e,this.version=t,this.V=o,12.2===io.S((0,ge.z$)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return bt("SimpleDb","Removing database:",e),Uo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ge.hl)())return!1;if(io.C())return!0;const e=(0,ge.z$)(),t=io.S(e),o=0<t&&t<10,u=io.N(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static N(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}$(e){var t=this;return(0,h.Z)(function*(){return t.db||(bt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new Lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const T=m.target.error;u("VersionError"===T.name?new b(st.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new b(st.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new Lo(e,T))},d.onupgradeneeded=m=>{bt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.V.M(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{bt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=o=>t.F(o)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,h.Z)(function*(){const m="readonly"===t;let T=0;for(;;){++T;try{d.db=yield d.$(e);const F=ro.open(d.db,e,m?"readonly":"readwrite",o),H=u(F).next(te=>(F.P(),te)).catch(te=>(F.abort(te),rt.reject(te))).toPromise();return H.catch(()=>{}),yield F.v,H}catch(F){const H=F,te="FirebaseError"!==H.name&&T<3;if(bt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",te),d.close(),!te)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gi{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Uo(this.L.delete())}}class Lo extends b{constructor(e,t){super(st.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zi(i){return"IndexedDbTransactionError"===i.name}class wa{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(bt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(bt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Uo(o)}add(e){return bt("SimpleDb","ADD",this.store.name,e,e),Uo(this.store.add(e))}get(e){return Uo(this.store.get(e)).next(t=>(void 0===t&&(t=null),bt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return bt("SimpleDb","DELETE",this.store.name,e),Uo(this.store.delete(e))}count(){return bt("SimpleDb","COUNT",this.store.name),Uo(this.store.count())}j(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.W(u,(m,T)=>{d.push(T)}).next(()=>d)}{const u=this.store.getAll(o.range);return new rt((d,m)=>{u.onerror=T=>{m(T.target.error)},u.onsuccess=T=>{d(T.target.result)}})}}H(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new rt((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}J(e,t){bt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.Y=!1;const u=this.cursor(o);return this.W(u,(d,m,T)=>T.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.W(u,t)}X(e){const t=this.cursor({});return new rt((o,u)=>{t.onerror=d=>{const m=us(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(T=>{T?m.continue():o()}):o()}})}W(e,t){const o=[];return new rt((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const T=m.target.result;if(!T)return void u();const F=new gi(T),H=t(T.primaryKey,T.value,F);if(H instanceof rt){const te=H.catch(De=>(F.done(),rt.reject(De)));o.push(te)}F.isDone?u():null===F.K?T.continue():T.continue(F.K)}}).next(()=>rt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.Y?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uo(i){return new rt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=us(o.target.error);t(u)}})}let Ca=!1;function us(i){const e=io.S((0,ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new b("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ca||(Ca=!0,setTimeout(()=>{throw o},0)),o}}return i}class Fu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;bt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,h.Z)(function*(){t.task=null;try{bt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(o){Zi(o)?bt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield So(o)}yield t.et(6e4)}))}}class El{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,h.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.st(o,e))})()}st(e,t){const o=new Set;let u=t,d=!0;return rt.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!o.has(m))return bt("IndexBackiller",`Processing collection: ${m}`),this.it(e,m,u).next(T=>{u-=T,o.add(m)});d=!1})).next(()=>t-u)}it(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.rt(u,d)).next(T=>(bt("IndexBackiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,t,T))).next(()=>m.size)}))}rt(e,t){let o=e;return t.changes.forEach((u,d)=>{const m=ya(d);Fo(m,o)>0&&(o=m)}),new Li(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ri=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=u=>this.ot(u),this.ut=u=>o.writeSequenceNumber(u))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Ea(i){return null==i}function Yi(i){return 0===i&&1/i==-1/0}function Ya(i){return"number"==typeof i&&Number.isInteger(i)&&!Yi(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Qr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ra(e)),e=na(i.get(t),e);return ra(e)}function na(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ra(i){return i+"\x01\x01"}function Qi(i){const e=i.length;if(En(e>=2),2===e)return En("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),tr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const m=i.indexOf("\x01",d);switch((m<0||m>t)&&Qt(),i.charAt(m+1)){case"\x01":const T=i.substring(d,m);let F;0===u.length?F=T:(u+=T,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(d,m),u+="\0";break;case"\x11":u+=i.substring(d,m+1);break;default:Qt()}d=m+2}return new tr(o)}const Na=["userId","batchId"];function zo(i,e){return[i,Qr(e)]}function Xl(i,e,t){return[i,Qr(e),t]}const ec={},ei=["prefixPath","collectionGroup","readTime","documentId"],Lu=["prefixPath","collectionGroup","documentId"],Fa=["collectionGroup","readTime","prefixPath","documentId"],tc=["canonicalId","targetId"],Uu=["targetId","path"],nc=["path","targetId"],cu=["collectionId","parent"],rc=["indexId","uid"],ba=["uid","sequenceNumber"],bl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Il=["indexId","uid","orderedDocumentKey"],di=["userId","collectionPath","documentId"],La=["userId","collectionPath","largestBatchId"],Ao=["userId","collectionGroup","largestBatchId"],Go=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ls=[...Go,"documentOverlays"],Mo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ua=Mo,Ia=[...Ua,"indexConfiguration","indexState","indexEntries"];class mo extends _a{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ei(i,e){const t=Jt(i);return io.O(t.at,e)}function du(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ia(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Vu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Mr{constructor(e,t){this.comparator=e,this.root=t||C.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,C.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,C.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new v(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new v(this.root,e,this.comparator,!1)}getReverseIterator(){return new v(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new v(this.root,e,this.comparator,!0)}}class v{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class C{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??C.RED,this.left=u??C.EMPTY,this.right=d??C.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new C(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return C.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return C.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,C.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,C.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}C.EMPTY=null,C.RED=!0,C.BLACK=!1,C.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new C(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class g{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A(this.data.getIterator())}getIteratorFrom(e){return new A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof g)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new g(this.comparator);return t.data=e,t}}class A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function k(i){return i.hasNext()?i.getNext():void 0}class K{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new K([])}unionWith(e){let t=new g(Yr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new K(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ar(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class ee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Le(){return typeof atob<"u"}class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ee("Invalid base64 string: "+u):u}}(e);return new ot(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const sn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yt(i){if(En(!!i),"string"==typeof i){let e=0;const t=sn.exec(i);if(En(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Dn(i.seconds),nanos:Dn(i.nanos)}}function Dn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Gr(i){return"string"==typeof i?ot.fromBase64String(i):ot.fromUint8Array(i)}function Is(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yo(i){const e=i.mapValue.fields.__previous_value__;return Is(e)?yo(e):e}function O(i){const e=Yt(i.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class R{constructor(e,t,o,u,d,m,T,F){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=T,this.useFetchStreams=F}}class Z{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Z("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Z&&e.projectId===this.projectId&&e.database===this.database}}const fe={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ne={nullValue:"NULL_VALUE"};function Ye(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Is(i)?4:$u(i)?9007199254740991:10:Qt()}function Rt(i,e){if(i===e)return!0;const t=Ye(i);if(t!==Ye(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return O(i).isEqual(O(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Yt(o.timestampValue),m=Yt(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Gr(i.bytesValue).isEqual(Gr(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Dn(o.geoPointValue.latitude)===Dn(u.geoPointValue.latitude)&&Dn(o.geoPointValue.longitude)===Dn(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Dn(o.integerValue)===Dn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Dn(o.doubleValue),m=Dn(u.doubleValue);return d===m?Yi(d)===Yi(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Ar(i.arrayValue.values||[],e.arrayValue.values||[],Rt);case 10:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(du(d)!==du(m))return!1;for(const T in d)if(d.hasOwnProperty(T)&&(void 0===m[T]||!Rt(d[T],m[T])))return!1;return!0}(i,e);default:return Qt()}var u}function yn(i,e){return void 0!==(i.values||[]).find(t=>Rt(t,e))}function gn(i,e){if(i===e)return 0;const t=Ye(i),o=Ye(e);if(t!==o)return ln(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return ln(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Dn(u.integerValue||u.doubleValue),T=Dn(d.integerValue||d.doubleValue);return m<T?-1:m>T?1:m===T?0:isNaN(m)?isNaN(T)?0:-1:1}(i,e);case 3:return Rn(i.timestampValue,e.timestampValue);case 4:return Rn(O(i),O(e));case 5:return ln(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Gr(u),T=Gr(d);return m.compareTo(T)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),T=d.split("/");for(let F=0;F<m.length&&F<T.length;F++){const H=ln(m[F],T[F]);if(0!==H)return H}return ln(m.length,T.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=ln(Dn(u.latitude),Dn(d.latitude));return 0!==m?m:ln(Dn(u.longitude),Dn(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],T=d.values||[];for(let F=0;F<m.length&&F<T.length;++F){const H=gn(m[F],T[F]);if(H)return H}return ln(m.length,T.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===fe.mapValue&&d===fe.mapValue)return 0;if(u===fe.mapValue)return 1;if(d===fe.mapValue)return-1;const m=u.fields||{},T=Object.keys(m),F=d.fields||{},H=Object.keys(F);T.sort(),H.sort();for(let te=0;te<T.length&&te<H.length;++te){const De=ln(T[te],H[te]);if(0!==De)return De;const Ge=gn(m[T[te]],F[H[te]]);if(0!==Ge)return Ge}return ln(T.length,H.length)}(i.mapValue,e.mapValue);default:throw Qt()}}function Rn(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ln(i,e);const t=Yt(i),o=Yt(e),u=ln(t.seconds,o.seconds);return 0!==u?u:ln(t.nanos,o.nanos)}function nr(i){return Hn(i)}function Hn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Yt(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Gr(i.bytesValue).toBase64():"referenceValue"in i?qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const m of o.values||[])d?d=!1:u+=",",u+=Hn(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",m=!0;for(const T of u)m?m=!1:d+=",",d+=`${T}:${Hn(o.fields[T])}`;return d+"}"}(i.mapValue):Qt();var e}function Ui(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ji(i){return!!i&&"integerValue"in i}function sa(i){return!!i&&"arrayValue"in i}function Bu(i){return!!i&&"nullValue"in i}function Va(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zs(i){return!!i&&"mapValue"in i}function Rs(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ia(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Rs(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rs(i.arrayValue.values[t]);return e}return Object.assign({},i)}function $u(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function dh(i){return"nullValue"in i?Ne:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ui(Z.empty(),qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Qt()}function ic(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ui(Z.empty(),qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?fe:Qt()}function Tf(i,e){const t=gn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function td(i,e){const t=gn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!zs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rs(t)}setAll(e){let t=Yr.emptyPath(),o={},u=[];e.forEach((m,T)=>{if(!t.isImmediateParentOf(T)){const F=this.getFieldsMap(t);this.applyChanges(F,o,u),o={},u=[],t=T.popLast()}m?o[T.lastSegment()]=Rs(m):u.push(T.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());zs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];zs(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){ia(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new Gs(Rs(this.value))}}function sc(i){const e=[];return ia(i.fields,(t,o)=>{const u=new Yr([t]);if(zs(o)){const d=sc(o.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new K(e)}class bi{constructor(e,t,o,u,d,m,T){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=T}static newInvalidDocument(e){return new bi(e,0,cn.min(),cn.min(),cn.min(),Gs.empty(),0)}static newFoundDocument(e,t,o,u){return new bi(e,1,t,cn.min(),o,u,0)}static newNoDocument(e,t){return new bi(e,2,t,cn.min(),cn.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,cn.min(),cn.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(cn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Da{constructor(e,t){this.position=e,this.inclusive=t}}function hh(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],m=i.position[u];if(o=d.field.isKeyField()?qt.comparator(qt.fromName(m.referenceValue),t.key):gn(m,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Sf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Rt(i.position[t],e.position[t]))return!1;return!0}class oa{constructor(e,t="asc"){this.field=e,this.dir=t}}function bg(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Af{}class kr extends Af{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Mf(e,t,o):"array-contains"===t?new od(e,o):"in"===t?new ph(e,o):"not-in"===t?new xf(e,o):"array-contains-any"===t?new ad(e,o):new kr(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new Of(e,o):new fh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gn(t,this.value)):null!==t&&Ye(this.value)===Ye(t)&&this.matchesComparison(gn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class oi extends Af{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new oi(e,t)}matches(e){return Dl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dl(i){return"and"===i.op}function nd(i){return"or"===i.op}function oc(i){return ac(i)&&Dl(i)}function ac(i){for(const e of i.filters)if(e instanceof oi)return!1;return!0}function ju(i){if(i instanceof kr)return i.field.canonicalString()+i.op.toString()+nr(i.value);if(oc(i))return i.filters.map(e=>ju(e)).join(",");{const e=i.filters.map(t=>ju(t)).join(",");return`${i.op}(${e})`}}function rd(i,e){return i instanceof kr?(t=i,(o=e)instanceof kr&&t.op===o.op&&t.field.isEqual(o.field)&&Rt(t.value,o.value)):i instanceof oi?function(t,o){return o instanceof oi&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((u,d,m)=>u&&rd(d,o.filters[m]),!0)}(i,e):void Qt();var t,o}function id(i,e){const t=i.filters.concat(e);return oi.create(t,i.op)}function aa(i){return i instanceof kr?`${(e=i).field.canonicalString()} ${e.op} ${nr(e.value)}`:i instanceof oi?function(e){return e.op.toString()+" {"+e.getFilters().map(aa).join(" ,")+"}"}(i):"Filter";var e}class Mf extends kr{constructor(e,t,o){super(e,t,o),this.key=qt.fromName(o.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Of extends kr{constructor(e,t){super(e,"in",t),this.keys=sd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fh extends kr{constructor(e,t){super(e,"not-in",t),this.keys=sd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>qt.fromName(o.referenceValue))}class od extends kr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sa(t)&&yn(t.arrayValue,this.value)}}class ph extends kr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yn(this.value.arrayValue,t)}}class xf extends kr{constructor(e,t){super(e,"not-in",t)}matches(e){if(yn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yn(this.value.arrayValue,t)}}class ad extends kr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>yn(this.value.arrayValue,o))}}class gh{constructor(e,t=null,o=[],u=[],d=null,m=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=T,this.ft=null}}function Tl(i,e=null,t=[],o=[],u=null,d=null,m=null){return new gh(i,e,t,o,u,d,m)}function hu(i){const e=Jt(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>ju(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Ea(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>nr(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>nr(o)).join(",")),e.ft=t}return e.ft}function Ds(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!bg(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!rd(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Sf(i.startAt,e.startAt)&&Sf(i.endAt,e.endAt)}function Hu(i){return qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function fu(i,e){return i.filters.filter(t=>t instanceof kr&&t.field.isEqual(e))}function uc(i,e,t){let o=Ne,u=!0;for(const d of fu(i,e)){let m=Ne,T=!0;switch(d.op){case"<":case"<=":m=dh(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,T=!1;break;case"!=":case"not-in":m=Ne}Tf({value:o,inclusive:u},{value:m,inclusive:T})<0&&(o=m,u=T)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];Tf({value:o,inclusive:u},{value:m,inclusive:t.inclusive})<0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}function so(i,e,t){let o=fe,u=!0;for(const d of fu(i,e)){let m=fe,T=!0;switch(d.op){case">=":case">":m=ic(d.value),T=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,T=!1;break;case"!=":case"not-in":m=fe}td({value:o,inclusive:u},{value:m,inclusive:T})>0&&(o=m,u=T)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const m=t.position[d];td({value:o,inclusive:u},{value:m,inclusive:t.inclusive})>0&&(o=m,u=t.inclusive);break}return{value:o,inclusive:u}}class _o{constructor(e,t=null,o=[],u=[],d=null,m="F",T=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=T,this.endAt=F,this.dt=null,this.wt=null}}function lc(i,e,t,o,u,d,m,T){return new _o(i,e,t,o,u,d,m,T)}function Ta(i){return new _o(i)}function ud(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Sl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function cc(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function dc(i){return null!==i.collectionGroup}function pu(i){const e=Jt(i);if(null===e.dt){e.dt=[];const t=cc(e),o=Sl(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new oa(t)),e.dt.push(new oa(Yr.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.dt.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new oa(Yr.keyField(),d))}}}return e.dt}function oo(i){const e=Jt(i);if(!e.wt)if("F"===e.limitType)e.wt=Tl(e.path,e.collectionGroup,pu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of pu(e))t.push(new oa(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Da(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Da(e.startAt.position,e.startAt.inclusive):null;e.wt=Tl(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function ld(i,e){e.getFirstInequalityField(),cc(i);const t=i.filters.concat([e]);return new _o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Al(i,e,t){return new _o(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function gu(i,e){return Ds(oo(i),oo(e))&&i.limitType===e.limitType}function cd(i){return`${hu(oo(i))}|lt:${i.limitType}`}function Ba(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>aa(o)).join(", ")}]`),Ea(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(u=o).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>nr(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>nr(o)).join(",")),`Target(${t})`}(oo(i))}; limitType=${i.limitType})`}function $a(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):qt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of pu(t))if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,m){const T=hh(u,d,m);return u.inclusive?T<=0:T<0}(t.startAt,pu(t),o)||t.endAt&&!function(u,d,m){const T=hh(u,d,m);return u.inclusive?T>=0:T>0}(t.endAt,pu(t),o)));var t,o}function mh(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hc(i){return(e,t)=>{let o=!1;for(const u of pu(i)){const d=dd(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function dd(i,e,t){const o=i.field.isKeyField()?qt.comparator(e.key,t.key):function(u,d,m){const T=d.data.field(u),F=m.data.field(u);return null!==T&&null!==F?gn(T,F):Qt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Qt()}}class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Vu(this.inner)}size(){return this.innerSize}}const yh=new Mr(qt.comparator);function Ts(){return yh}const zu=new Mr(qt.comparator);function Gu(...i){let e=zu;for(const t of i)e=e.insert(t.key,t);return e}function _h(i){let e=zu;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Oo(){return Ml()}function vh(){return Ml()}function Ml(){return new Wo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Pf=new Mr(qt.comparator),Rf=new g(qt.comparator);function cr(...i){let e=Rf;for(const t of i)e=e.add(t);return e}const wh=new g(ln);function mu(){return wh}function fc(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yi(e)?"-0":e}}function hd(i){return{integerValue:""+i}}function Wu(i,e){return Ya(e)?hd(e):fc(i,e)}class qu{constructor(){this._=void 0}}function kf(i,e,t){return i instanceof qo?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Qa?fd(i,e):i instanceof Ja?Nf(i,e):function(o,u){const d=Ku(o,u),m=Eh(d)+Eh(o._t);return ji(d)&&ji(o._t)?hd(m):fc(o.serializer,m)}(i,e)}function Ch(i,e,t){return i instanceof Qa?fd(i,e):i instanceof Ja?Nf(i,e):t}function Ku(i,e){return i instanceof ja?ji(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class qo extends qu{}class Qa extends qu{constructor(e){super(),this.elements=e}}function fd(i,e){const t=pd(e);for(const o of i.elements)t.some(u=>Rt(u,o))||t.push(o);return{arrayValue:{values:t}}}class Ja extends qu{constructor(e){super(),this.elements=e}}function Nf(i,e){let t=pd(e);for(const o of i.elements)t=t.filter(u=>!Rt(u,o));return{arrayValue:{values:t}}}class ja extends qu{constructor(e,t){super(),this.serializer=e,this._t=t}}function Eh(i){return Dn(i.integerValue||i.doubleValue)}function pd(i){return sa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Sa{constructor(e,t){this.field=e,this.transform=t}}class pc{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class _u{}function gd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Xa(i.key,Ii.none()):new Zu(i.key,i.data,Ii.none());{const t=i.data,o=Gs.empty();let u=new g(Yr.comparator);for(let d of e.fields)if(!u.has(d)){let m=t.field(d);null===m&&d.length>1&&(d=d.popLast(),m=t.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new Ko(i.key,o,new K(u.toArray()),Ii.none())}}function gc(i,e,t){i instanceof Zu?function(o,u,d){const m=o.value.clone(),T=xo(o.fieldTransforms,u,d.transformResults);m.setAll(T),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Ko?function(o,u,d){if(!yu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=xo(o.fieldTransforms,u,d.transformResults),T=u.data;T.setAll(Ih(o)),T.setAll(m),u.convertToFoundDocument(d.version,T).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ha(i,e,t,o){return i instanceof Zu?function(u,d,m,T){if(!yu(u.precondition,d))return m;const F=u.value.clone(),H=Yu(u.fieldTransforms,T,d);return F.setAll(H),d.convertToFoundDocument(d.version,F).setHasLocalMutations(),null}(i,e,t,o):i instanceof Ko?function(u,d,m,T){if(!yu(u.precondition,d))return m;const F=Yu(u.fieldTransforms,T,d),H=d.data;return H.setAll(Ih(u)),H.setAll(F),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(te=>te.field))}(i,e,t,o):(m=t,yu(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m);var d,m}function Ol(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=Ku(o.transform,u||null);null!=d&&(null===t&&(t=Gs.empty()),t.set(o.field,d))}return t||null}function vu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ar(t,o,(u,d)=>function bh(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Qa&&o instanceof Qa||t instanceof Ja&&o instanceof Ja?Ar(t.elements,o.elements,Rt):t instanceof ja&&o instanceof ja?Rt(t._t,o._t):t instanceof qo&&o instanceof qo);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Zu extends _u{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ko extends _u{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ih(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function xo(i,e,t){const o=new Map;En(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],m=d.transform,T=e.data.field(d.field);o.set(d.field,Ch(m,T,t[u]))}return o}function Yu(i,e,t){const o=new Map;for(const u of i){const d=u.transform,m=t.data.field(u.field);o.set(u.field,kf(d,m,e))}return o}class Xa extends _u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mc extends _u{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eu{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&gc(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ha(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ha(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=vh();return this.mutations.forEach(u=>{const d=e.get(u.key),m=d.overlayedDocument;let T=this.applyToLocalView(m,d.mutatedFields);T=t.has(u.key)?null:T;const F=gd(m,T);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(cn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&Ar(this.mutations,e.mutations,(t,o)=>vu(t,o))&&Ar(this.baseMutations,e.baseMutations,(t,o)=>vu(t,o))}}class wu{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){En(e.mutations.length===o.length);let u=Pf;const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new wu(e,t,o,u)}}class tu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Th{constructor(e){this.count=e}}var Hi,Vr;function yd(i){switch(i){default:return Qt();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0}}function Qu(i){if(void 0===i)return Rr("GRPC error has no .code"),st.UNKNOWN;switch(i){case Hi.OK:return st.OK;case Hi.CANCELLED:return st.CANCELLED;case Hi.UNKNOWN:return st.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return st.INTERNAL;case Hi.UNAVAILABLE:return st.UNAVAILABLE;case Hi.UNAUTHENTICATED:return st.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case Hi.NOT_FOUND:return st.NOT_FOUND;case Hi.ALREADY_EXISTS:return st.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return st.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case Hi.ABORTED:return st.ABORTED;case Hi.OUT_OF_RANGE:return st.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return st.UNIMPLEMENTED;case Hi.DATA_LOSS:return st.DATA_LOSS;default:return Qt()}}(Vr=Hi||(Hi={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class ks{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Eu}static getOrCreateInstance(){return null===Eu&&(Eu=new ks),Eu}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Eu=null;class nu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new nu(cn.min(),u,mu(),Ts(),cr())}}class Ju{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Ju(o,t,cr(),cr(),cr())}}class Ns{constructor(e,t,o,u){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=u}}class Xu{constructor(e,t){this.targetId=e,this.Et=t}}class _d{constructor(e,t,o=ot.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class vd{constructor(){this.At=0,this.Rt=Aa(),this.vt=ot.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=cr(),t=cr(),o=cr();return this.Rt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Qt()}}),new Ju(this.vt,this.bt,e,t,o)}xt(){this.Pt=!1,this.Rt=Aa()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class Ff{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Ts(),this.qt=yc(),this.Ut=new g(ln)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const o=this.jt(t);switch(e.state){case 0:this.Wt(t)&&o.Dt(e.resumeToken);break;case 1:o.$t(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.$t(),o.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(o.Mt(),o.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:Qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,u)=>{this.Wt(u)&&t(u)})}Jt(e){var t;const o=e.targetId,u=e.Et.count,d=this.Yt(o);if(d){const m=d.target;if(Hu(m))if(0===u){const T=new qt(m.path);this.Qt(o,T,bi.newNoDocument(T,cn.min()))}else En(1===u);else{const T=this.Zt(o);T!==u&&(this.Ht(o),this.Ut=this.Ut.add(o),null===(t=ks.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:T,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((d,m)=>{const T=this.Yt(m);if(T){if(d.current&&Hu(T.target)){const F=new qt(T.target.path);null!==this.Lt.get(F)||this.te(m,F)||this.Qt(m,F,bi.newNoDocument(F,e))}d.St&&(t.set(m,d.Ct()),d.xt())}});let o=cr();this.qt.forEach((d,m)=>{let T=!0;m.forEachWhile(F=>{const H=this.Yt(F);return!H||2===H.purpose||(T=!1,!1)}),T&&(o=o.add(d))}),this.Lt.forEach((d,m)=>m.setReadTime(e));const u=new nu(e,t,this.Ut,this.Lt,o);return this.Lt=Ts(),this.qt=yc(),this.Ut=new g(ln),u}Gt(e,t){if(!this.Wt(e))return;const o=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.Wt(e))return;const u=this.jt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new vd,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new g(ln),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||bt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new vd),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function yc(){return new Mr(qt.comparator)}function Aa(){return new Mr(qt.comparator)}const el={asc:"ASCENDING",desc:"DESCENDING"},Lf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uf={and:"AND",or:"OR"};class y{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function c(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function w(i,e){return c(i,e.toTimestamp())}function V(i){return En(!!i),cn.fromTimestamp(function(e){const t=Yt(e);return new On(t.seconds,t.nanos)}(i))}function J(i,e){return(t=i,new tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ke(i){const e=tr.fromString(i);return En(cs(e)),e}function gt(i,e){return J(i.databaseId,e.path)}function jt(i,e){const t=ke(e);if(t.get(1)!==i.databaseId.projectId)throw new b(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new b(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new qt(Ji(t))}function hn(i,e){return J(i.databaseId,e)}function xn(i){const e=ke(i);return 4===e.length?tr.emptyPath():Ji(e)}function Tn(i){return new tr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ji(i){return En(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Vo(i,e,t){return{name:gt(i,e),fields:t.value.mapValue.fields}}function tl(i,e,t){const o=jt(i,e.name),u=V(e.updateTime),d=e.createTime?V(e.createTime):cn.min(),m=new Gs({mapValue:{fields:e.fields}}),T=bi.newFoundDocument(o,u,d,m);return t&&T.setHasCommittedMutations(),t?T.setHasCommittedMutations():T}function xl(i,e){let t;if(e instanceof Zu)t={update:Vo(i,e.key,e.value)};else if(e instanceof Xa)t={delete:gt(i,e.key)};else if(e instanceof Ko)t={update:Vo(i,e.key,e.data),updateMask:fy(e.fieldMask)};else{if(!(e instanceof mc))return Qt();t={verify:gt(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const m=d.transform;if(m instanceof qo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Qa)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ja)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ja)return{fieldPath:d.field.canonicalString(),increment:m._t};throw Qt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:w(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Qt()),t;var u}function nl(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ii.updateTime(V(u.updateTime)):void 0!==u.exists?Ii.exists(u.exists):Ii.none():Ii.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let T=null;"setToServerValue"in m?(En("REQUEST_TIME"===m.setToServerValue),T=new qo):"appendMissingElements"in m?T=new Qa(m.appendMissingElements.values||[]):"removeAllFromArray"in m?T=new Ja(m.removeAllFromArray.values||[]):"increment"in m?T=new ja(d,m.increment):Qt();const F=Yr.fromServerFormat(m.fieldPath);return new Sa(F,T)}(i,u)):[];var u;if(e.update){const u=jt(i,e.update.name),d=new Gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new K((e.updateMask.fieldPaths||[]).map(H=>Yr.fromServerFormat(H)));return new Ko(u,d,m,t,o)}return new Zu(u,d,t,o)}if(e.delete){const u=jt(i,e.delete);return new Xa(u,t)}if(e.verify){const u=jt(i,e.verify);return new mc(u,t)}return Qt()}function Ah(i,e){return{documents:[hn(i,e.path)]}}function wd(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=hn(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hn(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(F){if(0!==F.length)return xh(oi.create(F,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const d=function(F){if(0!==F.length)return F.map(H=>{return{field:za((te=H).field),direction:Cd(te.dir)};var te})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(H=e.limit,i.useProto3Json||Ea(H)?H:{value:H});var H,T,F;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(T=e.startAt).inclusive,values:T.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function Rl(i){let e=xn(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){En(1===o);const te=t.from[0];te.allDescendants?u=te.collectionId:e=e.child(te.collectionId)}let d=[];t.where&&(d=function(te){const De=Oh(te);return De instanceof oi&&oc(De)?De.getFilters():[De]}(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(te=>{return new oa(kl((De=te).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(De.direction));var De}));let T=null;t.limit&&(T=function(te){let De;return De="object"==typeof te?te.value:te,Ea(De)?null:De}(t.limit));let F=null;var te;t.startAt&&(F=new Da((te=t.startAt).values||[],!!te.before));let H=null;return t.endAt&&(H=function(te){return new Da(te.values||[],!te.before)}(t.endAt)),lc(e,u,m,d,T,"F",F,H)}function Oh(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kl(e.unaryFilter.field);return kr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=kl(e.unaryFilter.field);return kr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=kl(e.unaryFilter.field);return kr.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=kl(e.unaryFilter.field);return kr.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}(i):void 0!==i.fieldFilter?kr.create(kl((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return oi.create(e.compositeFilter.filters.map(t=>Oh(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Qt()}}(e.compositeFilter.op))}(i):Qt();var e}function Cd(i){return el[i]}function Bf(i){return Lf[i]}function Ig(i){return Uf[i]}function za(i){return{fieldPath:i.canonicalString()}}function kl(i){return Yr.fromServerFormat(i.fieldPath)}function xh(i){return i instanceof kr?function(e){if("=="===e.op){if(Va(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(Bu(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Va(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(Bu(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:Bf(e.op),value:e.value}}}(i):i instanceof oi?function(e){const t=e.getFilters().map(o=>xh(o));return 1===t.length?t[0]:{compositeFilter:{op:Ig(e.op),filters:t}}}(i):Qt()}function fy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cs(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class rl{constructor(e,t,o,u,d=cn.min(),m=cn.min(),T=ot.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=T}withSequenceNumber(e){return new rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Dg{constructor(e){this.se=e}}function jf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ph(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:gt(u=i.se,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:c(u,d.version.toTimestamp()),createTime:c(u,d.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Nl(e.version)};else{if(!e.isUnknownDocument())return Qt();o.unknownDocument={path:t.path.toArray(),version:Nl(e.version)}}var u,d;return o}function Ph(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Nl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fl(i){const e=new On(i.seconds,i.nanoseconds);return cn.fromTimestamp(e)}function Ll(i,e){const t=(e.baseMutations||[]).map(d=>nl(i.se,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const o=e.mutations.map(d=>nl(i.se,d)),u=On.fromMillis(e.localWriteTimeMs);return new eu(e.batchId,u,t,o)}function _c(i){const e=Fl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Fl(i.lastLimboFreeSnapshotVersion):cn.min();let o;var u;return void 0!==i.query.documents?(En(1===(u=i.query).documents.length),o=oo(Ta(xn(u.documents[0])))):o=oo(Rl(i.query)),new rl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,ot.fromBase64String(i.resumeToken))}function py(i,e){const t=Nl(e.snapshotVersion),o=Nl(e.lastLimboFreeSnapshotVersion);let u;u=Hu(e.target)?Ah(i.se,e.target):wd(i.se,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hu(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Tg(i){const e=Rl({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Al(e,e.limit,"L"):e}function Ul(i,e){return new tu(e.largestBatchId,nl(i.se,e.overlayMutation))}function Rh(i,e){const t=e.path.lastSegment();return[i,Qr(e.path.popLast()),t]}function Hf(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Nl(o.readTime),documentKey:Qr(o.documentKey.path),largestBatchId:o.largestBatchId}}class Sg{getBundleMetadata(e,t){return zf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Fl(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return zf(e).put({bundleId:(o=t).id,createTime:Nl(V(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Ag(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Tg(u.bundledQuery),readTime:Fl(u.readTime)};var u})}saveNamedQuery(e,t){return Ag(e).put({name:(o=t).name,readTime:Nl(V(o.readTime)),bundledQuery:o.bundledQuery});var o}}function zf(i){return Ei(i,"bundles")}function Ag(i){return Ei(i,"namedQueries")}class kh{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new kh(e,t.uid||"")}getOverlay(e,t){return vc(e).get(Rh(this.userId,t)).next(o=>o?Ul(this.serializer,o):null)}getOverlays(e,t){const o=Oo();return rt.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,m)=>{const T=new tu(t,m);u.push(this.re(e,T))}),rt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(m=>u.add(Qr(m.getCollectionPath())));const d=[];return u.forEach(m=>{const T=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(vc(e).J("collectionPathOverlayIndex",T))}),rt.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Oo(),d=Qr(t),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return vc(e).j("collectionPathOverlayIndex",m).next(T=>{for(const F of T){const H=Ul(this.serializer,F);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Oo();let m;const T=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vc(e).Z({index:"collectionGroupOverlayIndex",range:T},(F,H,te)=>{const De=Ul(this.serializer,H);d.size()<u||De.largestBatchId===m?(d.set(De.getKey(),De),m=De.largestBatchId):te.done()}).next(()=>d)}re(e,t){return vc(e).put(function(o,u,d){const[m,T,F]=Rh(u,d.mutation.key);return{userId:u,collectionPath:T,documentId:F,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:xl(o.se,d.mutation)}}(this.serializer,this.userId,t))}}function vc(i){return Ei(i,"documentOverlays")}class il{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Dn(e.integerValue));else if("doubleValue"in e){const o=Dn(e.doubleValue);isNaN(o)?this.ae(t,13):(this.ae(t,15),Yi(o)?t.he(0):t.he(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ae(t,20),"string"==typeof o?t.le(o):(t.le(`${o.seconds||""}`),t.he(o.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Gr(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ae(t,45),t.he(o.latitude||0),t.he(o.longitude||0)}else"mapValue"in e?$u(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Qt()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const o=e.fields||{};this.ae(t,55);for(const u of Object.keys(o))this.fe(u,t),this.ue(o[u],t)}ge(e,t){const o=e.values||[];this.ae(t,50);for(const u of o)this.ue(u,t)}_e(e,t){this.ae(t,37),qt.fromName(e).path.forEach(o=>{this.ae(t,60),this.ye(o,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Gf(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function gy(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Gf(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}il.pe=new il;class Wf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Te(o.value),o=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Re(o.value),o=t.next();this.ve()}be(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Te(o);else if(o<2048)this.Te(960|o>>>6),this.Te(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Te(480|o>>>12),this.Te(128|63&o>>>6),this.Te(128|63&o);else{const u=t.codePointAt(0);this.Te(240|u>>>18),this.Te(128|63&u>>>12),this.Te(128|63&u>>>6),this.Te(128|63&u)}}this.Ee()}Pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Re(o);else if(o<2048)this.Re(960|o>>>6),this.Re(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Re(480|o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o);else{const u=t.codePointAt(0);this.Re(240|u>>>18),this.Re(128|63&u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u)}}this.ve()}Ve(e){const t=this.Se(e),o=gy(t);this.De(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ce(e){const t=this.Se(e),o=gy(t);this.De(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class my{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class qf{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class wc{constructor(){this.Me=new Wf,this.Fe=new my(this.Me),this.Be=new qf(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class sl{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new sl(this.indexId,this.documentKey,this.arrayValue,o)}}function Zo(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Mg(i.arrayValue,e.arrayValue),0!==t?t:(t=Mg(i.directionalValue,e.directionalValue),0!==t?t:qt.comparator(i.documentKey,e.documentKey)))}function Mg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Kf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const o=t;o.isInequality()?this.Ge=o:this.Ke.push(o)}}Qe(e){En(e.collectionGroup===this.collectionId);const t=go(e);if(void 0!==t&&!this.ze(t))return!1;const o=no(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Ge){const m=o[u];if(!this.je(this.Ge,m)||!this.We(this.Ue[d++],m))return!1;++u}for(;u<o.length;++u)if(d>=this.Ue.length||!this.We(this.Ue[d++],o[u]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ed(i){var e,t;if(En(i instanceof kr||i instanceof oi),i instanceof kr){if(i instanceof ph){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(d=>kr.create(i.field,"==",d)))||[];return oi.create(u,"or")}return i}const o=i.filters.map(u=>Ed(u));return oi.create(o,i.op)}function yy(i){if(0===i.getFilters().length)return[];const e=Nh(Ed(i));return En(ol(e)),bd(e)||Cc(e)?[e]:e.getFilters()}function bd(i){return i instanceof kr}function Cc(i){return i instanceof oi&&oc(i)}function ol(i){return bd(i)||Cc(i)||function(e){if(e instanceof oi&&nd(e)){for(const t of e.getFilters())if(!bd(t)&&!Cc(t))return!1;return!0}return!1}(i)}function Nh(i){if(En(i instanceof kr||i instanceof oi),i instanceof kr)return i;if(1===i.filters.length)return Nh(i.filters[0]);const e=i.filters.map(o=>Nh(o));let t=oi.create(e,i.op);return t=Fh(t),ol(t)?t:(En(t instanceof oi),En(Dl(t)),En(t.filters.length>1),t.filters.reduce((o,u)=>Id(o,u)))}function Id(i,e){let t;return En(i instanceof kr||i instanceof oi),En(e instanceof kr||e instanceof oi),t=i instanceof kr?e instanceof kr?oi.create([i,e],"and"):Og(i,e):e instanceof kr?Og(e,i):function(o,u){if(En(o.filters.length>0&&u.filters.length>0),Dl(o)&&Dl(u))return id(o,u.getFilters());const d=nd(o)?o:u,m=nd(o)?u:o,T=d.filters.map(F=>Id(F,m));return oi.create(T,"or")}(i,e),Fh(t)}function Og(i,e){if(Dl(e))return id(e,i.getFilters());{const t=e.filters.map(o=>Id(i,o));return oi.create(t,"or")}}function Fh(i){if(En(i instanceof kr||i instanceof oi),i instanceof kr)return i;const e=i.getFilters();if(1===e.length)return Fh(e[0]);if(ac(i))return i;const t=e.map(u=>Fh(u)),o=[];return t.forEach(u=>{u instanceof kr?o.push(u):u instanceof oi&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:oi.create(o,i.op)}class xg{constructor(){this.He=new al}addToCollectionParentIndex(e,t){return this.He.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getIndexType(e,t){return rt.resolve(0)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,t){return rt.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return rt.resolve(Li.min())}updateCollectionGroup(e,t,o){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class al{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new g(tr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new g(tr.comparator)).toArray()}}const Lh=new Uint8Array(0);class _y{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new al,this.Ye=new Wo(o=>hu(o),(o,u)=>Ds(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const d={collectionId:o,parent:Qr(u)};return Pg(e).put(d)}return rt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[po(t),""],!1,!0);return Pg(e).j(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;o.push(Qi(m.parent))}return o})}addFieldIndex(e,t){const o=Uh(e),u={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(T=>[T.fieldPath.canonicalString(),T.kind])};var m;delete u.indexId;const d=o.add(u);if(t.indexState){const m=Ec(e);return d.next(T=>{m.put(Hf(T,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Uh(e),u=Ec(e),d=Vl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Vl(e);let u=!0;const d=new Map;return rt.forEach(this.Ze(t),m=>this.Xe(e,m).next(T=>{u&&(u=!!T),d.set(m,T)})).next(()=>{if(u){let m=cr();const T=[];return rt.forEach(d,(F,H)=>{var te;bt("IndexedDbIndexManager",`Using index ${te=F,`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(Wr=>`${Wr.fieldPath}:${Wr.kind}`).join(",")}`} to execute ${hu(t)}`);const De=function(Wr,Yo){const Ls=go(Yo);if(void 0===Ls)return null;for(const Gi of fu(Wr,Ls.fieldPath))switch(Gi.op){case"array-contains-any":return Gi.value.arrayValue.values||[];case"array-contains":return[Gi.value]}return null}(H,F),Ge=function(Wr,Yo){const Ls=new Map;for(const Gi of no(Yo))for(const Qo of fu(Wr,Gi.fieldPath))switch(Qo.op){case"==":case"in":Ls.set(Gi.fieldPath.canonicalString(),Qo.value);break;case"not-in":case"!=":return Ls.set(Gi.fieldPath.canonicalString(),Qo.value),Array.from(Ls.values())}return null}(H,F),It=function(Wr,Yo){const Ls=[];let Gi=!0;for(const Qo of no(Yo)){const wl=0===Qo.kind?uc(Wr,Qo.fieldPath,Wr.startAt):so(Wr,Qo.fieldPath,Wr.startAt);Ls.push(wl.value),Gi&&(Gi=wl.inclusive)}return new Da(Ls,Gi)}(H,F),Ht=function(Wr,Yo){const Ls=[];let Gi=!0;for(const Qo of no(Yo)){const wl=0===Qo.kind?so(Wr,Qo.fieldPath,Wr.endAt):uc(Wr,Qo.fieldPath,Wr.endAt);Ls.push(wl.value),Gi&&(Gi=wl.inclusive)}return new Da(Ls,Gi)}(H,F),fn=this.tn(F,H,It),An=this.tn(F,H,Ht),ti=this.en(F,H,Ge),zi=this.nn(F.indexId,De,fn,It.inclusive,An,Ht.inclusive,ti);return rt.forEach(zi,Wr=>o.H(Wr,t.limit).next(Yo=>{Yo.forEach(Ls=>{const Gi=qt.fromSegments(Ls.documentKey);m.has(Gi)||(m=m.add(Gi),T.push(Gi))})}))}).next(()=>T)}return rt.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:yy(oi.create(e.filters,"and")).map(o=>Tl(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,o,u,d,m,T){const F=(null!=t?t.length:1)*Math.max(o.length,d.length),H=F/(null!=t?t.length:1),te=[];for(let De=0;De<F;++De){const Ge=t?this.sn(t[De/H]):Lh,It=this.rn(e,Ge,o[De%H],u),Ht=this.on(e,Ge,d[De%H],m),fn=T.map(An=>this.rn(e,Ge,An,!0));te.push(...this.createRange(It,Ht,fn))}return te}rn(e,t,o,u){const d=new sl(e,qt.empty(),t,o);return u?d:d.qe()}on(e,t,o,u){const d=new sl(e,qt.empty(),t,o);return u?d.qe():d}Xe(e,t){const o=new Kf(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let m=null;for(const T of d)o.Qe(T)&&(!m||T.fields.length>m.fields.length)&&(m=T);return m})}getIndexType(e,t){let o=2;const u=this.Ze(t);return rt.forEach(u,d=>this.Xe(e,d).next(m=>{m?0!==o&&m.fields.length<function(T){let F=new g(Yr.comparator),H=!1;for(const te of T.filters)for(const De of te.getFlattenedFilters())De.field.isKeyField()||("array-contains"===De.op||"array-contains-any"===De.op?H=!0:F=F.add(De.field));for(const te of T.orderBy)te.field.isKeyField()||(F=F.add(te.field));return F.size+(H?1:0)}(d)&&(o=1):o=0})).next(()=>null!==t.limit&&u.length>1&&2===o?1:o)}un(e,t){const o=new wc;for(const u of no(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const m=o.Le(u.kind);il.pe.oe(d,m)}return o.$e()}sn(e){const t=new wc;return il.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const o=new wc;return il.pe.oe(Ui(this.databaseId,t),o.Le(function(u){const d=no(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}en(e,t,o){if(null===o)return[];let u=[];u.push(new wc);let d=0;for(const m of no(e)){const T=o[d++];for(const F of u)if(this.an(t,m.fieldPath)&&sa(T))u=this.hn(u,m,T);else{const H=F.Le(m.kind);il.pe.oe(T,H)}}return this.ln(u)}tn(e,t,o){return this.en(e,t,o.position)}ln(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}hn(e,t,o){const u=[...e],d=[];for(const m of o.arrayValue.values||[])for(const T of u){const F=new wc;F.seed(T.$e()),il.pe.oe(m,F.Le(t.kind)),d.push(F)}return d}an(e,t){return!!e.filters.find(o=>o instanceof kr&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Uh(e),u=Ec(e);return(t?o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.j()).next(d=>{const m=[];return rt.forEach(d,T=>u.get([T.indexId,this.uid]).next(F=>{m.push(function(H,te){const De=te?new Ps(te.sequenceNumber,new Li(Fl(te.readTime),new qt(Qi(te.documentKey)),te.largestBatchId)):Ps.empty(),Ge=H.fields.map(([It,Ht])=>new To(Yr.fromServerFormat(It),Ht));return new Ho(H.indexId,H.collectionGroup,Ge,De)}(T,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:ln(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Uh(e),d=Ec(e);return this.fn(e).next(m=>u.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(T=>rt.forEach(T,F=>d.put(Hf(F.indexId,this.user,m,o)))))}updateIndexEntries(e,t){const o=new Map;return rt.forEach(t,(u,d)=>{const m=o.get(u.collectionGroup);return(m?rt.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(o.set(u.collectionGroup,T),rt.forEach(T,F=>this.dn(e,u,F).next(H=>{const te=this.wn(d,F);return H.isEqual(te)?rt.resolve():this._n(e,d,F,H,te)}))))})}mn(e,t,o,u){return Vl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.cn(o,t.key),documentKey:t.key.path.toArray()})}gn(e,t,o,u){return Vl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.cn(o,t.key),t.key.path.toArray()])}dn(e,t,o){const u=Vl(e);let d=new g(Zo);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.cn(o,t)])},(m,T)=>{d=d.add(new sl(o.indexId,t,T.arrayValue,T.directionalValue))}).next(()=>d)}wn(e,t){let o=new g(Zo);const u=this.un(t,e);if(null==u)return o;const d=go(t);if(null!=d){const m=e.data.field(d.fieldPath);if(sa(m))for(const T of m.arrayValue.values||[])o=o.add(new sl(t.indexId,e.key,this.sn(T),u))}else o=o.add(new sl(t.indexId,e.key,Lh,u));return o}_n(e,t,o,u,d){bt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(T,F,H,te,De){const Ge=T.getIterator(),It=F.getIterator();let Ht=k(Ge),fn=k(It);for(;Ht||fn;){let An=!1,ti=!1;if(Ht&&fn){const zi=H(Ht,fn);zi<0?ti=!0:zi>0&&(An=!0)}else null!=Ht?ti=!0:An=!0;An?(te(fn),fn=k(It)):ti?(De(Ht),Ht=k(Ge)):(Ht=k(Ge),fn=k(It))}}(u,d,Zo,T=>{m.push(this.mn(e,t,o,T))},T=>{m.push(this.gn(e,t,o,T))}),rt.waitFor(m)}fn(e){let t=1;return Ec(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((m,T)=>Zo(m,T)).filter((m,T,F)=>!T||0!==Zo(m,F[T-1]));const u=[];u.push(e);for(const m of o){const T=Zo(m,e),F=Zo(m,t);if(0===T)u[0]=e.qe();else if(T>0&&F<0)u.push(m),u.push(m.qe());else if(F>0)break}u.push(t);const d=[];for(let m=0;m<u.length;m+=2){if(this.yn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Lh,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Lh,[]]))}return d}yn(e,t){return Zo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rg)}getMinOffset(e,t){return rt.mapArray(this.Ze(t),o=>this.Xe(e,o).next(u=>u||Qt())).next(Rg)}}function Pg(i){return Ei(i,"collectionParents")}function Vl(i){return Ei(i,"indexEntries")}function Uh(i){return Ei(i,"indexConfiguration")}function Ec(i){return Ei(i,"indexState")}function Rg(i){En(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Fo(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new Li(e.readTime,e.documentKey,t)}const Zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kg(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],m=IDBKeyRange.only(t.batchId);let T=0;const F=o.Z({range:m},(te,De,Ge)=>(T++,Ge.delete()));d.push(F.next(()=>{En(1===T)}));const H=[];for(const te of t.mutations){const De=Xl(e,te.key.path,t.batchId);d.push(u.delete(De)),H.push(te.key)}return rt.waitFor(d).next(()=>H)}function ul(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Qt();e=i.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class Vh{constructor(e,t,o,u){this.userId=e,this.serializer=t,this.indexManager=o,this.referenceDelegate=u,this.pn={}}static ie(e,t,o,u){En(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Vh(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).Z({index:"userMutationsIndex",range:o},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=bc(e),m=Ma(e);return m.add({}).next(T=>{En("number"==typeof T);const F=new eu(T,t,o,u),H=function(Ge,It,Ht){const fn=Ht.baseMutations.map(ti=>xl(Ge.se,ti)),An=Ht.mutations.map(ti=>xl(Ge.se,ti));return{userId:It,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:fn,mutations:An}}(this.serializer,this.userId,F),te=[];let De=new g((Ge,It)=>ln(Ge.canonicalString(),It.canonicalString()));for(const Ge of u){const It=Xl(this.userId,Ge.key.path,T);De=De.add(Ge.key.path.popLast()),te.push(m.put(H)),te.push(d.put(It,ec))}return De.forEach(Ge=>{te.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.pn[T]=F.keys()}),rt.waitFor(te).next(()=>F)})}lookupMutationBatch(e,t){return Ma(e).get(t).next(o=>o?(En(o.userId===this.userId),Ll(this.serializer,o)):null)}In(e,t){return this.pn[t]?rt.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.pn[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ma(e).Z({index:"userMutationsIndex",range:u},(m,T,F)=>{T.userId===this.userId&&(En(T.batchId>=o),d=Ll(this.serializer,T)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ma(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).j("userMutationsIndex",t).next(o=>o.map(u=>Ll(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=zo(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return bc(e).Z({range:u},(m,T,F)=>{const[H,te,De]=m,Ge=Qi(te);if(H===this.userId&&t.path.isEqual(Ge))return Ma(e).get(De).next(It=>{if(!It)throw Qt();En(It.userId===this.userId),d.push(Ll(this.serializer,It))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new g(ln);const u=[];return t.forEach(d=>{const m=zo(this.userId,d.path),T=IDBKeyRange.lowerBound(m),F=bc(e).Z({range:T},(H,te,De)=>{const[Ge,It,Ht]=H,fn=Qi(It);Ge===this.userId&&d.path.isEqual(fn)?o=o.add(Ht):De.done()});u.push(F)}),rt.waitFor(u).next(()=>this.Tn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=zo(this.userId,o),m=IDBKeyRange.lowerBound(d);let T=new g(ln);return bc(e).Z({range:m},(F,H,te)=>{const[De,Ge,It]=F,Ht=Qi(Ge);De===this.userId&&o.isPrefixOf(Ht)?Ht.length===u&&(T=T.add(It)):te.done()}).next(()=>this.Tn(e,T))}Tn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Ma(e).get(d).next(m=>{if(null===m)throw Qt();En(m.userId===this.userId),o.push(Ll(this.serializer,m))}))}),rt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return kg(e.at,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),rt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return rt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return bc(e).Z({range:o},(d,m,T)=>{if(d[0]===this.userId){const F=Qi(d[1]);u.push(F)}else T.done()}).next(()=>{En(0===u.length)})})}containsKey(e,t){return Bl(e,this.userId,t)}An(e){return Yf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bl(i,e,t){const o=zo(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return bc(i).Z({range:d,Y:!0},(T,F,H)=>{const[te,De,Ge]=T;te===e&&De===u&&(m=!0),H.done()}).next(()=>m)}function Ma(i){return Ei(i,"mutations")}function bc(i){return Ei(i,"documentMutations")}function Yf(i){return Ei(i,"mutationQueues")}class $l{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new $l(0)}static bn(){return new $l(-1)}}class vy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const o=new $l(t.highestTargetId);return t.highestTargetId=o.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>cn.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Vn(e,u)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(o=>(o.targetCount+=1,this.Dn(t,o),this.Vn(e,o))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ic(e).delete(t.targetId)).next(()=>this.Pn(e)).next(o=>(En(o.targetCount>0),o.targetCount-=1,this.Vn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Ic(e).Z((m,T)=>{const F=_c(T);F.sequenceNumber<=t&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(e,F)))}).next(()=>rt.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Ic(e).Z((o,u)=>{const d=_c(u);t(d)})}Pn(e){return Qf(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}Vn(e,t){return Qf(e).put("targetGlobalKey",t)}Sn(e,t){return Ic(e).put(py(this.serializer,t))}Dn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=hu(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Ic(e).Z({range:u,index:"queryTargetsIndex"},(m,T,F)=>{const H=_c(T);Ds(t,H.target)&&(d=H,F.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=bu(e);return t.forEach(m=>{const T=Qr(m.path);u.push(d.put({targetId:o,path:T})),u.push(this.referenceDelegate.addReference(e,o,m))}),rt.waitFor(u)}removeMatchingKeys(e,t,o){const u=bu(e);return rt.forEach(t,d=>{const m=Qr(d.path);return rt.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=bu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=bu(e);let d=cr();return u.Z({range:o,Y:!0},(m,T,F)=>{const H=Qi(m[1]),te=new qt(H);d=d.add(te)}).next(()=>d)}containsKey(e,t){const o=Qr(t.path),u=IDBKeyRange.bound([o],[po(o)],!1,!0);let d=0;return bu(e).Z({index:"documentTargetsIndex",Y:!0,range:u},([m,T],F,H)=>{0!==m&&(d++,H.done())}).next(()=>d>0)}ne(e,t){return Ic(e).get(t).next(o=>o?_c(o):null)}}function Ic(i){return Ei(i,"targets")}function Qf(i){return Ei(i,"targetGlobal")}function bu(i){return Ei(i,"targetDocuments")}function Bh([i,e],[t,o]){const u=ln(i,t);return 0===u?ln(e,o):u}class Jf{constructor(e){this.Cn=e,this.buffer=new g(Bh),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Bh(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wy{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;bt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,h.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Zi(o)?bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield So(o)}yield t.$n(3e5)}))}}class Xf{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return rt.resolve(Ri.ct);const o=new Jf(t);return this.Mn.forEachTarget(e,u=>o.kn(u.sequenceNumber)).next(()=>this.Mn.Bn(e,u=>o.kn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Mn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(Zf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zf):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let o,u,d,m,T,F,H;const te=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(De=>(De>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${De}`),u=this.params.maximumSequenceNumbersToCollect):u=De,m=Date.now(),this.nthSequenceNumber(e,u))).next(De=>(o=De,T=Date.now(),this.removeTargets(e,o,t))).next(De=>(d=De,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(De=>(H=Date.now(),pi()<=q.in.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-te}ms\n\tDetermined least recently used ${u} in `+(T-m)+`ms\n\tRemoved ${d} targets in `+(F-T)+`ms\n\tRemoved ${De} documents in `+(H-F)+`ms\nTotal Duration: ${H-te}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:De})))}}class Dd{constructor(e,t){this.db=e,this.garbageCollector=new Xf(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Bn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(o,u)=>t(u))}addReference(e,t,o){return $h(e,o)}removeReference(e,t,o){return $h(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return $h(e,t)}Kn(e,t){return function(o,u){let d=!1;return Yf(o).X(m=>Bl(o,m,u).next(T=>(T&&(d=!0),rt.resolve(!T)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Un(e,(m,T)=>{if(T<=t){const F=this.Kn(e,m).next(H=>{if(!H)return d++,o.getEntry(e,m).next(()=>(o.removeEntry(m,cn.min()),bu(e).delete([0,Qr(m.path)])))});u.push(F)}}).next(()=>rt.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return $h(e,t)}Un(e,t){const o=bu(e);let u,d=Ri.ct;return o.Z({index:"documentTargetsIndex"},([m,T],{path:F,sequenceNumber:H})=>{0===m?(d!==Ri.ct&&t(new qt(Qi(u)),d),d=H,u=F):d=Ri.ct}).next(()=>{d!==Ri.ct&&t(new qt(Qi(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $h(i,e){return bu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Qr(e.path),sequenceNumber:o}));var o}class Ng{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?rt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return jl(e).put(o)}removeEntry(e,t,o){return jl(e).delete(function(u,d){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ph(d),m[m.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Gn(e,o)))}getEntry(e,t){let o=bi.newInvalidDocument(t);return jl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ru(t))},(u,d)=>{o=this.Qn(t,d)}).next(()=>o)}zn(e,t){let o={size:0,document:bi.newInvalidDocument(t)};return jl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ru(t))},(u,d)=>{o={document:this.Qn(t,d),size:ul(d)}}).next(()=>o)}getEntries(e,t){let o=Ts();return this.jn(e,t,(u,d)=>{const m=this.Qn(u,d);o=o.insert(u,m)}).next(()=>o)}Wn(e,t){let o=Ts(),u=new Mr(qt.comparator);return this.jn(e,t,(d,m)=>{const T=this.Qn(d,m);o=o.insert(d,T),u=u.insert(d,ul(m))}).next(()=>({documents:o,Hn:u}))}jn(e,t,o){if(t.isEmpty())return rt.resolve();let u=new g(Ug);t.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(ru(u.first()),ru(u.last())),m=u.getIterator();let T=m.getNext();return jl(e).Z({index:"documentKeyIndex",range:d},(F,H,te)=>{const De=qt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;T&&Ug(T,De)<0;)o(T,null),T=m.getNext();T&&T.isEqual(De)&&(o(T,H),T=m.hasNext()?m.getNext():null),T?te.G(ru(T)):te.done()}).next(()=>{for(;T;)o(T,null),T=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(e,t,o,u){const d=t.path,m=[d.popLast().toArray(),d.lastSegment(),Ph(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],T=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jl(e).j(IDBKeyRange.bound(m,T,!0)).next(F=>{let H=Ts();for(const te of F){const De=this.Qn(qt.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);De.isFoundDocument()&&($a(t,De)||u.has(De.key))&&(H=H.insert(De.key,De))}return H})}getAllFromCollectionGroup(e,t,o,u){let d=Ts();const m=iu(t,o),T=iu(t,Li.max());return jl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,T,!0)},(F,H,te)=>{const De=this.Qn(qt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(De.key,De),d.size===u&&te.done()}).next(()=>d)}newChangeBuffer(e){return new Ey(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Lg(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}Gn(e,t){return Lg(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const o=function $f(i,e){let t;if(e.document)t=tl(i.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=qt.fromSegments(e.noDocument.path),u=Fl(e.noDocument.readTime);t=bi.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const o=qt.fromSegments(e.unknownDocument.path),u=Fl(e.unknownDocument.version);t=bi.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new On(o[0],o[1]);return cn.fromTimestamp(u)}(e.readTime)),t}(this.serializer,t);if(!o.isNoDocument()||!o.version.isEqual(cn.min()))return o}return bi.newInvalidDocument(e)}}function Fg(i){return new Cy(i)}class Ey extends Ng{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Wo(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new g((d,m)=>ln(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const T=this.Yn.get(d);if(t.push(this.Jn.removeEntry(e,d,T.readTime)),m.isValidDocument()){const F=jf(this.Jn.serializer,m);u=u.add(d.path.popLast());const H=ul(F);o+=H-T.size,t.push(this.Jn.addEntry(e,d,F))}else if(o-=T.size,this.trackRemovals){const F=jf(this.Jn.serializer,m.convertToNoDocument(cn.min()));t.push(this.Jn.addEntry(e,d,F))}}),u.forEach(d=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Jn.updateMetadata(e,o)),rt.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(o=>(this.Yn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:o,Hn:u})=>(u.forEach((d,m)=>{this.Yn.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function Lg(i){return Ei(i,"remoteDocumentGlobal")}function jl(i){return Ei(i,"remoteDocumentsV14")}function ru(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iu(i,e){const t=e.documentKey.path.toArray();return[i,Ph(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ug(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=ln(t[d],o[d]),u)return u;return u=ln(t.length,o.length),u||(u=ln(t[t.length-2],o[o.length-2]),u||ln(t[t.length-1],o[o.length-1]))}class by{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Iy{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==o&&Ha(o.mutation,u,K.empty(),On.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,cr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=cr()){const u=Oo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let m=Gu();return d.forEach((T,F)=>{m=m.insert(T,F.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const o=Oo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,cr()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((m,T)=>{t.set(m,T)})})}computeViews(e,t,o,u){let d=Ts();const m=Ml(),T=Ml();return t.forEach((F,H)=>{const te=o.get(H.key);u.has(H.key)&&(void 0===te||te.mutation instanceof Ko)?d=d.insert(H.key,H):void 0!==te?(m.set(H.key,te.mutation.getFieldMask()),Ha(te.mutation,H,te.mutation.getFieldMask(),On.now())):m.set(H.key,K.empty())}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((H,te)=>m.set(H,te)),t.forEach((H,te)=>{var De;return T.set(H,new by(te,null!==(De=m.get(H))&&void 0!==De?De:null))}),T))}recalculateAndSaveOverlays(e,t){const o=Ml();let u=new Mr((m,T)=>m-T),d=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const T of m)T.keys().forEach(F=>{const H=t.get(F);if(null===H)return;let te=o.get(F)||K.empty();te=T.applyToLocalView(H,te),o.set(F,te);const De=(u.get(T.batchId)||cr()).add(F);u=u.insert(T.batchId,De)})}).next(()=>{const m=[],T=u.getReverseIterator();for(;T.hasNext();){const F=T.getNext(),H=F.key,te=F.value,De=vh();te.forEach(Ge=>{if(!d.has(Ge)){const It=gd(t.get(Ge),o.get(Ge));null!==It&&De.set(Ge,It),d=d.add(Ge)}}),m.push(this.documentOverlayCache.saveOverlays(e,H,De))}return rt.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return qt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):rt.resolve(Oo());let T=-1,F=d;return m.next(H=>rt.forEach(H,(te,De)=>(T<De.largestBatchId&&(T=De.largestBatchId),d.get(te)?rt.resolve():this.remoteDocumentCache.getEntry(e,te).next(Ge=>{F=F.insert(te,Ge)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,F,H,cr())).next(te=>({batchId:T,changes:_h(te)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(o=>{let u=Gu();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Gu();return this.indexManager.getCollectionParents(e,u).next(m=>rt.forEach(m,T=>{const F=(H=t,te=T.child(u),new _o(te,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,te;return this.getDocumentsMatchingCollectionQuery(e,F,o).next(H=>{H.forEach((te,De)=>{d=d.insert(te,De)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,u))).next(d=>{u.forEach((T,F)=>{const H=F.getKey();null===d.get(H)&&(d=d.insert(H,bi.newInvalidDocument(H)))});let m=Gu();return d.forEach((T,F)=>{const H=u.get(T);void 0!==H&&Ha(H.mutation,F,K.empty(),On.now()),$a(t,F)&&(m=m.insert(T,F))}),m})}}class pv{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return rt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:V(o.createTime)}),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(o=t).name,query:Tg(o.bundledQuery),readTime:V(o.readTime)}),rt.resolve();var o}}class Vg{constructor(){this.overlays=new Mr(qt.comparator),this.ts=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Oo();return rt.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.re(e,t,d)}),rt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.ts.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.ts.delete(o)),rt.resolve()}getOverlaysForCollection(e,t,o){const u=Oo(),d=t.length+1,m=new qt(t.child("")),T=this.overlays.getIteratorFrom(m);for(;T.hasNext();){const F=T.getNext().value,H=F.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return rt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Mr((H,te)=>H-te);const m=this.overlays.getIterator();for(;m.hasNext();){const H=m.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let te=d.get(H.largestBatchId);null===te&&(te=Oo(),d=d.insert(H.largestBatchId,te)),te.set(H.getKey(),H)}}const T=Oo(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((H,te)=>T.set(H,te)),!(T.size()>=u)););return rt.resolve(T)}re(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.ts.get(u.largestBatchId).delete(o.key);this.ts.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new tu(t,o));let d=this.ts.get(t);void 0===d&&(d=cr(),this.ts.set(t,d)),this.ts.set(t,d.add(o.key))}}class Bg{constructor(){this.es=new g(Ws.ns),this.ss=new g(Ws.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const o=new Ws(e,t);this.es=this.es.add(o),this.ss=this.ss.add(o)}os(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.us(new Ws(e,t))}cs(e,t){e.forEach(o=>this.removeReference(o,t))}hs(e){const t=new qt(new tr([])),o=new Ws(t,e),u=new Ws(t,e+1),d=[];return this.ss.forEachInRange([o,u],m=>{this.us(m),d.push(m.key)}),d}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new qt(new tr([])),o=new Ws(t,e),u=new Ws(t,e+1);let d=cr();return this.ss.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new Ws(e,0),o=this.es.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Ws{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return qt.comparator(e.key,t.key)||ln(e.ds,t.ds)}static rs(e,t){return ln(e.ds,t.ds)||qt.comparator(e.key,t.key)}}class $g{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new g(Ws.ns)}checkEmpty(e){return rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const m=new eu(d,t,o,u);this.mutationQueue.push(m);for(const T of u)this._s=this._s.add(new Ws(T.key,d)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return rt.resolve(m)}lookupMutationBatch(e,t){return rt.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ys(t+1),d=u<0?0:u;return rt.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ws(t,0),u=new Ws(t,Number.POSITIVE_INFINITY),d=[];return this._s.forEachInRange([o,u],m=>{const T=this.gs(m.ds);d.push(T)}),rt.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new g(ln);return t.forEach(u=>{const d=new Ws(u,0),m=new Ws(u,Number.POSITIVE_INFINITY);this._s.forEachInRange([d,m],T=>{o=o.add(T.ds)})}),rt.resolve(this.ps(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;qt.isDocumentKey(d)||(d=d.child(""));const m=new Ws(new qt(d),0);let T=new g(ln);return this._s.forEachWhile(F=>{const H=F.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(T=T.add(F.ds)),!0)},m),rt.resolve(this.ps(T))}ps(e){const t=[];return e.forEach(o=>{const u=this.gs(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){En(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let o=this._s;return rt.forEach(t.mutations,u=>{const d=new Ws(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this._s=o})}En(e){}containsKey(e,t){const o=new Ws(t,0),u=this._s.firstAfterOrEqual(o);return rt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return rt.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Dy{constructor(e){this.Ts=e,this.docs=new Mr(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return rt.resolve(o?o.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let o=Ts();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():bi.newInvalidDocument(u))}),rt.resolve(o)}getDocumentsMatchingQuery(e,t,o,u){let d=Ts();const m=t.path,T=new qt(m.child("")),F=this.docs.getIteratorFrom(T);for(;F.hasNext();){const{key:H,value:{document:te}}=F.getNext();if(!m.isPrefixOf(H.path))break;H.path.length>m.length+1||Fo(ya(te),o)<=0||(u.has(te.key)||$a(t,te))&&(d=d.insert(te.key,te.mutableCopy()))}return rt.resolve(d)}getAllFromCollectionGroup(e,t,o,u){Qt()}Es(e,t){return rt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new jg(this)}getSize(e){return rt.resolve(this.size)}}class jg extends Ng{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Jn.addEntry(e,u)):this.Jn.removeEntry(o)}),rt.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class Ty{constructor(e){this.persistence=e,this.As=new Wo(t=>hu(t),Ds),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Bg,this.targetCount=0,this.bs=$l.vn()}forEachTarget(e,t){return this.As.forEach((o,u)=>t(u)),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Rs&&(this.Rs=t),rt.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new $l(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.Sn(t),rt.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.As.forEach((m,T)=>{T.sequenceNumber<=t&&null===o.get(T.targetId)&&(this.As.delete(m),d.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),rt.waitFor(d).next(()=>u)}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){const o=this.As.get(t)||null;return rt.resolve(o)}addMatchingKeys(e,t,o){return this.vs.os(t,o),rt.resolve()}removeMatchingKeys(e,t,o){this.vs.cs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),rt.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),rt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.vs.fs(t);return rt.resolve(o)}containsKey(e,t){return rt.resolve(this.vs.containsKey(t))}}class Hg{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Ri(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new Ty(this),this.indexManager=new xg,this.remoteDocumentCache=new Dy(o=>this.referenceDelegate.Cs(o)),this.serializer=new Dg(t),this.xs=new pv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ps[e.toKey()];return o||(o=new $g(t,this.referenceDelegate),this.Ps[e.toKey()]=o),o}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,o){bt("MemoryPersistence","Starting transaction:",e);const u=new Ga(this.Vs.next());return this.referenceDelegate.Ns(),o(u).next(d=>this.referenceDelegate.ks(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Os(e,t){return rt.or(Object.values(this.Ps).map(o=>()=>o.containsKey(e,t)))}}class Ga extends _a{constructor(e){super(),this.currentSequenceNumber=e}}class jh{constructor(e){this.persistence=e,this.$s=new Bg,this.Ms=null}static Fs(e){return new jh(e)}get Bs(){if(this.Ms)return this.Ms;throw Qt()}addReference(e,t,o){return this.$s.addReference(o,t),this.Bs.delete(o.toString()),rt.resolve()}removeReference(e,t,o){return this.$s.removeReference(o,t),this.Bs.add(o.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),rt.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(u=>this.Bs.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Bs.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Bs,o=>{const u=qt.fromPath(o);return this.Ls(e,u).next(d=>{d||t.removeEntry(u,cn.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(o=>{o?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return rt.or([()=>rt.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class zg{constructor(e){this.serializer=e}M(e,t,o,u){const d=new ro("createOrUpgrade",t);var T;o<1&&u>=1&&(e.createObjectStore("owner"),(T=e).createObjectStore("mutationQueues",{keyPath:"userId"}),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Na,{unique:!0}),T.createObjectStore("documentMutations"),Gg(e),function(T){T.createObjectStore("remoteDocuments")}(e));let m=rt.resolve();return o<3&&u>=3&&(0!==o&&(function(T){T.deleteObjectStore("targetDocuments"),T.deleteObjectStore("targets"),T.deleteObjectStore("targetGlobal")}(e),Gg(e)),m=m.next(()=>function(T){const F=T.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cn.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",H)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(T,F){return F.store("mutations").j().next(H=>{T.deleteObjectStore("mutations"),T.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Na,{unique:!0});const te=F.store("mutations"),De=H.map(Ge=>te.put(Ge));return rt.waitFor(De)})}(e,d))),m=m.next(()=>{!function(T){T.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.qs(d))),o<6&&u>=6&&(m=m.next(()=>(function(T){T.createObjectStore("remoteDocumentGlobal")}(e),this.Us(d)))),o<7&&u>=7&&(m=m.next(()=>this.Ks(d))),o<8&&u>=8&&(m=m.next(()=>this.Gs(e,d))),o<9&&u>=9&&(m=m.next(()=>{!function(T){T.objectStoreNames.contains("remoteDocumentChanges")&&T.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.Qs(d))),o<11&&u>=11&&(m=m.next(()=>{(function(T){T.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(T){T.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(T){const F=T.createObjectStore("documentOverlays",{keyPath:di});F.createIndex("collectionPathOverlayIndex",La,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",Ao,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(T){const F=T.createObjectStore("remoteDocumentsV14",{keyPath:ei});F.createIndex("documentKeyIndex",Lu),F.createIndex("collectionGroupIndex",Fa)}(e)).next(()=>this.zs(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.js(e,d))),o<15&&u>=15&&(m=m.next(()=>function(T){T.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),T.createObjectStore("indexState",{keyPath:rc}).createIndex("sequenceNumberIndex",ba,{unique:!1}),T.createObjectStore("indexEntries",{keyPath:bl}).createIndex("documentKeyIndex",Il,{unique:!1})}(e))),m}Us(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=ul(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.j().next(u=>rt.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.j("userMutationsIndex",m).next(T=>rt.forEach(T,F=>{En(F.userId===d.userId);const H=Ll(this.serializer,F);return kg(e,d.userId,H).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((m,T)=>{const F=new tr(m),H=[0,Qr(F)];d.push(t.get(H).next(te=>te?rt.resolve():t.put({targetId:0,path:Qr(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>rt.waitFor(d))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:cu});const o=t.store("collectionParents"),u=new al,d=m=>{if(u.add(m)){const T=m.lastSegment(),F=m.popLast();return o.put({collectionId:T,parent:Qr(F)})}};return t.store("remoteDocuments").Z({Y:!0},(m,T)=>{const F=new tr(m);return d(F.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([m,T,F],H)=>{const te=Qi(T);return d(te.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((o,u)=>{const d=_c(u),m=py(this.serializer,d);return t.put(m)})}zs(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,m)=>{const T=t.store("remoteDocumentsV14"),F=(H=m,H.document?new qt(tr.fromString(H.document.name).popFirst(5)):H.noDocument?qt.fromSegments(H.noDocument.path):H.unknownDocument?qt.fromSegments(H.unknownDocument.path):Qt()).path.toArray();var H;const te={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(T.put(te))}).next(()=>rt.waitFor(u))}js(e,t){const o=t.store("mutations"),u=Fg(this.serializer),d=new Hg(jh.Fs,this.serializer.se);return o.j().next(m=>{const T=new Map;return m.forEach(F=>{var H;let te=null!==(H=T.get(F.userId))&&void 0!==H?H:cr();Ll(this.serializer,F).keys().forEach(De=>te=te.add(De)),T.set(F.userId,te)}),rt.forEach(T,(F,H)=>{const te=new ci(H),De=kh.ie(this.serializer,te),Ge=d.getIndexManager(te),It=Vh.ie(te,this.serializer,Ge,d.referenceDelegate);return new Iy(u,It,De,Ge).recalculateAndSaveOverlaysForDocumentKeys(new mo(t,Ri.ct),F).next()})})}}function Gg(i){i.createObjectStore("targetDocuments",{keyPath:Uu}).createIndex("documentTargetsIndex",nc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tc,{unique:!0}),i.createObjectStore("targetGlobal")}const ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tp{constructor(e,t,o,u,d,m,T,F,H,te,De=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Ws=d,this.window=m,this.document=T,this.Hs=H,this.Js=te,this.Ys=De,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=Ge=>Promise.resolve(),!tp.D())throw new b(st.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dd(this,u),this.si=t+"main",this.serializer=new Dg(F),this.ii=new io(this.si,this.Ys,new zg(this.serializer)),this.Ds=new vy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Fg(this.serializer),this.xs=new Sg,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===te&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new b(st.FAILED_PRECONDITION,ep);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Ri(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var o=(0,h.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,h.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,h.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Zi(e))return bt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return bt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Td(e).get("owner").next(t=>rt.resolve(this._i(t)))}mi(e){return Sd(e).delete(this.clientId)}gi(){var e=this;return(0,h.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Ei(o,"clientMetadata");return u.j().next(d=>{const m=e.pi(d,18e5),T=d.filter(F=>-1===m.indexOf(F));return rt.forEach(T,F=>u.delete(F.clientId)).next(()=>T)})}).catch(()=>[]);if(e.ri)for(const o of t)e.ri.removeItem(e.Ii(o.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?rt.resolve(!0):Td(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new b(st.FAILED_PRECONDITION,ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sd(e).j().next(o=>void 0===this.pi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(t=>(this.isPrimary!==t&&bt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,h.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new mo(t,Ri.ct);return e.di(o).next(()=>e.mi(o))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(o=>this.yi(o.updateTimeMs,t)&&!this.Ti(o.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Sd(e).j().next(t=>this.pi(t,18e5).map(o=>o.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Vh.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _y(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return kh.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,o){bt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(m=this.Ys)?Ia:14===m?Ua:13===m?Mo:12===m?ls:11===m?Go:void Qt();var m;let T;return this.ii.runTransaction(e,u,d,F=>(T=new mo(F,this.Vs?this.Vs.next():Ri.ct),"readwrite-primary"===t?this.li(T).next(H=>!!H||this.fi(T)).next(H=>{if(!H)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new b(st.FAILED_PRECONDITION,ta);return o(T)}).next(H=>this.wi(T).next(()=>H)):this.Pi(T).next(()=>o(T)))).then(F=>(T.raiseOnCommittedEvent(),F))}Pi(e){return Td(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new b(st.FAILED_PRECONDITION,ep)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Td(e).put("owner",t)}static D(){return io.D()}di(e){const t=Td(e);return t.get("owner").next(o=>this._i(o)?(bt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):rt.resolve())}yi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Rr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,ge.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const o=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return bt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Rr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Td(i){return Ei(i,"owner")}function Sd(i){return Ei(i,"clientMetadata")}function np(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class rp{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Vi=o,this.Si=u}static Di(e,t){let o=cr(),u=cr();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new rp(e,t.fromCache,o,u)}}class Wg{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,o,u){return this.Ni(e,t).next(d=>d||this.ki(e,t,u,o)).next(d=>d||this.Oi(e,t))}Ni(e,t){if(ud(t))return rt.resolve(null);let o=oo(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=Al(t,null,"F"),o=oo(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const m=cr(...d);return this.xi.getDocuments(e,m).next(T=>this.indexManager.getMinOffset(e,o).next(F=>{const H=this.$i(t,T);return this.Mi(t,H,m,F.readTime)?this.Ni(e,Al(t,null,"F")):this.Fi(e,H,t,F)}))})))}ki(e,t,o,u){return ud(t)||u.isEqual(cn.min())?this.Oi(e,t):this.xi.getDocuments(e,o).next(d=>{const m=this.$i(t,d);return this.Mi(t,m,o,u)?this.Oi(e,t):(pi()<=q.in.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ba(t)),this.Fi(e,m,t,ma(u,-1)))})}$i(e,t){let o=new g(hc(e));return t.forEach((u,d)=>{$a(e,d)&&(o=o.add(d))}),o}Mi(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Oi(e,t){return pi()<=q.in.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Ba(t)),this.xi.getDocumentsMatchingQuery(e,t,Li.min())}Fi(e,t,o,u){return this.xi.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(m=>{d=d.insert(m.key,m)}),d))}}class dr{constructor(e,t,o,u){this.persistence=e,this.Bi=t,this.serializer=u,this.Li=new Mr(ln),this.qi=new Wo(d=>hu(d),Ds),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(o)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iy(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function ip(i,e,t,o){return new dr(i,e,t,o)}function sp(i,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,h.Z)(function*(i,e){const t=Jt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Gi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],T=[];let F=cr();for(const H of u){m.push(H.batchId);for(const te of H.mutations)F=F.add(te.key)}for(const H of d){T.push(H.batchId);for(const te of H.mutations)F=F.add(te.key)}return t.localDocuments.getDocuments(o,F).next(H=>({Qi:H,removedBatchIds:m,addedBatchIds:T}))})})}),Hh.apply(this,arguments)}function qg(i){const e=Jt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function Zg(i,e,t){let o=cr(),u=cr();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=Ts();return t.forEach((T,F)=>{const H=d.get(T);F.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(T)),F.isNoDocument()&&F.version.isEqual(cn.min())?(e.removeEntry(T,F.readTime),m=m.insert(T,F)):!H.isValidDocument()||F.version.compareTo(H.version)>0||0===F.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(F),m=m.insert(T,F)):bt("LocalStore","Ignoring outdated watch update for ",T,". Current version:",H.version," Watch version:",F.version)}),{zi:m,ji:u}})}function Yg(i,e){const t=Jt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Dc(i,e){const t=Jt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Ds.getTargetData(o,e).next(d=>d?(u=d,rt.resolve(u)):t.Ds.allocateTargetId(o).next(m=>(u=new rl(e,m,0,o.currentSequenceNumber),t.Ds.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Li.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Li=t.Li.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Tc(i,e,t){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,h.Z)(function*(i,e,t){const o=Jt(i),u=o.Li.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Zi(m))throw m;bt("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.Li=o.Li.remove(e),o.qi.delete(u.target)}),Qg.apply(this,arguments)}function Ad(i,e,t){const o=Jt(i);let u=cn.min(),d=cr();return o.persistence.runTransaction("Execute query","readonly",m=>function(T,F,H){const te=Jt(T),De=te.qi.get(H);return void 0!==De?rt.resolve(te.Li.get(De)):te.Ds.getTargetData(F,H)}(o,m,oo(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,o.Ds.getMatchingKeysForTargetId(m,T.targetId).next(F=>{d=F})}).next(()=>o.Bi.getDocumentsMatchingQuery(m,e,t?u:cn.min(),t?d:cr())).next(T=>(Jg(o,mh(e),T),{documents:T,Wi:d})))}function op(i,e){const t=Jt(i),o=Jt(t.Ds),u=t.Li.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.ne(d,e).next(m=>m?m.target:null))}function ll(i,e){const t=Jt(i),o=t.Ui.get(e)||cn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Ki.getAllFromCollectionGroup(u,e,ma(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jg(t,e,u),u))}function Jg(i,e,t){let o=i.Ui.get(e)||cn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ui.set(e,o)}function Md(){return Md=(0,h.Z)(function*(i,e,t,o){const u=Jt(i);let d=cr(),m=Ts();for(const H of t){const te=e.Hi(H.metadata.name);H.document&&(d=d.add(te));const De=e.Ji(H);De.setReadTime(e.Yi(H.metadata.readTime)),m=m.insert(te,De)}const T=u.Ki.newChangeBuffer({trackRemovals:!0}),F=yield Dc(u,(H=o,oo(Ta(tr.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>Zg(H,T,m).next(te=>(T.apply(H),te)).next(te=>u.Ds.removeMatchingKeysForTargetId(H,F.targetId).next(()=>u.Ds.addMatchingKeys(H,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,te.zi,te.ji)).next(()=>te.zi)))}),Md.apply(this,arguments)}function Ay(i,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,h.Z)(function*(i,e,t=cr()){const o=yield Dc(i,oo(Tg(e.bundledQuery))),u=Jt(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=V(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.xs.saveNamedQuery(d,e);const T=o.withResumeToken(ot.EMPTY_BYTE_STRING,m);return u.Li=u.Li.insert(T.targetId,T),u.Ds.updateTargetData(d,T).next(()=>u.Ds.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ds.addMatchingKeys(d,t,o.targetId)).next(()=>u.xs.saveNamedQuery(d,e))})}),Xg.apply(this,arguments)}function My(i,e){return`firestore_clients_${i}_${e}`}function Oy(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function up(i,e){return`firestore_targets_${i}_${e}`}class Od{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new b(u.error.code,u.error.message))),m?new Od(e,t,u.state,d):(Rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new b(o.error.code,o.error.message))),d?new zh(e,o.state,u):(Rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=mu();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Ya(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Gh(e,d):(Rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cl{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cl(t.clientId,t.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lp{constructor(){this.activeTargetIds=mu()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wh{constructor(e,t,o,u,d){this.window=e,this.Ws=t,this.persistenceKey=o,this.nr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Mr(ln),this.started=!1,this.ur=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.cr=My(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new lp),this.hr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(T){return`firestore_bundle_loaded_v2_${T}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,h.Z)(function*(){const t=yield e.syncEngine.bi();for(const u of t){if(u===e.nr)continue;const d=e.getItem(My(e.persistenceKey,u));if(d){const m=Gh.Zi(u,d);m&&(e.rr=e.rr.insert(m.clientId,m))}}e.mr();const o=e.storage.getItem(e.wr);if(o){const u=e.gr(o);u&&e.yr(u)}for(const u of e.ur)e.ir(u);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,o){this.Ir(e,t,o),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(up(this.persistenceKey,e));if(o){const u=zh.Zi(e,o);u&&(t=u.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(up(this.persistenceKey,e))}updateQueryState(e,t,o){this.Ar(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Tr(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return bt("SharedClientState","READ",e,t),t}setItem(e,t){bt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){bt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const o=e;if(o.storageArea===this.storage){if(bt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.cr)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,h.Z)(function*(){if(t.started){if(null!==o.key)if(t.hr.test(o.key)){if(null==o.newValue){const u=t.br(o.key);return t.Pr(u,null)}{const u=t.Vr(o.key,o.newValue);if(u)return t.Pr(u.clientId,u)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const u=t.Sr(o.key,o.newValue);if(u)return t.Dr(u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Cr(o.key,o.newValue);if(u)return t.Nr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.gr(o.newValue);if(u)return t.yr(u)}}else if(o.key===t.ar){const u=function(d){let m=Ri.ct;if(null!=d)try{const T=JSON.parse(d);En("number"==typeof T),m=T}catch(T){Rr("SharedClientState","Failed to read sequence number from WebStorage",T)}return m}(o.newValue);u!==Ri.ct&&t.sequenceNumberHandler(u)}else if(o.key===t._r){const u=t.kr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Or(d)))}}else t.ur.push(o)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,o){const u=new Od(this.currentUser,e,t,o),d=Oy(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Xi())}Tr(e){const t=Oy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,o){const u=up(this.persistenceKey,e),d=new zh(e,t,o);this.setItem(u,d.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.br(e);return Gh.Zi(o,t)}Sr(e,t){const o=this.lr.exec(e),u=Number(o[1]);return Od.Zi(new ci(void 0!==o[2]?o[2]:null),u,t)}Cr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return zh.Zi(u,t)}gr(e){return cl.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,h.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);bt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const o=t?this.rr.insert(e,t):this.rr.remove(e),u=this.pr(this.rr),d=this.pr(o),m=[],T=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||T.push(F)}),this.syncEngine.Fr(m,T).then(()=>{this.rr=o})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=mu();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class xd{constructor(){this.Br=new lp,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,o){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new lp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xy{qr(e){}shutdown(){}}class cp{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qh=null;function dp(){return null===qh?qh=268435456+Math.round(2147483648*Math.random()):qh++,"0x"+qh.toString(16)}const Py={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ry{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Po="WebChannelConnection";class em extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,o,u,d){const m=dp(),T=this.ao(e,t);bt("RestConnection",`Sending RPC '${e}' ${m}:`,T,o);const F={};return this.ho(F,u,d),this.lo(e,T,F,o).then(H=>(bt("RestConnection",`Received RPC '${e}' ${m}: `,H),H),H=>{throw Lr("RestConnection",`RPC '${e}' ${m} failed with error: `,H,"url: ",T,"request:",o),H})}fo(e,t,o,u,d,m){return this.co(e,t,o,u,d)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ao(e,t){return`${this.ro}/v1/${t}:${Py[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,u){const d=dp();return new Promise((m,T)=>{const F=new fa;F.setWithCredentials(!0),F.listenOnce(Ru.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case fo.NO_ERROR:const te=F.getResponseJson();bt(Po,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(te)),m(te);break;case fo.TIMEOUT:bt(Po,`RPC '${e}' ${d} timed out`),T(new b(st.DEADLINE_EXCEEDED,"Request time out"));break;case fo.HTTP_ERROR:const De=F.getStatus();if(bt(Po,`RPC '${e}' ${d} failed with status:`,De,"response text:",F.getResponseText()),De>0){let Ge=F.getResponseJson();Array.isArray(Ge)&&(Ge=Ge[0]);const It=Ge?.error;if(It&&It.status&&It.message){const Ht=function(fn){const An=fn.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(An)>=0?An:st.UNKNOWN}(It.status);T(new b(Ht,It.message))}else T(new b(st.UNKNOWN,"Server responded with status "+F.getStatus()))}else T(new b(st.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{bt(Po,`RPC '${e}' ${d} completed.`)}});const H=JSON.stringify(u);bt(Po,`RPC '${e}' ${d} sending request:`,u),F.send(t,"POST",H,o,15)})}wo(e,t,o){const u=dp(),d=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Io(),T=Xo(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(F.xmlHttpFactory=new ku({})),this.ho(F.initMessageHeaders,t,o),F.encodeInitMessageHeaders=!0;const H=d.join("");bt(Po,`Creating RPC '${e}' stream ${u}: ${H}`,F);const te=m.createWebChannel(H,F);let De=!1,Ge=!1;const It=new Ry({Wr:fn=>{Ge?bt(Po,`Not sending because RPC '${e}' stream ${u} is closed:`,fn):(De||(bt(Po,`Opening RPC '${e}' stream ${u} transport.`),te.open(),De=!0),bt(Po,`RPC '${e}' stream ${u} sending:`,fn),te.send(fn))},Hr:()=>te.close()}),Ht=(fn,An,ti)=>{fn.listen(An,zi=>{try{ti(zi)}catch(Wr){setTimeout(()=>{throw Wr},0)}})};return Ht(te,ea.EventType.OPEN,()=>{Ge||bt(Po,`RPC '${e}' stream ${u} transport opened.`)}),Ht(te,ea.EventType.CLOSE,()=>{Ge||(Ge=!0,bt(Po,`RPC '${e}' stream ${u} transport closed`),It.so())}),Ht(te,ea.EventType.ERROR,fn=>{Ge||(Ge=!0,Lr(Po,`RPC '${e}' stream ${u} transport errored:`,fn),It.so(new b(st.UNAVAILABLE,"The operation could not be completed")))}),Ht(te,ea.EventType.MESSAGE,fn=>{var An;if(!Ge){const ti=fn.data[0];En(!!ti);const Wr=ti.error||(null===(An=ti[0])||void 0===An?void 0:An.error);if(Wr){bt(Po,`RPC '${e}' stream ${u} received error:`,Wr);const Yo=Wr.status;let Ls=function(Qo){const wl=Hi[Qo];if(void 0!==wl)return Qu(wl)}(Yo),Gi=Wr.message;void 0===Ls&&(Ls=st.INTERNAL,Gi="Unknown error status: "+Yo+" with message "+Wr.message),Ge=!0,It.so(new b(Ls,Gi)),te.close()}else bt(Po,`RPC '${e}' stream ${u} received:`,ti),It.io(ti)}}),Ht(T,Pa.STAT_EVENT,fn=>{fn.stat===Ra.PROXY?bt(Po,`RPC '${e}' stream ${u} detected buffering proxy`):fn.stat===Ra.NOPROXY&&bt(Po,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{It.no()},0),It}}function tm(){return typeof window<"u"?window:null}function Pd(){return typeof document<"u"?document:null}function Sc(i){return new y(i,!0)}class Rd{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Ws=e,this.timerId=t,this._o=o,this.mo=u,this.yo=d,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,t-o);u>0&&bt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class ky{constructor(e,t,o,u,d,m,T,F){this.Ws=e,this.bo=o,this.Po=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=T,this.listener=F,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Rd(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,h.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,h.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var o=this;return(0,h.Z)(function*(){o.Bo(),o.Lo(),o.Co.cancel(),o.Vo++,4!==e?o.Co.reset():t&&t.code===st.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),o.Co.Eo()):t&&t.code===st.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Vo===t&&this.Ko(o,u)},o=>{e(()=>{const u=new b(st.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Go(u)})})}Ko(e,t){const o=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{o(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(u=>{o(()=>this.Go(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}ko(){var e=this;this.state=5,this.Co.Ao((0,h.Z)(function*(){e.state=0,e.start()}))}Go(e){return bt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hp extends ky{constructor(e,t,o,u,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,m),this.serializer=d}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function Sh(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:Qt(),u=e.targetChange.targetIds||[],d=function(F,H){return F.useProto3Json?(En(void 0===H||"string"==typeof H),ot.fromBase64String(H||"")):(En(void 0===H||H instanceof Uint8Array),ot.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,T=m&&function(F){const H=void 0===F.code?st.UNKNOWN:Qu(F.code);return new b(H,F.message||"")}(m);t=new _d(o,u,d,T||null)}else if("documentChange"in e){const o=e.documentChange,u=jt(i,o.document.name),d=V(o.document.updateTime),m=o.document.createTime?V(o.document.createTime):cn.min(),T=new Gs({mapValue:{fields:o.document.fields}}),F=bi.newFoundDocument(u,d,m,T);t=new Ns(o.targetIds||[],o.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const o=e.documentDelete,u=jt(i,o.document),d=o.readTime?V(o.readTime):cn.min(),m=bi.newNoDocument(u,d);t=new Ns([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=jt(i,o.document);t=new Ns([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Qt();{const o=e.filter,d=new Th(o.count||0);t=new Xu(o.targetId,d)}}var F;return t}(this.serializer,e),o=function(u){if(!("targetChange"in u))return cn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?cn.min():d.readTime?V(d.readTime):cn.min()}(e);return this.listener.zo(t,o)}jo(e){const t={};t.database=Tn(this.serializer),t.addTarget=function(u,d){let m;const T=d.target;return m=Hu(T)?{documents:Ah(u,T)}:{query:wd(u,T)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=f(u,d.resumeToken):d.snapshotVersion.compareTo(cn.min())>0&&(m.readTime=c(u,d.snapshotVersion.toTimestamp())),m}(this.serializer,e);const o=function Mh(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Tn(this.serializer),t.removeTarget=e,this.Fo(t)}}class Ny extends ky{constructor(e,t,o,u,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,m),this.serializer=d,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Pl(i,e){return i&&i.length>0?(En(void 0!==e),i.map(t=>function(o,u){let d=V(o.updateTime?o.updateTime:u);return d.isEqual(cn.min())&&(d=V(u)),new pc(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=V(e.commitTime);return this.listener.Zo(o,t)}return En(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Tn(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>xl(this.serializer,o))};this.Fo(t)}}class gv extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=u,this.eu=!1}nu(){if(this.eu)throw new b(st.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new b(st.UNKNOWN,u.toString())})}fo(e,t,o,u){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.fo(e,t,o,d,m,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new b(st.UNKNOWN,d.toString())})}terminate(){this.eu=!0}}class Fy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Rr(t),this.ru=!1):bt("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class nm{constructor(e,t,o,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=d,this._u.qr(T=>{o.enqueueAndForget((0,h.Z)(function*(){var F;Wa(m)&&(bt("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,h.Z)(function*(H){const te=Jt(H);te.du.add(4),yield Iu(te),te.mu.set("Unknown"),te.du.delete(4),yield kd(te)}),function(H){return F.apply(this,arguments)})(m))}))}),this.mu=new Fy(o,u)}}function kd(i){return fp.apply(this,arguments)}function fp(){return fp=(0,h.Z)(function*(i){if(Wa(i))for(const e of i.wu)yield e(!0)}),fp.apply(this,arguments)}function Iu(i){return dl.apply(this,arguments)}function dl(){return dl=(0,h.Z)(function*(i){for(const e of i.wu)yield e(!1)}),dl.apply(this,arguments)}function Mc(i,e){const t=Jt(i);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Ld(t)?Zh(t):xc(t).No()&&Nd(t,e))}function Du(i,e){const t=Jt(i),o=xc(t);t.fu.delete(e),o.No()&&Fd(t,e),0===t.fu.size&&(o.No()?o.$o():Wa(t)&&t.mu.set("Unknown"))}function Nd(i,e){i.gu.Ot(e.targetId),xc(i).jo(e)}function Fd(i,e){i.gu.Ot(e),xc(i).Wo(e)}function Zh(i){i.gu=new Ff({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.fu.get(e)||null}),xc(i).start(),i.mu.ou()}function Ld(i){return Wa(i)&&!xc(i).xo()&&i.fu.size>0}function Wa(i){return 0===Jt(i).du.size}function Yh(i){i.gu=void 0}function rm(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,h.Z)(function*(i){i.fu.forEach((e,t)=>{Nd(i,e)})}),Ud.apply(this,arguments)}function Ly(i,e){return pp.apply(this,arguments)}function pp(){return pp=(0,h.Z)(function*(i,e){Yh(i),Ld(i)?(i.mu.au(e),Zh(i)):i.mu.set("Unknown")}),pp.apply(this,arguments)}function im(i,e,t){return gp.apply(this,arguments)}function gp(){return gp=(0,h.Z)(function*(i,e,t){if(i.mu.set("Online"),e instanceof _d&&2===e.state&&e.cause)try{yield(o=(0,h.Z)(function*(u,d){const m=d.cause;for(const T of d.targetIds)u.fu.has(T)&&(yield u.remoteSyncer.rejectListen(T,m),u.fu.delete(T),u.gu.removeTarget(T))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){bt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Vd(i,o)}else if(e instanceof Ns?i.gu.Kt(e):e instanceof Xu?i.gu.Jt(e):i.gu.zt(e),!t.isEqual(cn.min()))try{const o=yield qg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const m=u.gu.Xt(d);return m.targetChanges.forEach((T,F)=>{if(T.resumeToken.approximateByteSize()>0){const H=u.fu.get(F);H&&u.fu.set(F,H.withResumeToken(T.resumeToken,d))}}),m.targetMismatches.forEach(T=>{const F=u.fu.get(T);if(!F)return;u.fu.set(T,F.withResumeToken(ot.EMPTY_BYTE_STRING,F.snapshotVersion)),Fd(u,T);const H=new rl(F.target,T,1,F.sequenceNumber);Nd(u,H)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(o){bt("RemoteStore","Failed to raise snapshot:",o),yield Vd(i,o)}var o}),gp.apply(this,arguments)}function Vd(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,h.Z)(function*(i,e,t){if(!Zi(e))throw e;i.du.add(1),yield Iu(i),i.mu.set("Offline"),t||(t=()=>qg(i.localStore)),i.asyncQueue.enqueueRetryable((0,h.Z)(function*(){bt("RemoteStore","Retrying IndexedDB access"),yield t(),i.du.delete(1),yield kd(i)}))}),Qh.apply(this,arguments)}function sm(i,e){return e().catch(t=>Vd(i,t,e))}function Oc(i){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,h.Z)(function*(i){const e=Jt(i),t=vo(e);let o=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;om(e);)try{const u=yield Yg(e.localStore,o);if(null===u){0===e.lu.length&&t.$o();break}o=u.batchId,Uy(e,u)}catch(u){yield Vd(e,u)}Vy(e)&&Jh(e)}),Bo.apply(this,arguments)}function om(i){return Wa(i)&&i.lu.length<10}function Uy(i,e){i.lu.push(e);const t=vo(i);t.No()&&t.Jo&&t.Yo(e.mutations)}function Vy(i){return Wa(i)&&!vo(i).xo()&&i.lu.length>0}function Jh(i){vo(i).start()}function am(i){return mp.apply(this,arguments)}function mp(){return mp=(0,h.Z)(function*(i){vo(i).tu()}),mp.apply(this,arguments)}function By(i){return yp.apply(this,arguments)}function yp(){return yp=(0,h.Z)(function*(i){const e=vo(i);for(const t of i.lu)e.Yo(t.mutations)}),yp.apply(this,arguments)}function um(i,e,t){return _p.apply(this,arguments)}function _p(){return _p=(0,h.Z)(function*(i,e,t){const o=i.lu.shift(),u=wu.from(o,e,t);yield sm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Oc(i)}),_p.apply(this,arguments)}function $y(i,e){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,h.Z)(function*(i,e){var t;e&&vo(i).Jo&&(yield(t=(0,h.Z)(function*(o,u){if(yd(d=u.code)&&d!==st.ABORTED){const m=o.lu.shift();vo(o).Oo(),yield sm(o,()=>o.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield Oc(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Vy(i)&&Jh(i)}),Bd.apply(this,arguments)}function lm(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,h.Z)(function*(i,e){const t=Jt(i);t.asyncQueue.verifyOperationInProgress(),bt("RemoteStore","RemoteStore received new credentials");const o=Wa(t);t.du.add(3),yield Iu(t),o&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield kd(t)}),vp.apply(this,arguments)}function wp(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,h.Z)(function*(i,e){const t=Jt(i);e?(t.du.delete(2),yield kd(t)):e||(t.du.add(2),yield Iu(t),t.mu.set("Unknown"))}),Cp.apply(this,arguments)}function xc(i){return i.yu||(i.yu=function(e,t,o){const u=Jt(e);return u.nu(),new hp(t,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{Jr:rm.bind(null,i),Zr:Ly.bind(null,i),zo:im.bind(null,i)}),i.wu.push(function(){var e=(0,h.Z)(function*(t){t?(i.yu.Oo(),Ld(i)?Zh(i):i.mu.set("Unknown")):(yield i.yu.stop(),Yh(i))});return function(t){return e.apply(this,arguments)}}())),i.yu}function vo(i){return i.pu||(i.pu=function(e,t,o){const u=Jt(e);return u.nu(),new Ny(t,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{Jr:am.bind(null,i),Zr:$y.bind(null,i),Xo:By.bind(null,i),Zo:um.bind(null,i)}),i.wu.push(function(){var e=(0,h.Z)(function*(t){t?(i.pu.Oo(),yield Oc(i)):(yield i.pu.stop(),i.lu.length>0&&(bt("RemoteStore",`Stopping write stream with ${i.lu.length} pending writes`),i.lu=[]))});return function(t){return e.apply(this,arguments)}}())),i.pu}class $d{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new $,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,o,u,d){const m=Date.now()+o,T=new $d(e,t,m,u,d);return T.start(o),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pc(i,e){if(Rr("AsyncQueue",`${e}: ${i}`),Zi(i))return new b(st.UNAVAILABLE,`${e}: ${i}`);throw i}class Rc{constructor(e){this.comparator=e?(t,o)=>e(t,o)||qt.comparator(t.key,o.key):(t,o)=>qt.comparator(t.key,o.key),this.keyedMap=Gu(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new Rc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Rc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Ep{constructor(){this.Iu=new Mr(qt.comparator)}track(e){const t=e.doc.key,o=this.Iu.get(t);o?0!==e.type&&3===o.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==o.type?this.Iu=this.Iu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Iu=this.Iu.remove(t):1===e.type&&2===o.type?this.Iu=this.Iu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Qt():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,o)=>{e.push(o)}),e}}class kc{constructor(e,t,o,u,d,m,T,F,H){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=T,this.excludesMetadataChanges=F,this.hasCachedResults=H}static fromInitialDocuments(e,t,o,u,d){const m=[];return t.forEach(T=>{m.push({type:0,doc:T})}),new kc(e,t,Rc.emptySet(t),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class jy{constructor(){this.Eu=void 0,this.listeners=[]}}class Hy{constructor(){this.queries=new Wo(e=>cd(e),gu),this.onlineState="Unknown",this.Au=new Set}}function jd(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,h.Z)(function*(i,e){const t=Jt(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new jy),u)try{d.Eu=yield t.onListen(o)}catch(m){const T=Pc(m,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(T)}t.queries.set(o,d),d.listeners.push(e),e.Ru(t.onlineState),d.Eu&&e.vu(d.Eu)&&cm(t)}),bp.apply(this,arguments)}function Ip(i,e){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,h.Z)(function*(i,e){const t=Jt(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Nc.apply(this,arguments)}function Dp(i,e){const t=Jt(i);let o=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const T of m.listeners)T.vu(u)&&(o=!0);m.Eu=u}}o&&cm(t)}function Xh(i,e,t){const o=Jt(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function cm(i){i.Au.forEach(e=>{e.next()})}class Hd{constructor(e,t,o){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new kc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class mv{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class Tp{constructor(e){this.serializer=e}Hi(e){return jt(this.serializer,e)}Ji(e){return e.metadata.exists?tl(this.serializer,e.document,!1):bi.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return V(e)}}class dm{constructor(e,t,o){this.Ou=e,this.localStore=t,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sp(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const o=tr.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new Tp(this.serializer);for(const u of e)if(u.metadata.queries){const d=o.Hi(u.metadata.name);for(const m of u.metadata.queries){const T=(t.get(m)||cr()).add(d);t.set(m,T)}}return t}complete(){var e=this;return(0,h.Z)(function*(){const t=yield function ap(i,e,t,o){return Md.apply(this,arguments)}(e.localStore,new Tp(e.serializer),e.documents,e.Ou.id),o=e.Mu(e.documents);for(const u of e.queries)yield Ay(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function Sp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ap{constructor(e){this.key=e}}class ef{constructor(e){this.key=e}}class su{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=cr(),this.mutatedKeys=cr(),this.Ku=hc(e),this.Gu=new Rc(this.Ku)}get Qu(){return this.Lu}zu(e,t){const o=t?t.ju:new Ep,u=t?t.Gu:this.Gu;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,T=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((te,De)=>{const Ge=u.get(te),It=$a(this.query,De)?De:null,Ht=!!Ge&&this.mutatedKeys.has(Ge.key),fn=!!It&&(It.hasLocalMutations||this.mutatedKeys.has(It.key)&&It.hasCommittedMutations);let An=!1;Ge&&It?Ge.data.isEqual(It.data)?Ht!==fn&&(o.track({type:3,doc:It}),An=!0):this.Wu(Ge,It)||(o.track({type:2,doc:It}),An=!0,(F&&this.Ku(It,F)>0||H&&this.Ku(It,H)<0)&&(T=!0)):!Ge&&It?(o.track({type:0,doc:It}),An=!0):Ge&&!It&&(o.track({type:1,doc:Ge}),An=!0,(F||H)&&(T=!0)),An&&(It?(m=m.add(It),d=fn?d.add(te):d.delete(te)):(m=m.delete(te),d=d.delete(te)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const te="F"===this.query.limitType?m.last():m.first();m=m.delete(te.key),d=d.delete(te.key),o.track({type:1,doc:te})}return{Gu:m,ju:o,Mi:T,mutatedKeys:d}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const d=e.ju.Tu();d.sort((H,te)=>function(De,Ge){const It=Ht=>{switch(Ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return It(De)-It(Ge)}(H.type,te.type)||this.Ku(H.doc,te.doc)),this.Hu(o);const m=t?this.Ju():[],T=0===this.Uu.size&&this.current?1:0,F=T!==this.qu;return this.qu=T,0!==d.length||F?{snapshot:new kc(this.query,e.Gu,u,d,e.mutatedKeys,0===T,F,!1,!!o&&o.resumeToken.approximateByteSize()>0),Yu:m}:{Yu:m}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Ep,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=cr(),this.Gu.forEach(o=>{this.Zu(o.key)&&(this.Uu=this.Uu.add(o.key))});const t=[];return e.forEach(o=>{this.Uu.has(o)||t.push(new ef(o))}),this.Uu.forEach(o=>{e.has(o)||t.push(new Ap(o))}),t}Xu(e){this.Lu=e.Wi,this.Uu=cr();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return kc.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class tf{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class nf{constructor(e){this.key=e,this.ec=!1}}class zd{constructor(e,t,o,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.nc={},this.sc=new Wo(T=>cd(T),gu),this.ic=new Map,this.rc=new Set,this.oc=new Mr(qt.comparator),this.uc=new Map,this.cc=new Bg,this.ac={},this.hc=new Map,this.lc=$l.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function zy(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,h.Z)(function*(i,e){const t=pl(i);let o,u;const d=t.sc.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.tc();else{const m=yield Dc(t.localStore,oo(e));t.isPrimaryClient&&Mc(t.remoteStore,m);const T=t.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield sf(t,e,o,"current"===T,m.resumeToken)}return u}),rf.apply(this,arguments)}function sf(i,e,t,o,u){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,h.Z)(function*(i,e,t,o,u){i.dc=(De,Ge,It)=>{return(Ht=(0,h.Z)(function*(fn,An,ti,zi){let Wr=An.view.zu(ti);Wr.Mi&&(Wr=yield Ad(fn.localStore,An.query,!1).then(({documents:Gi})=>An.view.zu(Gi,Wr)));const Yo=zi&&zi.targetChanges.get(An.targetId),Ls=An.view.applyChanges(Wr,fn.isPrimaryClient,Yo);return Np(fn,An.targetId,Ls.Yu),Ls.snapshot}),function(fn,An,ti,zi){return Ht.apply(this,arguments)})(i,De,Ge,It);var Ht};const d=yield Ad(i.localStore,e,!0),m=new su(e,d.Wi),T=m.zu(d.documents),F=Ju.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),H=m.applyChanges(T,i.isPrimaryClient,F);Np(i,t,H.Yu);const te=new tf(e,t,m);return i.sc.set(e,te),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),H.snapshot}),Mp.apply(this,arguments)}function Gy(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,h.Z)(function*(i,e){const t=Jt(i),o=t.sc.get(e),u=t.ic.get(o.targetId);if(u.length>1)return t.ic.set(o.targetId,u.filter(d=>!gu(d,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Tc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Du(t.remoteStore,o.targetId),Fc(t,o.targetId)}).catch(So))):(Fc(t,o.targetId),yield Tc(t.localStore,o.targetId,!0))}),Hl.apply(this,arguments)}function hm(){return hm=(0,h.Z)(function*(i,e,t){const o=gl(i);try{const u=yield function(d,m){const T=Jt(d),F=On.now(),H=m.reduce((Ge,It)=>Ge.add(It.key),cr());let te,De;return T.persistence.runTransaction("Locally write mutations","readwrite",Ge=>{let It=Ts(),Ht=cr();return T.Ki.getEntries(Ge,H).next(fn=>{It=fn,It.forEach((An,ti)=>{ti.isValidDocument()||(Ht=Ht.add(An))})}).next(()=>T.localDocuments.getOverlayedDocuments(Ge,It)).next(fn=>{te=fn;const An=[];for(const ti of m){const zi=Ol(ti,te.get(ti.key).overlayedDocument);null!=zi&&An.push(new Ko(ti.key,zi,sc(zi.value.mapValue),Ii.exists(!0)))}return T.mutationQueue.addMutationBatch(Ge,F,An,m)}).next(fn=>{De=fn;const An=fn.applyToLocalDocumentSet(te,Ht);return T.documentOverlayCache.saveOverlays(Ge,fn.batchId,An)})}).then(()=>({batchId:De.batchId,changes:_h(te)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,m,T){let F=d.ac[d.currentUser.toKey()];F||(F=new Mr(ln)),F=F.insert(m,T),d.ac[d.currentUser.toKey()]=F}(o,u.batchId,t),yield ou(o,u.changes),yield Oc(o.remoteStore)}catch(u){const d=Pc(u,"Failed to persist write");t.reject(d)}}),hm.apply(this,arguments)}function fm(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,h.Z)(function*(i,e){const t=Jt(i);try{const o=yield function Kg(i,e){const t=Jt(i),o=e.snapshotVersion;let u=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.Ki.newChangeBuffer({trackRemovals:!0});u=t.Li;const T=[];e.targetChanges.forEach((te,De)=>{const Ge=u.get(De);if(!Ge)return;T.push(t.Ds.removeMatchingKeys(d,te.removedDocuments,De).next(()=>t.Ds.addMatchingKeys(d,te.addedDocuments,De)));let It=Ge.withSequenceNumber(d.currentSequenceNumber);var Ht,fn,An;e.targetMismatches.has(De)?It=It.withResumeToken(ot.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):te.resumeToken.approximateByteSize()>0&&(It=It.withResumeToken(te.resumeToken,o)),u=u.insert(De,It),fn=It,An=te,(0===(Ht=Ge).resumeToken.approximateByteSize()||fn.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||An.addedDocuments.size+An.modifiedDocuments.size+An.removedDocuments.size>0)&&T.push(t.Ds.updateTargetData(d,It))});let F=Ts(),H=cr();if(e.documentUpdates.forEach(te=>{e.resolvedLimboDocuments.has(te)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(d,te))}),T.push(Zg(d,m,e.documentUpdates).next(te=>{F=te.zi,H=te.ji})),!o.isEqual(cn.min())){const te=t.Ds.getLastRemoteSnapshotVersion(d).next(De=>t.Ds.setTargetsMetadata(d,d.currentSequenceNumber,o));T.push(te)}return rt.waitFor(T).next(()=>m.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,F,H)).next(()=>F)}).then(d=>(t.Li=u,d))}(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.uc.get(d);m&&(En(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.ec=!0:u.modifiedDocuments.size>0?En(m.ec):u.removedDocuments.size>0&&(En(m.ec),m.ec=!1))}),yield ou(t,o,e)}catch(o){yield So(o)}}),Op.apply(this,arguments)}function pm(i,e,t){const o=Jt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.sc.forEach((d,m)=>{const T=m.view.Ru(e);T.snapshot&&u.push(T.snapshot)}),function(d,m){const T=Jt(d);T.onlineState=m;let F=!1;T.queries.forEach((H,te)=>{for(const De of te.listeners)De.Ru(m)&&(F=!0)}),F&&cm(T)}(o.eventManager,e),u.length&&o.nc.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function qy(i,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,h.Z)(function*(i,e,t){const o=Jt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.uc.get(e),d=u&&u.key;if(d){let m=new Mr(qt.comparator);m=m.insert(d,bi.newNoDocument(d,cn.min()));const T=cr().add(d),F=new nu(cn.min(),new Map,new g(ln),m,T);yield fm(o,F),o.oc=o.oc.remove(d),o.uc.delete(e),Fp(o)}else yield Tc(o.localStore,e,!1).then(()=>Fc(o,e,t)).catch(So)}),xp.apply(this,arguments)}function Ky(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,h.Z)(function*(i,e){const t=Jt(i),o=e.batch.batchId;try{const u=yield function Sy(i,e){const t=Jt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Ki.newChangeBuffer({trackRemovals:!0});return function(m,T,F,H){const te=F.batch,De=te.keys();let Ge=rt.resolve();return De.forEach(It=>{Ge=Ge.next(()=>H.getEntry(T,It)).next(Ht=>{const fn=F.docVersions.get(It);En(null!==fn),Ht.version.compareTo(fn)<0&&(te.applyToRemoteDocument(Ht,F),Ht.isValidDocument()&&(Ht.setReadTime(F.commitVersion),H.addEntry(Ht)))})}),Ge.next(()=>m.mutationQueue.removeMutationBatch(T,te))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(m){let T=cr();for(let F=0;F<m.mutationResults.length;++F)m.mutationResults[F].transformResults.length>0&&(T=T.add(m.batch.mutations[F].key));return T}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}(t.localStore,e);kp(t,o,null),Rp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield ou(t,u)}catch(u){yield So(u)}}),Pp.apply(this,arguments)}function gm(i,e,t){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,h.Z)(function*(i,e,t){const o=Jt(i);try{const u=yield function(d,m){const T=Jt(d);return T.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let H;return T.mutationQueue.lookupMutationBatch(F,m).next(te=>(En(null!==te),H=te.keys(),T.mutationQueue.removeMutationBatch(F,te))).next(()=>T.mutationQueue.performConsistencyCheck(F)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(F,H,m)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,H)).next(()=>T.localDocuments.getDocuments(F,H))})}(o.localStore,e);kp(o,e,t),Rp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield ou(o,u)}catch(u){yield So(u)}}),Gd.apply(this,arguments)}function Wd(){return Wd=(0,h.Z)(function*(i,e){const t=Jt(i);Wa(t.remoteStore)||bt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const m=Jt(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",T=>m.mutationQueue.getHighestUnacknowledgedBatchId(T))}(t.localStore);if(-1===o)return void e.resolve();const u=t.hc.get(o)||[];u.push(e),t.hc.set(o,u)}catch(o){const u=Pc(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Wd.apply(this,arguments)}function Rp(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function kp(i,e,t){const o=Jt(i);let u=o.ac[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Fc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc.wc(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.hs(e).forEach(o=>{i.cc.containsKey(o)||mm(i,o)})}function mm(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(Du(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),Fp(i))}function Np(i,e,t){for(const o of t)o instanceof Ap?(i.cc.addReference(o.key,e),Yy(i,o)):o instanceof ef?(bt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||mm(i,o.key)):Qt()}function Yy(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(bt("SyncEngine","New document in limbo: "+t),i.rc.add(o),Fp(i))}function Fp(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new qt(tr.fromString(e)),o=i.lc.next();i.uc.set(o,new nf(t)),i.oc=i.oc.insert(t,o),Mc(i.remoteStore,new rl(oo(Ta(t.path)),o,2,Ri.ct))}}function ou(i,e,t){return af.apply(this,arguments)}function af(){return af=(0,h.Z)(function*(i,e,t){const o=Jt(i),u=[],d=[],m=[];var T;o.sc.isEmpty()||(o.sc.forEach((T,F)=>{m.push(o.dc(F,e,t).then(H=>{if((H||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,H?.fromCache?"not-current":"current"),H){u.push(H);const te=rp.Di(F.targetId,H);d.push(te)}}))}),yield Promise.all(m),o.nc.zo(u),yield(T=(0,h.Z)(function*(F,H){const te=Jt(F);try{yield te.persistence.runTransaction("notifyLocalViewChanges","readwrite",De=>rt.forEach(H,Ge=>rt.forEach(Ge.Vi,It=>te.persistence.referenceDelegate.addReference(De,Ge.targetId,It)).next(()=>rt.forEach(Ge.Si,It=>te.persistence.referenceDelegate.removeReference(De,Ge.targetId,It)))))}catch(De){if(!Zi(De))throw De;bt("LocalStore","Failed to update sequence numbers: "+De)}for(const De of H){const Ge=De.targetId;if(!De.fromCache){const It=te.Li.get(Ge),fn=It.withLastLimboFreeSnapshotVersion(It.snapshotVersion);te.Li=te.Li.insert(Ge,fn)}}}),function(F,H){return T.apply(this,arguments)})(o.localStore,d))}),af.apply(this,arguments)}function Qy(i,e){return ym.apply(this,arguments)}function ym(){return ym=(0,h.Z)(function*(i,e){const t=Jt(i);if(!t.currentUser.isEqual(e)){bt("SyncEngine","User change. New user:",e.toKey());const o=yield sp(t.localStore,e);t.currentUser=e,(u=t).hc.forEach(m=>{m.forEach(T=>{T.reject(new b(st.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ou(t,o.Qi)}var u}),ym.apply(this,arguments)}function _m(i,e){const t=Jt(i),o=t.uc.get(e);if(o&&o.ec)return cr().add(o.key);{let u=cr();const d=t.ic.get(e);if(!d)return u;for(const m of d){const T=t.sc.get(m);u=u.unionWith(T.view.Qu)}return u}}function yv(i,e){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,h.Z)(function*(i,e){const t=Jt(i),o=yield Ad(t.localStore,e.query,!0),u=e.view.Xu(o);return t.isPrimaryClient&&Np(t,e.targetId,u.Yu),u}),Lc.apply(this,arguments)}function Jy(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,h.Z)(function*(i,e){const t=Jt(i);return ll(t.localStore,e).then(o=>ou(t,o))}),Lp.apply(this,arguments)}function Up(i,e,t,o){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,h.Z)(function*(i,e,t,o){const u=Jt(i),d=yield function(m,T){const F=Jt(m),H=Jt(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",te=>H.In(te,T).next(De=>De?F.localDocuments.getDocuments(te,De):rt.resolve(null)))}(u.localStore,e);var T;null!==d?("pending"===t?yield Oc(u.remoteStore):"acknowledged"===t||"rejected"===t?(kp(u,e,o||null),Rp(u,e),T=e,Jt(Jt(u.localStore).mutationQueue).En(T)):Qt(),yield ou(u,d)):bt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Vp.apply(this,arguments)}function zl(){return zl=(0,h.Z)(function*(i,e){const t=Jt(i);if(pl(t),gl(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield wo(t,o.toArray());t.fc=!0,yield wp(t.remoteStore,!0);for(const d of u)Mc(t.remoteStore,d)}else if(!1===e&&!1!==t.fc){const o=[];let u=Promise.resolve();t.ic.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Fc(t,m),Tc(t.localStore,m,!0))),Du(t.remoteStore,m)}),yield u,yield wo(t,o),function(d){const m=Jt(d);m.uc.forEach((T,F)=>{Du(m.remoteStore,F)}),m.cc.ls(),m.uc=new Map,m.oc=new Mr(qt.comparator)}(t),t.fc=!1,yield wp(t.remoteStore,!1)}}),zl.apply(this,arguments)}function wo(i,e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,h.Z)(function*(i,e,t){const o=Jt(i),u=[],d=[];for(const m of e){let T;const F=o.ic.get(m);if(F&&0!==F.length){T=yield Dc(o.localStore,oo(F[0]));for(const H of F){const te=o.sc.get(H),De=yield yv(o,te);De.snapshot&&d.push(De.snapshot)}}else{const H=yield op(o.localStore,m);T=yield Dc(o.localStore,H),yield sf(o,qd(H),m,!1,T.resumeToken)}u.push(T)}return o.nc.zo(d),u}),Tu.apply(this,arguments)}function qd(i){return lc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Oa(i){const e=Jt(i);return Jt(Jt(e.localStore).persistence).bi()}function Bp(i,e,t,o){return hl.apply(this,arguments)}function hl(){return hl=(0,h.Z)(function*(i,e,t,o){const u=Jt(i);if(u.fc)return void bt("SyncEngine","Ignoring unexpected query state notification.");const d=u.ic.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const m=yield ll(u.localStore,mh(d[0])),T=nu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ot.EMPTY_BYTE_STRING);yield ou(u,m,T);break}case"rejected":yield Tc(u.localStore,e,!0),Fc(u,e,o);break;default:Qt()}}),hl.apply(this,arguments)}function Uc(i,e,t){return fl.apply(this,arguments)}function fl(){return fl=(0,h.Z)(function*(i,e,t){const o=pl(i);if(o.fc){for(const u of e){if(o.ic.has(u)){bt("SyncEngine","Adding an already active target "+u);continue}const d=yield op(o.localStore,u),m=yield Dc(o.localStore,d);yield sf(o,qd(d),m.targetId,!1,m.resumeToken),Mc(o.remoteStore,m)}for(const u of t)o.ic.has(u)&&(yield Tc(o.localStore,u,!1).then(()=>{Du(o.remoteStore,u),Fc(o,u)}).catch(So))}}),fl.apply(this,arguments)}function pl(i){const e=Jt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_m.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qy.bind(null,e),e.nc.zo=Dp.bind(null,e.eventManager),e.nc.wc=Xh.bind(null,e.eventManager),e}function gl(i){const e=Jt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ky.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gm.bind(null,e),e}class Su{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,h.Z)(function*(){t.serializer=Sc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ip(this.persistence,new Wg,e.initialUser,this.serializer)}createPersistence(e){return new Hg(jh.Fs,this.serializer)}createSharedClientState(e){return new xd}terminate(){var e=this;return(0,h.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ml extends Su{constructor(e,t,o){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield t().call(o,e),yield o.mc.initialize(o,e),yield gl(o.mc.syncEngine),yield Oc(o.mc.remoteStore),yield o.persistence.hi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ip(this.persistence,new Wg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new wy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const o=new El(t,this.persistence);return new Fu(e.asyncQueue,o)}createPersistence(e){const t=np(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new tp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,tm(),Pd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xd}}class Gl extends ml{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield t().call(o,e);const u=o.mc.syncEngine;o.sharedClientState instanceof Wh&&(o.sharedClientState.syncEngine={$r:Up.bind(null,u),Mr:Bp.bind(null,u),Fr:Uc.bind(null,u),bi:Oa.bind(null,u),Or:Jy.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.hi(function(){var d=(0,h.Z)(function*(m){yield function au(i,e){return zl.apply(this,arguments)}(o.mc.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(e){const t=tm();if(!Wh.D(t))throw new b(st.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=np(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wh(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Wl{initialize(e,t){var o=this;return(0,h.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>pm(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Qy.bind(null,o.syncEngine),yield wp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Hy}createDatastore(e){const t=Sc(e.databaseInfo.databaseId),o=new em(e.databaseInfo);return new gv(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=T=>pm(this.syncEngine,T,0),m=cp.D()?new cp:new xy,new nm(t,o,u,d,m);var t,o,u,d,m}createSyncEngine(e,t){return function(o,u,d,m,T,F,H){const te=new zd(o,u,d,m,T,F);return H&&(te.fc=!0),te}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,h.Z)(function*(t){const o=Jt(t);bt("RemoteStore","RemoteStore shutting down."),o.du.add(5),yield Iu(o),o._u.shutdown(),o.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $p(i,e=10240){let t=0;return{read:()=>(0,h.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,h.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Kd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vm{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new $,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(o=>{o&&o.ku()?this.metadata.resolve(o.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Nu)}`))},o=>this.metadata.reject(o))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,h.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,h.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,h.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const o=e.Tc.decode(t),u=Number(o);isNaN(u)&&e.Rc(`length string (${o}) is not valid number`);const d=yield e.vc(u);return new mv(JSON.parse(d),t.length+u)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,h.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}vc(e){var t=this;return(0,h.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const o=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,h.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class wm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,h.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new b(st.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,h.Z)(function*(d,m){const T=Jt(d),F=Tn(T.serializer)+"/documents",H={documents:m.map(It=>gt(T.serializer,It))},te=yield T.fo("BatchGetDocuments",F,H,m.length),De=new Map;te.forEach(It=>{const Ht=function Vf(i,e){return"found"in e?function(t,o){En(!!o.found);const u=jt(t,o.found.name),d=V(o.found.updateTime),m=o.found.createTime?V(o.found.createTime):cn.min(),T=new Gs({mapValue:{fields:o.found.fields}});return bi.newFoundDocument(u,d,m,T)}(i,e):"missing"in e?function(t,o){En(!!o.missing),En(!!o.readTime);const u=jt(t,o.missing),d=V(o.readTime);return bi.newNoDocument(u,d)}(i,e):Qt()}(T.serializer,It);De.set(Ht.key.toString(),Ht)});const Ge=[];return m.forEach(It=>{const Ht=De.get(It.toString());En(!!Ht),Ge.push(Ht)}),Ge}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,h.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=qt.fromPath(u);e.mutations.push(new mc(d,e.precondition(d)))}),yield(o=(0,h.Z)(function*(u,d){const m=Jt(u),T=Tn(m.serializer)+"/documents",F={writes:d.map(H=>xl(m.serializer,H))};yield m.co("Commit",T,F)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qt();t=cn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new b(st.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cn.min())?Ii.exists(!1):Ii.updateTime(t):Ii.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cn.min()))throw new b(st.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(t)}return Ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Cm{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.Vc=o.maxAttempts,this.Co=new Rd(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,h.Z)(function*(){const t=new wm(e.datastore),o=e.Dc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Cc(d)}))}).catch(u=>{e.Cc(u)})}))}Dc(e){try{const t=this.updateFunction(e);return!Ea(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yd(t)}return!1}}class Em{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=ci.UNAUTHENTICATED,this.clientId=wi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,h.Z)(function*(T){bt("FirestoreClient","Received user=",T.uid),yield d.authCredentialListener(T),d.user=T});return function(T){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(bt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,h.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(st.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Pc(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Zd(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),bt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,h.Z)(function*(d){o.isEqual(d)||(yield sp(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),uf.apply(this,arguments)}function jp(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Gp(i);bt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>lm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>lm(e.remoteStore,d)),i._onlineComponents=e}),Hp.apply(this,arguments)}function zp(i){return"FirebaseError"===i.name?i.code===st.FAILED_PRECONDITION||i.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Gp(i){return lf.apply(this,arguments)}function lf(){return lf=(0,h.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){bt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!zp(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),yield Zd(i,new Su)}}else bt("FirestoreClient","Using default OfflineComponentProvider"),yield Zd(i,new Su);return i._offlineComponents}),lf.apply(this,arguments)}function Bc(i){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,h.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(bt("FirestoreClient","Using user provided OnlineComponentProvider"),yield jp(i,i._uninitializedComponentsProvider._online)):(bt("FirestoreClient","Using default OnlineComponentProvider"),yield jp(i,new Wl))),i._onlineComponents}),Yd.apply(this,arguments)}function bm(i){return Gp(i).then(e=>e.persistence)}function ql(i){return Gp(i).then(e=>e.localStore)}function $c(i){return Bc(i).then(e=>e.remoteStore)}function Qd(i){return Bc(i).then(e=>e.syncEngine)}function yl(i){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,h.Z)(function*(i){const e=yield Bc(i),t=e.eventManager;return t.onListen=zy.bind(null,e.syncEngine),t.onUnlisten=Gy.bind(null,e.syncEngine),t}),Jd.apply(this,arguments)}function Kp(i,e,t={}){const o=new $;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(u,d,m,T,F){const H=new Kd({next:De=>{d.enqueueAndForget(()=>Ip(u,te));const Ge=De.docs.has(m);!Ge&&De.fromCache?F.reject(new b(st.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&De.fromCache&&T&&"server"===T.source?F.reject(new b(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(De)},error:De=>F.reject(De)}),te=new Hd(Ta(m.path),H,{includeMetadataChanges:!0,xu:!0});return jd(u,te)}(yield yl(i),i.asyncQueue,e,t,o)})),o.promise}function cf(i,e,t={}){const o=new $;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(u,d,m,T,F){const H=new Kd({next:De=>{d.enqueueAndForget(()=>Ip(u,te)),De.fromCache&&"server"===T.source?F.reject(new b(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(De)},error:De=>F.reject(De)}),te=new Hd(m,H,{includeMetadataChanges:!0,xu:!0});return jd(u,te)}(yield yl(i),i.asyncQueue,e,t,o)})),o.promise}const Zp=new Map;function df(i,e,t){if(!t)throw new b(st.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Om(i,e,t,o){if(!0===e&&!0===o)throw new b(st.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Yp(i){if(!qt.isDocumentKey(i))throw new b(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Qp(i){if(qt.isDocumentKey(i))throw new b(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function jc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Qt()}function Or(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new b(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jc(i);throw new b(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Jp(i,e){if(e<=0)throw new b(st.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Xp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new b(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new b(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Om("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new b(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Y;switch(t.type){case"firstParty":return new vn(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new b(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zp.get(e);t&&(bt("ComponentProvider","Removing Datastore"),Zp.delete(e),t.terminate())}(this),Promise.resolve()}}function eg(i,e,t,o={}){var u;const d=(i=Or(i,Hc))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&Lr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let m,T;if("string"==typeof o.mockUserToken)m=o.mockUserToken,T=ci.MOCK_USER;else{m=(0,ge.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new b(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ci(F)}i._authCredentials=new ye(new P(m,T))}}class Xi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xi(this.firestore,e,this._key)}}class ao{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ao(this.firestore,e,this._query)}}class qa extends ao{constructor(e,t,o){super(e,t,Ta(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xi(this.firestore,null,new qt(e))}withConverter(e){return new qa(this.firestore,e,this._path)}}function xm(i,e,...t){if(i=(0,ge.m9)(i),df("collection","path",e),i instanceof Hc){const o=tr.fromString(e,...t);return Qp(o),new qa(i,null,o)}{if(!(i instanceof Xi||i instanceof qa))throw new b(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(tr.fromString(e,...t));return Qp(o),new qa(i.firestore,null,o)}}function hf(i,e){if(i=Or(i,Hc),df("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new b(st.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ao(i,null,(t=e,new _o(tr.emptyPath(),t)));var t}function Au(i,e,...t){if(i=(0,ge.m9)(i),1===arguments.length&&(e=wi.A()),df("doc","path",e),i instanceof Hc){const o=tr.fromString(e,...t);return Yp(o),new Xi(i,null,new qt(o))}{if(!(i instanceof Xi||i instanceof qa))throw new b(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(tr.fromString(e,...t));return Yp(o),new Xi(i.firestore,i instanceof qa?i.converter:null,new qt(o))}}function e_(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),(i instanceof Xi||i instanceof qa)&&(e instanceof Xi||e instanceof qa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function tg(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),i instanceof ao&&e instanceof ao&&i.firestore===e.firestore&&gu(i._query,e._query)&&i.converter===e.converter}class ng{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Rd(this,"async_queue_retry"),this.qc=()=>{const t=Pd();t&&bt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Pd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Pd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new $;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,h.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Zi(t))throw t;bt("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(o=>{throw this.Mc=o,this.Fc=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(o)),o}).then(o=>(this.Fc=!1,o))));return this.Nc=t,t}enqueueAfterDelay(e,t,o){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const u=$d.createAndSchedule(this,e,t,o,d=>this.Qc(d));return this.$c.push(u),u}Uc(){this.Mc&&Qt()}verifyOperationInProgress(){}zc(){var e=this;return(0,h.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Mu(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class rg{constructor(){this._progressObserver={},this._taskCompletionResolver=new $,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const t_=-1;class Di extends Hc{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new ng,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pm(this),this._firestoreClient.terminate()}}function Ss(i){return i._firestoreClient||Pm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Pm(i){var e,t,o;const u=i._freezeSettings(),d=(T=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new R(i._databaseId,T,i._persistenceKey,(H=u).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,H.useFetchStreams));var T,H;i._firestoreClient=new Em(i._authCredentials,i._appCheckCredentials,i._queue,d),null!==(t=u.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(o=u.cache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.cache.kind,_offline:u.cache._offlineComponentProvider,_online:u.cache._onlineComponentProvider})}function Rm(i,e){Kl(i=Or(i,Di));const t=Ss(i);if(t._uninitializedComponentsProvider)throw new b(st.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Wl;return Fs(t,u,new ml(u,o.cacheSizeBytes,e?.forceOwnership))}function n_(i){Kl(i=Or(i,Di));const e=Ss(i);if(e._uninitializedComponentsProvider)throw new b(st.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),o=new Wl;return Fs(e,o,new Gl(o,t.cacheSizeBytes))}function Fs(i,e,t){const o=new $;return i.asyncQueue.enqueue((0,h.Z)(function*(){try{yield Zd(i,t),yield jp(i,e),o.resolve()}catch(u){const d=u;if(!zp(d))throw d;Lr("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function km(i){if(i._initialized&&!i._terminated)throw new b(st.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $;return i._queue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{yield(t=(0,h.Z)(function*(o){if(!io.D())return Promise.resolve();const u=o+"main";yield io.delete(u)}),function(o){return t.apply(this,arguments)})(np(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function r_(i){return function(e){const t=new $;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function Zy(i,e){return Wd.apply(this,arguments)}(yield Qd(e),t)})),t.promise}(Ss(i=Or(i,Di)))}function i_(i){return function Wp(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield bm(i),t=yield $c(i);return e.setNetworkEnabled(!0),function(o){const u=Jt(o);return u.du.delete(0),kd(u)}(t)}))}(Ss(i=Or(i,Di)))}function Nm(i){return function Dm(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield bm(i),t=yield $c(i);return e.setNetworkEnabled(!1),(o=(0,h.Z)(function*(u){const d=Jt(u);d.du.add(0),yield Iu(d),d.mu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Ss(i=Or(i,Di)))}function Fm(i,e){const t=Ss(i=Or(i,Di)),o=new rg;return function Xy(i,e,t,o){const u=function(d,m){let T;return T="string"==typeof d?(new TextEncoder).encode(d):d,F=function(F,H){if(F instanceof Uint8Array)return $p(F,H);if(F instanceof ArrayBuffer)return $p(new Uint8Array(F),H);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(T),new vm(F,m);var F}(t,Sc(e));i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){!function Vc(i,e,t){const o=Jt(i);var u;(u=(0,h.Z)(function*(d,m,T){try{const F=yield m.getMetadata();if(yield function(Ge,It){const Ht=Jt(Ge),fn=V(It.createTime);return Ht.persistence.runTransaction("hasNewerBundle","readonly",An=>Ht.xs.getBundleMetadata(An,It.id)).then(An=>!!An&&An.createTime.compareTo(fn)>=0)}(d.localStore,F))return yield m.close(),T._completeWith({taskState:"Success",documentsLoaded:(Ge=F).totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}),Promise.resolve(new Set);T._updateProgress(Sp(F));const H=new dm(F,d.localStore,m.serializer);let te=yield m._c();for(;te;){const Ge=yield H.$u(te);Ge&&T._updateProgress(Ge),te=yield m._c()}const De=yield H.complete();return yield ou(d,De.Bu,void 0),yield function(Ge,It){const Ht=Jt(Ge);return Ht.persistence.runTransaction("Save bundle","readwrite",fn=>Ht.xs.saveBundleMetadata(fn,It))}(d.localStore,F),T._completeWith(De.progress),Promise.resolve(De.Fu)}catch(F){return Lr("SyncEngine",`Loading bundle failed with ${F}`),T._failWith(F),Promise.resolve(new Set)}var Ge}),function(d,m,T){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Qd(i),u,o)}))}(t,i._databaseId,e,o),o}function Lm(i,e){return function Am(i,e){return i.asyncQueue.enqueue((0,h.Z)(function*(){return function(t,o){const u=Jt(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.xs.getNamedQuery(d,o))}(yield ql(i),e)}))}(Ss(i=Or(i,Di)),e).then(t=>t?new ao(i,null,t.query):null)}function Kl(i){if(i._initialized||i._terminated)throw new b(st.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(ot.fromBase64String(e))}catch(t){throw new b(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ou(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _l{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new b(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zc{constructor(e){this._methodName=e}}class Gc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new b(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new b(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}}const ig=/^__.*__$/;class uu{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zu(e,this.data,t,this.fieldTransforms)}}class Um{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class la{constructor(e,t,o,u,d,m){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.Jc(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new la(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Zc({path:o,ta:!1});return u.ea(e),u}na(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Zc({path:o,ta:!1});return u.Jc(),u}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Kc(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(sg(this.Yc)&&ig.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class Ka{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Sc(e)}ua(e,t,o,u=!1){return new la({Yc:e,methodName:t,oa:o,path:Yr.emptyPath(),ta:!1,ra:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Co(i){const e=i._freezeSettings(),t=Sc(i._databaseId);return new Ka(i._databaseId,!!e.ignoreUndefinedProperties,t)}function eh(i,e,t,o,u,d={}){const m=i.ua(d.merge||d.mergeFields?2:0,e,t,u);qc("Data must be an object, but it was:",m,o);const T=cg(o,m);let F,H;if(d.merge)F=new K(m.fieldMask),H=m.fieldTransforms;else if(d.mergeFields){const te=[];for(const De of d.mergeFields){const Ge=th(e,De,t);if(!m.contains(Ge))throw new b(st.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);rh(te,Ge)||te.push(Ge)}F=new K(te),H=m.fieldTransforms.filter(De=>F.covers(De.field))}else F=null,H=m.fieldTransforms;return new uu(new Gs(T),F,H)}class Wc extends zc{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function Vm(i,e,t){return new la({Yc:3,oa:e.settings.oa,methodName:i._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class og extends zc{_toFieldTransform(e){return new Sa(e.path,new qo)}isEqual(e){return e instanceof og}}class a_ extends zc{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Vm(this,e,!0),o=this.ca.map(d=>Yl(d,t)),u=new Qa(o);return new Sa(e.path,u)}isEqual(e){return this===e}}class u_ extends zc{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Vm(this,e,!0),o=this.ca.map(d=>Yl(d,t)),u=new Ja(o);return new Sa(e.path,u)}isEqual(e){return this===e}}class ag extends zc{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new ja(e.serializer,Wu(e.serializer,this.aa));return new Sa(e.path,t)}isEqual(e){return this===e}}function Zl(i,e,t,o){const u=i.ua(1,e,t);qc("Data must be an object, but it was:",u,o);const d=[],m=Gs.empty();ia(o,(F,H)=>{const te=nh(e,F,t);H=(0,ge.m9)(H);const De=u.na(te);if(H instanceof Wc)d.push(te);else{const Ge=Yl(H,De);null!=Ge&&(d.push(te),m.set(te,Ge))}});const T=new K(d);return new Um(m,T,u.fieldTransforms)}function ug(i,e,t,o,u,d){const m=i.ua(1,e,t),T=[th(e,o,t)],F=[u];if(d.length%2!=0)throw new b(st.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<d.length;Ge+=2)T.push(th(e,d[Ge])),F.push(d[Ge+1]);const H=[],te=Gs.empty();for(let Ge=T.length-1;Ge>=0;--Ge)if(!rh(H,T[Ge])){const It=T[Ge];let Ht=F[Ge];Ht=(0,ge.m9)(Ht);const fn=m.na(It);if(Ht instanceof Wc)H.push(It);else{const An=Yl(Ht,fn);null!=An&&(H.push(It),te.set(It,An))}}const De=new K(H);return new Um(te,De,m.fieldTransforms)}function lg(i,e,t,o=!1){return Yl(t,i.ua(o?4:3,e))}function Yl(i,e){if(dg(i=(0,ge.m9)(i)))return qc("Unsupported field value:",e,i),cg(i,e);if(i instanceof zc)return function(t,o){if(!sg(o.Yc))throw o.ia(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ia(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const m of t){let T=Yl(m,o.sa(d));null==T&&(T={nullValue:"NULL_VALUE"}),u.push(T),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wu(o.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=On.fromDate(t);return{timestampValue:c(o.serializer,u)}}if(t instanceof On){const u=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:c(o.serializer,u)}}if(t instanceof Gc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ou)return{bytesValue:f(o.serializer,t._byteString)};if(t instanceof Xi){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ia(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:J(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ia(`Unsupported field value: ${jc(t)}`)}(i,e)}function cg(i,e){const t={};return Vu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(i,(o,u)=>{const d=Yl(u,e.Xc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function dg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof On||i instanceof Gc||i instanceof Ou||i instanceof Xi||i instanceof zc)}function qc(i,e,t){if(!dg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=jc(t);throw e.ia("an object"===o?i+" a custom object":i+" "+o)}var o}function th(i,e,t){if((e=(0,ge.m9)(e))instanceof _l)return e._internalPath;if("string"==typeof e)return nh(i,e);throw Kc("Field path arguments must be of type string or ",i,!1,void 0,t)}const Bm=new RegExp("[~\\*/\\[\\]]");function nh(i,e,t){if(e.search(Bm)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _l(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kc(i,e,t,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new b(st.INVALID_ARGUMENT,T+i+F)}function rh(i,e){return i.some(t=>t.isEqual(e))}class Zc{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $m(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ih("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $m extends Zc{data(){return super.data()}}function ih(i,e){return"string"==typeof e?nh(i,e):e instanceof _l?e._internalPath:e._delegate._internalPath}function hg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new b(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class Yc extends ff{}function jm(i,e,...t){let o=[];e instanceof ff&&o.push(e),o=o.concat(t),function(u){const d=u.filter(T=>T instanceof Jc).length,m=u.filter(T=>T instanceof Qc).length;if(d>1||d>0&&m>0)throw new b(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Qc extends Yc{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Qc(e,t,o)}_apply(e){const t=this._parse(e);return pg(e._query,t),new ao(e.firestore,e.converter,ld(e._query,t))}_parse(e){const t=Co(e.firestore);return function(u,d,m,T,F,H,te){let De;if(F.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new b(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Wm(te,H);const Ge=[];for(const It of te)Ge.push(Gm(T,u,It));De={arrayValue:{values:Ge}}}else De=Gm(T,u,te)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Wm(te,H),De=lg(m,"where",te,"in"===H||"not-in"===H);return kr.create(F,H,De)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hm(i,e,t){const o=e,u=ih("where",i);return Qc._create(u,o,t)}class Jc extends ff{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jc(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const T of m)pg(d,T),d=ld(d,T)}(e._query,t),new ao(e.firestore,e.converter,ld(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fg extends Yc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fg(e,t)}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new b(st.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new b(st.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new oa(u,d);return function(T,F){if(null===Sl(T)){const H=cc(T);null!==H&&gg(0,H,F.field)}}(o,m),m}(e._query,this._field,this._direction);return new ao(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new _o(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function l_(i,e="asc"){const t=e,o=ih("orderBy",i);return fg._create(o,t)}class pf extends Yc{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new pf(e,t,o)}_apply(e){return new ao(e.firestore,e.converter,Al(e._query,this._limit,this._limitType))}}function c_(i){return Jp("limit",i),pf._create("limit",i,"F")}function d_(i){return Jp("limitToLast",i),pf._create("limitToLast",i,"L")}class gf extends Yc{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new gf(e,t,o)}_apply(e){const t=zm(e,this.type,this._docOrFields,this._inclusive);return new ao(e.firestore,e.converter,(u=t,new _o((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function h_(...i){return gf._create("startAt",i,!0)}function f_(...i){return gf._create("startAfter",i,!1)}class mf extends Yc{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new mf(e,t,o)}_apply(e){const t=zm(e,this.type,this._docOrFields,this._inclusive);return new ao(e.firestore,e.converter,(u=t,new _o((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function p_(...i){return mf._create("endBefore",i,!1)}function g_(...i){return mf._create("endAt",i,!0)}function zm(i,e,t,o){if(t[0]=(0,ge.m9)(t[0]),t[0]instanceof Zc)return function(u,d,m,T,F){if(!T)throw new b(st.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const H=[];for(const te of pu(u))if(te.field.isKeyField())H.push(Ui(d,T.key));else{const De=T.data.field(te.field);if(Is(De))throw new b(st.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+te.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===De){const Ge=te.field.canonicalString();throw new b(st.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}H.push(De)}return new Da(H,F)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Co(i.firestore);return function(d,m,T,F,H,te){const De=d.explicitOrderBy;if(H.length>De.length)throw new b(st.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let It=0;It<H.length;It++){const Ht=H[It];if(De[It].field.isKeyField()){if("string"!=typeof Ht)throw new b(st.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof Ht}`);if(!dc(d)&&-1!==Ht.indexOf("/"))throw new b(st.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${Ht}' contains a slash.`);const fn=d.path.child(tr.fromString(Ht));if(!qt.isDocumentKey(fn))throw new b(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${fn}' is not because it contains an odd number of segments.`);const An=new qt(fn);Ge.push(Ui(m,An))}else{const fn=lg(T,F,Ht);Ge.push(fn)}}return new Da(Ge,te)}(i._query,i.firestore._databaseId,u,e,t,o)}}function Gm(i,e,t){if("string"==typeof(t=(0,ge.m9)(t))){if(""===t)throw new b(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dc(e)&&-1!==t.indexOf("/"))throw new b(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(tr.fromString(t));if(!qt.isDocumentKey(o))throw new b(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ui(i,new qt(o))}if(t instanceof Xi)return Ui(i,t._key);throw new b(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(t)}.`)}function Wm(i,e){if(!Array.isArray(i)||0===i.length)throw new b(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pg(i,e){if(e.isInequality()){const o=cc(i),u=e.field;if(null!==o&&!o.isEqual(u))throw new b(st.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${u.toString()}'`);const d=Sl(i);null!==d&&gg(0,u,d)}const t=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new b(st.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gg(i,e,t){if(!t.isEqual(e))throw new b(st.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yf{convertValue(e,t="none"){switch(Ye(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qt()}}convertObject(e,t){const o={};return ia(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Gc(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=yo(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(O(e));default:return null}}convertTimestamp(e){const t=Yt(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=tr.fromString(e);En(cs(o));const u=new Z(o.get(1),o.get(3)),d=new qt(o.popFirst(5));return u.isEqual(t)||Rr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function sh(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class qm extends yf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,t)}}class ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ql extends Zc{constructor(e,t,o,u,d,m){super(e,t,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(ih("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class oh extends Ql{data(e={}){return super.data(e)}}class xa{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ca(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new oh(this._firestore,this._userDataWriter,o.key,o,new ca(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new b(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>({type:"added",doc:new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const T=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,H=-1;return 0!==m.type&&(F=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),H=d.indexOf(m.doc.key)),{type:Cv(m.type),doc:T,oldIndex:F,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Cv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function yg(i,e){return i instanceof Ql&&e instanceof Ql?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof xa&&e instanceof xa&&i._firestore===e._firestore&&tg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ev(i){i=Or(i,Xi);const e=Or(i.firestore,Di);return Kp(Ss(e),i._key).then(t=>wf(e,i,t))}class xu extends yf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,t)}}function Zm(i){i=Or(i,Xi);const e=Or(i.firestore,Di),t=Ss(e),o=new xu(e);return function qp(i,e){const t=new $;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(u,d,m){try{const T=yield function(F,H){const te=Jt(F);return te.persistence.runTransaction("read document","readonly",De=>te.localDocuments.getDocument(De,H))}(u,d);T.isFoundDocument()?m.resolve(T):T.isNoDocument()?m.resolve(null):m.reject(new b(st.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(T){const F=Pc(T,`Failed to get document '${d} from cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield ql(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Ql(e,o,i._key,u,new ca(null!==u&&u.hasLocalMutations,!0),i.converter))}function bv(i){i=Or(i,Xi);const e=Or(i.firestore,Di);return Kp(Ss(e),i._key,{source:"server"}).then(t=>wf(e,i,t))}function Gn(i){i=Or(i,ao);const e=Or(i.firestore,Di),t=Ss(e),o=new xu(e);return hg(i._query),cf(t,i._query).then(u=>new xa(e,o,i,u))}function w_(i){i=Or(i,ao);const e=Or(i.firestore,Di),t=Ss(e),o=new xu(e);return function Tm(i,e){const t=new $;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(u,d,m){try{const T=yield Ad(u,d,!0),F=new su(d,T.Wi),H=F.zu(T.documents),te=F.applyChanges(H,!1);m.resolve(te.snapshot)}catch(T){const F=Pc(T,`Failed to execute query '${d} against cache`);m.reject(F)}}),function(u,d,m){return o.apply(this,arguments)})(yield ql(i),e,t);var o})),t.promise}(t,i._query).then(u=>new xa(e,o,i,u))}function C_(i){i=Or(i,ao);const e=Or(i.firestore,Di),t=Ss(e),o=new xu(e);return cf(t,i._query,{source:"server"}).then(u=>new xa(e,o,i,u))}function E_(i,e,t){i=Or(i,Xi);const o=Or(i.firestore,Di),u=sh(i.converter,e,t);return ah(o,[eh(Co(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Ii.none())])}function Xc(i,e,t,...o){i=Or(i,Xi);const u=Or(i.firestore,Di),d=Co(u);let m;return m="string"==typeof(e=(0,ge.m9)(e))||e instanceof _l?ug(d,"updateDoc",i._key,e,t,o):Zl(d,"updateDoc",i._key,e),ah(u,[m.toMutation(i._key,Ii.exists(!0))])}function b_(i){return ah(Or(i.firestore,Di),[new Xa(i._key,Ii.none())])}function _f(i,e){const t=Or(i.firestore,Di),o=Au(i),u=sh(i.converter,e);return ah(t,[eh(Co(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Ii.exists(!1))]).then(()=>o)}function vf(i,...e){var t,o,u;i=(0,ge.m9)(i);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||Mu(e[m])||(d=e[m],m++);const T={includeMetadataChanges:d.includeMetadataChanges};if(Mu(e[m])){const De=e[m];e[m]=null===(t=De.next)||void 0===t?void 0:t.bind(De),e[m+1]=null===(o=De.error)||void 0===o?void 0:o.bind(De),e[m+2]=null===(u=De.complete)||void 0===u?void 0:u.bind(De)}let F,H,te;if(i instanceof Xi)H=Or(i.firestore,Di),te=Ta(i._key.path),F={next:De=>{e[m]&&e[m](wf(H,i,De))},error:e[m+1],complete:e[m+2]};else{const De=Or(i,ao);H=Or(De.firestore,Di),te=De._query;const Ge=new xu(H);F={next:It=>{e[m]&&e[m](new xa(H,Ge,De,It))},error:e[m+1],complete:e[m+2]},hg(i._query)}return function(De,Ge,It,Ht){const fn=new Kd(Ht),An=new Hd(Ge,fn,It);return De.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return jd(yield yl(De),An)})),()=>{fn.yc(),De.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return Ip(yield yl(De),An)}))}}(Ss(H),te,T,F)}function ds(i,e){return function Sm(i,e){const t=new Kd(e);return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return o=yield yl(i),u=t,Jt(o).Au.add(u),void u.next();var o,u})),()=>{t.yc(),i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return o=yield yl(i),u=t,void Jt(o).Au.delete(u);var o,u}))}}(Ss(i=Or(i,Di)),Mu(e)?e:{next:e})}function ah(i,e){return function(t,o){const u=new $;return t.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function Wy(i,e,t){return hm.apply(this,arguments)}(yield Qd(t),o,u)})),u.promise}(Ss(i),e)}function wf(i,e,t){const o=t.docs.get(e._key),u=new xu(i);return new Ql(i,u,e._key,o,new ca(t.hasPendingWrites,t.fromCache),e.converter)}const x_={maxAttempts:5};class Jm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Co(e)}set(e,t,o){this._verifyNotCommitted();const u=vl(e,this._firestore),d=sh(u.converter,t,o),m=eh(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,Ii.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=vl(e,this._firestore);let m;return m="string"==typeof(t=(0,ge.m9)(t))||t instanceof _l?ug(this._dataReader,"WriteBatch.update",d._key,t,o,u):Zl(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vl(e,this._firestore);return this._mutations=this._mutations.concat(new Xa(t._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new b(st.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vl(i,e){if((i=(0,ge.m9)(i)).firestore!==e)throw new b(st.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Ef extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Co(e)}get(e){const t=vl(e,this._firestore),o=new qm(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Qt();const d=u[0];if(d.isFoundDocument())return new Zc(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Zc(this._firestore,o,t._key,null,t.converter);throw Qt()})}set(e,t,o){const u=vl(e,this._firestore),d=sh(u.converter,t,o),m=eh(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,m),this}update(e,t,o,...u){const d=vl(e,this._firestore);let m;return m="string"==typeof(t=(0,ge.m9)(t))||t instanceof _l?ug(this._dataReader,"Transaction.update",d._key,t,o,u):Zl(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=vl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vl(e,this._firestore),o=new xu(this._firestore);return super.get(e).then(u=>new Ql(this._firestore,o,t._key,u._document,new ca(!1,!1),t.converter))}}function Xm(i,e,t){i=Or(i,Di);const o=Object.assign(Object.assign({},x_),t);return function(u){if(u.maxAttempts<1)throw new b(st.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,d,m){const T=new $;return u.asyncQueue.enqueueAndForget((0,h.Z)(function*(){const F=yield function Im(i){return Bc(i).then(e=>e.datastore)}(u);new Cm(u.asyncQueue,F,m,d,T).run()})),T.promise}(Ss(i),u=>e(new Ef(i,u)),o)}function ey(){return new Wc("deleteField")}function ty(){return new og("serverTimestamp")}function P_(...i){return new a_("arrayUnion",i)}function uh(...i){return new u_("arrayRemove",i)}function lh(i){return new ag("increment",i)}!function(i,e=!0){to=z.SDK_VERSION,(0,z._registerComponent)(new G.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),m=new Di(new nt(t.getProvider("auth-internal")),new mr(t.getProvider("app-check-internal")),function(T,F){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new b(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Z(T.options.projectId,F)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,z.registerVersion)(Za,"3.10.0",i),(0,z.registerVersion)(Za,"3.10.0","esm2017")}()},2090:(zt,He,N)=>{N.d(He,{$s:()=>x,BH:()=>We,G6:()=>Ke,L:()=>Ee,LL:()=>Wt,Pz:()=>Qe,Sg:()=>pt,UG:()=>Ue,US:()=>Ie,ZB:()=>le,ZR:()=>Gt,aH:()=>ve,b$:()=>Ct,eu:()=>tt,hl:()=>ht,jU:()=>At,m9:()=>Te,ne:()=>Xt,pd:()=>Nr,r3:()=>un,ru:()=>Tt,tV:()=>X,uI:()=>he,vZ:()=>on,w1:()=>Ve,xO:()=>Tr,xb:()=>ft,z$:()=>Xe,zI:()=>yt,zd:()=>jn});const q=function(ie){const ue=[];let we=0;for(let $e=0;$e<ie.length;$e++){let Pe=ie.charCodeAt($e);Pe<128?ue[we++]=Pe:Pe<2048?(ue[we++]=Pe>>6|192,ue[we++]=63&Pe|128):55296==(64512&Pe)&&$e+1<ie.length&&56320==(64512&ie.charCodeAt($e+1))?(Pe=65536+((1023&Pe)<<10)+(1023&ie.charCodeAt(++$e)),ue[we++]=Pe>>18|240,ue[we++]=Pe>>12&63|128,ue[we++]=Pe>>6&63|128,ue[we++]=63&Pe|128):(ue[we++]=Pe>>12|224,ue[we++]=Pe>>6&63|128,ue[we++]=63&Pe|128)}return ue},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,ue){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const we=ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,$e=[];for(let Pe=0;Pe<ie.length;Pe+=3){const xt=ie[Pe],_e=Pe+1<ie.length,Ce=_e?ie[Pe+1]:0,ne=Pe+2<ie.length,Se=ne?ie[Pe+2]:0;let nn=(15&Ce)<<2|Se>>6,Un=63&Se;ne||(Un=64,_e||(nn=64)),$e.push(we[xt>>2],we[(3&xt)<<4|Ce>>4],we[nn],we[Un])}return $e.join("")},encodeString(ie,ue){return this.HAS_NATIVE_SUPPORT&&!ue?btoa(ie):this.encodeByteArray(q(ie),ue)},decodeString(ie,ue){return this.HAS_NATIVE_SUPPORT&&!ue?atob(ie):function(ie){const ue=[];let we=0,$e=0;for(;we<ie.length;){const Pe=ie[we++];if(Pe<128)ue[$e++]=String.fromCharCode(Pe);else if(Pe>191&&Pe<224){const xt=ie[we++];ue[$e++]=String.fromCharCode((31&Pe)<<6|63&xt)}else if(Pe>239&&Pe<365){const ne=((7&Pe)<<18|(63&ie[we++])<<12|(63&ie[we++])<<6|63&ie[we++])-65536;ue[$e++]=String.fromCharCode(55296+(ne>>10)),ue[$e++]=String.fromCharCode(56320+(1023&ne))}else{const xt=ie[we++],_e=ie[we++];ue[$e++]=String.fromCharCode((15&Pe)<<12|(63&xt)<<6|63&_e)}}return ue.join("")}(this.decodeStringToByteArray(ie,ue))},decodeStringToByteArray(ie,ue){this.init_();const we=ue?this.charToByteMapWebSafe_:this.charToByteMap_,$e=[];for(let Pe=0;Pe<ie.length;){const xt=we[ie.charAt(Pe++)],Ce=Pe<ie.length?we[ie.charAt(Pe)]:0;++Pe;const Se=Pe<ie.length?we[ie.charAt(Pe)]:64;++Pe;const wt=Pe<ie.length?we[ie.charAt(Pe)]:64;if(++Pe,null==xt||null==Ce||null==Se||null==wt)throw new be;$e.push(xt<<2|Ce>>4),64!==Se&&($e.push(Ce<<4&240|Se>>2),64!==wt&&$e.push(Se<<6&192|wt))}return $e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ee=function(ie){return function(ie){const ue=q(ie);return Ie.encodeByteArray(ue,!0)}(ie).replace(/\./g,"")},X=function(ie){try{return Ie.decodeString(ie,!0)}catch(ue){console.error("base64Decode failed: ",ue)}return null};function le(ie,ue){if(!(ue instanceof Object))return ue;switch(ue.constructor){case Date:return new Date(ue.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return ue}for(const we in ue)!ue.hasOwnProperty(we)||!ze(we)||(ie[we]=le(ie[we],ue[we]));return ie}function ze(ie){return"__proto__"!==ie}const ut=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ie=process.env.__FIREBASE_DEFAULTS__;return ie?JSON.parse(ie):void 0})()||(()=>{if(typeof document>"u")return;let ie;try{ie=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ue=ie&&X(ie[1]);return ue&&JSON.parse(ue)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},ve=()=>{var ie;return null===(ie=ut())||void 0===ie?void 0:ie.config},Qe=ie=>{var ue;return null===(ue=ut())||void 0===ue?void 0:ue[`_${ie}`]};class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ue,we)=>{this.resolve=ue,this.reject=we})}wrapCallback(ue){return(we,$e)=>{we?this.reject(we):this.resolve($e),"function"==typeof ue&&(this.promise.catch(()=>{}),1===ue.length?ue(we):ue(we,$e))}}}function pt(ie,ue){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $e=ue||"demo-project",Pe=ie.iat||0,xt=ie.sub||ie.user_id;if(!xt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _e=Object.assign({iss:`https://securetoken.google.com/${$e}`,aud:$e,iat:Pe,exp:Pe+3600,auth_time:Pe,sub:xt,user_id:xt,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(_e)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Ue(){var ie;const ue=null===(ie=ut())||void 0===ie?void 0:ie.forceEnvironment;if("node"===ue)return!0;if("browser"===ue)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function Tt(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){const ie=Xe();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function Ke(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ht(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((ie,ue)=>{try{let we=!0;const $e="validate-browser-context-for-indexeddb-analytics-module",Pe=self.indexedDB.open($e);Pe.onsuccess=()=>{Pe.result.close(),we||self.indexedDB.deleteDatabase($e),ie(!0)},Pe.onupgradeneeded=()=>{we=!1},Pe.onerror=()=>{var xt;ue((null===(xt=Pe.error)||void 0===xt?void 0:xt.message)||"")}}catch(we){ue(we)}})}function yt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Gt extends Error{constructor(ue,we,$e){super(we),this.code=ue,this.customData=$e,this.name="FirebaseError",Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(ue,we,$e){this.service=ue,this.serviceName=we,this.errors=$e}create(ue,...we){const $e=we[0]||{},Pe=`${this.service}/${ue}`,xt=this.errors[ue],_e=xt?function mn(ie,ue){return ie.replace(kt,(we,$e)=>{const Pe=ue[$e];return null!=Pe?String(Pe):`<${$e}?>`})}(xt,$e):"Error";return new Gt(Pe,`${this.serviceName}: ${_e} (${Pe}).`,$e)}}const kt=/\{\$([^}]+)}/g;function un(ie,ue){return Object.prototype.hasOwnProperty.call(ie,ue)}function ft(ie){for(const ue in ie)if(Object.prototype.hasOwnProperty.call(ie,ue))return!1;return!0}function on(ie,ue){if(ie===ue)return!0;const we=Object.keys(ie),$e=Object.keys(ue);for(const Pe of we){if(!$e.includes(Pe))return!1;const xt=ie[Pe],_e=ue[Pe];if(St(xt)&&St(_e)){if(!on(xt,_e))return!1}else if(xt!==_e)return!1}for(const Pe of $e)if(!we.includes(Pe))return!1;return!0}function St(ie){return null!==ie&&"object"==typeof ie}function Tr(ie){const ue=[];for(const[we,$e]of Object.entries(ie))Array.isArray($e)?$e.forEach(Pe=>{ue.push(encodeURIComponent(we)+"="+encodeURIComponent(Pe))}):ue.push(encodeURIComponent(we)+"="+encodeURIComponent($e));return ue.length?"&"+ue.join("&"):""}function jn(ie){const ue={};return ie.replace(/^\?/,"").split("&").forEach($e=>{if($e){const[Pe,xt]=$e.split("=");ue[decodeURIComponent(Pe)]=decodeURIComponent(xt)}}),ue}function Nr(ie){const ue=ie.indexOf("?");if(!ue)return"";const we=ie.indexOf("#",ue);return ie.substring(ue,we>0?we:void 0)}function Xt(ie,ue){const we=new en(ie,ue);return we.subscribe.bind(we)}class en{constructor(ue,we){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=we,this.task.then(()=>{ue(this)}).catch($e=>{this.error($e)})}next(ue){this.forEachObserver(we=>{we.next(ue)})}error(ue){this.forEachObserver(we=>{we.error(ue)}),this.close(ue)}complete(){this.forEachObserver(ue=>{ue.complete()}),this.close()}subscribe(ue,we,$e){let Pe;if(void 0===ue&&void 0===we&&void 0===$e)throw new Error("Missing Observer.");Pe=function yr(ie,ue){if("object"!=typeof ie||null===ie)return!1;for(const we of ue)if(we in ie&&"function"==typeof ie[we])return!0;return!1}(ue,["next","error","complete"])?ue:{next:ue,error:we,complete:$e},void 0===Pe.next&&(Pe.next=Wn),void 0===Pe.error&&(Pe.error=Wn),void 0===Pe.complete&&(Pe.complete=Wn);const xt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Pe.error(this.finalError):Pe.complete()}catch{}}),this.observers.push(Pe),xt}unsubscribeOne(ue){void 0===this.observers||void 0===this.observers[ue]||(delete this.observers[ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ue){if(!this.finalized)for(let we=0;we<this.observers.length;we++)this.sendOne(we,ue)}sendOne(ue,we){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ue])try{we(this.observers[ue])}catch($e){typeof console<"u"&&console.error&&console.error($e)}})}close(ue){this.finalized||(this.finalized=!0,void 0!==ue&&(this.finalError=ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wn(){}const Sr=1e3,Ft=2,_t=144e5,oe=.5;function x(ie,ue=Sr,we=Ft){const $e=ue*Math.pow(we,ie),Pe=Math.round(oe*$e*(Math.random()-.5)*2);return Math.min(_t,$e+Pe)}function Te(ie){return ie&&ie._delegate?ie._delegate:ie}},9362:(zt,He,N)=>{N.d(He,{M3:()=>q,NZ:()=>h,sC:()=>G,w1:()=>z});const h={production:!1,firebaseConfig:{apiKey:"AIzaSyAt3BVxR9gCcdHSMNLY6qRZdnvxcAz1w6w",authDomain:"instagram-a303f.firebaseapp.com",projectId:"instagram-a303f",storageBucket:"instagram-a303f.appspot.com",messagingSenderId:"668249430748",appId:"1:668249430748:web:e91755cb9d30f89482b219"}},z=[{name:"instagram",value:"home"},{name:"search",value:"search"},{name:"message",value:"message"},{name:"post",value:"post"},{name:"logout",value:"logout"}],G={email:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,password:/^(?=.{6,})(?=.*[a-z])(?=.*[0-9])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$/,text:/^[a-zA-Z,'.\-\s]*$/},q="Null"},2813:(zt,He,N)=>{N.d(He,{$:()=>q});var h=N(4650),z=N(1205),G=N(8209);let q=(()=>{class ge{constructor(be,ae){this.afAuth=be,this.route=ae}SignIn(be,ae){return this.afAuth.signInWithEmailAndPassword(be,ae).then(Ee=>{if(!0!==Ee.user?.emailVerified&&(this.SendVerificationMail(),window.alert("Please validate your email address. Kindly check your inbox. and then login again")),!1!==Ee.user?.emailVerified)return Ee}).catch(Ee=>{window.alert(Ee.message)})}signUp(be,ae){return this.afAuth.createUserWithEmailAndPassword(be,ae).then(Ee=>(!0!==Ee.user?.emailVerified&&(this.SendVerificationMail(),window.alert("Please validate your email address. Kindly check your inbox. and then login again")),console.log(Ee),Ee)).catch(Ee=>{window.alert(Ee.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(be=>(console.log(be),be?.sendEmailVerification())).then(()=>{})}resetPasswordInit(be){return this.afAuth.sendPasswordResetEmail(be,{url:"http://localhost:4200/main/login"})}registerToken(be,ae){localStorage.setItem(be,ae)}removeToken(){localStorage.clear()}getToken(be){return localStorage.getItem(be)}isLoggedIn(){return null!==this.getToken("token")}logout(){localStorage.removeItem("token"),localStorage.clear(),this.route.navigate(["/main/login"])}}return ge.\u0275fac=function(be){return new(be||ge)(h.LFG(z.zQ),h.LFG(G.F0))},ge.\u0275prov=h.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})()},9802:(zt,He,N)=>{N.d(He,{d:()=>ge});var h=N(4650),z=N(33),G=N(377),q=N(2813);let ge=(()=>{class Ie{constructor(ae,Ee,X){this.store=ae,this.storage=Ee,this.authData=X,this.email="",this.email+=this.authData.getToken("email"),console.log(this.email)}addUser(ae,Ee){const X=ae.email,se={name:ae.fullName,userName:ae.userName,email:ae.email,userId:Ee},le=this.store.doc(`usersData/${X}`);return le.set(se).then(()=>(console.log("Document written with ID: ",X),le.get())).then(ze=>(console.log("Document data:",ze),le)).catch(ze=>{throw console.error("Error adding document: ",ze),ze})}uploadImage(ae){const Ee=`post/${Date.now()}_${ae.name}`,X=this.storage.ref(Ee),se=this.storage.upload(Ee,ae);return new Promise((le,ze)=>{se.snapshotChanges().toPromise().then(Oe=>{console.log(Oe),X.getDownloadURL().subscribe(it=>{le(it)})}).catch(Oe=>ze(Oe))})}addPost(ae,Ee,X){const se={imageUrl:ae.postImage,like:0,comments:"",description:ae.postDescription,userId:X,email:Ee,report:!1};this.store.collection("post").add(se).then(le=>{console.log("Document written with ID: ",le.id)}).catch(le=>{console.error("Error adding document: ",le)})}addComment(ae,Ee,X){const se={content:ae.msg,postId:Ee.postId,userId:Ee.userId,parentId:X};this.store.collection("comment").add(se).then(le=>{console.log("Document written with ID: ",le.id)}).catch(le=>{console.error("Error adding document: ",le)})}getComment(ae,Ee){return new Promise((X,se)=>{this.store.collection("comment",le=>le.where("postId","==",ae.postId).where("parentId","==",Ee)).snapshotChanges().subscribe(le=>{const ze=le.map(Oe=>({id:Oe.payload.doc.id,...Oe.payload.doc.data()}));X(ze)},le=>{se(le),console.log(le)})})}Getlike(ae,Ee){return new Promise((X,se)=>{this.store.collection(Ee,le=>le.where("postId","==",ae)).snapshotChanges().subscribe(le=>{const ze=le.map(Oe=>({id:Oe.payload.doc.id,...Oe.payload.doc.data()}));X(ze)},le=>{se(le),console.log(le)})})}checkUser(ae,Ee){return new Promise((X,se)=>{this.store.collection(Ee,le=>le.where("email","==",this.email).where("postId","==",ae)).snapshotChanges().subscribe(le=>{const ze=le.map(Oe=>({id:Oe.payload.doc.id,...Oe.payload.doc.data()}));X(ze)},le=>{se(le),console.log(le)})})}addLike(ae,Ee){const X={postId:ae,email:this.email};this.store.collection(Ee).add(X).then(se=>{console.log("Document written with ID: ",se.id,"hellolike")}).catch(se=>{console.error("Error adding document: ",se)})}deleteLike(ae,Ee){const X=this.authData.getToken("email");return new Promise((se,le)=>{this.store.collection(Ee,ze=>ze.where("email","==",X).where("postId","==",ae)).snapshotChanges().subscribe(ze=>{ze.forEach(Oe=>{Oe.payload.doc.ref.delete()}),se(ze)},ze=>{le(ze),console.log(ze)})})}reportPost(ae,Ee){this.store.collection("post").doc(ae).update({report:Ee})}getPost(ae){return new Promise((Ee,X)=>{this.store.collection("post",se=>se.where("report","==",ae)).snapshotChanges().subscribe(se=>{const le=se.map(ze=>({postId:ze.payload.doc.id,...ze.payload.doc.data()}));Ee(le)},se=>{X(se),console.log(se)})})}}return Ie.\u0275fac=function(ae){return new(ae||Ie)(h.LFG(z.ST),h.LFG(G.Q1),h.LFG(q.$))},Ie.\u0275prov=h.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},5463:(zt,He,N)=>{N.d(He,{o:()=>Ie});var h=N(7579),z=N(4650),G=N(377),q=N(6081),ge=N(33);let Ie=(()=>{class be{setPerc(Ee){this.videoUpload.next(Ee)}getPerc(){return this.videoUpload.asObservable()}constructor(Ee,X,se){this.storage=Ee,this.ngxService=X,this.store=se,this.videoUpload=new h.x}uploadReals(Ee){this.ngxService.start();const X=`reals/${Date.now()}_${Ee.name}`,se=this.storage.ref(X),le=this.storage.upload(X,Ee);return le.percentageChanges().subscribe(ze=>{this.setPerc(ze)}),new Promise((ze,Oe)=>{le.snapshotChanges().toPromise().then(it=>{se.getDownloadURL().subscribe(vt=>{this.ngxService.stop(),ze(vt),console.log(vt)})}).catch(it=>Oe(it))})}addreals(Ee,X,se){const le={reelsUrl:Ee.reals,email:X,userId:se};this.store.collection("reels").add(le).then(ze=>{console.log("Document written with ID: ",ze.id)}).catch(ze=>{console.error("Error adding document: ",ze)})}report(){return new Promise((Ee,X)=>{this.store.collection("post",se=>se.where("report","==",!0)).snapshotChanges().subscribe(se=>{const le=se.map(ze=>({id:ze.payload.doc.id,...ze.payload.doc.data()}));Ee(le)},se=>{X(se),console.log(se)})})}}return be.\u0275fac=function(Ee){return new(Ee||be)(z.LFG(G.Q1),z.LFG(q.LA),z.LFG(ge.ST))},be.\u0275prov=z.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})()},9453:(zt,He,N)=>{N.r(He),N.d(He,{AuthModule:()=>ri});var h=N(6895),z=N(433),G=N(8209),q=N(4650);let ge=(()=>{class Et{constructor(){this.title="instagram"}}return Et.\u0275fac=function(Dt){return new(Dt||Et)},Et.\u0275cmp=q.Xpm({type:Et,selectors:[["app-main"]],decls:1,vars:0,template:function(Dt,an){1&Dt&&q._UZ(0,"router-outlet")},dependencies:[G.lC],encapsulation:2}),Et})();var Ie=N(9362),be=N(2813);function ae(Et,tn){1&Et&&(q.TgZ(0,"div",16),q._uU(1,"email is required in correct format"),q.qZA())}function Ee(Et,tn){1&Et&&(q.TgZ(0,"div",16),q._uU(1,"password is required min 8 digit with title case and one symbol "),q.qZA())}let X=(()=>{class Et{constructor(Dt,an,bn){this.fb=Dt,this.authData=an,this.routes=bn,this.formValidator=Ie.sC,this.loginForm=this.fb.group({email:["",z.kI.compose([z.kI.required,z.kI.pattern(this.formValidator.email)])],password:["",z.kI.compose([z.kI.required,z.kI.pattern(this.formValidator.password)])]})}loginUser(){this.loginForm.valid?this.authData.SignIn(this.loginForm.value.email,this.loginForm.value.password).then(Dt=>{1==Dt?.user?.emailVerified&&(this.authData.registerToken("userId",Dt?.user?.multiFactor?.user?.uid),this.authData.registerToken("token",Dt?.user?.multiFactor?.user?.accessToken),this.authData.registerToken("email",this.loginForm.value.email),this.routes.navigateByUrl("home/instapost"))}):Object.keys(this.loginForm.controls).forEach(Dt=>this.loginForm.controls[Dt].markAsTouched({onlySelf:!0}))}signupBtn(){this.routes.navigateByUrl("/main/signup")}forgotBtn(){this.routes.navigateByUrl("/main/forgot")}}return Et.\u0275fac=function(Dt){return new(Dt||Et)(q.Y36(z.qu),q.Y36(be.$),q.Y36(G.F0))},Et.\u0275cmp=q.Xpm({type:Et,selectors:[["app-login"]],decls:27,vars:3,consts:[[1,"container","vh-100"],[1,"row","justify-content-center","h-100"],[1,"card","my-auto","shadow"],[1,"card-body","px-5"],[1,"text-center"],[1,"text-center",2,"color","lightslategray","text-align","center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","id","email","placeholder","Email","formControlName","email","name","email","required","",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],["type","submit","value","Login","name","",1,"btn","btn-primary","w-100"],[1,"card-footer","text-left"],["type","button",3,"click"],[1,"text",2,"color","lightslategray"],[1,"card-footer","text-right"],[1,"form-text","text-danger"]],template:function(Dt,an){1&Dt&&(q.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),q._uU(6,"Welcome"),q.qZA()(),q.TgZ(7,"p",5),q._uU(8," Please enter your login details"),q.qZA(),q.TgZ(9,"form",6),q.NdJ("ngSubmit",function(){return an.loginUser()}),q.TgZ(10,"div",7),q._UZ(11,"input",8),q.qZA(),q.YNc(12,ae,2,0,"div",9),q._UZ(13,"br"),q.TgZ(14,"div",7),q._UZ(15,"input",10),q.qZA(),q.YNc(16,Ee,2,0,"div",9),q._UZ(17,"br")(18,"input",11),q.qZA()(),q.TgZ(19,"div",12)(20,"small",13),q.NdJ("click",function(){return an.forgotBtn()}),q._uU(21,"Forgot Password"),q.qZA()(),q.TgZ(22,"small",14),q._uU(23," Don't have Acoount ? "),q.qZA(),q.TgZ(24,"div",15)(25,"small",13),q.NdJ("click",function(){return an.signupBtn()}),q._uU(26,"SignUp"),q.qZA()()()()()),2&Dt&&(q.xp6(9),q.Q6J("formGroup",an.loginForm),q.xp6(3),q.Q6J("ngIf",an.loginForm.controls.email.touched&&!an.loginForm.controls.email.valid),q.xp6(4),q.Q6J("ngIf",an.loginForm.controls.password.touched&&!an.loginForm.controls.password.valid))},dependencies:[h.O5,z._Y,z.Fj,z.JJ,z.JL,z.Q7,z.sg,z.u],encapsulation:2}),Et})();var se=N(5861),le=N(529),ze=N(9802);function Oe(Et,tn){1&Et&&(q.TgZ(0,"div",17),q._uU(1,"email is required in correct format"),q.qZA())}function it(Et,tn){1&Et&&(q.TgZ(0,"div",17),q._uU(1,"user Name is required"),q.qZA())}function vt(Et,tn){1&Et&&(q.TgZ(0,"div",17),q._uU(1," fullName is required with minimum 3 length in text format only "),q.qZA())}function qe(Et,tn){1&Et&&(q.TgZ(0,"div",17),q._uU(1,"password is required min 8 digit with title case and one symbol "),q.qZA())}let ut=(()=>{class Et{constructor(Dt,an,bn,Nt,In){this.fb=Dt,this.authData=an,this.routes=bn,this.http=Nt,this.store=In,this.formValidator=Ie.sC,this.signupForm=this.fb.group({email:["",z.kI.compose([z.kI.required,z.kI.pattern(this.formValidator.email)])],userName:["",z.kI.compose([z.kI.required])],fullName:["",z.kI.compose([z.kI.required,z.kI.pattern(this.formValidator.text)])],password:["",z.kI.compose([z.kI.required,z.kI.pattern(this.formValidator.password)])]})}signupUser(){var Dt=this;return(0,se.Z)(function*(){Dt.signupForm.valid?yield Dt.authData.signUp(Dt.signupForm.value.email,Dt.signupForm.value.password).then(an=>{console.log(an?.user?.multiFactor?.user?.uid),"signIn"==an.operationType&&Dt.store.addUser(Dt.signupForm.value,an?.user?.multiFactor?.user?.uid)}):Object.keys(Dt.signupForm.controls).forEach(an=>Dt.signupForm.controls[an].markAsTouched({onlySelf:!0}))})()}loginBtn(){this.routes.navigateByUrl("/main/login")}}return Et.\u0275fac=function(Dt){return new(Dt||Et)(q.Y36(z.qu),q.Y36(be.$),q.Y36(G.F0),q.Y36(le.eN),q.Y36(ze.d))},Et.\u0275cmp=q.Xpm({type:Et,selectors:[["app-signup"]],decls:33,vars:5,consts:[[1,"container","vh-100"],[1,"row","justify-content-center","h-100"],[1,"card","my-auto","shadow"],[1,"card-body","px-5"],[1,"text-center"],[1,"text-center",2,"color","lightslategray","text-align","center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","id","email","placeholder","Email","formControlName","email","name","email","required","",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","text","id","userName","placeholder","Username","formControlName","userName","name","text","required","",1,"form-control"],["type","text","id","fullName","placeholder"," fullName","formControlName","fullName","name","text","required","",1,"form-control"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control"],["type","submit","value","Signup","name","",1,"btn","btn-primary","w-100"],[1,"text",2,"color","lightslategray"],[1,"card-footer","text-right"],["type","button",3,"click"],[1,"form-text","text-danger"]],template:function(Dt,an){1&Dt&&(q.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),q._UZ(4,"div",4),q.TgZ(5,"div",4)(6,"h2"),q._uU(7,"Welcome"),q.qZA()(),q.TgZ(8,"p",5),q._uU(9," Please enter your l details to SignUp"),q.qZA(),q.TgZ(10,"form",6),q.NdJ("ngSubmit",function(){return an.signupUser()}),q.TgZ(11,"div",7),q._UZ(12,"input",8),q.qZA(),q.YNc(13,Oe,2,0,"div",9),q._UZ(14,"br"),q.TgZ(15,"div",7),q._UZ(16,"input",10),q.qZA(),q.YNc(17,it,2,0,"div",9),q._UZ(18,"br"),q.TgZ(19,"div",7),q._UZ(20,"input",11),q.qZA(),q.YNc(21,vt,2,0,"div",9),q._UZ(22,"br"),q.TgZ(23,"div",7),q._UZ(24,"input",12),q.qZA(),q.YNc(25,qe,2,0,"div",9),q._UZ(26,"br")(27,"input",13),q.qZA()(),q.TgZ(28,"small",14),q._uU(29," already have Acoount ? "),q.qZA(),q.TgZ(30,"div",15)(31,"small",16),q.NdJ("click",function(){return an.loginBtn()}),q._uU(32,"Login"),q.qZA()()()()()),2&Dt&&(q.xp6(10),q.Q6J("formGroup",an.signupForm),q.xp6(3),q.Q6J("ngIf",an.signupForm.controls.email.touched&&!an.signupForm.controls.email.valid),q.xp6(4),q.Q6J("ngIf",an.signupForm.controls.userName.touched&&!an.signupForm.controls.userName.valid),q.xp6(4),q.Q6J("ngIf",an.signupForm.controls.fullName.touched&&!an.signupForm.controls.fullName.valid),q.xp6(4),q.Q6J("ngIf",an.signupForm.controls.password.touched&&!an.signupForm.controls.password.valid))},dependencies:[h.O5,z._Y,z.Fj,z.JJ,z.JL,z.Q7,z.sg,z.u],encapsulation:2}),Et})();function et(Et,tn){1&Et&&(q.TgZ(0,"div",14),q._uU(1,"email is required in correct format"),q.qZA())}let dt=(()=>{class Et{constructor(Dt,an,bn){this.fb=Dt,this.authData=an,this.routes=bn,this.title="instagram",this.forgotForm=this.fb.group({email:["",z.kI.compose([z.kI.required,z.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")])]})}forgotUser(){this.forgotForm.valid?(console.log(this.forgotForm.value),this.authData.resetPasswordInit(this.forgotForm.value.email),alert("plz check your email"),this.routes.navigate(["/main/login"])):Object.keys(this.forgotForm.controls).forEach(Dt=>this.forgotForm.controls[Dt].markAsTouched({onlySelf:!0}))}loginBtn(){this.routes.navigateByUrl("/main/signup")}}return Et.\u0275fac=function(Dt){return new(Dt||Et)(q.Y36(z.qu),q.Y36(be.$),q.Y36(G.F0))},Et.\u0275cmp=q.Xpm({type:Et,selectors:[["app-forgot"]],decls:21,vars:2,consts:[[1,"container","vh-100"],[1,"row","justify-content-center","h-100"],[1,"card","my-auto","shadow"],[1,"card-body","px-5"],[1,"text-center"],[1,"text-center",2,"color","lightslategray","text-align","center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","id","email","placeholder","Email","formControlName","email","name","email","required","",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","submit","value","Forgot Password","name","",1,"btn","btn-primary","w-100"],[1,"text",2,"color","lightslategray"],[1,"card-footer","text-right"],["type","button",3,"click"],[1,"form-text","text-danger"]],template:function(Dt,an){1&Dt&&(q.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),q._UZ(4,"div",4),q.TgZ(5,"div",4)(6,"h2"),q._uU(7,"Welcome"),q.qZA()(),q.TgZ(8,"p",5),q._uU(9," Please enter your login details"),q.qZA(),q.TgZ(10,"form",6),q.NdJ("ngSubmit",function(){return an.forgotUser()}),q.TgZ(11,"div",7),q._UZ(12,"input",8),q.qZA(),q.YNc(13,et,2,0,"div",9),q._UZ(14,"br")(15,"input",10),q.qZA()(),q.TgZ(16,"small",11),q._uU(17," dont have account "),q.qZA(),q.TgZ(18,"div",12)(19,"small",13),q.NdJ("click",function(){return an.loginBtn()}),q._uU(20,"login"),q.qZA()()()()()),2&Dt&&(q.xp6(10),q.Q6J("formGroup",an.forgotForm),q.xp6(3),q.Q6J("ngIf",an.forgotForm.controls.email.touched&&!an.forgotForm.controls.email.valid))},dependencies:[h.O5,z._Y,z.Fj,z.JJ,z.JL,z.Q7,z.sg,z.u],encapsulation:2}),Et})();const ve=[{path:"",component:ge,children:[{path:"login",component:X},{path:"signup",component:ut},{path:"forgot",component:dt},{path:"main",component:dt},{path:"",redirectTo:"/main/login",pathMatch:"full"}]}];let Qe=(()=>{class Et{}return Et.\u0275fac=function(Dt){return new(Dt||Et)},Et.\u0275mod=q.oAB({type:Et}),Et.\u0275inj=q.cJS({imports:[G.Bz.forChild(ve),G.Bz]}),Et})();var We=N(2011),pt=N(2122),Xe=N(3692),he=N(259);N(5525);class At{constructor(tn){return tn}}const Tt="firestore",Ve=new q.OlP("angularfire2.firestore-instances"),Ke={provide:class Ct{constructor(){return(0,pt.vb)(Tt)}},deps:[[new q.FiY,Ve]]},ht={provide:At,useFactory:function Ze(Et,tn){const Dt=(0,pt.JM)(Tt,Et,tn);return Dt&&new At(Dt)},deps:[[new q.FiY,Ve],Xe.Ot]};let tt=(()=>{class Et{constructor(){(0,he.KN)("angularfire",pt.q4.full,"fst")}}return Et.\u0275fac=function(Dt){return new(Dt||Et)},Et.\u0275mod=q.oAB({type:Et}),Et.\u0275inj=q.cJS({providers:[ht,Ke]}),Et})();var Un=N(33);const Cr=new q.OlP("@sweetalert2/ngx-sweetalert2#swalProvider"),Br=new q.OlP("@sweetalert2/ngx-sweetalert2#fireOnInit"),ai=new q.OlP("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");let gr=(()=>{class Et{constructor(Dt){this.swalProvider=Dt}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const Dt=function an(Nt){return"function"==typeof Nt&&void 0===Nt.version}(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=Dt.then(Nt=>function bn(Nt){return"function"==typeof Nt}(Nt)?Nt:Nt.default)}}return Et.\u0275fac=function(Dt){return new(Dt||Et)(q.LFG(Cr))},Et.\u0275prov=q.Yz7({token:Et,factory:Et.\u0275fac}),Et})();function wr(){return N.e(226).then(N.t.bind(N,5226,19))}let Er=(()=>{class Et{static forRoot(Dt={}){return{ngModule:Et,providers:[gr,{provide:Cr,useValue:Dt.provideSwal||wr},{provide:Br,useValue:Dt.fireOnInit||!1},{provide:ai,useValue:Dt.dismissOnDestroy||!0}]}}static forChild(Dt={}){return{ngModule:Et,providers:[...Dt.provideSwal?[gr,{provide:Cr,useValue:Dt.provideSwal}]:[],...void 0!==Dt.fireOnInit?[{provide:Br,useValue:Dt.fireOnInit}]:[],...void 0!==Dt.dismissOnDestroy?[{provide:ai,useValue:Dt.dismissOnDestroy}]:[]]}}}return Et.\u0275fac=function(Dt){return new(Dt||Et)},Et.\u0275mod=q.oAB({type:Et}),Et.\u0275inj=q.cJS({imports:[h.ez]}),Et})(),ri=(()=>{class Et{}return Et.\u0275fac=function(Dt){return new(Dt||Et)},Et.\u0275mod=q.oAB({type:Et}),Et.\u0275inj=q.cJS({providers:[be.$],imports:[h.ez,z.UX,Qe,We.hO.initializeApp(Ie.NZ.firebaseConfig),le.JF,tt,Er,We.hO,Un.yb]}),Et})()},1542:(zt,He,N)=>{var h=N(1481),z=N(8209),G=N(4650),q=N(2813);let ge=(()=>{class Oe{constructor(vt,qe){this.routes=vt,this.authData=qe}canActivate(vt,qe){return this.authData.isLoggedIn()?this.authData.isLoggedIn():(this.routes.navigate(["/main/login"]),!1)}}return Oe.\u0275fac=function(vt){return new(vt||Oe)(G.LFG(z.F0),G.LFG(q.$))},Oe.\u0275prov=G.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();const Ie=[{path:"",redirectTo:"/main/login",pathMatch:"full"},{path:"main",loadChildren:()=>Promise.resolve().then(N.bind(N,9453)).then(Oe=>Oe.AuthModule)},{path:"home",canActivate:[ge],loadChildren:()=>N.e(299).then(N.bind(N,2299)).then(Oe=>Oe.HomeModule)}];let be=(()=>{class Oe{}return Oe.\u0275fac=function(vt){return new(vt||Oe)},Oe.\u0275mod=G.oAB({type:Oe}),Oe.\u0275inj=G.cJS({imports:[z.Bz.forRoot(Ie),z.Bz]}),Oe})();var ae=N(5463),Ee=N(6895),X=N(6081);let se=(()=>{class Oe{constructor(vt,qe){this.reelServie=vt,this.decimalPipe=qe,this.videoPercentage="",this.title="instagram",this.hello="",this.reelServie.getPerc().subscribe(ut=>{this.videoPercentage=this.decimalPipe.transform(ut,"1.1-2")+"%",100==ut&&(this.videoPercentage=" ")})}}return Oe.\u0275fac=function(vt){return new(vt||Oe)(G.Y36(ae.o),G.Y36(Ee.JJ))},Oe.\u0275cmp=G.Xpm({type:Oe,selectors:[["app-root"]],decls:4,vars:2,consts:[["fgsType","square-jelly-box",3,"fgsSize","text"]],template:function(vt,qe){1&vt&&(G.TgZ(0,"ngx-ui-loader",0)(1,"p"),G._uU(2,"jksdycgac "),G.qZA()(),G._UZ(3,"router-outlet")),2&vt&&(G.s9C("text",qe.videoPercentage),G.Q6J("fgsSize",150))},dependencies:[z.lC,X.Eo],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:100% 0%;width:36%}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:0;transform:translate(-40px);cursor:pointer}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:0}"]}),Oe})();var le=N(9453);let ze=(()=>{class Oe{}return Oe.\u0275fac=function(vt){return new(vt||Oe)},Oe.\u0275mod=G.oAB({type:Oe,bootstrap:[se]}),Oe.\u0275inj=G.cJS({providers:[ge,Ee.JJ],imports:[h.b2,be,X.Js,X.Cz.forRoot({showForeground:!0}),X.cS,le.AuthModule]}),Oe})();h.q6().bootstrapModule(ze).catch(Oe=>console.error(Oe))},1135:(zt,He,N)=>{N.d(He,{X:()=>z});var h=N(7579);class z extends h.x{constructor(q){super(),this._value=q}get value(){return this.getValue()}_subscribe(q){const ge=super._subscribe(q);return!ge.closed&&q.next(this._value),ge}getValue(){const{hasError:q,thrownError:ge,_value:Ie}=this;if(q)throw ge;return this._throwIfClosed(),Ie}next(q){super.next(this._value=q)}}},9751:(zt,He,N)=>{N.d(He,{y:()=>ae});var h=N(2961),z=N(727),G=N(8822),q=N(9635),ge=N(2416),Ie=N(576),be=N(2806);let ae=(()=>{class le{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const it=new le;return it.source=this,it.operator=Oe,it}subscribe(Oe,it,vt){const qe=function se(le){return le&&le instanceof h.Lv||function X(le){return le&&(0,Ie.m)(le.next)&&(0,Ie.m)(le.error)&&(0,Ie.m)(le.complete)}(le)&&(0,z.Nn)(le)}(Oe)?Oe:new h.Hp(Oe,it,vt);return(0,be.x)(()=>{const{operator:ut,source:et}=this;qe.add(ut?ut.call(qe,et):et?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(it){Oe.error(it)}}forEach(Oe,it){return new(it=Ee(it))((vt,qe)=>{const ut=new h.Hp({next:et=>{try{Oe(et)}catch(dt){qe(dt),ut.unsubscribe()}},error:qe,complete:vt});this.subscribe(ut)})}_subscribe(Oe){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(Oe)}[G.L](){return this}pipe(...Oe){return(0,q.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ee(Oe))((it,vt)=>{let qe;this.subscribe(ut=>qe=ut,ut=>vt(ut),()=>it(qe))})}}return le.create=ze=>new le(ze),le})();function Ee(le){var ze;return null!==(ze=le??ge.v.Promise)&&void 0!==ze?ze:Promise}},7579:(zt,He,N)=>{N.d(He,{x:()=>be});var h=N(9751),z=N(727);const q=(0,N(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=N(8737),Ie=N(2806);let be=(()=>{class Ee extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const le=new ae(this,this);return le.operator=se,le}_throwIfClosed(){if(this.closed)throw new q}next(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(se)}})}error(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:le}=this;for(;le.length;)le.shift().error(se)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:le,isStopped:ze,observers:Oe}=this;return le||ze?z.Lc:(this.currentObservers=null,Oe.push(se),new z.w0(()=>{this.currentObservers=null,(0,ge.P)(Oe,se)}))}_checkFinalizedStatuses(se){const{hasError:le,thrownError:ze,isStopped:Oe}=this;le?se.error(ze):Oe&&se.complete()}asObservable(){const se=new h.y;return se.source=this,se}}return Ee.create=(X,se)=>new ae(X,se),Ee})();class ae extends be{constructor(X,se){super(),this.destination=X,this.source=se}next(X){var se,le;null===(le=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===le||le.call(se,X)}error(X){var se,le;null===(le=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===le||le.call(se,X)}complete(){var X,se;null===(se=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===se||se.call(X)}_subscribe(X){var se,le;return null!==(le=null===(se=this.source)||void 0===se?void 0:se.subscribe(X))&&void 0!==le?le:z.Lc}}},2961:(zt,He,N)=>{N.d(He,{Hp:()=>vt,Lv:()=>le});var h=N(576),z=N(727),G=N(2416),q=N(7849);function ge(){}const Ie=Ee("C",void 0,void 0);function Ee(ve,Qe,We){return{kind:ve,value:Qe,error:We}}var X=N(3410),se=N(2806);class le extends z.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,z.Nn)(Qe)&&Qe.add(this)):this.destination=dt}static create(Qe,We,pt){return new vt(Qe,We,pt)}next(Qe){this.isStopped?et(function ae(ve){return Ee("N",ve,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?et(function be(ve){return Ee("E",void 0,ve)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?et(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Oe(ve,Qe){return ze.call(ve,Qe)}class it{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:We}=this;if(We.next)try{We.next(Qe)}catch(pt){qe(pt)}}error(Qe){const{partialObserver:We}=this;if(We.error)try{We.error(Qe)}catch(pt){qe(pt)}else qe(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(We){qe(We)}}}class vt extends le{constructor(Qe,We,pt){let Xe;if(super(),(0,h.m)(Qe)||!Qe)Xe={next:Qe??void 0,error:We??void 0,complete:pt??void 0};else{let he;this&&G.v.useDeprecatedNextContext?(he=Object.create(Qe),he.unsubscribe=()=>this.unsubscribe(),Xe={next:Qe.next&&Oe(Qe.next,he),error:Qe.error&&Oe(Qe.error,he),complete:Qe.complete&&Oe(Qe.complete,he)}):Xe=Qe}this.destination=new it(Xe)}}function qe(ve){G.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(ve):(0,q.h)(ve)}function et(ve,Qe){const{onStoppedNotification:We}=G.v;We&&X.z.setTimeout(()=>We(ve,Qe))}const dt={closed:!0,next:ge,error:function ut(ve){throw ve},complete:ge}},727:(zt,He,N)=>{N.d(He,{Lc:()=>Ie,w0:()=>ge,Nn:()=>be});var h=N(576);const G=(0,N(3888).d)(Ee=>function(se){Ee(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((le,ze)=>`${ze+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var q=N(8737);class ge{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const Oe of se)Oe.remove(this);else se.remove(this);const{initialTeardown:le}=this;if((0,h.m)(le))try{le()}catch(Oe){X=Oe instanceof G?Oe.errors:[Oe]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Oe of ze)try{ae(Oe)}catch(it){X=X??[],it instanceof G?X=[...X,...it.errors]:X.push(it)}}if(X)throw new G(X)}}add(X){var se;if(X&&X!==this)if(this.closed)ae(X);else{if(X instanceof ge){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(X)}}_hasParent(X){const{_parentage:se}=this;return se===X||Array.isArray(se)&&se.includes(X)}_addParent(X){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(X),se):se?[se,X]:X}_removeParent(X){const{_parentage:se}=this;se===X?this._parentage=null:Array.isArray(se)&&(0,q.P)(se,X)}remove(X){const{_finalizers:se}=this;se&&(0,q.P)(se,X),X instanceof ge&&X._removeParent(this)}}ge.EMPTY=(()=>{const Ee=new ge;return Ee.closed=!0,Ee})();const Ie=ge.EMPTY;function be(Ee){return Ee instanceof ge||Ee&&"closed"in Ee&&(0,h.m)(Ee.remove)&&(0,h.m)(Ee.add)&&(0,h.m)(Ee.unsubscribe)}function ae(Ee){(0,h.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(zt,He,N)=>{N.d(He,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(zt,He,N)=>{N.d(He,{z:()=>ge});var h=N(8189),G=N(7669),q=N(8996);function ge(...Ie){return function z(){return(0,h.J)(1)}()((0,q.D)(Ie,(0,G.yG)(Ie)))}},515:(zt,He,N)=>{N.d(He,{E:()=>z});const z=new(N(9751).y)(ge=>ge.complete())},8996:(zt,He,N)=>{N.d(He,{D:()=>Qe});var h=N(8421),z=N(5363),G=N(9468),Ie=N(9751),ae=N(2202),Ee=N(576),X=N(9672);function le(We,pt){if(!We)throw new Error("Iterable cannot be null");return new Ie.y(Xe=>{(0,X.f)(Xe,pt,()=>{const he=We[Symbol.asyncIterator]();(0,X.f)(Xe,pt,()=>{he.next().then(Ue=>{Ue.done?Xe.complete():Xe.next(Ue.value)})},0,!0)})})}var ze=N(3670),Oe=N(8239),it=N(1144),vt=N(6495),qe=N(2206),ut=N(4532),et=N(3260);function Qe(We,pt){return pt?function ve(We,pt){if(null!=We){if((0,ze.c)(We))return function q(We,pt){return(0,h.Xf)(We).pipe((0,G.R)(pt),(0,z.Q)(pt))}(We,pt);if((0,it.z)(We))return function be(We,pt){return new Ie.y(Xe=>{let he=0;return pt.schedule(function(){he===We.length?Xe.complete():(Xe.next(We[he++]),Xe.closed||this.schedule())})})}(We,pt);if((0,Oe.t)(We))return function ge(We,pt){return(0,h.Xf)(We).pipe((0,G.R)(pt),(0,z.Q)(pt))}(We,pt);if((0,qe.D)(We))return le(We,pt);if((0,vt.T)(We))return function se(We,pt){return new Ie.y(Xe=>{let he;return(0,X.f)(Xe,pt,()=>{he=We[ae.h](),(0,X.f)(Xe,pt,()=>{let Ue,At;try{({value:Ue,done:At}=he.next())}catch(Tt){return void Xe.error(Tt)}At?Xe.complete():Xe.next(Ue)},0,!0)}),()=>(0,Ee.m)(he?.return)&&he.return()})}(We,pt);if((0,et.L)(We))return function dt(We,pt){return le((0,et.Q)(We),pt)}(We,pt)}throw(0,ut.z)(We)}(We,pt):(0,h.Xf)(We)}},8421:(zt,He,N)=>{N.d(He,{Xf:()=>ze});var h=N(655),z=N(1144),G=N(8239),q=N(9751),ge=N(3670),Ie=N(2206),be=N(4532),ae=N(6495),Ee=N(3260),X=N(576),se=N(7849),le=N(8822);function ze(ve){if(ve instanceof q.y)return ve;if(null!=ve){if((0,ge.c)(ve))return function Oe(ve){return new q.y(Qe=>{const We=ve[le.L]();if((0,X.m)(We.subscribe))return We.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,z.z)(ve))return function it(ve){return new q.y(Qe=>{for(let We=0;We<ve.length&&!Qe.closed;We++)Qe.next(ve[We]);Qe.complete()})}(ve);if((0,G.t)(ve))return function vt(ve){return new q.y(Qe=>{ve.then(We=>{Qe.closed||(Qe.next(We),Qe.complete())},We=>Qe.error(We)).then(null,se.h)})}(ve);if((0,Ie.D)(ve))return ut(ve);if((0,ae.T)(ve))return function qe(ve){return new q.y(Qe=>{for(const We of ve)if(Qe.next(We),Qe.closed)return;Qe.complete()})}(ve);if((0,Ee.L)(ve))return function et(ve){return ut((0,Ee.Q)(ve))}(ve)}throw(0,be.z)(ve)}function ut(ve){return new q.y(Qe=>{(function dt(ve,Qe){var We,pt,Xe,he;return(0,h.mG)(this,void 0,void 0,function*(){try{for(We=(0,h.KL)(ve);!(pt=yield We.next()).done;)if(Qe.next(pt.value),Qe.closed)return}catch(Ue){Xe={error:Ue}}finally{try{pt&&!pt.done&&(he=We.return)&&(yield he.call(We))}finally{if(Xe)throw Xe.error}}Qe.complete()})})(ve,Qe).catch(We=>Qe.error(We))})}},6451:(zt,He,N)=>{N.d(He,{T:()=>Ie});var h=N(8189),z=N(8421),G=N(515),q=N(7669),ge=N(8996);function Ie(...be){const ae=(0,q.yG)(be),Ee=(0,q._6)(be,1/0),X=be;return X.length?1===X.length?(0,z.Xf)(X[0]):(0,h.J)(Ee)((0,ge.D)(X,ae)):G.E}},9646:(zt,He,N)=>{N.d(He,{of:()=>G});var h=N(7669),z=N(8996);function G(...q){const ge=(0,h.yG)(q);return(0,z.D)(q,ge)}},5403:(zt,He,N)=>{N.d(He,{x:()=>z});var h=N(2961);function z(q,ge,Ie,be,ae){return new G(q,ge,Ie,be,ae)}class G extends h.Lv{constructor(ge,Ie,be,ae,Ee,X){super(ge),this.onFinalize=Ee,this.shouldUnsubscribe=X,this._next=Ie?function(se){try{Ie(se)}catch(le){ge.error(le)}}:super._next,this._error=ae?function(se){try{ae(se)}catch(le){ge.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(se){ge.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4351:(zt,He,N)=>{N.d(He,{b:()=>G});var h=N(5577),z=N(576);function G(q,ge){return(0,z.m)(ge)?(0,h.z)(q,ge,1):(0,h.z)(q,1)}},6590:(zt,He,N)=>{N.d(He,{d:()=>G});var h=N(4482),z=N(5403);function G(q){return(0,h.e)((ge,Ie)=>{let be=!1;ge.subscribe((0,z.x)(Ie,ae=>{be=!0,Ie.next(ae)},()=>{be||Ie.next(q),Ie.complete()}))})}},9300:(zt,He,N)=>{N.d(He,{h:()=>G});var h=N(4482),z=N(5403);function G(q,ge){return(0,h.e)((Ie,be)=>{let ae=0;Ie.subscribe((0,z.x)(be,Ee=>q.call(ge,Ee,ae++)&&be.next(Ee)))})}},8746:(zt,He,N)=>{N.d(He,{x:()=>z});var h=N(4482);function z(G){return(0,h.e)((q,ge)=>{try{q.subscribe(ge)}finally{ge.add(G)}})}},590:(zt,He,N)=>{N.d(He,{P:()=>be});var h=N(6805),z=N(9300),G=N(5698),q=N(6590),ge=N(8068),Ie=N(4671);function be(ae,Ee){const X=arguments.length>=2;return se=>se.pipe(ae?(0,z.h)((le,ze)=>ae(le,ze,se)):Ie.y,(0,G.q)(1),X?(0,q.d)(Ee):(0,ge.T)(()=>new h.K))}},4004:(zt,He,N)=>{N.d(He,{U:()=>G});var h=N(4482),z=N(5403);function G(q,ge){return(0,h.e)((Ie,be)=>{let ae=0;Ie.subscribe((0,z.x)(be,Ee=>{be.next(q.call(ge,Ee,ae++))}))})}},8189:(zt,He,N)=>{N.d(He,{J:()=>G});var h=N(5577),z=N(4671);function G(q=1/0){return(0,h.z)(z.y,q)}},5577:(zt,He,N)=>{N.d(He,{z:()=>ae});var h=N(4004),z=N(8421),G=N(4482),q=N(9672),ge=N(5403),be=N(576);function ae(Ee,X,se=1/0){return(0,be.m)(X)?ae((le,ze)=>(0,h.U)((Oe,it)=>X(le,Oe,ze,it))((0,z.Xf)(Ee(le,ze))),se):("number"==typeof X&&(se=X),(0,G.e)((le,ze)=>function Ie(Ee,X,se,le,ze,Oe,it,vt){const qe=[];let ut=0,et=0,dt=!1;const ve=()=>{dt&&!qe.length&&!ut&&X.complete()},Qe=pt=>ut<le?We(pt):qe.push(pt),We=pt=>{Oe&&X.next(pt),ut++;let Xe=!1;(0,z.Xf)(se(pt,et++)).subscribe((0,ge.x)(X,he=>{ze?.(he),Oe?Qe(he):X.next(he)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(ut--;qe.length&&ut<le;){const he=qe.shift();it?(0,q.f)(X,it,()=>We(he)):We(he)}ve()}catch(he){X.error(he)}}))};return Ee.subscribe((0,ge.x)(X,Qe,()=>{dt=!0,ve()})),()=>{vt?.()}}(le,ze,Ee,se)))}},5363:(zt,He,N)=>{N.d(He,{Q:()=>q});var h=N(9672),z=N(4482),G=N(5403);function q(ge,Ie=0){return(0,z.e)((be,ae)=>{be.subscribe((0,G.x)(ae,Ee=>(0,h.f)(ae,ge,()=>ae.next(Ee),Ie),()=>(0,h.f)(ae,ge,()=>ae.complete(),Ie),Ee=>(0,h.f)(ae,ge,()=>ae.error(Ee),Ie)))})}},5026:(zt,He,N)=>{N.d(He,{R:()=>q});var h=N(4482),z=N(5403);function q(ge,Ie){return(0,h.e)(function G(ge,Ie,be,ae,Ee){return(X,se)=>{let le=be,ze=Ie,Oe=0;X.subscribe((0,z.x)(se,it=>{const vt=Oe++;ze=le?ge(ze,it,vt):(le=!0,it),ae&&se.next(ze)},Ee&&(()=>{le&&se.next(ze),se.complete()})))}}(ge,Ie,arguments.length>=2,!0))}},3099:(zt,He,N)=>{N.d(He,{B:()=>ge});var h=N(8421),z=N(7579),G=N(2961),q=N(4482);function ge(be={}){const{connector:ae=(()=>new z.x),resetOnError:Ee=!0,resetOnComplete:X=!0,resetOnRefCountZero:se=!0}=be;return le=>{let ze,Oe,it,vt=0,qe=!1,ut=!1;const et=()=>{Oe?.unsubscribe(),Oe=void 0},dt=()=>{et(),ze=it=void 0,qe=ut=!1},ve=()=>{const Qe=ze;dt(),Qe?.unsubscribe()};return(0,q.e)((Qe,We)=>{vt++,!ut&&!qe&&et();const pt=it=it??ae();We.add(()=>{vt--,0===vt&&!ut&&!qe&&(Oe=Ie(ve,se))}),pt.subscribe(We),!ze&&vt>0&&(ze=new G.Hp({next:Xe=>pt.next(Xe),error:Xe=>{ut=!0,et(),Oe=Ie(dt,Ee,Xe),pt.error(Xe)},complete:()=>{qe=!0,et(),Oe=Ie(dt,X),pt.complete()}}),(0,h.Xf)(Qe).subscribe(ze))})(le)}}function Ie(be,ae,...Ee){if(!0===ae)return void be();if(!1===ae)return;const X=new G.Hp({next:()=>{X.unsubscribe(),be()}});return(0,h.Xf)(ae(...Ee)).subscribe(X)}},8675:(zt,He,N)=>{N.d(He,{O:()=>q});var h=N(7272),z=N(7669),G=N(4482);function q(...ge){const Ie=(0,z.yG)(ge);return(0,G.e)((be,ae)=>{(Ie?(0,h.z)(ge,be,Ie):(0,h.z)(ge,be)).subscribe(ae)})}},9468:(zt,He,N)=>{N.d(He,{R:()=>z});var h=N(4482);function z(G,q=0){return(0,h.e)((ge,Ie)=>{Ie.add(G.schedule(()=>ge.subscribe(Ie),q))})}},3900:(zt,He,N)=>{N.d(He,{w:()=>q});var h=N(8421),z=N(4482),G=N(5403);function q(ge,Ie){return(0,z.e)((be,ae)=>{let Ee=null,X=0,se=!1;const le=()=>se&&!Ee&&ae.complete();be.subscribe((0,G.x)(ae,ze=>{Ee?.unsubscribe();let Oe=0;const it=X++;(0,h.Xf)(ge(ze,it)).subscribe(Ee=(0,G.x)(ae,vt=>ae.next(Ie?Ie(ze,vt,it,Oe++):vt),()=>{Ee=null,le()}))},()=>{se=!0,le()}))})}},5698:(zt,He,N)=>{N.d(He,{q:()=>q});var h=N(515),z=N(4482),G=N(5403);function q(ge){return ge<=0?()=>h.E:(0,z.e)((Ie,be)=>{let ae=0;Ie.subscribe((0,G.x)(be,Ee=>{++ae<=ge&&(be.next(Ee),ge<=ae&&be.complete())}))})}},8505:(zt,He,N)=>{N.d(He,{b:()=>ge});var h=N(576),z=N(4482),G=N(5403),q=N(4671);function ge(Ie,be,ae){const Ee=(0,h.m)(Ie)||be||ae?{next:Ie,error:be,complete:ae}:Ie;return Ee?(0,z.e)((X,se)=>{var le;null===(le=Ee.subscribe)||void 0===le||le.call(Ee);let ze=!0;X.subscribe((0,G.x)(se,Oe=>{var it;null===(it=Ee.next)||void 0===it||it.call(Ee,Oe),se.next(Oe)},()=>{var Oe;ze=!1,null===(Oe=Ee.complete)||void 0===Oe||Oe.call(Ee),se.complete()},Oe=>{var it;ze=!1,null===(it=Ee.error)||void 0===it||it.call(Ee,Oe),se.error(Oe)},()=>{var Oe,it;ze&&(null===(Oe=Ee.unsubscribe)||void 0===Oe||Oe.call(Ee)),null===(it=Ee.finalize)||void 0===it||it.call(Ee)}))}):q.y}},8068:(zt,He,N)=>{N.d(He,{T:()=>q});var h=N(6805),z=N(4482),G=N(5403);function q(Ie=ge){return(0,z.e)((be,ae)=>{let Ee=!1;be.subscribe((0,G.x)(ae,X=>{Ee=!0,ae.next(X)},()=>Ee?ae.complete():ae.error(Ie())))})}function ge(){return new h.K}},4408:(zt,He,N)=>{N.d(He,{o:()=>ge});var h=N(727);class z extends h.w0{constructor(be,ae){super()}schedule(be,ae=0){return this}}const G={setInterval(Ie,be,...ae){const{delegate:Ee}=G;return Ee?.setInterval?Ee.setInterval(Ie,be,...ae):setInterval(Ie,be,...ae)},clearInterval(Ie){const{delegate:be}=G;return(be?.clearInterval||clearInterval)(Ie)},delegate:void 0};var q=N(8737);class ge extends z{constructor(be,ae){super(be,ae),this.scheduler=be,this.work=ae,this.pending=!1}schedule(be,ae=0){var Ee;if(this.closed)return this;this.state=be;const X=this.id,se=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(se,X,ae)),this.pending=!0,this.delay=ae,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(se,this.id,ae),this}requestAsyncId(be,ae,Ee=0){return G.setInterval(be.flush.bind(be,this),Ee)}recycleAsyncId(be,ae,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ae;null!=ae&&G.clearInterval(ae)}execute(be,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(be,ae);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,ae){let X,Ee=!1;try{this.work(be)}catch(se){Ee=!0,X=se||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:be,scheduler:ae}=this,{actions:Ee}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,q.P)(Ee,this),null!=be&&(this.id=this.recycleAsyncId(ae,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(zt,He,N)=>{N.d(He,{v:()=>G});var h=N(6063);class z{constructor(ge,Ie=z.now){this.schedulerActionCtor=ge,this.now=Ie}schedule(ge,Ie=0,be){return new this.schedulerActionCtor(this,ge).schedule(be,Ie)}}z.now=h.l.now;class G extends z{constructor(ge,Ie=z.now){super(ge,Ie),this.actions=[],this._active=!1}flush(ge){const{actions:Ie}=this;if(this._active)return void Ie.push(ge);let be;this._active=!0;do{if(be=ge.execute(ge.state,ge.delay))break}while(ge=Ie.shift());if(this._active=!1,be){for(;ge=Ie.shift();)ge.unsubscribe();throw be}}}},4986:(zt,He,N)=>{N.d(He,{z:()=>G});var h=N(4408);const G=new(N(7565).v)(h.o)},6063:(zt,He,N)=>{N.d(He,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(zt,He,N)=>{N.d(He,{z:()=>h});const h={setTimeout(z,G,...q){const{delegate:ge}=h;return ge?.setTimeout?ge.setTimeout(z,G,...q):setTimeout(z,G,...q)},clearTimeout(z){const{delegate:G}=h;return(G?.clearTimeout||clearTimeout)(z)},delegate:void 0}},2202:(zt,He,N)=>{N.d(He,{h:()=>z});const z=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(zt,He,N)=>{N.d(He,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(zt,He,N)=>{N.d(He,{K:()=>z});const z=(0,N(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(zt,He,N)=>{N.d(He,{_6:()=>Ie,jO:()=>q,yG:()=>ge});var h=N(576);function G(be){return be[be.length-1]}function q(be){return(0,h.m)(G(be))?be.pop():void 0}function ge(be){return function z(be){return be&&(0,h.m)(be.schedule)}(G(be))?be.pop():void 0}function Ie(be,ae){return"number"==typeof G(be)?be.pop():ae}},4742:(zt,He,N)=>{N.d(He,{D:()=>ge});const{isArray:h}=Array,{getPrototypeOf:z,prototype:G,keys:q}=Object;function ge(be){if(1===be.length){const ae=be[0];if(h(ae))return{args:ae,keys:null};if(function Ie(be){return be&&"object"==typeof be&&z(be)===G}(ae)){const Ee=q(ae);return{args:Ee.map(X=>ae[X]),keys:Ee}}}return{args:be,keys:null}}},8737:(zt,He,N)=>{function h(z,G){if(z){const q=z.indexOf(G);0<=q&&z.splice(q,1)}}N.d(He,{P:()=>h})},3888:(zt,He,N)=>{function h(z){const q=z(ge=>{Error.call(ge),ge.stack=(new Error).stack});return q.prototype=Object.create(Error.prototype),q.prototype.constructor=q,q}N.d(He,{d:()=>h})},1810:(zt,He,N)=>{function h(z,G){return z.reduce((q,ge,Ie)=>(q[ge]=G[Ie],q),{})}N.d(He,{n:()=>h})},2806:(zt,He,N)=>{N.d(He,{O:()=>q,x:()=>G});var h=N(2416);let z=null;function G(ge){if(h.v.useDeprecatedSynchronousErrorHandling){const Ie=!z;if(Ie&&(z={errorThrown:!1,error:null}),ge(),Ie){const{errorThrown:be,error:ae}=z;if(z=null,be)throw ae}}else ge()}function q(ge){h.v.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=ge)}},9672:(zt,He,N)=>{function h(z,G,q,ge=0,Ie=!1){const be=G.schedule(function(){q(),Ie?z.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(z.add(be),!Ie)return be}N.d(He,{f:()=>h})},4671:(zt,He,N)=>{function h(z){return z}N.d(He,{y:()=>h})},1144:(zt,He,N)=>{N.d(He,{z:()=>h});const h=z=>z&&"number"==typeof z.length&&"function"!=typeof z},2206:(zt,He,N)=>{N.d(He,{D:()=>z});var h=N(576);function z(G){return Symbol.asyncIterator&&(0,h.m)(G?.[Symbol.asyncIterator])}},576:(zt,He,N)=>{function h(z){return"function"==typeof z}N.d(He,{m:()=>h})},3670:(zt,He,N)=>{N.d(He,{c:()=>G});var h=N(8822),z=N(576);function G(q){return(0,z.m)(q[h.L])}},6495:(zt,He,N)=>{N.d(He,{T:()=>G});var h=N(2202),z=N(576);function G(q){return(0,z.m)(q?.[h.h])}},8239:(zt,He,N)=>{N.d(He,{t:()=>z});var h=N(576);function z(G){return(0,h.m)(G?.then)}},3260:(zt,He,N)=>{N.d(He,{L:()=>q,Q:()=>G});var h=N(655),z=N(576);function G(ge){return(0,h.FC)(this,arguments,function*(){const be=ge.getReader();try{for(;;){const{value:ae,done:Ee}=yield(0,h.qq)(be.read());if(Ee)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ae)}}finally{be.releaseLock()}})}function q(ge){return(0,z.m)(ge?.getReader)}},4482:(zt,He,N)=>{N.d(He,{A:()=>z,e:()=>G});var h=N(576);function z(q){return(0,h.m)(q?.lift)}function G(q){return ge=>{if(z(ge))return ge.lift(function(Ie){try{return q(Ie,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(zt,He,N)=>{N.d(He,{Z:()=>q});var h=N(4004);const{isArray:z}=Array;function q(ge){return(0,h.U)(Ie=>function G(ge,Ie){return z(Ie)?ge(...Ie):ge(Ie)}(ge,Ie))}},9635:(zt,He,N)=>{N.d(He,{U:()=>G,z:()=>z});var h=N(4671);function z(...q){return G(q)}function G(q){return 0===q.length?h.y:1===q.length?q[0]:function(Ie){return q.reduce((be,ae)=>ae(be),Ie)}}},7849:(zt,He,N)=>{N.d(He,{h:()=>G});var h=N(2416),z=N(3410);function G(q){z.z.setTimeout(()=>{const{onUnhandledError:ge}=h.v;if(!ge)throw q;ge(q)})}},4532:(zt,He,N)=>{function h(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(He,{z:()=>h})},655:(zt,He,N)=>{function q(Ve,Ze){var Be={};for(var Ke in Ve)Object.prototype.hasOwnProperty.call(Ve,Ke)&&Ze.indexOf(Ke)<0&&(Be[Ke]=Ve[Ke]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var ht=0;for(Ke=Object.getOwnPropertySymbols(Ve);ht<Ke.length;ht++)Ze.indexOf(Ke[ht])<0&&Object.prototype.propertyIsEnumerable.call(Ve,Ke[ht])&&(Be[Ke[ht]]=Ve[Ke[ht]])}return Be}function le(Ve,Ze,Be,Ke){return new(Be||(Be=Promise))(function(tt,yt){function mt(mn){try{Wt(Ke.next(mn))}catch(kt){yt(kt)}}function Gt(mn){try{Wt(Ke.throw(mn))}catch(kt){yt(kt)}}function Wt(mn){mn.done?tt(mn.value):function ht(tt){return tt instanceof Be?tt:new Be(function(yt){yt(tt)})}(mn.value).then(mt,Gt)}Wt((Ke=Ke.apply(Ve,Ze||[])).next())})}function ve(Ve){return this instanceof ve?(this.v=Ve,this):new ve(Ve)}function Qe(Ve,Ze,Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht,Ke=Be.apply(Ve,Ze||[]),tt=[];return ht={},yt("next"),yt("throw"),yt("return"),ht[Symbol.asyncIterator]=function(){return this},ht;function yt(Zt){Ke[Zt]&&(ht[Zt]=function(Cn){return new Promise(function(wn,Ln){tt.push([Zt,Cn,wn,Ln])>1||mt(Zt,Cn)})})}function mt(Zt,Cn){try{!function Gt(Zt){Zt.value instanceof ve?Promise.resolve(Zt.value.v).then(Wt,mn):kt(tt[0][2],Zt)}(Ke[Zt](Cn))}catch(wn){kt(tt[0][3],wn)}}function Wt(Zt){mt("next",Zt)}function mn(Zt){mt("throw",Zt)}function kt(Zt,Cn){Zt(Cn),tt.shift(),tt.length&&mt(tt[0][0],tt[0][1])}}function pt(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,Ze=Ve[Symbol.asyncIterator];return Ze?Ze.call(Ve):(Ve=function vt(Ve){var Ze="function"==typeof Symbol&&Symbol.iterator,Be=Ze&&Ve[Ze],Ke=0;if(Be)return Be.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&Ke>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[Ke++],done:!Ve}}};throw new TypeError(Ze?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),Be={},Ke("next"),Ke("throw"),Ke("return"),Be[Symbol.asyncIterator]=function(){return this},Be);function Ke(tt){Be[tt]=Ve[tt]&&function(yt){return new Promise(function(mt,Gt){!function ht(tt,yt,mt,Gt){Promise.resolve(Gt).then(function(Wt){tt({value:Wt,done:mt})},yt)}(mt,Gt,(yt=Ve[tt](yt)).done,yt.value)})}}}N.d(He,{FC:()=>Qe,KL:()=>pt,_T:()=>q,mG:()=>le,qq:()=>ve})},6895:(zt,He,N)=>{N.d(He,{Do:()=>et,EM:()=>Os,HT:()=>q,JF:()=>ys,JJ:()=>ko,K0:()=>Ie,Mx:()=>Dt,NF:()=>Js,O5:()=>Lt,Ov:()=>Kr,PC:()=>ii,PM:()=>Eo,S$:()=>vt,V_:()=>Ee,Ye:()=>dt,b0:()=>ut,bD:()=>Qs,ez:()=>Wi,mk:()=>Nt,q:()=>G,sg:()=>Me,tP:()=>Mi,w_:()=>ge});var h=N(4650);let z=null;function G(){return z}function q(b){z||(z=b)}class ge{}const Ie=new h.OlP("DocumentToken");let be=(()=>{class b{historyGo(P){throw new Error("Not implemented")}}return b.\u0275fac=function(P){return new(P||b)},b.\u0275prov=h.Yz7({token:b,factory:function(){return function ae(){return(0,h.LFG)(X)}()},providedIn:"platform"}),b})();const Ee=new h.OlP("Location Initialized");let X=(()=>{class b extends be{constructor(P){super(),this._doc=P,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(P){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",P,!1),()=>Y.removeEventListener("popstate",P)}onHashChange(P){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",P,!1),()=>Y.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,Y,ye){se()?this._history.pushState(P,Y,ye):this._location.hash=ye}replaceState(P,Y,ye){se()?this._history.replaceState(P,Y,ye):this._location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return b.\u0275fac=function(P){return new(P||b)(h.LFG(Ie))},b.\u0275prov=h.Yz7({token:b,factory:function(){return function le(){return new X((0,h.LFG)(Ie))}()},providedIn:"platform"}),b})();function se(){return!!window.history.pushState}function ze(b,$){if(0==b.length)return $;if(0==$.length)return b;let P=0;return b.endsWith("/")&&P++,$.startsWith("/")&&P++,2==P?b+$.substring(1):1==P?b+$:b+"/"+$}function Oe(b){const $=b.match(/#|\?|$/),P=$&&$.index||b.length;return b.slice(0,P-("/"===b[P-1]?1:0))+b.slice(P)}function it(b){return b&&"?"!==b[0]?"?"+b:b}let vt=(()=>{class b{historyGo(P){throw new Error("Not implemented")}}return b.\u0275fac=function(P){return new(P||b)},b.\u0275prov=h.Yz7({token:b,factory:function(){return(0,h.f3M)(ut)},providedIn:"root"}),b})();const qe=new h.OlP("appBaseHref");let ut=(()=>{class b extends vt{constructor(P,Y){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return ze(this._baseHref,P)}path(P=!1){const Y=this._platformLocation.pathname+it(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&P?`${Y}${ye}`:Y}pushState(P,Y,ye,nt){const Mt=this.prepareExternalUrl(ye+it(nt));this._platformLocation.pushState(P,Y,Mt)}replaceState(P,Y,ye,nt){const Mt=this.prepareExternalUrl(ye+it(nt));this._platformLocation.replaceState(P,Y,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return b.\u0275fac=function(P){return new(P||b)(h.LFG(be),h.LFG(qe,8))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),et=(()=>{class b extends vt{constructor(P,Y){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(P){const Y=ze(this._baseHref,P);return Y.length>0?"#"+Y:Y}pushState(P,Y,ye,nt){let Mt=this.prepareExternalUrl(ye+it(nt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.pushState(P,Y,Mt)}replaceState(P,Y,ye,nt){let Mt=this.prepareExternalUrl(ye+it(nt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.replaceState(P,Y,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return b.\u0275fac=function(P){return new(P||b)(h.LFG(be),h.LFG(qe,8))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac}),b})(),dt=(()=>{class b{constructor(P){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const Y=this._locationStrategy.getBaseHref();this._basePath=function pt(b){if(new RegExp("^(https?:)?//").test(b)){const[,P]=b.split(/\/\/[^\/]+/);return P}return b}(Oe(We(Y))),this._locationStrategy.onPopState(ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:ye.state,type:ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,Y=""){return this.path()==this.normalize(P+it(Y))}normalize(P){return b.stripTrailingSlash(function Qe(b,$){if(!b||!$.startsWith(b))return $;const P=$.substring(b.length);return""===P||["/",";","?","#"].includes(P[0])?P:$}(this._basePath,We(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,Y="",ye=null){this._locationStrategy.pushState(ye,"",P,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+it(Y)),ye)}replaceState(P,Y="",ye=null){this._locationStrategy.replaceState(ye,"",P,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+it(Y)),ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",Y){this._urlChangeListeners.forEach(ye=>ye(P,Y))}subscribe(P,Y,ye){return this._subject.subscribe({next:P,error:Y,complete:ye})}}return b.normalizeQueryParams=it,b.joinWithSlash=ze,b.stripTrailingSlash=Oe,b.\u0275fac=function(P){return new(P||b)(h.LFG(vt))},b.\u0275prov=h.Yz7({token:b,factory:function(){return function ve(){return new dt((0,h.LFG)(vt))}()},providedIn:"root"}),b})();function We(b){return b.replace(/\/index.html$/,"")}var he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Percent=1]="Percent",he[he.Currency=2]="Currency",he[he.Scientific=3]="Scientific",he))(),Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Group=1]="Group",Pt[Pt.List=2]="List",Pt[Pt.PercentSign=3]="PercentSign",Pt[Pt.PlusSign=4]="PlusSign",Pt[Pt.MinusSign=5]="MinusSign",Pt[Pt.Exponential=6]="Exponential",Pt[Pt.SuperscriptingExponent=7]="SuperscriptingExponent",Pt[Pt.PerMille=8]="PerMille",Pt[Pt.Infinity=9]="Infinity",Pt[Pt.NaN=10]="NaN",Pt[Pt.TimeSeparator=11]="TimeSeparator",Pt[Pt.CurrencyDecimal=12]="CurrencyDecimal",Pt[Pt.CurrencyGroup=13]="CurrencyGroup",Pt))();function kt(b,$){const P=(0,h.cg1)(b),Y=P[h.wAp.NumberSymbols][$];if(typeof Y>"u"){if($===Pt.CurrencyDecimal)return P[h.wAp.NumberSymbols][Pt.Decimal];if($===Pt.CurrencyGroup)return P[h.wAp.NumberSymbols][Pt.Group]}return Y}const Ce=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ne=22,Se=".",at="0",wt=";",nn=",",Un="#";function wr(b){const $=parseInt(b);if(isNaN($))throw new Error("Invalid integer literal when parsing "+b);return $}function Dt(b,$){$=encodeURIComponent($);for(const P of b.split(";")){const Y=P.indexOf("="),[ye,nt]=-1==Y?[P,""]:[P.slice(0,Y),P.slice(Y+1)];if(ye.trim()===$)return decodeURIComponent(nt)}return null}const an=/\s+/,bn=[];let Nt=(()=>{class b{constructor(P,Y,ye,nt){this._iterableDiffers=P,this._keyValueDiffers=Y,this._ngEl=ye,this._renderer=nt,this.initialClasses=bn,this.stateMap=new Map}set klass(P){this.initialClasses=null!=P?P.trim().split(an):bn}set ngClass(P){this.rawClass="string"==typeof P?P.trim().split(an):P}ngDoCheck(){for(const Y of this.initialClasses)this._updateState(Y,!0);const P=this.rawClass;if(Array.isArray(P)||P instanceof Set)for(const Y of P)this._updateState(Y,!0);else if(null!=P)for(const Y of Object.keys(P))this._updateState(Y,Boolean(P[Y]));this._applyStateDiff()}_updateState(P,Y){const ye=this.stateMap.get(P);void 0!==ye?(ye.enabled!==Y&&(ye.changed=!0,ye.enabled=Y),ye.touched=!0):this.stateMap.set(P,{enabled:Y,changed:!0,touched:!0})}_applyStateDiff(){for(const P of this.stateMap){const Y=P[0],ye=P[1];ye.changed?(this._toggleClass(Y,ye.enabled),ye.changed=!1):ye.touched||(ye.enabled&&this._toggleClass(Y,!1),this.stateMap.delete(Y)),ye.touched=!1}}_toggleClass(P,Y){(P=P.trim()).length>0&&P.split(an).forEach(ye=>{Y?this._renderer.addClass(this._ngEl.nativeElement,ye):this._renderer.removeClass(this._ngEl.nativeElement,ye)})}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class Fe{constructor($,P,Y,ye){this.$implicit=$,this.ngForOf=P,this.index=Y,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Me=(()=>{class b{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,Y,ye){this._viewContainer=P,this._template=Y,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const Y=this._viewContainer;P.forEachOperation((ye,nt,Mt)=>{if(null==ye.previousIndex)Y.createEmbeddedView(this._template,new Fe(ye.item,this._ngForOf,-1,-1),null===Mt?void 0:Mt);else if(null==Mt)Y.remove(null===nt?void 0:nt);else if(null!==nt){const vn=Y.get(nt);Y.move(vn,Mt),je(vn,ye)}});for(let ye=0,nt=Y.length;ye<nt;ye++){const vn=Y.get(ye).context;vn.index=ye,vn.count=nt,vn.ngForOf=this._ngForOf}P.forEachIdentityChange(ye=>{je(Y.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(P,Y){return!0}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function je(b,$){b.context.$implicit=$.item}let Lt=(()=>{class b{constructor(P,Y){this._viewContainer=P,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){$t("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){$t("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,Y){return!0}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.s_b),h.Y36(h.Rgc))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function $t(b,$){if($&&!$.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,h.AaK)($)}'.`)}let ii=(()=>{class b{constructor(P,Y,ye){this._ngEl=P,this._differs=Y,this._renderer=ye,this._ngStyle=null,this._differ=null}set ngStyle(P){this._ngStyle=P,!this._differ&&P&&(this._differ=this._differs.find(P).create())}ngDoCheck(){if(this._differ){const P=this._differ.diff(this._ngStyle);P&&this._applyChanges(P)}}_setStyle(P,Y){const[ye,nt]=P.split("."),Mt=-1===ye.indexOf("-")?void 0:h.JOm.DashCase;null!=Y?this._renderer.setStyle(this._ngEl.nativeElement,ye,nt?`${Y}${nt}`:Y,Mt):this._renderer.removeStyle(this._ngEl.nativeElement,ye,Mt)}_applyChanges(P){P.forEachRemovedItem(Y=>this._setStyle(Y.key,null)),P.forEachAddedItem(Y=>this._setStyle(Y.key,Y.currentValue)),P.forEachChangedItem(Y=>this._setStyle(Y.key,Y.currentValue))}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),b})(),Mi=(()=>{class b{constructor(P){this._viewContainerRef=P,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(P){if(P.ngTemplateOutlet||P.ngTemplateOutletInjector){const Y=this._viewContainerRef;if(this._viewRef&&Y.remove(Y.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ye,ngTemplateOutletContext:nt,ngTemplateOutletInjector:Mt}=this;this._viewRef=Y.createEmbeddedView(ye,nt,Mt?{injector:Mt}:void 0)}else this._viewRef=null}else this._viewRef&&P.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.s_b))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[h.TTD]}),b})();function er(b,$){return new h.vHH(2100,!1)}class ni{createSubscription($,P){return $.subscribe({next:P,error:Y=>{throw Y}})}dispose($){$.unsubscribe()}}class uo{createSubscription($,P){return $.then(P,Y=>{throw Y})}dispose($){}}const Vs=new uo,ki=new ni;let Kr=(()=>{class b{constructor(P){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=P}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(P){return this._obj?P!==this._obj?(this._dispose(),this.transform(P)):this._latestValue:(P&&this._subscribe(P),this._latestValue)}_subscribe(P){this._obj=P,this._strategy=this._selectStrategy(P),this._subscription=this._strategy.createSubscription(P,Y=>this._updateLatestValue(P,Y))}_selectStrategy(P){if((0,h.QGY)(P))return Vs;if((0,h.F4k)(P))return ki;throw er()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(P,Y){P===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.sBO,16))},b.\u0275pipe=h.Yjl({name:"async",type:b,pure:!1,standalone:!0}),b})(),ko=(()=>{class b{constructor(P){this._locale=P}transform(P,Y,ye){if(!function ns(b){return!(null==b||""===b||b!=b)}(P))return null;ye=ye||this._locale;try{return function qr(b,$,P){return function Br(b,$,P,Y,ye,nt,Mt=!1){let vn="",Dr=!1;if(isFinite(b)){let mr=function Si(b){let Y,ye,nt,Mt,vn,$=Math.abs(b)+"",P=0;for((ye=$.indexOf(Se))>-1&&($=$.replace(Se,"")),(nt=$.search(/e/i))>0?(ye<0&&(ye=nt),ye+=+$.slice(nt+1),$=$.substring(0,nt)):ye<0&&(ye=$.length),nt=0;$.charAt(nt)===at;nt++);if(nt===(vn=$.length))Y=[0],ye=1;else{for(vn--;$.charAt(vn)===at;)vn--;for(ye-=nt,Y=[],Mt=0;nt<=vn;nt++,Mt++)Y[Mt]=Number($.charAt(nt))}return ye>ne&&(Y=Y.splice(0,ne-1),P=ye-1,ye=1),{digits:Y,exponent:P,integerLen:ye}}(b);Mt&&(mr=function Us(b){if(0===b.digits[0])return b;const $=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===$?b.digits.push(0,0):1===$&&b.digits.push(0),b.integerLen+=2),b}(mr));let Ur=$.minInt,qn=$.minFrac,wi=$.maxFrac;if(nt){const Ci=nt.match(Ce);if(null===Ci)throw new Error(`${nt} is not a valid digit info`);const tr=Ci[1],bs=Ci[3],Yr=Ci[5];null!=tr&&(Ur=wr(tr)),null!=bs&&(qn=wr(bs)),null!=Yr?wi=wr(Yr):null!=bs&&qn>wi&&(wi=qn)}!function Vn(b,$,P){if($>P)throw new Error(`The minimum number of digits after fraction (${$}) is higher than the maximum (${P}).`);let Y=b.digits,ye=Y.length-b.integerLen;const nt=Math.min(Math.max($,ye),P);let Mt=nt+b.integerLen,vn=Y[Mt];if(Mt>0){Y.splice(Math.max(b.integerLen,Mt));for(let qn=Mt;qn<Y.length;qn++)Y[qn]=0}else{ye=Math.max(0,ye),b.integerLen=1,Y.length=Math.max(1,Mt=nt+1),Y[0]=0;for(let qn=1;qn<Mt;qn++)Y[qn]=0}if(vn>=5)if(Mt-1<0){for(let qn=0;qn>Mt;qn--)Y.unshift(0),b.integerLen++;Y.unshift(1),b.integerLen++}else Y[Mt-1]++;for(;ye<Math.max(0,nt);ye++)Y.push(0);let Dr=0!==nt;const mr=$+b.integerLen,Ur=Y.reduceRight(function(qn,wi,ln,Ar){return Ar[ln]=(wi+=qn)<10?wi:wi-10,Dr&&(0===Ar[ln]&&ln>=mr?Ar.pop():Dr=!1),wi>=10?1:0},0);Ur&&(Y.unshift(Ur),b.integerLen++)}(mr,qn,wi);let ln=mr.digits,Ar=mr.integerLen;const po=mr.exponent;let On=[];for(Dr=ln.every(Ci=>!Ci);Ar<Ur;Ar++)ln.unshift(0);for(;Ar<0;Ar++)ln.unshift(0);Ar>0?On=ln.splice(Ar,ln.length):(On=ln,ln=[0]);const cn=[];for(ln.length>=$.lgSize&&cn.unshift(ln.splice(-$.lgSize,ln.length).join(""));ln.length>$.gSize;)cn.unshift(ln.splice(-$.gSize,ln.length).join(""));ln.length&&cn.unshift(ln.join("")),vn=cn.join(kt(P,Y)),On.length&&(vn+=kt(P,ye)+On.join("")),po&&(vn+=kt(P,Pt.Exponential)+"+"+po)}else vn=kt(P,Pt.Infinity);return vn=b<0&&!Dr?$.negPre+vn+$.negSuf:$.posPre+vn+$.posSuf,vn}(b,function Yn(b,$="-"){const P={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Y=b.split(wt),ye=Y[0],nt=Y[1],Mt=-1!==ye.indexOf(Se)?ye.split(Se):[ye.substring(0,ye.lastIndexOf(at)+1),ye.substring(ye.lastIndexOf(at)+1)],vn=Mt[0],Dr=Mt[1]||"";P.posPre=vn.substring(0,vn.indexOf(Un));for(let Ur=0;Ur<Dr.length;Ur++){const qn=Dr.charAt(Ur);qn===at?P.minFrac=P.maxFrac=Ur+1:qn===Un?P.maxFrac=Ur+1:P.posSuf+=qn}const mr=vn.split(nn);if(P.gSize=mr[1]?mr[1].length:0,P.lgSize=mr[2]||mr[1]?(mr[2]||mr[1]).length:0,nt){const Ur=ye.length-P.posPre.length-P.posSuf.length,qn=nt.indexOf(Un);P.negPre=nt.substring(0,qn).replace(/'/g,""),P.negSuf=nt.slice(qn+Ur).replace(/'/g,"")}else P.negPre=$+P.posPre,P.negSuf=P.posSuf;return P}(function Zt(b,$){return(0,h.cg1)(b)[h.wAp.NumberFormats][$]}($,he.Decimal),kt($,Pt.MinusSign)),$,Pt.Group,Pt.Decimal,P)}(function ps(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(P),ye,Y)}catch(nt){throw er()}}}return b.\u0275fac=function(P){return new(P||b)(h.Y36(h.soG,16))},b.\u0275pipe=h.Yjl({name:"number",type:b,pure:!0,standalone:!0}),b})();let Wi=(()=>{class b{}return b.\u0275fac=function(P){return new(P||b)},b.\u0275mod=h.oAB({type:b}),b.\u0275inj=h.cJS({}),b})();const Qs="browser",_i="server";function Js(b){return b===Qs}function Eo(b){return b===_i}let Os=(()=>{class b{}return b.\u0275prov=(0,h.Yz7)({token:b,providedIn:"root",factory:()=>new rs((0,h.LFG)(Ie),window)}),b})();class rs{constructor($,P){this.document=$,this.window=P,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const P=function $i(b,$){const P=b.getElementById($)||b.getElementsByName($)[0];if(P)return P;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const Y=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let ye=Y.currentNode;for(;ye;){const nt=ye.shadowRoot;if(nt){const Mt=nt.getElementById($)||nt.querySelector(`[name="${$}"]`);if(Mt)return Mt}ye=Y.nextNode()}}return null}(this.document,$);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=$)}}scrollToElement($){const P=$.getBoundingClientRect(),Y=P.left+this.window.pageXOffset,ye=P.top+this.window.pageYOffset,nt=this.offset();this.window.scrollTo(Y-nt[0],ye-nt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=ms(this.window.history)||ms(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ms(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class ys{}},529:(zt,He,N)=>{N.d(He,{JF:()=>Sr,TP:()=>tt,eN:()=>Ze});var h=N(6895),z=N(4650),G=N(9646),q=N(9751),ge=N(4351),Ie=N(9300),be=N(4004);class ae{}class Ee{}class X{constructor(x){this.normalizedNames=new Map,this.lazyUpdate=null,x?this.lazyInit="string"==typeof x?()=>{this.headers=new Map,x.split("\n").forEach(B=>{const de=B.indexOf(":");if(de>0){const Te=B.slice(0,de),ie=Te.toLowerCase(),ue=B.slice(de+1).trim();this.maybeSetNormalizedName(Te,ie),this.headers.has(ie)?this.headers.get(ie).push(ue):this.headers.set(ie,[ue])}})}:()=>{this.headers=new Map,Object.keys(x).forEach(B=>{let de=x[B];const Te=B.toLowerCase();"string"==typeof de&&(de=[de]),de.length>0&&(this.headers.set(Te,de),this.maybeSetNormalizedName(B,Te))})}:this.headers=new Map}has(x){return this.init(),this.headers.has(x.toLowerCase())}get(x){this.init();const B=this.headers.get(x.toLowerCase());return B&&B.length>0?B[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(x){return this.init(),this.headers.get(x.toLowerCase())||null}append(x,B){return this.clone({name:x,value:B,op:"a"})}set(x,B){return this.clone({name:x,value:B,op:"s"})}delete(x,B){return this.clone({name:x,value:B,op:"d"})}maybeSetNormalizedName(x,B){this.normalizedNames.has(B)||this.normalizedNames.set(B,x)}init(){this.lazyInit&&(this.lazyInit instanceof X?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(x=>this.applyUpdate(x)),this.lazyUpdate=null))}copyFrom(x){x.init(),Array.from(x.headers.keys()).forEach(B=>{this.headers.set(B,x.headers.get(B)),this.normalizedNames.set(B,x.normalizedNames.get(B))})}clone(x){const B=new X;return B.lazyInit=this.lazyInit&&this.lazyInit instanceof X?this.lazyInit:this,B.lazyUpdate=(this.lazyUpdate||[]).concat([x]),B}applyUpdate(x){const B=x.name.toLowerCase();switch(x.op){case"a":case"s":let de=x.value;if("string"==typeof de&&(de=[de]),0===de.length)return;this.maybeSetNormalizedName(x.name,B);const Te=("a"===x.op?this.headers.get(B):void 0)||[];Te.push(...de),this.headers.set(B,Te);break;case"d":const ie=x.value;if(ie){let ue=this.headers.get(B);if(!ue)return;ue=ue.filter(we=>-1===ie.indexOf(we)),0===ue.length?(this.headers.delete(B),this.normalizedNames.delete(B)):this.headers.set(B,ue)}else this.headers.delete(B),this.normalizedNames.delete(B)}}forEach(x){this.init(),Array.from(this.normalizedNames.keys()).forEach(B=>x(this.normalizedNames.get(B),this.headers.get(B)))}}class le{encodeKey(x){return vt(x)}encodeValue(x){return vt(x)}decodeKey(x){return decodeURIComponent(x)}decodeValue(x){return decodeURIComponent(x)}}const Oe=/%(\d[a-f0-9])/gi,it={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vt(oe){return encodeURIComponent(oe).replace(Oe,(x,B)=>it[B]??x)}function qe(oe){return`${oe}`}class ut{constructor(x={}){if(this.updates=null,this.cloneFrom=null,this.encoder=x.encoder||new le,x.fromString){if(x.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ze(oe,x){const B=new Map;return oe.length>0&&oe.replace(/^\?/,"").split("&").forEach(Te=>{const ie=Te.indexOf("="),[ue,we]=-1==ie?[x.decodeKey(Te),""]:[x.decodeKey(Te.slice(0,ie)),x.decodeValue(Te.slice(ie+1))],$e=B.get(ue)||[];$e.push(we),B.set(ue,$e)}),B}(x.fromString,this.encoder)}else x.fromObject?(this.map=new Map,Object.keys(x.fromObject).forEach(B=>{const de=x.fromObject[B],Te=Array.isArray(de)?de.map(qe):[qe(de)];this.map.set(B,Te)})):this.map=null}has(x){return this.init(),this.map.has(x)}get(x){this.init();const B=this.map.get(x);return B?B[0]:null}getAll(x){return this.init(),this.map.get(x)||null}keys(){return this.init(),Array.from(this.map.keys())}append(x,B){return this.clone({param:x,value:B,op:"a"})}appendAll(x){const B=[];return Object.keys(x).forEach(de=>{const Te=x[de];Array.isArray(Te)?Te.forEach(ie=>{B.push({param:de,value:ie,op:"a"})}):B.push({param:de,value:Te,op:"a"})}),this.clone(B)}set(x,B){return this.clone({param:x,value:B,op:"s"})}delete(x,B){return this.clone({param:x,value:B,op:"d"})}toString(){return this.init(),this.keys().map(x=>{const B=this.encoder.encodeKey(x);return this.map.get(x).map(de=>B+"="+this.encoder.encodeValue(de)).join("&")}).filter(x=>""!==x).join("&")}clone(x){const B=new ut({encoder:this.encoder});return B.cloneFrom=this.cloneFrom||this,B.updates=(this.updates||[]).concat(x),B}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(x=>this.map.set(x,this.cloneFrom.map.get(x))),this.updates.forEach(x=>{switch(x.op){case"a":case"s":const B=("a"===x.op?this.map.get(x.param):void 0)||[];B.push(qe(x.value)),this.map.set(x.param,B);break;case"d":if(void 0===x.value){this.map.delete(x.param);break}{let de=this.map.get(x.param)||[];const Te=de.indexOf(qe(x.value));-1!==Te&&de.splice(Te,1),de.length>0?this.map.set(x.param,de):this.map.delete(x.param)}}}),this.cloneFrom=this.updates=null)}}class dt{constructor(){this.map=new Map}set(x,B){return this.map.set(x,B),this}get(x){return this.map.has(x)||this.map.set(x,x.defaultValue()),this.map.get(x)}delete(x){return this.map.delete(x),this}has(x){return this.map.has(x)}keys(){return this.map.keys()}}function Qe(oe){return typeof ArrayBuffer<"u"&&oe instanceof ArrayBuffer}function We(oe){return typeof Blob<"u"&&oe instanceof Blob}function pt(oe){return typeof FormData<"u"&&oe instanceof FormData}class he{constructor(x,B,de,Te){let ie;if(this.url=B,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=x.toUpperCase(),function ve(oe){switch(oe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Te?(this.body=void 0!==de?de:null,ie=Te):ie=de,ie&&(this.reportProgress=!!ie.reportProgress,this.withCredentials=!!ie.withCredentials,ie.responseType&&(this.responseType=ie.responseType),ie.headers&&(this.headers=ie.headers),ie.context&&(this.context=ie.context),ie.params&&(this.params=ie.params)),this.headers||(this.headers=new X),this.context||(this.context=new dt),this.params){const ue=this.params.toString();if(0===ue.length)this.urlWithParams=B;else{const we=B.indexOf("?");this.urlWithParams=B+(-1===we?"?":we<B.length-1?"&":"")+ue}}else this.params=new ut,this.urlWithParams=B}serializeBody(){return null===this.body?null:Qe(this.body)||We(this.body)||pt(this.body)||function Xe(oe){return typeof URLSearchParams<"u"&&oe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ut?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pt(this.body)?null:We(this.body)?this.body.type||null:Qe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ut?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(x={}){const B=x.method||this.method,de=x.url||this.url,Te=x.responseType||this.responseType,ie=void 0!==x.body?x.body:this.body,ue=void 0!==x.withCredentials?x.withCredentials:this.withCredentials,we=void 0!==x.reportProgress?x.reportProgress:this.reportProgress;let $e=x.headers||this.headers,Pe=x.params||this.params;const xt=x.context??this.context;return void 0!==x.setHeaders&&($e=Object.keys(x.setHeaders).reduce((_e,Ce)=>_e.set(Ce,x.setHeaders[Ce]),$e)),x.setParams&&(Pe=Object.keys(x.setParams).reduce((_e,Ce)=>_e.set(Ce,x.setParams[Ce]),Pe)),new he(B,de,ie,{params:Pe,headers:$e,context:xt,reportProgress:we,responseType:Te,withCredentials:ue})}}var Ue=(()=>((Ue=Ue||{})[Ue.Sent=0]="Sent",Ue[Ue.UploadProgress=1]="UploadProgress",Ue[Ue.ResponseHeader=2]="ResponseHeader",Ue[Ue.DownloadProgress=3]="DownloadProgress",Ue[Ue.Response=4]="Response",Ue[Ue.User=5]="User",Ue))();class At{constructor(x,B=200,de="OK"){this.headers=x.headers||new X,this.status=void 0!==x.status?x.status:B,this.statusText=x.statusText||de,this.url=x.url||null,this.ok=this.status>=200&&this.status<300}}class Tt extends At{constructor(x={}){super(x),this.type=Ue.ResponseHeader}clone(x={}){return new Tt({headers:x.headers||this.headers,status:void 0!==x.status?x.status:this.status,statusText:x.statusText||this.statusText,url:x.url||this.url||void 0})}}class Ct extends At{constructor(x={}){super(x),this.type=Ue.Response,this.body=void 0!==x.body?x.body:null}clone(x={}){return new Ct({body:void 0!==x.body?x.body:this.body,headers:x.headers||this.headers,status:void 0!==x.status?x.status:this.status,statusText:x.statusText||this.statusText,url:x.url||this.url||void 0})}}class Pt extends At{constructor(x){super(x,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${x.url||"(unknown url)"}`:`Http failure response for ${x.url||"(unknown url)"}: ${x.status} ${x.statusText}`,this.error=x.error||null}}function Ve(oe,x){return{body:x,headers:oe.headers,context:oe.context,observe:oe.observe,params:oe.params,reportProgress:oe.reportProgress,responseType:oe.responseType,withCredentials:oe.withCredentials}}let Ze=(()=>{class oe{constructor(B){this.handler=B}request(B,de,Te={}){let ie;if(B instanceof he)ie=B;else{let $e,Pe;$e=Te.headers instanceof X?Te.headers:new X(Te.headers),Te.params&&(Pe=Te.params instanceof ut?Te.params:new ut({fromObject:Te.params})),ie=new he(B,de,void 0!==Te.body?Te.body:null,{headers:$e,context:Te.context,params:Pe,reportProgress:Te.reportProgress,responseType:Te.responseType||"json",withCredentials:Te.withCredentials})}const ue=(0,G.of)(ie).pipe((0,ge.b)($e=>this.handler.handle($e)));if(B instanceof he||"events"===Te.observe)return ue;const we=ue.pipe((0,Ie.h)($e=>$e instanceof Ct));switch(Te.observe||"body"){case"body":switch(ie.responseType){case"arraybuffer":return we.pipe((0,be.U)($e=>{if(null!==$e.body&&!($e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return $e.body}));case"blob":return we.pipe((0,be.U)($e=>{if(null!==$e.body&&!($e.body instanceof Blob))throw new Error("Response is not a Blob.");return $e.body}));case"text":return we.pipe((0,be.U)($e=>{if(null!==$e.body&&"string"!=typeof $e.body)throw new Error("Response is not a string.");return $e.body}));default:return we.pipe((0,be.U)($e=>$e.body))}case"response":return we;default:throw new Error(`Unreachable: unhandled observe type ${Te.observe}}`)}}delete(B,de={}){return this.request("DELETE",B,de)}get(B,de={}){return this.request("GET",B,de)}head(B,de={}){return this.request("HEAD",B,de)}jsonp(B,de){return this.request("JSONP",B,{params:(new ut).append(de,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(B,de={}){return this.request("OPTIONS",B,de)}patch(B,de,Te={}){return this.request("PATCH",B,Ve(Te,de))}post(B,de,Te={}){return this.request("POST",B,Ve(Te,de))}put(B,de,Te={}){return this.request("PUT",B,Ve(Te,de))}}return oe.\u0275fac=function(B){return new(B||oe)(z.LFG(ae))},oe.\u0275prov=z.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function Be(oe,x){return x(oe)}function Ke(oe,x){return(B,de)=>x.intercept(B,{handle:Te=>oe(Te,de)})}const tt=new z.OlP("HTTP_INTERCEPTORS"),yt=new z.OlP("HTTP_INTERCEPTOR_FNS");function mt(){let oe=null;return(x,B)=>(null===oe&&(oe=((0,z.f3M)(tt,{optional:!0})??[]).reduceRight(Ke,Be)),oe(x,B))}let Gt=(()=>{class oe extends ae{constructor(B,de){super(),this.backend=B,this.injector=de,this.chain=null}handle(B){if(null===this.chain){const de=Array.from(new Set(this.injector.get(yt)));this.chain=de.reduceRight((Te,ie)=>function ht(oe,x,B){return(de,Te)=>B.runInContext(()=>x(de,ie=>oe(ie,Te)))}(Te,ie,this.injector),Be)}return this.chain(B,de=>this.backend.handle(de))}}return oe.\u0275fac=function(B){return new(B||oe)(z.LFG(Ee),z.LFG(z.lqb))},oe.\u0275prov=z.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const ce=/^\)\]\}',?\n/;let Ut=(()=>{class oe{constructor(B){this.xhrFactory=B}handle(B){if("JSONP"===B.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new q.y(de=>{const Te=this.xhrFactory.build();if(Te.open(B.method,B.urlWithParams),B.withCredentials&&(Te.withCredentials=!0),B.headers.forEach((ne,Se)=>Te.setRequestHeader(ne,Se.join(","))),B.headers.has("Accept")||Te.setRequestHeader("Accept","application/json, text/plain, */*"),!B.headers.has("Content-Type")){const ne=B.detectContentTypeHeader();null!==ne&&Te.setRequestHeader("Content-Type",ne)}if(B.responseType){const ne=B.responseType.toLowerCase();Te.responseType="json"!==ne?ne:"text"}const ie=B.serializeBody();let ue=null;const we=()=>{if(null!==ue)return ue;const ne=Te.statusText||"OK",Se=new X(Te.getAllResponseHeaders()),at=function ft(oe){return"responseURL"in oe&&oe.responseURL?oe.responseURL:/^X-Request-URL:/m.test(oe.getAllResponseHeaders())?oe.getResponseHeader("X-Request-URL"):null}(Te)||B.url;return ue=new Tt({headers:Se,status:Te.status,statusText:ne,url:at}),ue},$e=()=>{let{headers:ne,status:Se,statusText:at,url:wt}=we(),nn=null;204!==Se&&(nn=typeof Te.response>"u"?Te.responseText:Te.response),0===Se&&(Se=nn?200:0);let Un=Se>=200&&Se<300;if("json"===B.responseType&&"string"==typeof nn){const pr=nn;nn=nn.replace(ce,"");try{nn=""!==nn?JSON.parse(nn):null}catch(Cr){nn=pr,Un&&(Un=!1,nn={error:Cr,text:nn})}}Un?(de.next(new Ct({body:nn,headers:ne,status:Se,statusText:at,url:wt||void 0})),de.complete()):de.error(new Pt({error:nn,headers:ne,status:Se,statusText:at,url:wt||void 0}))},Pe=ne=>{const{url:Se}=we(),at=new Pt({error:ne,status:Te.status||0,statusText:Te.statusText||"Unknown Error",url:Se||void 0});de.error(at)};let xt=!1;const _e=ne=>{xt||(de.next(we()),xt=!0);let Se={type:Ue.DownloadProgress,loaded:ne.loaded};ne.lengthComputable&&(Se.total=ne.total),"text"===B.responseType&&Te.responseText&&(Se.partialText=Te.responseText),de.next(Se)},Ce=ne=>{let Se={type:Ue.UploadProgress,loaded:ne.loaded};ne.lengthComputable&&(Se.total=ne.total),de.next(Se)};return Te.addEventListener("load",$e),Te.addEventListener("error",Pe),Te.addEventListener("timeout",Pe),Te.addEventListener("abort",Pe),B.reportProgress&&(Te.addEventListener("progress",_e),null!==ie&&Te.upload&&Te.upload.addEventListener("progress",Ce)),Te.send(ie),de.next({type:Ue.Sent}),()=>{Te.removeEventListener("error",Pe),Te.removeEventListener("abort",Pe),Te.removeEventListener("load",$e),Te.removeEventListener("timeout",Pe),B.reportProgress&&(Te.removeEventListener("progress",_e),null!==ie&&Te.upload&&Te.upload.removeEventListener("progress",Ce)),Te.readyState!==Te.DONE&&Te.abort()}})}}return oe.\u0275fac=function(B){return new(B||oe)(z.LFG(h.JF))},oe.\u0275prov=z.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const on=new z.OlP("XSRF_ENABLED"),Fn=new z.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jn=new z.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Nr{}let Jn=(()=>{class oe{constructor(B,de,Te){this.doc=B,this.platform=de,this.cookieName=Te,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const B=this.doc.cookie||"";return B!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,h.Mx)(B,this.cookieName),this.lastCookieString=B),this.lastToken}}return oe.\u0275fac=function(B){return new(B||oe)(z.LFG(h.K0),z.LFG(z.Lbi),z.LFG(Fn))},oe.\u0275prov=z.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function Xt(oe,x){const B=oe.url.toLowerCase();if(!(0,z.f3M)(on)||"GET"===oe.method||"HEAD"===oe.method||B.startsWith("http://")||B.startsWith("https://"))return x(oe);const de=(0,z.f3M)(Nr).getToken(),Te=(0,z.f3M)(jn);return null!=de&&!oe.headers.has(Te)&&(oe=oe.clone({headers:oe.headers.set(Te,de)})),x(oe)}var Vt=(()=>((Vt=Vt||{})[Vt.Interceptors=0]="Interceptors",Vt[Vt.LegacyInterceptors=1]="LegacyInterceptors",Vt[Vt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Vt[Vt.NoXsrfProtection=3]="NoXsrfProtection",Vt[Vt.JsonpSupport=4]="JsonpSupport",Vt[Vt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Vt))();function yr(oe,x){return{\u0275kind:oe,\u0275providers:x}}function Wn(...oe){const x=[Ze,Ut,Gt,{provide:ae,useExisting:Gt},{provide:Ee,useExisting:Ut},{provide:yt,useValue:Xt,multi:!0},{provide:on,useValue:!0},{provide:Nr,useClass:Jn}];for(const B of oe)x.push(...B.\u0275providers);return(0,z.MR2)(x)}const _r=new z.OlP("LEGACY_INTERCEPTOR_FN");let Sr=(()=>{class oe{}return oe.\u0275fac=function(B){return new(B||oe)},oe.\u0275mod=z.oAB({type:oe}),oe.\u0275inj=z.cJS({providers:[Wn(yr(Vt.LegacyInterceptors,[{provide:_r,useFactory:mt},{provide:yt,useExisting:_r,multi:!0}]))]}),oe})()},4650:(zt,He,N)=>{N.d(He,{$8M:()=>Ya,$WT:()=>ri,$Z:()=>Kh,AFp:()=>x0,ALo:()=>Qv,AaK:()=>ae,CHM:()=>W,CRH:()=>u0,CZH:()=>ay,CqO:()=>Tm,D6c:()=>TE,EJc:()=>jC,EiD:()=>kl,EpF:()=>Dm,F$t:()=>Yp,F4k:()=>Kp,FYo:()=>Yf,FiY:()=>Is,Gf:()=>o0,GfV:()=>Qf,GkF:()=>Wp,Gpc:()=>se,Gre:()=>Hm,Hsn:()=>Qp,JOm:()=>aa,JVY:()=>Uf,JZr:()=>vt,KtG:()=>Ae,L6k:()=>y,LAX:()=>f,LFG:()=>Ft,LSH:()=>$f,Lbi:()=>VC,Lck:()=>Nw,MAs:()=>lf,MMx:()=>B_,MR2:()=>Ag,NdJ:()=>cf,O4$:()=>Rr,OlP:()=>ei,Oqu:()=>Kc,P3R:()=>_c,PXZ:()=>rE,Q6J:()=>Bc,QGY:()=>qp,Qsj:()=>$l,R0b:()=>lu,RDi:()=>Vr,Rgc:()=>Cg,SBq:()=>Ma,Sil:()=>zC,Suo:()=>a0,TTD:()=>Os,TgZ:()=>ql,Tol:()=>sg,Udp:()=>Gc,W1O:()=>h0,X6Q:()=>uE,XFs:()=>St,Xpm:()=>pr,Xts:()=>Rh,Y36:()=>Ac,YKP:()=>Lv,YNc:()=>zp,Yjl:()=>Si,Yz7:()=>kt,Z0I:()=>Ln,ZZ4:()=>hv,_Bn:()=>Fv,_UZ:()=>Qd,_Vd:()=>ul,_c5:()=>IE,_uU:()=>nh,aQg:()=>fv,c2e:()=>BC,cJS:()=>Cn,cg1:()=>yg,dDg:()=>XC,dqk:()=>Xt,eBb:()=>c,eFA:()=>z0,eJc:()=>Y_,ekj:()=>ig,eoX:()=>B0,f3M:()=>oe,g9A:()=>R0,h0i:()=>bf,hGG:()=>DE,hij:()=>rh,iGM:()=>s0,ifc:()=>Pe,ip1:()=>O0,jDz:()=>Vv,kL8:()=>xu,kcU:()=>ka,lG2:()=>Us,lcZ:()=>Jv,lqb:()=>ol,lri:()=>U0,mCW:()=>hn,n5z:()=>El,oAB:()=>gr,oxw:()=>df,pB0:()=>w,q3G:()=>cs,q4F:()=>bu,qLn:()=>Dd,qOj:()=>Gd,qZA:()=>$c,qzn:()=>el,rWj:()=>V0,s9C:()=>jc,sBO:()=>lE,s_b:()=>iy,soG:()=>uy,tb:()=>j0,tp0:()=>O,uIk:()=>Bp,vHH:()=>qe,vpe:()=>Cl,wAp:()=>Gn,xp6:()=>ip,z2F:()=>ly,z3N:()=>Aa,zSh:()=>Kf,zs3:()=>ll});var h=N(7579),z=N(727),G=N(9751),q=N(6451),ge=N(3099);function Ie(n){for(let r in n)if(n[r]===Ie)return r;throw Error("Could not find renamed property on target object.")}function be(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ee(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const X=Ie({__forward_ref__:Ie});function se(n){return n.__forward_ref__=se,n.toString=function(){return ae(this())},n}function le(n){return ze(n)?n():n}function ze(n){return"function"==typeof n&&n.hasOwnProperty(X)&&n.__forward_ref__===se}function Oe(n){return n&&!!n.\u0275providers}const vt="https://g.co/ng/security#xss";class qe extends Error{constructor(r,s){super(ut(r,s)),this.code=r}}function ut(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function et(n){return"string"==typeof n?n:null==n?"":String(n)}function pt(n,r){throw new qe(-201,!1)}function yt(n,r){null==n&&function mt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cn(n){return{providers:n.providers||[],imports:n.imports||[]}}function wn(n){return Nn(n,ce)||Nn(n,Ut)}function Ln(n){return null!==wn(n)}function Nn(n,r){return n.hasOwnProperty(r)?n[r]:null}function un(n){return n&&(n.hasOwnProperty(ft)||n.hasOwnProperty(on))?n[ft]:null}const ce=Ie({\u0275prov:Ie}),ft=Ie({\u0275inj:Ie}),Ut=Ie({ngInjectableDef:Ie}),on=Ie({ngInjectorDef:Ie});var St=(()=>((St=St||{})[St.Default=0]="Default",St[St.Host=1]="Host",St[St.Self=2]="Self",St[St.SkipSelf=4]="SkipSelf",St[St.Optional=8]="Optional",St))();let Fn;function jn(n){const r=Fn;return Fn=n,r}function Nr(n,r,s){const a=wn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&St.Optional?null:void 0!==r?r:void pt(ae(n))}const Xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wn={},hr="__NG_DI_FLAG__",_r="ngTempTokenPath",vr="ngTokenPath",Ti=/\n/gm,Zn="\u0275",rr="__source";let Pn;function _n(n){const r=Pn;return Pn=n,r}function Sr(n,r=St.Default){if(void 0===Pn)throw new qe(-203,!1);return null===Pn?Nr(n,void 0,r):Pn.get(n,r&St.Optional?null:void 0,r)}function Ft(n,r=St.Default){return(function Tr(){return Fn}()||Sr)(le(n),r)}function oe(n,r=St.Default){return Ft(n,x(r))}function x(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function B(n){const r=[];for(let s=0;s<n.length;s++){const a=le(n[s]);if(Array.isArray(a)){if(0===a.length)throw new qe(900,!1);let l,p=St.Default;for(let _=0;_<a.length;_++){const S=a[_],M=Te(S);"number"==typeof M?-1===M?l=S.token:p|=M:l=S}r.push(Ft(l,p))}else r.push(Ft(a))}return r}function de(n,r){return n[hr]=r,n.prototype[hr]=r,n}function Te(n){return n[hr]}function we(n){return{toString:n}.toString()}var $e=(()=>(($e=$e||{})[$e.OnPush=0]="OnPush",$e[$e.Default=1]="Default",$e))(),Pe=(()=>{return(n=Pe||(Pe={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Pe;var n})();const xt={},_e=[],Ce=Ie({\u0275cmp:Ie}),ne=Ie({\u0275dir:Ie}),Se=Ie({\u0275pipe:Ie}),at=Ie({\u0275mod:Ie}),wt=Ie({\u0275fac:Ie}),nn=Ie({__NG_ELEMENT_ID__:Ie});let Un=0;function pr(n){return we(()=>{const r=tn(n),s={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$e.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Pe.Emulated,id:"c"+Un++,styles:n.styles||_e,_:null,schemas:n.schemas||null,tView:null};Dt(s);const a=n.dependencies;return s.directiveDefs=an(a,!1),s.pipeDefs=an(a,!0),s})}function Br(n){return Vn(n)||wr(n)}function ai(n){return null!==n}function gr(n){return we(()=>({type:n.type,bootstrap:n.bootstrap||_e,declarations:n.declarations||_e,imports:n.imports||_e,exports:n.exports||_e,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Yn(n,r){if(null==n)return xt;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),s[l]=a,r&&(r[l]=p)}return s}function Us(n){return we(()=>{const r=tn(n);return Dt(r),r})}function Si(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Vn(n){return n[Ce]||null}function wr(n){return n[ne]||null}function Er(n){return n[Se]||null}function ri(n){const r=Vn(n)||wr(n)||Er(n);return null!==r&&r.standalone}function Et(n,r){const s=n[at]||null;if(!s&&!0===r)throw new Error(`Type ${ae(n)} does not have '\u0275mod' property.`);return s}function tn(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||_e,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yn(n.inputs,r),outputs:Yn(n.outputs)}}function Dt(n){n.features?.forEach(r=>r(n))}function an(n,r){if(!n)return null;const s=r?Er:Br;return()=>("function"==typeof n?n():n).map(a=>s(a)).filter(ai)}const bn=0,Nt=1,In=2,ir=3,br=4,Fe=5,Me=6,je=7,lt=8,Lt=9,rn=10,$t=11,lr=12,kn=13,xr=14,mi=15,Xn=16,$r=17,Ai=18,ii=19,Mi=20,Ro=21,er=22,uo=1,Vs=2,ki=7,Kr=8,fs=9,ui=10;function li(n){return Array.isArray(n)&&"object"==typeof n[uo]}function Oi(n){return Array.isArray(n)&&!0===n[uo]}function es(n){return 0!=(4&n.flags)}function ts(n){return n.componentOffset>-1}function yi(n){return 1==(1&n.flags)}function si(n){return!!n.template}function As(n){return 0!=(256&n[In])}function vi(n,r){return n.hasOwnProperty(wt)?n[wt]:null}class Xs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Os(){return rs}function rs(n){return n.type.prototype.ngOnChanges&&(n.setInput=$i),ms}function ms(){const n=ys(this),r=n?.current;if(r){const s=n.previous;if(s===xt)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function $i(n,r,s,a){const l=this.declaredInputs[s],p=ys(n)||function _s(n,r){return n[is]=r}(n,{previous:xt,current:null}),_=p.current||(p.current={}),S=p.previous,M=S[l];_[l]=new Xs(M&&M.currentValue,r,S===xt),n[a]=r}Os.ngInherit=!0;const is="__ngSimpleChanges__";function ys(n){return n[is]||null}const Bn=function(n,r,s){},Ni="svg";function jr(n){for(;Array.isArray(n);)n=n[bn];return n}function Fi(n,r){return jr(r[n])}function zr(n,r){return jr(r[n.index])}function Pr(n,r){return n.data[r]}function qi(n,r){return n[r]}function Zr(n,r){const s=r[n];return li(s)?s:s[bn]}function ws(n){return 64==(64&n[In])}function Ki(n,r){return null==r?null:n[r]}function xs(n){n[Ai]=0}function eo(n,r){n[Fe]+=r;let s=n,a=n[ir];for(;null!==a&&(1===r&&1===s[Fe]||-1===r&&0===s[Fe]);)a[Fe]+=r,s=a,a=a[ir]}const Sn={lFrame:ea(null),bindingsEnabled:!0};function re(){return Sn.bindingsEnabled}function E(){return Sn.lFrame.lView}function I(){return Sn.lFrame.tView}function W(n){return Sn.lFrame.contextLView=n,n[lt]}function Ae(n){return Sn.lFrame.contextLView=null,n}function ct(){let n=dn();for(;null!==n&&64===n.type;)n=n.parent;return n}function dn(){return Sn.lFrame.currentTNode}function $n(n,r){const s=Sn.lFrame;s.currentTNode=n,s.isParent=r}function or(){return Sn.lFrame.isParent}function ar(){Sn.lFrame.isParent=!1}function Es(){return Sn.lFrame.bindingIndex++}function hi(n){const r=Sn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function bo(n,r){const s=Sn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Hs(r)}function Hs(n){Sn.lFrame.currentDirectiveIndex=n}function Xo(){return Sn.lFrame.currentQueryIndex}function fo(n){Sn.lFrame.currentQueryIndex=n}function Ru(n){const r=n[Nt];return 2===r.type?r.declTNode:1===r.type?n[Me]:null}function Pa(n,r,s){if(s&St.SkipSelf){let l=r,p=n;for(;!(l=l.parent,null!==l||s&St.Host||(l=Ru(p),null===l||(p=p[mi],10&l.type))););if(null===l)return!1;r=l,n=p}const a=Sn.lFrame=ku();return a.currentTNode=r,a.lView=n,!0}function Ra(n){const r=ku(),s=n[Nt];Sn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ku(){const n=Sn.lFrame,r=null===n?null:n.child;return null===r?ea(n):r}function ea(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function fa(){const n=Sn.lFrame;return Sn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Za=fa;function ci(){const n=fa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function pi(){return Sn.lFrame.selectedIndex}function jo(n){Sn.lFrame.selectedIndex=n}function bt(){const n=Sn.lFrame;return Pr(n.tView,n.selectedIndex)}function Rr(){Sn.lFrame.currentNamespace=Ni}function ka(){!function Qt(){Sn.lFrame.currentNamespace=null}()}function Jt(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const p=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:S,ngAfterViewInit:M,ngAfterViewChecked:j,ngOnDestroy:Q}=p;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),S&&((n.contentHooks||(n.contentHooks=[])).push(s,S),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,S)),M&&(n.viewHooks||(n.viewHooks=[])).push(-s,M),j&&((n.viewHooks||(n.viewHooks=[])).push(s,j),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,j)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Q)}}function st(n,r,s){P(n,r,3,s)}function b(n,r,s,a){(3&n[In])===s&&P(n,r,s,a)}function $(n,r){let s=n[In];(3&s)===r&&(s&=2047,s+=1,n[In]=s)}function P(n,r,s,a){const p=a??-1,_=r.length-1;let S=0;for(let M=void 0!==a?65535&n[Ai]:0;M<_;M++)if("number"==typeof r[M+1]){if(S=r[M],null!=a&&S>=a)break}else r[M]<0&&(n[Ai]+=65536),(S<p||-1==p)&&(Y(n,s,r,M),n[Ai]=(4294901760&n[Ai])+M+2),M++}function Y(n,r,s,a){const l=s[a]<0,p=s[a+1],S=n[l?-s[a]:s[a]];if(l){if(n[In]>>11<n[Ai]>>16&&(3&n[In])===r){n[In]+=2048,Bn(4,S,p);try{p.call(S)}finally{Bn(5,S,p)}}}else{Bn(4,S,p);try{p.call(S)}finally{Bn(5,S,p)}}}const ye=-1;class nt{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ar(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const p=s[a++],_=s[a++],S=s[a++];n.setAttribute(r,_,S,p)}else{const p=l,_=s[++a];On(p)?n.setProperty(r,p,_):n.setAttribute(r,p,_),a++}}return a}function po(n){return 3===n||4===n||6===n}function On(n){return 64===n.charCodeAt(0)}function cn(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Ci(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Ci(n,r,s,a,l){let p=0,_=n.length;if(-1===r)_=-1;else for(;p<n.length;){const S=n[p++];if("number"==typeof S){if(S===r){_=-1;break}if(S>r){_=p-1;break}}}for(;p<n.length;){const S=n[p];if("number"==typeof S)break;if(S===s){if(null===a)return void(null!==l&&(n[p+1]=l));if(a===n[p+1])return void(n[p+2]=l)}p++,null!==a&&p++,null!==l&&p++}-1!==_&&(n.splice(_,0,r),p=_+1),n.splice(p++,0,s),null!==a&&n.splice(p++,0,a),null!==l&&n.splice(p++,0,l)}function tr(n){return n!==ye}function bs(n){return 32767&n}function qt(n,r){let s=function Yr(n){return n>>16}(n),a=r;for(;s>0;)a=a[mi],s--;return a}let Ho=!0;function go(n){const r=Ho;return Ho=n,r}const pa=255,To=5;let ga=0;const Ps={};function ya(n,r){const s=Fo(n,r);if(-1!==s)return s;const a=r[Nt];a.firstCreatePass&&(n.injectorIndex=r.length,Li(a.data,n),Li(r,null),Li(a.blueprint,null));const l=ta(n,r),p=n.injectorIndex;if(tr(l)){const _=bs(l),S=qt(l,r),M=S[Nt].data;for(let j=0;j<8;j++)r[p+j]=S[_+j]|M[_+j]}return r[p+8]=l,p}function Li(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Fo(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ta(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Yi(l),null===a)return ye;if(s++,l=l[mi],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return ye}function _a(n,r,s){!function ma(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(nn)&&(a=s[nn]),null==a&&(a=s[nn]=ga++);const l=a&pa;r.data[n+(l>>To)]|=1<<l}(n,r,s)}function va(n,r,s){if(s&St.Optional||void 0!==n)return n;pt()}function rt(n,r,s,a){if(s&St.Optional&&void 0===a&&(a=null),!(s&(St.Self|St.Host))){const l=n[Lt],p=jn(void 0);try{return l?l.get(r,a,s&St.Optional):Nr(r,a,s&St.Optional)}finally{jn(p)}}return va(a,0,s)}function ro(n,r,s,a=St.Default,l){if(null!==n){if(1024&r[In]){const _=function Ea(n,r,s,a,l){let p=n,_=r;for(;null!==p&&null!==_&&1024&_[In]&&!(256&_[In]);){const S=io(p,_,s,a|St.Self,Ps);if(S!==Ps)return S;let M=p.parent;if(!M){const j=_[Ro];if(j){const Q=j.get(s,Ps,a);if(Q!==Ps)return Q}M=Yi(_),_=_[mi]}p=M}return l}(n,r,s,a,Ps);if(_!==Ps)return _}const p=io(n,r,s,a,Ps);if(p!==Ps)return p}return rt(r,s,a,l)}function io(n,r,s,a,l){const p=function wa(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(nn)?n[nn]:void 0;return"number"==typeof r?r>=0?r&pa:Fu:r}(s);if("function"==typeof p){if(!Pa(r,n,a))return a&St.Host?va(l,0,a):rt(r,s,a,l);try{const _=p(a);if(null!=_||a&St.Optional)return _;pt()}finally{Za()}}else if("number"==typeof p){let _=null,S=Fo(n,r),M=ye,j=a&St.Host?r[Xn][Me]:null;for((-1===S||a&St.SkipSelf)&&(M=-1===S?ta(n,r):r[S+8],M!==ye&&Ca(a,!1)?(_=r[Nt],S=bs(M),r=qt(M,r)):S=-1);-1!==S;){const Q=r[Nt];if(Uo(p,S,Q.data)){const pe=gi(S,r,s,_,a,j);if(pe!==Ps)return pe}M=r[S+8],M!==ye&&Ca(a,r[Nt].data[S+8]===j)&&Uo(p,S,r)?(_=Q,S=bs(M),r=qt(M,r)):S=-1}}return l}function gi(n,r,s,a,l,p){const _=r[Nt],S=_.data[n+8],Q=Lo(S,_,s,null==a?ts(S)&&Ho:a!=_&&0!=(3&S.type),l&St.Host&&p===S);return null!==Q?Zi(r,_,Q,S):Ps}function Lo(n,r,s,a,l){const p=n.providerIndexes,_=r.data,S=1048575&p,M=n.directiveStart,Q=p>>20,Re=l?S+Q:n.directiveEnd;for(let Je=a?S:S+Q;Je<Re;Je++){const Ot=_[Je];if(Je<M&&s===Ot||Je>=M&&Ot.type===s)return Je}if(l){const Je=_[M];if(Je&&si(Je)&&Je.type===s)return M}return null}function Zi(n,r,s,a){let l=n[s];const p=r.data;if(function Mt(n){return n instanceof nt}(l)){const _=l;_.resolving&&function ve(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new qe(-200,`Circular dependency in DI detected for ${n}${s}`)}(function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():et(n)}(p[s]));const S=go(_.canSeeViewProviders);_.resolving=!0;const M=_.injectImpl?jn(_.injectImpl):null;Pa(n,a,St.Default);try{l=n[s]=_.factory(void 0,p,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Nu(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:p}=r.type.prototype;if(a){const _=rs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,p))}(s,p[s],r)}finally{null!==M&&jn(M),go(S),_.resolving=!1,Za()}}return l}function Uo(n,r,s){return!!(s[r+(n>>To)]&1<<n)}function Ca(n,r){return!(n&St.Self||n&St.Host&&r)}class us{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return ro(this._tNode,this._lView,r,x(a),s)}}function Fu(){return new us(ct(),E())}function El(n){return we(()=>{const r=n.prototype.constructor,s=r[wt]||Ri(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const p=l[wt]||Ri(l);if(p&&p!==s)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Ri(n){return ze(n)?()=>{const r=Ri(le(n));return r&&r()}:vi(n)}function Yi(n){const r=n[Nt],s=r.type;return 2===s?r.declTNode:1===s?n[Me]:null}function Ya(n){return function So(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const p=s[l];if(po(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(p===r)return s[l+1];l+=2}}}return null}(ct(),n)}const na="__parameters__";function zo(n,r,s){return we(()=>{const a=function Na(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...p){if(this instanceof l)return a.apply(this,p),this;const _=new l(...p);return S.annotation=_,S;function S(M,j,Q){const pe=M.hasOwnProperty(na)?M[na]:Object.defineProperty(M,na,{value:[]})[na];for(;pe.length<=Q;)pe.push(null);return(pe[Q]=pe[Q]||[]).push(_),M}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class ei{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=kt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Mo(n,r){n.forEach(s=>Array.isArray(s)?Mo(s,r):r(s))}function Ua(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ia(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function mo(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Mr(n,r,s){let a=C(n,r);return a>=0?n[1|a]=s:(a=~a,function ia(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function v(n,r){const s=C(n,r);if(s>=0)return n[1|s]}function C(n,r){return function A(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const p=a+(l-a>>1),_=n[p<<s];if(r===_)return p<<s;_>r?l=p:a=p+1}return~(l<<s)}(n,r,1)}const Is=de(zo("Optional"),8),O=de(zo("SkipSelf"),4);var aa=(()=>((aa=aa||{})[aa.Important=1]="Important",aa[aa.DashCase=2]="DashCase",aa))();const od=new Map;let ph=0;const uc="__ngContext__";function so(n,r){li(r)?(n[uc]=r[Mi],function ad(n){od.set(n[Mi],n)}(r)):n[uc]=r}let gu;function cd(n,r){return gu(n,r)}function $a(n){const r=n[ir];return Oi(r)?r[ir]:r}function dd(n){return yh(n[kn])}function Wo(n){return yh(n[br])}function yh(n){for(;null!==n&&!Oi(n);)n=n[br];return n}function Ts(n,r,s,a,l){if(null!=a){let p,_=!1;Oi(a)?p=a:li(a)&&(_=!0,a=a[bn]);const S=jr(a);0===n&&null!==s?null==l?Qa(r,s,S):qo(r,s,S,l||null,!0):1===n&&null!==s?qo(r,s,S,l||null,!0):2===n?function Ha(n,r,s){const a=ja(n,r);a&&function Ja(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,S,_):3===n&&r.destroyNode(S),null!=p&&function Ih(n,r,s,a,l){const p=s[ki];p!==jr(s)&&Ts(r,n,a,p,l);for(let S=ui;S<s.length;S++){const M=s[S];vu(M[Nt],M,n,r,a,p)}}(r,n,p,s,l)}}function Oo(n,r,s){return n.createElement(r,s)}function mu(n,r){const s=n[fs],a=s.indexOf(r),l=r[ir];512&r[In]&&(r[In]&=-513,eo(l,-1)),s.splice(a,1)}function fc(n,r){if(n.length<=ui)return;const s=ui+r,a=n[s];if(a){const l=a[$r];null!==l&&l!==n&&mu(l,a),r>0&&(n[s-1][br]=a[br]);const p=Ia(n,ui+r);!function vh(n,r){vu(n,r,r[$t],2,null,null),r[bn]=null,r[Me]=null}(a[Nt],a);const _=p[ii];null!==_&&_.detachView(p[Nt]),a[ir]=null,a[br]=null,a[In]&=-65}return a}function hd(n,r){if(!(128&r[In])){const s=r[$t];s.destroyNode&&vu(n,r,s,3,null,null),function Rf(n){let r=n[kn];if(!r)return Wu(n[Nt],n);for(;r;){let s=null;if(li(r))s=r[kn];else{const a=r[ui];a&&(s=a)}if(!s){for(;r&&!r[br]&&r!==n;)li(r)&&Wu(r[Nt],r),r=r[ir];null===r&&(r=n),li(r)&&Wu(r[Nt],r),s=r&&r[br]}r=s}}(r)}}function Wu(n,r){if(!(128&r[In])){r[In]&=-65,r[In]|=128,function kf(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof nt)){const p=s[a+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const S=l[p[_]],M=p[_+1];Bn(4,S,M);try{M.call(S)}finally{Bn(5,S,M)}}else{Bn(4,l,p);try{p.call(l)}finally{Bn(5,l,p)}}}}}(n,r),function qu(n,r){const s=n.cleanup,a=r[je];let l=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const _=s[p+3];_>=0?a[l=_]():a[l=-_].unsubscribe(),p+=2}else{const _=a[l=s[p+1]];s[p].call(_)}if(null!==a){for(let p=l+1;p<a.length;p++)(0,a[p])();r[je]=null}}(n,r),1===r[Nt].type&&r[$t].destroy();const s=r[$r];if(null!==s&&Oi(r[ir])){s!==r[ir]&&mu(s,r);const a=r[ii];null!==a&&a.detachView(n)}!function Tl(n){od.delete(n[Mi])}(r)}}function Ch(n,r,s){return function Ku(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[bn];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:p}=n.data[a.directiveStart+l];if(p===Pe.None||p===Pe.Emulated)return null}return zr(a,s)}}(n,r.parent,s)}function qo(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Qa(n,r,s){n.appendChild(r,s)}function fd(n,r,s,a,l){null!==a?qo(n,r,s,a,l):Qa(n,r,s)}function ja(n,r){return n.parentNode(r)}function pd(n,r,s){return bh(n,r,s)}let pc,eu,Hi,Qu,bh=function Sa(n,r,s){return 40&n.type?zr(n,s):null};function yu(n,r,s,a){const l=Ch(n,a,r),p=r[$t],S=pd(a.parent||r[Me],a,r);if(null!=l)if(Array.isArray(s))for(let M=0;M<s.length;M++)fd(p,l,s[M],S,!1);else fd(p,l,s,S,!1);void 0!==pc&&pc(p,a,r,s,l)}function _u(n,r){if(null!==r){const s=r.type;if(3&s)return zr(r,n);if(4&s)return gc(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return _u(n,a);{const l=n[r.index];return Oi(l)?gc(-1,l):jr(l)}}if(32&s)return cd(r,n)()||jr(n[r.index]);{const a=gd(n,r);return null!==a?Array.isArray(a)?a[0]:_u($a(n[Xn]),a):_u(n,r.next)}}return null}function gd(n,r){return null!==r?n[Xn][Me].projection[r.projection]:null}function gc(n,r){const s=ui+n+1;if(s<r.length){const a=r[s],l=a[Nt].firstChild;if(null!==l)return _u(a,l)}return r[ki]}function Ol(n,r,s,a,l,p,_){for(;null!=s;){const S=a[s.index],M=s.type;if(_&&0===r&&(S&&so(jr(S),a),s.flags|=2),32!=(32&s.flags))if(8&M)Ol(n,r,s.child,a,l,p,!1),Ts(r,n,l,S,p);else if(32&M){const j=cd(s,a);let Q;for(;Q=j();)Ts(r,n,l,Q,p);Ts(r,n,l,S,p)}else 16&M?Ko(n,r,a,s,l,p):Ts(r,n,l,S,p);s=_?s.projectionNext:s.next}}function vu(n,r,s,a,l,p){Ol(s,a,n.firstChild,r,l,p,!1)}function Ko(n,r,s,a,l,p){const _=s[Xn],M=_[Me].projection[a.projection];if(Array.isArray(M))for(let j=0;j<M.length;j++)Ts(r,n,l,M[j],p);else Ol(n,r,M,_[ir],l,p,!0)}function Xa(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function mc(n,r,s){const{mergedAttrs:a,classes:l,styles:p}=s;null!==a&&Ar(n,r,a),null!==l&&Xa(n,r,l),null!==p&&function Yu(n,r,s){n.setAttribute(r,"style",s)}(n,r,p)}function tu(n){return function wu(){if(void 0===eu&&(eu=null,Xt.trustedTypes))try{eu=Xt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return eu}()?.createHTML(n)||n}function Vr(n){Hi=n}function Ju(n){return function ks(){if(void 0===Qu&&(Qu=null,Xt.trustedTypes))try{Qu=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qu}()?.createScriptURL(n)||n}class Ns{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vt})`}}class Xu extends Ns{getTypeName(){return"HTML"}}class _d extends Ns{getTypeName(){return"Style"}}class vd extends Ns{getTypeName(){return"Script"}}class Ff extends Ns{getTypeName(){return"URL"}}class yc extends Ns{getTypeName(){return"ResourceURL"}}function Aa(n){return n instanceof Ns?n.changingThisBreaksApplicationSecurity:n}function el(n,r){const s=function Lf(n){return n instanceof Ns&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${vt})`)}return s===r}function Uf(n){return new Xu(n)}function y(n){return new _d(n)}function c(n){return new vd(n)}function f(n){return new Ff(n)}function w(n){return new yc(n)}class J{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(tu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class ke{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=tu(r),s}}const jt=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function hn(n){return(n=String(n)).match(jt)?n:"unsafe:"+n}function xn(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function Tn(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Ji=xn("area,br,col,hr,img,wbr"),Vo=xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tl=xn("rp,rt"),nl=Tn(Ji,Tn(Vo,xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tn(tl,xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tn(tl,Vo)),Pl=xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rl=Tn(Pl,xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Mh=xn("script,style,template");class Oh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!nl.hasOwnProperty(s))return this.sanitizedSomething=!0,!Mh.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const p=a.item(l),_=p.name,S=_.toLowerCase();if(!Rl.hasOwnProperty(S)){this.sanitizedSomething=!0;continue}let M=p.value;Pl[S]&&(M=hn(M)),this.buf.push(" ",_,'="',Ig(M),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();nl.hasOwnProperty(s)&&!Ji.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Ig(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Cd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bf=/([^\#-~ |!])/g;function Ig(n){return n.replace(/&/g,"&amp;").replace(Cd,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Bf,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let za;function kl(n,r){let s=null;try{za=za||function V(n){const r=new ke(n);return function gt(){try{return!!(new window.DOMParser).parseFromString(tu(""),"text/html")}catch{return!1}}()?new J(r):r}(n);let a=r?String(r):"";s=za.getInertBodyElement(a);let l=5,p=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=p,p=s.innerHTML,s=za.getInertBodyElement(a)}while(a!==p);return tu((new Oh).sanitizeChildren(xh(s)||s))}finally{if(s){const a=xh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function xh(n){return"content"in n&&function fy(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var cs=(()=>((cs=cs||{})[cs.NONE=0]="NONE",cs[cs.HTML=1]="HTML",cs[cs.STYLE=2]="STYLE",cs[cs.SCRIPT=3]="SCRIPT",cs[cs.URL=4]="URL",cs[cs.RESOURCE_URL=5]="RESOURCE_URL",cs))();function $f(n){const r=Ul();return r?r.sanitize(cs.URL,n)||"":el(n,"URL")?Aa(n):hn(et(n))}function jf(n){const r=Ul();if(r)return Ju(r.sanitize(cs.RESOURCE_URL,n)||"");if(el(n,"ResourceURL"))return Ju(Aa(n));throw new qe(904,!1)}function _c(n,r,s){return function Ll(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?jf:$f}(r,s)(n)}function Ul(){const n=E();return n&&n[lr]}const Rh=new ei("ENVIRONMENT_INITIALIZER"),Hf=new ei("INJECTOR",-1),Sg=new ei("INJECTOR_DEF_TYPES");class zf{get(r,s=Wn){if(s===Wn){const a=new Error(`NullInjectorError: No provider for ${ae(r)}!`);throw a.name="NullInjectorError",a}return s}}function Ag(n){return{\u0275providers:n}}function kh(...n){return{\u0275providers:vc(0,n),\u0275fromNgModule:!0}}function vc(n,...r){const s=[],a=new Set;let l;return Mo(r,p=>{const _=p;Gf(_,s,[],a)&&(l||(l=[]),l.push(_))}),void 0!==l&&il(l,s),s}function il(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];Wf(l,p=>{r.push(p)})}}function Gf(n,r,s,a){if(!(n=le(n)))return!1;let l=null,p=un(n);const _=!p&&Vn(n);if(p||_){if(_&&!_.standalone)return!1;l=n}else{const M=n.ngModule;if(p=un(M),!p)return!1;l=M}const S=a.has(l);if(_){if(S)return!1;if(a.add(l),_.dependencies){const M="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const j of M)Gf(j,r,s,a)}}else{if(!p)return!1;{if(null!=p.imports&&!S){let j;a.add(l);try{Mo(p.imports,Q=>{Gf(Q,r,s,a)&&(j||(j=[]),j.push(Q))})}finally{}void 0!==j&&il(j,r)}if(!S){const j=vi(l)||(()=>new l);r.push({provide:l,useFactory:j,deps:_e},{provide:Sg,useValue:l,multi:!0},{provide:Rh,useValue:()=>Ft(l),multi:!0})}const M=p.providers;null==M||S||Wf(M,Q=>{r.push(Q)})}}return l!==n&&void 0!==n.providers}function Wf(n,r){for(let s of n)Oe(s)&&(s=s.\u0275providers),Array.isArray(s)?Wf(s,r):r(s)}const my=Ie({provide:String,useValue:Ie});function qf(n){return null!==n&&"object"==typeof n&&my in n}function Zo(n){return"function"==typeof n}const Kf=new ei("Set Injector scope."),Ed={},yy={};let bd;function Cc(){return void 0===bd&&(bd=new zf),bd}class ol{}class Nh extends ol{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vl(r,_=>this.processProvider(_)),this.records.set(Hf,al(void 0,this)),l.has("environment")&&this.records.set(ol,al(void 0,this));const p=this.records.get(Kf);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Sg.multi,_e,St.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=_n(this),a=jn(void 0);try{return r()}finally{_n(s),jn(a)}}get(r,s=Wn,a=St.Default){this.assertNotDestroyed(),a=x(a);const l=_n(this),p=jn(void 0);try{if(!(a&St.SkipSelf)){let S=this.records.get(r);if(void 0===S){const M=function Pg(n){return"function"==typeof n||"object"==typeof n&&n instanceof ei}(r)&&wn(r);S=M&&this.injectableDefInScope(M)?al(Id(r),Ed):null,this.records.set(r,S)}if(null!=S)return this.hydrate(r,S)}return(a&St.Self?Cc():this.parent).get(r,s=a&St.Optional&&s===Wn?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[_r]=_[_r]||[]).unshift(ae(r)),l)throw _;return function ie(n,r,s,a){const l=n[_r];throw r[rr]&&l.unshift(r[rr]),n.message=function ue(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Zn?n.slice(2):n;let l=ae(r);if(Array.isArray(r))l=r.map(ae).join(" -> ");else if("object"==typeof r){let p=[];for(let _ in r)if(r.hasOwnProperty(_)){let S=r[_];p.push(_+":"+("string"==typeof S?JSON.stringify(S):ae(S)))}l=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(Ti,"\n  ")}`}("\n"+n.message,l,s,a),n[vr]=l,n[_r]=null,n}(_,r,"R3InjectorError",this.source)}throw _}finally{jn(p),_n(l)}}resolveInjectorInitializers(){const r=_n(this),s=jn(void 0);try{const a=this.get(Rh.multi,_e,St.Self);for(const l of a)l()}finally{_n(r),jn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(ae(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qe(205,!1)}processProvider(r){let s=Zo(r=le(r))?r:le(r&&r.provide);const a=function Fh(n){return qf(n)?al(void 0,n.useValue):al(xg(n),Ed)}(r);if(Zo(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=al(void 0,Ed,!0),l.factory=()=>B(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Ed&&(s.value=yy,s.value=s.factory()),"object"==typeof s.value&&s.value&&function _y(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=le(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Id(n){const r=wn(n),s=null!==r?r.factory:vi(n);if(null!==s)return s;if(n instanceof ei)throw new qe(204,!1);if(n instanceof Function)return function Og(n){const r=n.length;if(r>0)throw mo(r,"?"),new qe(204,!1);const s=function zn(n){const r=n&&(n[ce]||n[Ut]);return r?(function xe(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new qe(204,!1)}function xg(n,r,s){let a;if(Zo(n)){const l=le(n);return vi(l)||Id(l)}if(qf(n))a=()=>le(n.useValue);else if(function sl(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...B(n.deps||[]));else if(function wc(n){return!(!n||!n.useExisting)}(n))a=()=>Ft(le(n.useExisting));else{const l=le(n&&(n.useClass||n.provide));if(!function Lh(n){return!!n.deps}(n))return vi(l)||Id(l);a=()=>new l(...B(n.deps))}return a}function al(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Vl(n,r){for(const s of n)Array.isArray(s)?Vl(s,r):s&&Oe(s)?Vl(s.\u0275providers,r):r(s)}class Uh{}class Ec{}class kg{resolveComponentFactory(r){throw function Rg(n){const r=Error(`No component factory found for ${ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let ul=(()=>{class n{}return n.NULL=new kg,n})();function Vh(){return Bl(ct(),E())}function Bl(n,r){return new Ma(zr(n,r))}let Ma=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Vh,n})();function bc(n){return n instanceof Ma?n.nativeElement:n}class Yf{}let $l=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vy(){const n=E(),s=Zr(ct().index,n);return(li(s)?s:n)[$t]}(),n})(),Ic=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class Qf{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const bu=new Qf("15.2.5"),Bh={},Jf="ngOriginalError";function Xf(n){return n[Jf]}class Dd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Xf(r);for(;s&&Xf(s);)s=Xf(s);return s||null}}function iu(n){return n instanceof Function?n():n}function Ws(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const p=r.length;if(l+p===a||n.charCodeAt(l+p)<=32)return l}s=l+1}}const $g="ng-template";function Dy(n,r,s){let a=0,l=!0;for(;a<n.length;){let p=n[a++];if("string"==typeof p&&l){const _=n[a++];if(s&&"class"===p&&-1!==Ws(_.toLowerCase(),r,0))return!0}else{if(1===p){for(;a<n.length&&"string"==typeof(p=n[a++]);)if(p.toLowerCase()===r)return!0;return!1}"number"==typeof p&&(l=!1)}}return!1}function jg(n){return 4===n.type&&n.value!==$g}function Ty(n,r,s){return r===(4!==n.type||s?n.value:$g)}function Hg(n,r,s){let a=4;const l=n.attrs||[],p=function ep(n){for(let r=0;r<n.length;r++)if(po(n[r]))return r;return n.length}(l);let _=!1;for(let S=0;S<r.length;S++){const M=r[S];if("number"!=typeof M){if(!_)if(4&a){if(a=2|1&a,""!==M&&!Ty(n,M,s)||""===M&&1===r.length){if(Ga(a))return!1;_=!0}}else{const j=8&a?M:r[++S];if(8&a&&null!==n.attrs){if(!Dy(n.attrs,j,s)){if(Ga(a))return!1;_=!0}continue}const pe=jh(8&a?"class":M,l,jg(n),s);if(-1===pe){if(Ga(a))return!1;_=!0;continue}if(""!==j){let Re;Re=pe>p?"":l[pe+1].toLowerCase();const Je=8&a?Re:null;if(Je&&-1!==Ws(Je,j,0)||2&a&&j!==Re){if(Ga(a))return!1;_=!0}}}}else{if(!_&&!Ga(a)&&!Ga(M))return!1;if(_&&Ga(M))continue;_=!1,a=M|1&a}}return Ga(a)||_}function Ga(n){return 0==(1&n)}function jh(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let p=!1;for(;l<r.length;){const _=r[l];if(_===n)return l;if(3===_||6===_)p=!0;else{if(1===_||2===_){let S=r[++l];for(;"string"==typeof S;)S=r[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=p?1:2}return-1}return function tp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function zg(n,r,s=!1){for(let a=0;a<r.length;a++)if(Hg(n,r[a],s))return!0;return!1}function Td(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let l=0;l<n.length;l++)if(n[l]!==a[l])continue e;return!0}}return!1}function Sd(n,r){return n?":not("+r.trim()+")":r}function np(n){let r=n[0],s=1,a=2,l="",p=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&a){const S=n[++s];l+="["+_+(S.length>0?'="'+S+'"':"")+"]"}else 8&a?l+="."+_:4&a&&(l+=" "+_);else""!==l&&!Ga(_)&&(r+=Sd(p,l),l=""),a=_,p=p||!Ga(a);s++}return""!==l&&(r+=Sd(p,l)),r}const dr={};function ip(n){sp(I(),E(),pi()+n,!1)}function sp(n,r,s,a){if(!a)if(3==(3&r[In])){const p=n.preOrderCheckHooks;null!==p&&st(r,p,s)}else{const p=n.preOrderHooks;null!==p&&b(r,p,0,s)}jo(s)}function Ad(n,r=null,s=null,a){const l=op(n,r,s,a);return l.resolveInjectorInitializers(),l}function op(n,r=null,s=null,a,l=new Set){const p=[s||_e,kh(n)];return a=a||("object"==typeof n?void 0:ae(n)),new Nh(p,r||Cc(),a||null,l)}let ll=(()=>{class n{static create(s,a){if(Array.isArray(s))return Ad({name:""},a,s,"");{const l=s.name??"";return Ad({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Wn,n.NULL=new zf,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>Ft(Hf)}),n.__NG_ELEMENT_ID__=-1,n})();function Ac(n,r=St.Default){const s=E();return null===s?Ft(n,r):ro(ct(),s,le(n),r)}function Kh(){throw new Error("invalid")}function nm(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const p=s[a+1];if(-1!==p){const _=n.data[p];fo(s[a]),_.contentQueries(2,r[p],p)}}}function Iu(n,r,s,a,l,p,_,S,M,j,Q){const pe=r.blueprint.slice();return pe[bn]=l,pe[In]=76|a,(null!==Q||n&&1024&n[In])&&(pe[In]|=1024),xs(pe),pe[ir]=pe[mi]=n,pe[lt]=s,pe[rn]=_||n&&n[rn],pe[$t]=S||n&&n[$t],pe[lr]=M||n&&n[lr]||null,pe[Lt]=j||n&&n[Lt]||null,pe[Me]=p,pe[Mi]=function xf(){return ph++}(),pe[Ro]=Q,pe[Xn]=2==r.type?n[Xn]:pe,pe}function dl(n,r,s,a,l){let p=n.data[r];if(null===p)p=function Mc(n,r,s,a,l){const p=dn(),_=or(),M=n.data[r]=function gp(n,r,s,a,l,p){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=M),null!==p&&(_?null==p.child&&null!==M.parent&&(p.child=M):null===p.next&&(p.next=M,M.prev=p)),M}(n,r,s,a,l),function js(){return Sn.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=s,p.value=a,p.attrs=l;const _=function Kn(){const n=Sn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return $n(p,!0),p}function Du(n,r,s,a){if(0===s)return-1;const l=r.length;for(let p=0;p<s;p++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Nd(n,r,s){Ra(r);try{const a=n.viewQuery;null!==a&&Hd(1,a,s);const l=n.template;null!==l&&Zh(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nm(n,r),n.staticViewQueries&&Hd(2,n.viewQuery,s);const p=n.components;null!==p&&function fp(n,r){for(let s=0;s<r.length;s++)bp(n,r[s])}(r,p)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[In]&=-5,ci()}}function Fd(n,r,s,a){const l=r[In];if(128!=(128&l)){Ra(r);try{xs(r),function Xr(n){return Sn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Zh(n,r,s,2,a);const _=3==(3&l);if(_){const j=n.preOrderCheckHooks;null!==j&&st(r,j,null)}else{const j=n.preOrderHooks;null!==j&&b(r,j,0,null),$(r,0)}if(function jy(n){for(let r=dd(n);null!==r;r=Wo(r)){if(!r[Vs])continue;const s=r[fs];for(let a=0;a<s.length;a++){const l=s[a];512&l[In]||eo(l[ir],1),l[In]|=512}}}(r),function kc(n){for(let r=dd(n);null!==r;r=Wo(r))for(let s=ui;s<r.length;s++){const a=r[s],l=a[Nt];ws(a)&&Fd(l,a,l.template,a[lt])}}(r),null!==n.contentQueries&&nm(n,r),_){const j=n.contentCheckHooks;null!==j&&st(r,j)}else{const j=n.contentHooks;null!==j&&b(r,j,1),$(r,1)}!function Fy(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)jo(~l);else{const p=l,_=s[++a],S=s[++a];bo(_,p),S(2,r[p])}}}finally{jo(-1)}}(n,r);const S=n.components;null!==S&&function kd(n,r){for(let s=0;s<r.length;s++)Hy(n,r[s])}(r,S);const M=n.viewQuery;if(null!==M&&Hd(2,M,a),_){const j=n.viewCheckHooks;null!==j&&st(r,j)}else{const j=n.viewHooks;null!==j&&b(r,j,2),$(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[In]&=-41,512&r[In]&&(r[In]&=-513,eo(r[ir],-1))}finally{ci()}}}function Zh(n,r,s,a,l){const p=pi(),_=2&a;try{jo(-1),_&&r.length>er&&sp(n,r,er,!1),Bn(_?2:0,l),s(a,l)}finally{jo(p),Bn(_?3:1,l)}}function Ld(n,r,s){if(es(r)){const l=r.directiveEnd;for(let p=r.directiveStart;p<l;p++){const _=n.data[p];_.contentQueries&&_.contentQueries(1,s[p],p)}}}function Wa(n,r,s){re()&&(function yp(n,r,s,a){const l=s.directiveStart,p=s.directiveEnd;ts(s)&&function xc(n,r,s){const a=zr(r,n),l=rm(s),p=n[rn],_=Nc(n,Iu(n,l,null,s.onPush?32:16,a,r,p,p.createRenderer(a,s),null,null,null));n[r.index]=_}(r,s,n.data[l+s.componentOffset]),n.firstCreatePass||ya(s,r),so(a,r);const _=s.initialInputs;for(let S=l;S<p;S++){const M=n.data[S],j=Zi(r,n,S,s);so(j,r),null!==_&&Pc(0,S-l,j,M,0,_),si(M)&&(Zr(s.index,r)[lt]=Zi(r,n,S,s))}}(n,r,s,zr(s,r)),64==(64&s.flags)&&um(n,r,s))}function Yh(n,r,s=zr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let p=0;p<a.length;p+=2){const _=a[p+1],S=-1===_?s(r,n):n[_];n[l++]=S}}}function rm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ud(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Ud(n,r,s,a,l,p,_,S,M,j){const Q=er+a,pe=Q+l,Re=function Ly(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:dr);return s}(Q,pe),Je="function"==typeof j?j():j;return Re[Nt]={type:n,blueprint:Re,template:s,queries:null,viewQuery:S,declTNode:r,data:Re.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:M,consts:Je,incompleteFirstPass:!1}}function im(n,r,s,a){const l=Tp(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&dm(n).push(a,l.length-1))}function Vd(n,r,s,a){for(let l in n)if(n.hasOwnProperty(l)){s=null===s?{}:s;const p=n[l];null===a?Qh(s,r,l,p):a.hasOwnProperty(l)&&Qh(s,r,a[l],p)}return s}function Qh(n,r,s,a){n.hasOwnProperty(s)?n[s].push(r,a):n[s]=[r,a]}function Bo(n,r,s,a,l,p,_,S){const M=zr(r,s);let Q,j=r.inputs;!S&&null!=j&&(Q=j[a])?(ef(n,s,Q,a,l),ts(r)&&om(s,r.index)):3&r.type&&(a=function Oc(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=_?_(l,r.value||"",a):l,p.setProperty(M,a,l))}function om(n,r){const s=Zr(r,n);16&s[In]||(s[In]|=32)}function Jh(n,r,s,a){if(re()){const l=null===a?null:{"":-1},p=function $y(n,r){const s=n.directiveRegistry;let a=null,l=null;if(s)for(let p=0;p<s.length;p++){const _=s[p];if(zg(r,_.selectors,!1))if(a||(a=[]),si(_))if(null!==_.findHostDirectiveDefs){const S=[];l=l||new Map,_.findHostDirectiveDefs(_,S,l),a.unshift(...S,_),Bd(n,r,S.length)}else a.unshift(_),Bd(n,r,0);else l=l||new Map,_.findHostDirectiveDefs?.(_,a,l),a.push(_)}return null===a?null:[a,l]}(n,s);let _,S;null===p?_=S=null:[_,S]=p,null!==_&&am(n,r,s,_,l,S),l&&function lm(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const p=s[r[l+1]];if(null==p)throw new qe(-301,!1);a.push(r[l],p)}}}(s,a,l)}s.mergedAttrs=cn(s.mergedAttrs,s.attrs)}function am(n,r,s,a,l,p){for(let j=0;j<a.length;j++)_a(ya(s,r),n,a[j].type);!function wp(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,a.length);for(let j=0;j<a.length;j++){const Q=a[j];Q.providersResolver&&Q.providersResolver(Q)}let _=!1,S=!1,M=Du(n,r,a.length,null);for(let j=0;j<a.length;j++){const Q=a[j];s.mergedAttrs=cn(s.mergedAttrs,Q.hostAttrs),Cp(n,s,r,M,Q),vp(M,Q,l),null!==Q.contentQueries&&(s.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(s.flags|=64);const pe=Q.type.prototype;!_&&(pe.ngOnChanges||pe.ngOnInit||pe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),_=!0),!S&&(pe.ngOnChanges||pe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),S=!0),M++}!function sm(n,r,s){const l=r.directiveEnd,p=n.data,_=r.attrs,S=[];let M=null,j=null;for(let Q=r.directiveStart;Q<l;Q++){const pe=p[Q],Re=s?s.get(pe):null,Ot=Re?Re.outputs:null;M=Vd(pe.inputs,Q,M,Re?Re.inputs:null),j=Vd(pe.outputs,Q,j,Ot);const Kt=null===M||null===_||jg(r)?null:Rc(M,Q,_);S.push(Kt)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=8),M.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=S,r.inputs=M,r.outputs=j}(n,s,p)}function um(n,r,s){const a=s.directiveStart,l=s.directiveEnd,p=s.index,_=function ha(){return Sn.lFrame.currentDirectiveIndex}();try{jo(p);for(let S=a;S<l;S++){const M=n.data[S],j=r[S];Hs(S),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&_p(M,j)}}finally{jo(-1),Hs(_)}}function _p(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Bd(n,r,s){r.componentOffset=s,(n.components||(n.components=[])).push(r.index)}function vp(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;si(r)&&(s[""]=n)}}function Cp(n,r,s,a,l){n.data[a]=l;const p=l.factory||(l.factory=vi(l.type)),_=new nt(p,si(l),Ac);n.blueprint[a]=_,s[a]=_,function mp(n,r,s,a,l){const p=l.hostBindings;if(p){let _=n.hostBindingOpCodes;null===_&&(_=n.hostBindingOpCodes=[]);const S=~r.index;(function By(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(_)!=S&&_.push(S),_.push(s,a,p)}}(n,r,a,Du(n,s,l.hostVars,dr),l)}function vo(n,r,s,a,l,p){const _=zr(n,r);!function $d(n,r,s,a,l,p,_){if(null==p)n.removeAttribute(r,l,s);else{const S=null==_?et(p):_(p,a||"",l);n.setAttribute(r,l,S,s)}}(r[$t],_,p,n.value,s,a,l)}function Pc(n,r,s,a,l,p){const _=p[r];if(null!==_){const S=a.setInput;for(let M=0;M<_.length;){const j=_[M++],Q=_[M++],pe=_[M++];null!==S?a.setInput(s,pe,j,Q):s[Q]=pe}}}function Rc(n,r,s){let a=null,l=0;for(;l<s.length;){const p=s[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(n.hasOwnProperty(p)){null===a&&(a=[]);const _=n[p];for(let S=0;S<_.length;S+=2)if(_[S]===r){a.push(p,_[S+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function Ep(n,r,s,a){return[n,!0,!1,r,null,0,a,s,null,null]}function Hy(n,r){const s=Zr(r,n);if(ws(s)){const a=s[Nt];48&s[In]?Fd(a,s,a.template,s[lt]):s[Fe]>0&&jd(s)}}function jd(n){for(let a=dd(n);null!==a;a=Wo(a))for(let l=ui;l<a.length;l++){const p=a[l];if(ws(p))if(512&p[In]){const _=p[Nt];Fd(_,p,_.template,p[lt])}else p[Fe]>0&&jd(p)}const s=n[Nt].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Zr(s[a],n);ws(l)&&l[Fe]>0&&jd(l)}}function bp(n,r){const s=Zr(r,n),a=s[Nt];(function Ip(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Nd(a,s,s[lt])}function Nc(n,r){return n[kn]?n[xr][br]=r:n[kn]=r,n[xr]=r,r}function Dp(n){for(;n;){n[In]|=32;const r=$a(n);if(As(n)&&!r)return n;n=r}return null}function Xh(n,r,s,a=!0){const l=r[rn];l.begin&&l.begin();try{Fd(n,r,n.template,s)}catch(_){throw a&&Ap(r,_),_}finally{l.end&&l.end()}}function Hd(n,r,s){fo(0),r(n,s)}function Tp(n){return n[je]||(n[je]=[])}function dm(n){return n.cleanup||(n.cleanup=[])}function Ap(n,r){const s=n[Lt],a=s?s.get(Dd,null):null;a&&a.handleError(r)}function ef(n,r,s,a,l){for(let p=0;p<s.length;){const _=s[p++],S=s[p++],M=r[_],j=n.data[_];null!==j.setInput?j.setInput(M,l,a,S):M[S]=l}}function tf(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,p=0;if(null!==r)for(let _=0;_<r.length;_++){const S=r[_];"number"==typeof S?p=S:1==p?l=Ee(l,S):2==p&&(a=Ee(a,S+": "+r[++_]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function nf(n,r,s,a,l=!1){for(;null!==s;){const p=r[s.index];if(null!==p&&a.push(jr(p)),Oi(p))for(let S=ui;S<p.length;S++){const M=p[S],j=M[Nt].firstChild;null!==j&&nf(M[Nt],M,j,a)}const _=s.type;if(8&_)nf(n,r,s.child,a);else if(32&_){const S=cd(s,r);let M;for(;M=S();)a.push(M)}else if(16&_){const S=gd(r,s);if(Array.isArray(S))a.push(...S);else{const M=$a(r[Xn]);nf(M[Nt],M,S,a,!0)}}s=l?s.projectionNext:s.next}return a}class zd{get rootNodes(){const r=this._lView,s=r[Nt];return nf(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(r){this._lView[lt]=r}get destroyed(){return 128==(128&this._lView[In])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[ir];if(Oi(r)){const s=r[Kr],a=s?s.indexOf(this):-1;a>-1&&(fc(r,a),Ia(s,a))}this._attachedToViewContainer=!1}hd(this._lView[Nt],this._lView)}onDestroy(r){im(this._lView[Nt],this._lView,null,r)}markForCheck(){Dp(this._cdRefInjectingView||this._lView)}detach(){this._lView[In]&=-65}reattach(){this._lView[In]|=64}detectChanges(){Xh(this._lView[Nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pf(n,r){vu(n,r,r[$t],2,null,null)}(this._lView[Nt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new qe(902,!1);this._appRef=r}}class zy extends zd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xh(r[Nt],r,r[lt],!1)}checkNoChanges(){}get context(){return null}}class rf extends ul{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Vn(r);return new Hl(s,this.ngModule)}}function sf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Gy{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=x(a);const l=this.injector.get(r,Bh,a);return l!==Bh||s===Bh?l:this.parentInjector.get(r,s,a)}}class Hl extends Ec{get inputs(){return sf(this.componentDef.inputs)}get outputs(){return sf(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function rp(n){return n.map(np).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let p=(l=l||this.ngModule)instanceof ol?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new Gy(r,p):r,S=_.get(Yf,null);if(null===S)throw new qe(407,!1);const M=_.get(Ic,null),j=S.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",pe=a?function pp(n,r,s){return n.selectRootElement(r,s===Pe.ShadowDom)}(j,a,this.componentDef.encapsulation):Oo(j,Q,function Mp(n){const r=n.toLowerCase();return"svg"===r?Ni:"math"===r?"math":null}(Q)),Re=this.componentDef.onPush?288:272,Je=Ud(0,null,null,1,0,null,null,null,null,null),Ot=Iu(null,Je,null,Re,null,null,S,j,M,_,null);let Kt,pn;Ra(Ot);try{const Mn=this.componentDef;let Qn,Bt=null;Mn.findHostDirectiveDefs?(Qn=[],Bt=new Map,Mn.findHostDirectiveDefs(Mn,Qn,Bt),Qn.push(Mn)):Qn=[Mn];const fr=function fm(n,r){const s=n[Nt],a=er;return n[a]=r,dl(s,a,2,"#host",null)}(Ot,pe),hs=function Op(n,r,s,a,l,p,_,S){const M=l[Nt];!function pm(n,r,s,a){for(const l of n)r.mergedAttrs=cn(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(tf(r,r.mergedAttrs,!0),null!==s&&mc(a,s,r))}(a,n,r,_);const j=p.createRenderer(r,s),Q=Iu(l,rm(s),null,s.onPush?32:16,l[n.index],n,p,j,S||null,null,null);return M.firstCreatePass&&Bd(M,n,a.length-1),Nc(l,Q),l[n.index]=Q}(fr,pe,Mn,Qn,Ot,S,j);pn=Pr(Je,er),pe&&function xp(n,r,s,a){if(a)Ar(n,s,["ng-version",bu.full]);else{const{attrs:l,classes:p}=function Wg(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let p=n[a];if("string"==typeof p)2===l?""!==p&&r.push(p,n[++a]):8===l&&s.push(p);else{if(!Ga(l))break;l=p}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&Ar(n,s,l),p&&p.length>0&&Xa(n,s,p.join(" "))}}(j,Mn,pe,a),void 0!==s&&function Ky(n,r,s){const a=n.projection=[];for(let l=0;l<r.length;l++){const p=s[l];a.push(null!=p?Array.from(p):null)}}(pn,this.ngContentSelectors,s),Kt=function qy(n,r,s,a,l,p){const _=ct(),S=l[Nt],M=zr(_,l);am(S,l,_,s,null,a);for(let Q=0;Q<s.length;Q++)so(Zi(l,S,_.directiveStart+Q,_),l);um(S,l,_),M&&so(M,l);const j=Zi(l,S,_.directiveStart+_.componentOffset,_);if(n[lt]=l[lt]=j,null!==p)for(const Q of p)Q(j,r);return Ld(S,_,n),j}(hs,Mn,Qn,Bt,Ot,[Pp]),Nd(Je,Ot,null)}finally{ci()}return new Wy(this.componentType,Kt,Bl(pn,Ot),Ot,pn)}}class Wy extends Uh{constructor(r,s,a,l,p){super(),this.location=a,this._rootLView=l,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new zy(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const p=this._rootLView;ef(p[Nt],p,l,r,s),om(p,this._tNode.index)}}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Pp(){const n=ct();Jt(E()[Nt],n)}function Gd(n){let r=function gm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(si(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new qe(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const _=n;_.inputs=Wd(n.inputs),_.declaredInputs=Wd(n.declaredInputs),_.outputs=Wd(n.outputs);const S=l.hostBindings;S&&Fc(n,S);const M=l.viewQuery,j=l.contentQueries;if(M&&Rp(n,M),j&&kp(n,j),be(n.inputs,l.inputs),be(n.declaredInputs,l.declaredInputs),be(n.outputs,l.outputs),si(l)&&l.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let _=0;_<p.length;_++){const S=p[_];S&&S.ngInherit&&S(n),S===Gd&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Zy(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=cn(l.hostAttrs,s=cn(s,l.hostAttrs))}}(a)}function Wd(n){return n===xt?{}:n===_e?[]:n}function Rp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function kp(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,p)=>{r(a,l,p),s(a,l,p)}:r}function Fc(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Lc(n){return!!Up(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Up(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function wo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Bp(n,r,s,a){const l=E();return wo(l,Es(),r)&&(I(),vo(bt(),l,n,r,s,a)),Bp}function Uc(n,r,s,a){return wo(n,Es(),s)?r+et(s)+a:dr}function zp(n,r,s,a,l,p,_,S){const M=E(),j=I(),Q=n+er,pe=j.firstCreatePass?function Hp(n,r,s,a,l,p,_,S,M){const j=r.consts,Q=dl(r,n,4,_||null,Ki(j,S));Jh(r,s,Q,Ki(j,M)),Jt(r,Q);const pe=Q.tView=Ud(2,Q,a,l,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,j);return null!==r.queries&&(r.queries.template(r,Q),pe.queries=r.queries.embeddedTView(Q)),Q}(Q,j,M,r,s,a,l,p,_):j.data[Q];$n(pe,!1);const Re=M[$t].createComment("");yu(j,M,Re,pe),so(Re,M),Nc(M,M[Q]=Ep(Re,M,Re,pe)),yi(pe)&&Wa(j,M,pe),null!=_&&Yh(M,pe,S)}function lf(n){return qi(function Hr(){return Sn.lFrame.contextLView}(),er+n)}function Bc(n,r,s){const a=E();return wo(a,Es(),r)&&Bo(I(),bt(),a,n,r,a[$t],s,!1),Bc}function Yd(n,r,s,a,l){const _=l?"class":"style";ef(n,s,r.inputs[_],_,a)}function ql(n,r,s,a){const l=E(),p=I(),_=er+n,S=l[$t],M=p.firstCreatePass?function bm(n,r,s,a,l,p){const _=r.consts,M=dl(r,n,2,a,Ki(_,l));return Jh(r,s,M,Ki(_,p)),null!==M.attrs&&tf(M,M.attrs,!1),null!==M.mergedAttrs&&tf(M,M.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,M),M}(_,p,l,r,s,a):p.data[_],j=l[_]=Oo(S,r,function En(){return Sn.lFrame.currentNamespace}()),Q=yi(M);return $n(M,!0),mc(S,j,M),32!=(32&M.flags)&&yu(p,l,j,M),0===function $s(){return Sn.lFrame.elementDepthCount}()&&so(j,l),function U(){Sn.lFrame.elementDepthCount++}(),Q&&(Wa(p,l,M),Ld(p,M,l)),null!==a&&Yh(l,M),ql}function $c(){let n=ct();or()?ar():(n=n.parent,$n(n,!1));const r=n;!function L(){Sn.lFrame.elementDepthCount--}();const s=I();return s.firstCreatePass&&(Jt(s,n),es(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ur(n){return 0!=(8&n.flags)}(r)&&Yd(s,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function qn(n){return 0!=(16&n.flags)}(r)&&Yd(s,r,E(),r.stylesWithoutHost,!1),$c}function Qd(n,r,s,a){return ql(n,r,s,a),$c(),Qd}function yl(n,r,s){const a=E(),l=I(),p=n+er,_=l.firstCreatePass?function Im(n,r,s,a,l){const p=r.consts,_=Ki(p,a),S=dl(r,n,8,"ng-container",_);return null!==_&&tf(S,_,!0),Jh(r,s,S,Ki(p,l)),null!==r.queries&&r.queries.elementStart(r,S),S}(p,l,a,r,s):l.data[p];$n(_,!0);const S=a[p]=a[$t].createComment("");return yu(l,a,S,_),so(S,a),yi(_)&&(Wa(l,a,_),Ld(l,_,a)),null!=s&&Yh(a,_),yl}function Jd(){let n=ct();const r=I();return or()?ar():(n=n.parent,$n(n,!1)),r.firstCreatePass&&(Jt(r,n),es(n)&&r.queries.elementEnd(n)),Jd}function Wp(n,r,s){return yl(n,r,s),Jd(),Wp}function Dm(){return E()}function qp(n){return!!n&&"function"==typeof n.then}function Kp(n){return!!n&&"function"==typeof n.subscribe}const Tm=Kp;function cf(n,r,s,a){const l=E(),p=I(),_=ct();return function Am(n,r,s,a,l,p,_){const S=yi(a),j=n.firstCreatePass&&dm(n),Q=r[lt],pe=Tp(r);let Re=!0;if(3&a.type||_){const Kt=zr(a,r),pn=_?_(Kt):Kt,Mn=pe.length,Qn=_?fr=>_(jr(fr[a.index])):a.index;let Bt=null;if(!_&&S&&(Bt=function Xy(n,r,s,a){const l=n.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const _=l[p];if(_===s&&l[p+1]===a){const S=r[je],M=l[p+2];return S.length>M?S[M]:null}"string"==typeof _&&(p+=2)}return null}(n,r,l,a.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=p,Bt.__ngLastListenerFn__=p,Re=!1;else{p=Zp(a,r,Q,p,!1);const fr=s.listen(pn,l,p);pe.push(p,fr),j&&j.push(l,Qn,Mn,Mn+1)}}else p=Zp(a,r,Q,p,!1);const Je=a.outputs;let Ot;if(Re&&null!==Je&&(Ot=Je[l])){const Kt=Ot.length;if(Kt)for(let pn=0;pn<Kt;pn+=2){const hs=r[Ot[pn]][Ot[pn+1]].subscribe(p),qs=pe.length;pe.push(p,hs),j&&j.push(l,a.index,qs,-(qs+1))}}}(p,l,l[$t],_,n,r,a),cf}function Mm(n,r,s,a){try{return Bn(6,r,s),!1!==s(a)}catch(l){return Ap(n,l),!1}finally{Bn(7,r,s)}}function Zp(n,r,s,a,l){return function p(_){if(_===Function)return a;Dp(n.componentOffset>-1?Zr(n.index,r):r);let M=Mm(r,s,a,_),j=p.__ngNextListenerFn__;for(;j;)M=Mm(r,s,j,_)&&M,j=j.__ngNextListenerFn__;return l&&!1===M&&(_.preventDefault(),_.returnValue=!1),M}}function df(n=1){return function to(n){return(Sn.lFrame.contextLView=function Do(n,r){for(;n>0;)r=r[mi],n--;return r}(n,Sn.lFrame.contextLView))[lt]}(n)}function Om(n,r){let s=null;const a=function Gg(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(n);for(let l=0;l<r.length;l++){const p=r[l];if("*"!==p){if(null===a?zg(n,p,!0):Td(a,p))return l}else s=l}return s}function Yp(n){const r=E()[Xn][Me];if(!r.projection){const a=r.projection=mo(n?n.length:1,null),l=a.slice();let p=r.child;for(;null!==p;){const _=n?Om(p,n):0;null!==_&&(l[_]?l[_].projectionNext=p:a[_]=p,l[_]=p),p=p.next}}}function Qp(n,r=0,s){const a=E(),l=I(),p=dl(l,er+n,16,null,s||null);null===p.projection&&(p.projection=r),ar(),32!=(32&p.flags)&&function Zu(n,r,s){Ko(r[$t],0,r,s,Ch(n,s,r),pd(s.parent||r[Me],s,r))}(l,a,p)}function jc(n,r,s){return Or(n,"",r,"",s),jc}function Or(n,r,s,a,l){const p=E(),_=Uc(p,r,s,a);return _!==dr&&Bo(I(),bt(),p,n,_,p[$t],l,!1),Or}function hf(n,r){return n<<17|r<<2}function Au(n){return n>>17&32767}function ng(n){return 2|n}function Mu(n){return(131068&n)>>2}function rg(n,r){return-131069&n|r<<2}function Di(n){return 1|n}function Rm(n,r,s,a,l){const p=n[s+1],_=null===r;let S=a?Au(p):Mu(p),M=!1;for(;0!==S&&(!1===M||_);){const Q=n[S+1];n_(n[S],r)&&(M=!0,n[S+1]=a?Di(Q):ng(Q)),S=a?Au(Q):Mu(Q)}M&&(n[s+1]=a?ng(p):Di(p))}function n_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&C(n,r)>=0}const Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function km(n){return n.substring(Fs.key,Fs.keyEnd)}function Nm(n,r){const s=Fs.textEnd;return s===r?-1:(r=Fs.keyEnd=function Xd(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,Fs.key=r,s),Kl(n,r,s))}function Kl(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Gc(n,r,s){return Ka(n,r,s,!1),Gc}function ig(n,r){return Ka(n,r,null,!0),ig}function sg(n){Co(Mr,la,n,!0)}function la(n,r){for(let s=function i_(n){return function Lm(n){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=n.length}(n),Nm(n,Kl(n,0,Fs.textEnd))}(r);s>=0;s=Nm(r,s))Mr(n,km(r),!0)}function Ka(n,r,s,a){const l=E(),p=I(),_=hi(2);p.firstUpdatePass&&Wc(p,n,_,a),r!==dr&&wo(l,_,r)&&cg(p,p.data[pi()],l,l[$t],n,l[_+1]=function th(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ae(Aa(n)))),n}(r,s),a,_)}function Co(n,r,s,a){const l=I(),p=hi(2);l.firstUpdatePass&&Wc(l,null,p,a);const _=E();if(s!==dr&&wo(_,p,s)){const S=l.data[pi()];if(Bm(S,a)&&!eh(l,p)){let M=a?S.classesWithoutHost:S.stylesWithoutHost;null!==M&&(s=Ee(M,s||"")),Yd(l,S,_,s,a)}else!function Yl(n,r,s,a,l,p,_,S){l===dr&&(l=_e);let M=0,j=0,Q=0<l.length?l[0]:null,pe=0<p.length?p[0]:null;for(;null!==Q||null!==pe;){const Re=M<l.length?l[M+1]:void 0,Je=j<p.length?p[j+1]:void 0;let Kt,Ot=null;Q===pe?(M+=2,j+=2,Re!==Je&&(Ot=pe,Kt=Je)):null===pe||null!==Q&&Q<pe?(M+=2,Ot=Q):(j+=2,Ot=pe,Kt=Je),null!==Ot&&cg(n,r,s,a,Ot,Kt,_,S),Q=M<l.length?l[M]:null,pe=j<p.length?p[j]:null}}(l,S,_,_[$t],_[p+1],_[p+1]=function ug(n,r,s){if(null==s||""===s)return _e;const a=[],l=Aa(s);if(Array.isArray(l))for(let p=0;p<l.length;p++)n(a,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&n(a,p,l[p]);else"string"==typeof l&&r(a,l);return a}(n,r,s),a,p)}}function eh(n,r){return r>=n.expandoStartIndex}function Wc(n,r,s,a){const l=n.data;if(null===l[s+1]){const p=l[pi()],_=eh(n,s);Bm(p,a)&&null===r&&!_&&(r=!1),r=function Vm(n,r,s,a){const l=function Io(n){const r=Sn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let p=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Zl(s=ag(null,n,r,s,a),r.attrs,a),p=null);else{const _=r.directiveStylingLast;if(-1===_||n[_]!==l)if(s=ag(l,n,r,s,a),null===p){let M=function og(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Mu(a))return n[Au(a)]}(n,r,a);void 0!==M&&Array.isArray(M)&&(M=ag(null,n,r,M[1],a),M=Zl(M,r.attrs,a),function a_(n,r,s,a){n[Au(s?r.classBindings:r.styleBindings)]=a}(n,r,a,M))}else p=function u_(n,r,s){let a;const l=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<l;p++)a=Zl(a,n[p].hostAttrs,s);return Zl(a,r.attrs,s)}(n,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),s}(l,p,r,a),function Ss(n,r,s,a,l,p){let _=p?r.classBindings:r.styleBindings,S=Au(_),M=Mu(_);n[a]=s;let Q,j=!1;if(Array.isArray(s)?(Q=s[1],(null===Q||C(s,Q)>0)&&(j=!0)):Q=s,l)if(0!==M){const Re=Au(n[S+1]);n[a+1]=hf(Re,S),0!==Re&&(n[Re+1]=rg(n[Re+1],a)),n[S+1]=function tg(n,r){return 131071&n|r<<17}(n[S+1],a)}else n[a+1]=hf(S,0),0!==S&&(n[S+1]=rg(n[S+1],a)),S=a;else n[a+1]=hf(M,0),0===S?S=a:n[M+1]=rg(n[M+1],a),M=a;j&&(n[a+1]=ng(n[a+1])),Rm(n,Q,a,!0),Rm(n,Q,a,!1),function Pm(n,r,s,a,l){const p=l?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof r&&C(p,r)>=0&&(s[a+1]=Di(s[a+1]))}(r,Q,n,a,p),_=hf(S,M),p?r.classBindings=_:r.styleBindings=_}(l,p,r,s,_,a)}}function ag(n,r,s,a,l){let p=null;const _=s.directiveEnd;let S=s.directiveStylingLast;for(-1===S?S=s.directiveStart:S++;S<_&&(p=r[S],a=Zl(a,p.hostAttrs,l),p!==n);)S++;return null!==n&&(s.directiveStylingLast=S),a}function Zl(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let p=0;p<r.length;p++){const _=r[p];"number"==typeof _?l=_:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mr(n,_,!!s||r[++p]))}return void 0===n?null:n}function cg(n,r,s,a,l,p,_,S){if(!(3&r.type))return;const M=n.data,j=M[S+1],Q=function t_(n){return 1==(1&n)}(j)?dg(M,r,s,l,Mu(j),_):void 0;qc(Q)||(qc(p)||function e_(n){return 2==(2&n)}(j)&&(p=dg(M,null,s,l,S,_)),function xo(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let p=-1===a.indexOf("-")?void 0:aa.DashCase;null==l?n.removeStyle(s,a,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=aa.Important),n.setStyle(s,a,l,p))}}(a,_,Fi(pi(),s),l,p))}function dg(n,r,s,a,l,p){const _=null===r;let S;for(;l>0;){const M=n[l],j=Array.isArray(M),Q=j?M[1]:M,pe=null===Q;let Re=s[l+1];Re===dr&&(Re=pe?_e:void 0);let Je=pe?v(Re,a):Q===a?Re:void 0;if(j&&!qc(Je)&&(Je=v(M,a)),qc(Je)&&(S=Je,_))return S;const Ot=n[l+1];l=_?Au(Ot):Mu(Ot)}if(null!==r){let M=p?r.residualClasses:r.residualStyles;null!=M&&(S=v(M,a))}return S}function qc(n){return void 0!==n}function Bm(n,r){return 0!=(n.flags&(r?8:16))}function nh(n,r=""){const s=E(),a=I(),l=n+er,p=a.firstCreatePass?dl(a,l,1,r,null):a.data[l],_=s[l]=function zu(n,r){return n.createText(r)}(s[$t],r);yu(a,s,_,p),$n(p,!1)}function Kc(n){return rh("",n,""),Kc}function rh(n,r,s){const a=E(),l=Uc(a,n,r,s);return l!==dr&&function su(n,r,s){const a=Fi(r,n);!function Gu(n,r,s){n.setValue(r,s)}(n[$t],a,s)}(a,pi(),l),rh}function Hm(n,r,s){Co(Mr,la,Uc(E(),n,r,s),!0)}const ca=void 0;var oh=["en",[["a","p"],["AM","PM"],ca],[["AM","PM"],ca,ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ca,"{1} 'at' {0}",ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ql(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let xa={};function yg(n){const r=function w_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Zm(r);if(s)return s;const a=r.split("-")[0];if(s=Zm(a),s)return s;if("en"===a)return oh;throw new qe(701,!1)}function xu(n){return yg(n)[Gn.PluralCase]}function Zm(n){return n in xa||(xa[n]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[n]),xa[n]}var Gn=(()=>((Gn=Gn||{})[Gn.LocaleId=0]="LocaleId",Gn[Gn.DayPeriodsFormat=1]="DayPeriodsFormat",Gn[Gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gn[Gn.DaysFormat=3]="DaysFormat",Gn[Gn.DaysStandalone=4]="DaysStandalone",Gn[Gn.MonthsFormat=5]="MonthsFormat",Gn[Gn.MonthsStandalone=6]="MonthsStandalone",Gn[Gn.Eras=7]="Eras",Gn[Gn.FirstDayOfWeek=8]="FirstDayOfWeek",Gn[Gn.WeekendRange=9]="WeekendRange",Gn[Gn.DateFormat=10]="DateFormat",Gn[Gn.TimeFormat=11]="TimeFormat",Gn[Gn.DateTimeFormat=12]="DateTimeFormat",Gn[Gn.NumberSymbols=13]="NumberSymbols",Gn[Gn.NumberFormats=14]="NumberFormats",Gn[Gn.CurrencyCode=15]="CurrencyCode",Gn[Gn.CurrencySymbol=16]="CurrencySymbol",Gn[Gn.CurrencyName=17]="CurrencyName",Gn[Gn.Currencies=18]="Currencies",Gn[Gn.Directionality=19]="Directionality",Gn[Gn.PluralCase=20]="PluralCase",Gn[Gn.ExtraData=21]="ExtraData",Gn))();const Xc="en-US";let wf=Xc;function N_(n,r,s,a,l){if(n=le(n),Array.isArray(n))for(let p=0;p<n.length;p++)N_(n[p],r,s,a,l);else{const p=I(),_=E();let S=Zo(n)?n:le(n.provide),M=xg(n);const j=ct(),Q=1048575&j.providerIndexes,pe=j.directiveStart,Re=j.providerIndexes>>20;if(Zo(n)||!n.multi){const Je=new nt(M,l,Ac),Ot=L_(S,r,l?Q:Q+Re,pe);-1===Ot?(_a(ya(j,_),p,S),F_(p,n,r.length),r.push(S),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),s.push(Je),_.push(Je)):(s[Ot]=Je,_[Ot]=Je)}else{const Je=L_(S,r,Q+Re,pe),Ot=L_(S,r,Q,Q+Re),pn=Ot>=0&&s[Ot];if(l&&!pn||!l&&!(Je>=0&&s[Je])){_a(ya(j,_),p,S);const Mn=function kw(n,r,s,a,l){const p=new nt(n,s,Ac);return p.multi=[],p.index=r,p.componentProviders=0,Nv(p,l,a&&!s),p}(l?Rw:Pw,s.length,l,a,M);!l&&pn&&(s[Ot].providerFactory=Mn),F_(p,n,r.length,0),r.push(S),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),s.push(Mn),_.push(Mn)}else F_(p,n,Je>-1?Je:Ot,Nv(s[l?Ot:Je],M,!l&&a));!l&&a&&pn&&s[Ot].componentProviders++}}}function F_(n,r,s,a){const l=Zo(r),p=function Mg(n){return!!n.useClass}(r);if(l||p){const M=(p?le(r.useClass):r).prototype.ngOnDestroy;if(M){const j=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Q=j.indexOf(s);-1===Q?j.push(s,[a,M]):j[Q+1].push(a,M)}else j.push(s,M)}}}function Nv(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function L_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function Pw(n,r,s,a){return U_(this.multi,[])}function Rw(n,r,s,a){const l=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,S=Zi(s,s[Nt],this.providerFactory.index,a);p=S.slice(0,_),U_(l,p);for(let M=_;M<S.length;M++)p.push(S[M])}else p=[],U_(l,p);return p}function U_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function Fv(n,r=[]){return s=>{s.providersResolver=(a,l)=>function xw(n,r,s){const a=I();if(a.firstCreatePass){const l=si(n);N_(s,a.data,a.blueprint,l,!0),N_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class bf{}class Lv{}function Nw(n,r){return new Uv(n,r??null)}class Uv extends bf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rf(this);const a=Et(r);this._bootstrapComponents=iu(a.bootstrap),this._r3Injector=op(r,s,[{provide:bf,useValue:this},{provide:ul,useValue:this.componentFactoryResolver}],ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class V_ extends Lv{constructor(r){super(),this.moduleType=r}create(r){return new Uv(this.moduleType,r)}}class Fw extends bf{constructor(r,s,a){super(),this.componentFactoryResolver=new rf(this),this.instance=null;const l=new Nh([...r,{provide:bf,useValue:this},{provide:ul,useValue:this.componentFactoryResolver}],s||Cc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function B_(n,r,s=null){return new Fw(n,r,s).injector}let Lw=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=vc(0,s.type),l=a.length>0?B_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=kt({token:n,providedIn:"environment",factory:()=>new n(Ft(ol))}),n})();function Vv(n){n.getStandaloneInjector=r=>r.get(Lw).getOrCreateStandaloneInjector(n)}function Wv(n,r,s,a,l,p){const _=r+s;return wo(n,_,l)?function au(n,r,s){return n[r]=s}(n,_+1,p?a.call(p,l):a(l)):function vg(n,r){const s=n[r];return s===dr?void 0:s}(n,_+1)}function Qv(n,r){const s=I();let a;const l=n+er;s.firstCreatePass?(a=function nC(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const p=a.factory||(a.factory=vi(a.type)),_=jn(Ac);try{const S=go(!1),M=p();return go(S),function Gp(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,E(),l,M),M}finally{jn(_)}}function Jv(n,r,s){const a=n+er,l=E(),p=qi(l,a);return function wg(n,r){return n[Nt].data[r].pure}(l,a)?Wv(l,function ur(){const n=Sn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),r,p.transform,s,p):p.transform(s)}function j_(n){return r=>{setTimeout(n,void 0,r)}}const Cl=class aC extends h.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,p=s||(()=>null),_=a;if(r&&"object"==typeof r){const M=r;l=M.next?.bind(M),p=M.error?.bind(M),_=M.complete?.bind(M)}this.__isAsync&&(p=j_(p),l&&(l=j_(l)),_&&(_=j_(_)));const S=super.subscribe({next:l,error:p,complete:_});return r instanceof z.w0&&r.add(S),S}};function uC(){return this._results[Symbol.iterator]()}class H_{get changes(){return this._changes||(this._changes=new Cl)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=H_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=uC)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function ls(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Go(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],p=r[a];if(s&&(l=s(l),p=s(p)),p!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=dC,n})();const lC=Cg,cC=class extends lC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tView,l=Iu(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[$r]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[ii];return null!==_&&(l[ii]=_.createEmbeddedView(a)),Nd(a,l,r),new zd(l)}};function dC(){return ry(ct(),E())}function ry(n,r){return 4&n.type?new cC(r,n,Bl(n,r)):null}let iy=(()=>{class n{}return n.__NG_ELEMENT_ID__=hC,n})();function hC(){return t0(ct(),E())}const fC=iy,Xv=class extends fC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Bl(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){const r=ta(this._hostTNode,this._hostLView);if(tr(r)){const s=qt(r,this._hostLView),a=bs(r);return new us(s[Nt].data[a+8],s)}return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=e0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ui}createEmbeddedView(r,s,a){let l,p;"number"==typeof a?l=a:null!=a&&(l=a.index,p=a.injector);const _=r.createEmbeddedView(s||{},p);return this.insert(_,l),_}createComponent(r,s,a,l,p){const _=r&&!function Ao(n){return"function"==typeof n}(r);let S;if(_)S=s;else{const pe=s||{};S=pe.index,a=pe.injector,l=pe.projectableNodes,p=pe.environmentInjector||pe.ngModuleRef}const M=_?r:new Hl(Vn(r)),j=a||this.parentInjector;if(!p&&null==M.ngModule){const Re=(_?j:this.parentInjector).get(ol,null);Re&&(p=Re)}const Q=M.create(j,l,void 0,p);return this.insert(Q.hostView,S),Q}insert(r,s){const a=r._lView,l=a[Nt];if(function Cs(n){return Oi(n[ir])}(a)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const pe=a[ir],Re=new Xv(pe,pe[Me],pe[ir]);Re.detach(Re.indexOf(r))}}const p=this._adjustIndex(s),_=this._lContainer;!function cr(n,r,s,a){const l=ui+a,p=s.length;a>0&&(s[l-1][br]=r),a<p-ui?(r[br]=s[l],Ua(s,ui+a,r)):(s.push(r),r[br]=null),r[ir]=s;const _=r[$r];null!==_&&s!==_&&function wh(n,r){const s=n[fs];r[Xn]!==r[ir][ir][Xn]&&(n[Vs]=!0),null===s?n[fs]=[r]:s.push(r)}(_,r);const S=r[ii];null!==S&&S.insertView(n),r[In]|=64}(l,a,_,p);const S=gc(p,_),M=a[$t],j=ja(M,_[ki]);return null!==j&&function Ml(n,r,s,a,l,p){a[bn]=l,a[Me]=r,vu(n,a,s,1,l,p)}(l,_[Me],M,a,j,S),r.attachToViewContainerRef(),Ua(z_(_),p,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=e0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=fc(this._lContainer,s);a&&(Ia(z_(this._lContainer),s),hd(a[Nt],a))}detach(r){const s=this._adjustIndex(r,-1),a=fc(this._lContainer,s);return a&&null!=Ia(z_(this._lContainer),s)?new zd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function e0(n){return n[Kr]}function z_(n){return n[Kr]||(n[Kr]=[])}function t0(n,r){let s;const a=r[n.index];if(Oi(a))s=a;else{let l;if(8&n.type)l=jr(a);else{const p=r[$t];l=p.createComment("");const _=zr(n,r);qo(p,ja(p,_),l,function Eh(n,r){return n.nextSibling(r)}(p,_),!1)}r[n.index]=s=Ep(a,r,l,n),Nc(r,s)}return new Xv(s,n,r)}class G_{constructor(r){this.queryList=r,this.matches=null}clone(){return new G_(this.queryList)}setDirty(){this.queryList.setDirty()}}class W_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let p=0;p<a;p++){const _=s.getByIndex(p);l.push(this.queries[_.indexInDeclarationView].clone())}return new W_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==d0(r,s).matches&&this.queries[s].setDirty()}}class n0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class q_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(r,l);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new q_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class K_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new K_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const p=a[l];this.matchTNodeWithReadOption(r,s,pC(s,p)),this.matchTNodeWithReadOption(r,s,Lo(s,r,p,!1,!1))}else a===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Lo(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Ma||l===iy||l===Cg&&4&s.type)this.addMatch(s.index,-2);else{const p=Lo(s,r,l,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function pC(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function mC(n,r,s,a){return-1===s?function gC(n,r){return 11&n.type?Bl(n,r):4&n.type?ry(n,r):null}(r,n):-2===s?function yC(n,r,s){return s===Ma?Bl(r,n):s===Cg?ry(r,n):s===iy?t0(r,n):void 0}(n,r,a):Zi(n,n[Nt],s,r)}function r0(n,r,s,a){const l=r[ii].queries[a];if(null===l.matches){const p=n.data,_=s.matches,S=[];for(let M=0;M<_.length;M+=2){const j=_[M];S.push(j<0?null:mC(r,p[j],_[M+1],s.metadata.read))}l.matches=S}return l.matches}function Z_(n,r,s,a){const l=n.queries.getByIndex(s),p=l.matches;if(null!==p){const _=r0(n,r,l,s);for(let S=0;S<p.length;S+=2){const M=p[S];if(M>0)a.push(_[S/2]);else{const j=p[S+1],Q=r[-M];for(let pe=ui;pe<Q.length;pe++){const Re=Q[pe];Re[$r]===Re[ir]&&Z_(Re[Nt],Re,j,a)}if(null!==Q[fs]){const pe=Q[fs];for(let Re=0;Re<pe.length;Re++){const Je=pe[Re];Z_(Je[Nt],Je,j,a)}}}}}return a}function s0(n){const r=E(),s=I(),a=Xo();fo(a+1);const l=d0(s,a);if(n.dirty&&function Pi(n){return 4==(4&n[In])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const p=l.crossesNgTemplate?Z_(s,r,a,[]):r0(s,r,l,a);n.reset(p,bc),n.notifyOnChanges()}return!0}return!1}function o0(n,r,s){const a=I();a.firstCreatePass&&(c0(a,new n0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),l0(a,E(),r)}function a0(n,r,s,a){const l=I();if(l.firstCreatePass){const p=ct();c0(l,new n0(r,s,a),p.index),function vC(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}l0(l,E(),s)}function u0(){return function _C(n,r){return n[ii].queries[r].queryList}(E(),Xo())}function l0(n,r,s){const a=new H_(4==(4&s));im(n,r,a,a.destroy),null===r[ii]&&(r[ii]=new W_),r[ii].queries.push(new G_(a))}function c0(n,r,s){null===n.queries&&(n.queries=new q_),n.queries.track(new K_(r,s))}function d0(n,r){return n.queries.getByIndex(r)}function h0(n,r){return ry(n,r)}function Y_(n){return!!Et(n)}function oy(...n){}const O0=new ei("Application Initializer");let ay=(()=>{class n{constructor(s){this.appInits=s,this.resolve=oy,this.reject=oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(qp(p))s.push(p);else if(Tm(p)){const _=new Promise((S,M)=>{p.subscribe({complete:S,error:M})});s.push(_)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ft(O0,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x0=new ei("AppId",{providedIn:"root",factory:function P0(){return`${tv()}${tv()}${tv()}`}});function tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const R0=new ei("Platform Initializer"),VC=new ei("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let BC=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const uy=new ei("LocaleId",{providedIn:"root",factory:()=>oe(uy,St.Optional|St.SkipSelf)||function $C(){return typeof $localize<"u"&&$localize.locale||Xc}()}),jC=new ei("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class HC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zC=(()=>{class n{compileModuleSync(s){return new V_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=iu(Et(s).declarations).reduce((_,S)=>{const M=Vn(S);return M&&_.push(new Hl(M)),_},[]);return new HC(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qC=(()=>Promise.resolve(0))();function nv(n){typeof Zone>"u"?qC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class lu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cl(!1),this.onMicrotaskEmpty=new Cl(!1),this.onStable=new Cl(!1),this.onError=new Cl(!1),typeof Zone>"u")throw new qe(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KC(){let n=Xt.requestAnimationFrame,r=Xt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function QC(n){const r=()=>{!function YC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Xt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,iv(n),n.isCheckStableRunning=!0,rv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,p,_,S)=>{try{return F0(n),s.invokeTask(l,p,_,S)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&r(),L0(n)}},onInvoke:(s,a,l,p,_,S,M)=>{try{return F0(n),s.invoke(l,p,_,S,M)}finally{n.shouldCoalesceRunChangeDetection&&r(),L0(n)}},onHasTask:(s,a,l,p)=>{s.hasTask(l,p),a===l&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,iv(n),rv(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,l,p)=>(s.handleError(l,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lu.isInAngularZone())throw new qe(909,!1)}static assertNotInAngularZone(){if(lu.isInAngularZone())throw new qe(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+l,r,ZC,oy,oy);try{return p.runTask(_,s,a)}finally{p.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const ZC={};function rv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function F0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function L0(n){n._nesting--,rv(n)}class JC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cl,this.onMicrotaskEmpty=new Cl,this.onStable=new Cl,this.onError=new Cl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const U0=new ei(""),V0=new ei("");let sv,XC=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sv||(function eE(n){sv=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lu.assertNotInAngularZone(),nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ft(lu),Ft(B0),Ft(V0))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),B0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return sv?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Jl=!1;let ed=null;const $0=new ei("AllowMultipleToken"),ov=new ei("PlatformDestroyListeners"),j0=new ei("appBootstrapListener");class rE{constructor(r,s){this.name=r,this.token=s}}function z0(n,r,s=[]){const a=`Platform: ${r}`,l=new ei(a);return(p=[])=>{let _=av();if(!_||_.injector.get($0,!1)){const S=[...s,...p,{provide:l,useValue:!0}];n?n(S):function iE(n){if(ed&&!ed.get($0,!1))throw new qe(400,!1);ed=n;const r=n.get(W0);(function H0(n){const r=n.get(R0,null);r&&r.forEach(s=>s())})(n)}(function G0(n=[],r){return ll.create({name:r,providers:[{provide:Kf,useValue:"platform"},{provide:ov,useValue:new Set([()=>ed=null])},...n]})}(S,a))}return function oE(n){const r=av();if(!r)throw new qe(401,!1);return r}()}}function av(){return ed?.get(W0)??null}let W0=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function K0(n,r){let s;return s="noop"===n?new JC:("zone.js"===n?void 0:n)||new lu(r),s}(a?.ngZone,function q0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),p=[{provide:lu,useValue:l}];return l.run(()=>{const _=ll.create({providers:p,parent:this.injector,name:s.moduleType.name}),S=s.create(_),M=S.injector.get(Dd,null);if(!M)throw new qe(402,!1);return l.runOutsideAngular(()=>{const j=l.onError.subscribe({next:Q=>{M.handleError(Q)}});S.onDestroy(()=>{cy(this._modules,S),j.unsubscribe()})}),function Z0(n,r,s){try{const a=s();return qp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(M,l,()=>{const j=S.injector.get(ay);return j.runInitializers(),j.donePromise.then(()=>(function I_(n){yt(n,"Expected localeId to be defined"),"string"==typeof n&&(wf=n.toLowerCase().replace(/_/g,"-"))}(S.injector.get(uy,Xc)||Xc),this._moduleDoBootstrap(S),S))})})}bootstrapModule(s,a=[]){const l=Y0({},a);return function tE(n,r,s){const a=new V_(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(s){const a=s.injector.get(ly);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new qe(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qe(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(ov,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ft(ll))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Y0(n,r){return Array.isArray(r)?r.reduce(Y0,n):{...n,...r}}let ly=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new G.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),_=new G.y(S=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{lu.assertNotInAngularZone(),nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{lu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{M.unsubscribe(),j.unsubscribe()}});this.isStable=(0,q.T)(p,_.pipe((0,ge.B)()))}bootstrap(s,a){const l=s instanceof Ec;if(!this._injector.get(ay).done){!l&&ri(s);throw new qe(405,Jl)}let _;_=l?s:this._injector.get(ul).resolveComponentFactory(s),this.componentTypes.push(_.componentType);const S=function nE(n){return n.isBoundToModule}(_)?void 0:this._injector.get(bf),j=_.create(ll.NULL,[],a||_.selector,S),Q=j.location.nativeElement,pe=j.injector.get(U0,null);return pe?.registerApplication(Q),j.onDestroy(()=>{this.detachView(j.hostView),cy(this.components,j),pe?.unregisterApplication(Q)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new qe(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;cy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(j0,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>cy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new qe(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Ft(lu),Ft(ol),Ft(Dd))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function uE(){return!1}let lE=(()=>{class n{}return n.__NG_ELEMENT_ID__=cE,n})();function cE(n){return function dE(n,r,s){if(ts(n)&&!s){const a=Zr(n.index,r);return new zd(a,a)}return 47&n.type?new zd(r[Xn],r):null}(ct(),E(),16==(16&n))}class tw{constructor(){}supports(r){return Lc(r)}create(r){return new yE(r)}}const mE=(n,r)=>r;class yE{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||mE}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,p=null;for(;s||a;){const _=!a||s&&s.currentIndex<rw(a,l,p)?s:a,S=rw(_,l,p),M=_.currentIndex;if(_===a)l--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)l++;else{p||(p=[]);const j=S-l,Q=M-l;if(j!=Q){for(let Re=0;Re<j;Re++){const Je=Re<p.length?p[Re]:p[Re]=0,Ot=Je+Re;Q<=Ot&&Ot<j&&(p[Re]=Je+1)}p[_.previousIndex]=Q-j}}S!==M&&r(_,S,M)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Lc(r))throw new qe(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,p,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)p=r[S],_=this._trackByFn(S,p),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,p,_,S)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,_,S),a=!0),s=s._next}else l=0,function Lp(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,S=>{_=this._trackByFn(l,S),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,S,_,l)),Object.is(s.item,S)||this._addIdentityChange(s,S)):(s=this._mismatch(s,S,_,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,p,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,p,l)):r=this._addAfter(new _E(s,a),p,l),r}_verifyReinsertion(r,s,a,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,p=r._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new nw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class _E{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vE{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class nw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new vE,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rw(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class iw{constructor(){}supports(r){return r instanceof Map||Up(r)}create(){return new wE}}class wE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Up(r)))throw new qe(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const p=l._prev,_=l._next;return p&&(p._next=_),_&&(_._prev=p),l._next=null,l._prev=null,l}const a=new CE(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class CE{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sw(){return new hv([new tw])}let hv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||sw()),deps:[[n,new O,new Is]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new qe(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:sw}),n})();function ow(){return new fv([new iw])}let fv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||ow()),deps:[[n,new O,new Is]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new qe(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:ow}),n})();const IE=z0(null,"core",[]);let DE=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ft(ly))},n.\u0275mod=gr({type:n}),n.\u0275inj=Cn({}),n})();function TE(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(zt,He,N)=>{N.d(He,{Fj:()=>ve,qu:()=>ho,u:()=>Ys,sg:()=>Vi,u5:()=>re,JJ:()=>Jn,JL:()=>Xt,On:()=>Kr,UX:()=>me,Q7:()=>Ni,kI:()=>At,_Y:()=>fs});var h=N(4650),z=N(6895),G=N(8996),q=N(9751),ge=N(4742),Ie=N(8421),be=N(7669),ae=N(5403),Ee=N(3268),X=N(1810),le=N(4004);let ze=(()=>{class D{constructor(I,W){this._renderer=I,this._elementRef=W,this.onChange=Ae=>{},this.onTouched=()=>{}}setProperty(I,W){this._renderer.setProperty(this._elementRef.nativeElement,I,W)}registerOnTouched(I){this.onTouched=I}registerOnChange(I){this.onChange=I}setDisabledState(I){this.setProperty("disabled",I)}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(h.Qsj),h.Y36(h.SBq))},D.\u0275dir=h.lG2({type:D}),D})(),Oe=(()=>{class D extends ze{}return D.\u0275fac=function(){let E;return function(W){return(E||(E=h.n5z(D)))(W||D)}}(),D.\u0275dir=h.lG2({type:D,features:[h.qOj]}),D})();const it=new h.OlP("NgValueAccessor"),ut={provide:it,useExisting:(0,h.Gpc)(()=>ve),multi:!0},dt=new h.OlP("CompositionEventMode");let ve=(()=>{class D extends ze{constructor(I,W,Ae){super(I,W),this._compositionMode=Ae,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function et(){const D=(0,z.q)()?(0,z.q)().getUserAgent():"";return/android (\d+)/.test(D.toLowerCase())}())}writeValue(I){this.setProperty("value",I??"")}_handleInput(I){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(I)}_compositionStart(){this._composing=!0}_compositionEnd(I){this._composing=!1,this._compositionMode&&this.onChange(I)}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(dt,8))},D.\u0275dir=h.lG2({type:D,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(I,W){1&I&&h.NdJ("input",function(ct){return W._handleInput(ct.target.value)})("blur",function(){return W.onTouched()})("compositionstart",function(){return W._compositionStart()})("compositionend",function(ct){return W._compositionEnd(ct.target.value)})},features:[h._Bn([ut]),h.qOj]}),D})();const Qe=!1;function We(D){return null==D||("string"==typeof D||Array.isArray(D))&&0===D.length}function pt(D){return null!=D&&"number"==typeof D.length}const Xe=new h.OlP("NgValidators"),he=new h.OlP("NgAsyncValidators"),Ue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class At{static min(E){return function Tt(D){return E=>{if(We(E.value)||We(D))return null;const I=parseFloat(E.value);return!isNaN(I)&&I<D?{min:{min:D,actual:E.value}}:null}}(E)}static max(E){return function Ct(D){return E=>{if(We(E.value)||We(D))return null;const I=parseFloat(E.value);return!isNaN(I)&&I>D?{max:{max:D,actual:E.value}}:null}}(E)}static required(E){return Pt(E)}static requiredTrue(E){return function Ve(D){return!0===D.value?null:{required:!0}}(E)}static email(E){return function Ze(D){return We(D.value)||Ue.test(D.value)?null:{email:!0}}(E)}static minLength(E){return function Be(D){return E=>We(E.value)||!pt(E.value)?null:E.value.length<D?{minlength:{requiredLength:D,actualLength:E.value.length}}:null}(E)}static maxLength(E){return function Ke(D){return E=>pt(E.value)&&E.value.length>D?{maxlength:{requiredLength:D,actualLength:E.value.length}}:null}(E)}static pattern(E){return function ht(D){if(!D)return tt;let E,I;return"string"==typeof D?(I="","^"!==D.charAt(0)&&(I+="^"),I+=D,"$"!==D.charAt(D.length-1)&&(I+="$"),E=new RegExp(I)):(I=D.toString(),E=D),W=>{if(We(W.value))return null;const Ae=W.value;return E.test(Ae)?null:{pattern:{requiredPattern:I,actualValue:Ae}}}}(E)}static nullValidator(E){return null}static compose(E){return Zt(E)}static composeAsync(E){return wn(E)}}function Pt(D){return We(D.value)?{required:!0}:null}function tt(D){return null}function yt(D){return null!=D}function mt(D){const E=(0,h.QGY)(D)?(0,G.D)(D):D;if(Qe&&!(0,h.CqO)(E)){let I="Expected async validator to return Promise or Observable.";throw"object"==typeof D&&(I+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,I)}return E}function Gt(D){let E={};return D.forEach(I=>{E=null!=I?{...E,...I}:E}),0===Object.keys(E).length?null:E}function Wt(D,E){return E.map(I=>I(D))}function kt(D){return D.map(E=>function mn(D){return!D.validate}(E)?E:I=>E.validate(I))}function Zt(D){if(!D)return null;const E=D.filter(yt);return 0==E.length?null:function(I){return Gt(Wt(I,E))}}function Cn(D){return null!=D?Zt(kt(D)):null}function wn(D){if(!D)return null;const E=D.filter(yt);return 0==E.length?null:function(I){return function se(...D){const E=(0,be.jO)(D),{args:I,keys:W}=(0,ge.D)(D),Ae=new q.y(ct=>{const{length:dn}=I;if(!dn)return void ct.complete();const Kn=new Array(dn);let $n=dn,or=dn;for(let ar=0;ar<dn;ar++){let Hr=!1;(0,Ie.Xf)(I[ar]).subscribe((0,ae.x)(ct,Fr=>{Hr||(Hr=!0,or--),Kn[ar]=Fr},()=>$n--,void 0,()=>{(!$n||!Hr)&&(or||ct.next(W?(0,X.n)(W,Kn):Kn),ct.complete())}))}});return E?Ae.pipe((0,Ee.Z)(E)):Ae}(Wt(I,E).map(mt)).pipe((0,le.U)(Gt))}}function Ln(D){return null!=D?wn(kt(D)):null}function Nn(D,E){return null===D?[E]:Array.isArray(D)?[...D,E]:[D,E]}function zn(D){return D._rawValidators}function xe(D){return D._rawAsyncValidators}function un(D){return D?Array.isArray(D)?D:[D]:[]}function ce(D,E){return Array.isArray(D)?D.includes(E):D===E}function ft(D,E){const I=un(E);return un(D).forEach(Ae=>{ce(I,Ae)||I.push(Ae)}),I}function Ut(D,E){return un(E).filter(I=>!ce(D,I))}class on{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(E){this._rawValidators=E||[],this._composedValidatorFn=Cn(this._rawValidators)}_setAsyncValidators(E){this._rawAsyncValidators=E||[],this._composedAsyncValidatorFn=Ln(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(E){this._onDestroyCallbacks.push(E)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(E=>E()),this._onDestroyCallbacks=[]}reset(E){this.control&&this.control.reset(E)}hasError(E,I){return!!this.control&&this.control.hasError(E,I)}getError(E,I){return this.control?this.control.getError(E,I):null}}class St extends on{get formDirective(){return null}get path(){return null}}class Fn extends on{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tr{constructor(E){this._cd=E}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jn=(()=>{class D extends Tr{constructor(I){super(I)}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(Fn,2))},D.\u0275dir=h.lG2({type:D,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(I,W){2&I&&h.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)},features:[h.qOj]}),D})(),Xt=(()=>{class D extends Tr{constructor(I){super(I)}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(St,10))},D.\u0275dir=h.lG2({type:D,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(I,W){2&I&&h.ekj("ng-untouched",W.isUntouched)("ng-touched",W.isTouched)("ng-pristine",W.isPristine)("ng-dirty",W.isDirty)("ng-valid",W.isValid)("ng-invalid",W.isInvalid)("ng-pending",W.isPending)("ng-submitted",W.isSubmitted)},features:[h.qOj]}),D})();function Ft(D,E){return D?`with name: '${E}'`:`at index: ${E}`}const B=!1,de="VALID",Te="INVALID",ie="PENDING",ue="DISABLED";function we(D){return(_e(D)?D.validators:D)||null}function Pe(D,E){return(_e(E)?E.asyncValidators:D)||null}function _e(D){return null!=D&&!Array.isArray(D)&&"object"==typeof D}function Ce(D,E,I){const W=D.controls;if(!(E?Object.keys(W):W).length)throw new h.vHH(1e3,B?function _t(D){return`\n    There are no form controls registered with this ${D?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(E):"");if(!W[I])throw new h.vHH(1001,B?function oe(D,E){return`Cannot find form control ${Ft(D,E)}`}(E,I):"")}function ne(D,E,I){D._forEachChild((W,Ae)=>{if(void 0===I[Ae])throw new h.vHH(1002,B?function x(D,E){return`Must supply a value for form control ${Ft(D,E)}`}(E,Ae):"")})}class Se{constructor(E,I){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(E),this._assignAsyncValidators(I)}get validator(){return this._composedValidatorFn}set validator(E){this._rawValidators=this._composedValidatorFn=E}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(E){this._rawAsyncValidators=this._composedAsyncValidatorFn=E}get parent(){return this._parent}get valid(){return this.status===de}get invalid(){return this.status===Te}get pending(){return this.status==ie}get disabled(){return this.status===ue}get enabled(){return this.status!==ue}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(E){this._assignValidators(E)}setAsyncValidators(E){this._assignAsyncValidators(E)}addValidators(E){this.setValidators(ft(E,this._rawValidators))}addAsyncValidators(E){this.setAsyncValidators(ft(E,this._rawAsyncValidators))}removeValidators(E){this.setValidators(Ut(E,this._rawValidators))}removeAsyncValidators(E){this.setAsyncValidators(Ut(E,this._rawAsyncValidators))}hasValidator(E){return ce(this._rawValidators,E)}hasAsyncValidator(E){return ce(this._rawAsyncValidators,E)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(E={}){this.touched=!0,this._parent&&!E.onlySelf&&this._parent.markAsTouched(E)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(E=>E.markAllAsTouched())}markAsUntouched(E={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(I=>{I.markAsUntouched({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}markAsDirty(E={}){this.pristine=!1,this._parent&&!E.onlySelf&&this._parent.markAsDirty(E)}markAsPristine(E={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(I=>{I.markAsPristine({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}markAsPending(E={}){this.status=ie,!1!==E.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!E.onlySelf&&this._parent.markAsPending(E)}disable(E={}){const I=this._parentMarkedDirty(E.onlySelf);this.status=ue,this.errors=null,this._forEachChild(W=>{W.disable({...E,onlySelf:!0})}),this._updateValue(),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...E,skipPristineCheck:I}),this._onDisabledChange.forEach(W=>W(!0))}enable(E={}){const I=this._parentMarkedDirty(E.onlySelf);this.status=de,this._forEachChild(W=>{W.enable({...E,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent}),this._updateAncestors({...E,skipPristineCheck:I}),this._onDisabledChange.forEach(W=>W(!1))}_updateAncestors(E){this._parent&&!E.onlySelf&&(this._parent.updateValueAndValidity(E),E.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(E){this._parent=E}getRawValue(){return this.value}updateValueAndValidity(E={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===de||this.status===ie)&&this._runAsyncValidator(E.emitEvent)),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!E.onlySelf&&this._parent.updateValueAndValidity(E)}_updateTreeValidity(E={emitEvent:!0}){this._forEachChild(I=>I._updateTreeValidity(E)),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ue:de}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(E){if(this.asyncValidator){this.status=ie,this._hasOwnPendingAsyncValidator=!0;const I=mt(this.asyncValidator(this));this._asyncValidationSubscription=I.subscribe(W=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(W,{emitEvent:E})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(E,I={}){this.errors=E,this._updateControlsErrors(!1!==I.emitEvent)}get(E){let I=E;return null==I||(Array.isArray(I)||(I=I.split(".")),0===I.length)?null:I.reduce((W,Ae)=>W&&W._find(Ae),this)}getError(E,I){const W=I?this.get(I):this;return W&&W.errors?W.errors[E]:null}hasError(E,I){return!!this.getError(E,I)}get root(){let E=this;for(;E._parent;)E=E._parent;return E}_updateControlsErrors(E){this.status=this._calculateStatus(),E&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(E)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?ue:this.errors?Te:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ie)?ie:this._anyControlsHaveStatus(Te)?Te:de}_anyControlsHaveStatus(E){return this._anyControls(I=>I.status===E)}_anyControlsDirty(){return this._anyControls(E=>E.dirty)}_anyControlsTouched(){return this._anyControls(E=>E.touched)}_updatePristine(E={}){this.pristine=!this._anyControlsDirty(),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}_updateTouched(E={}){this.touched=this._anyControlsTouched(),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}_registerOnCollectionChange(E){this._onCollectionChange=E}_setUpdateStrategy(E){_e(E)&&null!=E.updateOn&&(this._updateOn=E.updateOn)}_parentMarkedDirty(E){return!E&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(E){return null}_assignValidators(E){this._rawValidators=Array.isArray(E)?E.slice():E,this._composedValidatorFn=function $e(D){return Array.isArray(D)?Cn(D):D||null}(this._rawValidators)}_assignAsyncValidators(E){this._rawAsyncValidators=Array.isArray(E)?E.slice():E,this._composedAsyncValidatorFn=function xt(D){return Array.isArray(D)?Ln(D):D||null}(this._rawAsyncValidators)}}class at extends Se{constructor(E,I,W){super(we(I),Pe(W,I)),this.controls=E,this._initObservables(),this._setUpdateStrategy(I),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(E,I){return this.controls[E]?this.controls[E]:(this.controls[E]=I,I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange),I)}addControl(E,I,W={}){this.registerControl(E,I),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}removeControl(E,I={}){this.controls[E]&&this.controls[E]._registerOnCollectionChange(()=>{}),delete this.controls[E],this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}setControl(E,I,W={}){this.controls[E]&&this.controls[E]._registerOnCollectionChange(()=>{}),delete this.controls[E],I&&this.registerControl(E,I),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}contains(E){return this.controls.hasOwnProperty(E)&&this.controls[E].enabled}setValue(E,I={}){ne(this,!0,E),Object.keys(E).forEach(W=>{Ce(this,!0,W),this.controls[W].setValue(E[W],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I)}patchValue(E,I={}){null!=E&&(Object.keys(E).forEach(W=>{const Ae=this.controls[W];Ae&&Ae.patchValue(E[W],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I))}reset(E={},I={}){this._forEachChild((W,Ae)=>{W.reset(E[Ae],{onlySelf:!0,emitEvent:I.emitEvent})}),this._updatePristine(I),this._updateTouched(I),this.updateValueAndValidity(I)}getRawValue(){return this._reduceChildren({},(E,I,W)=>(E[W]=I.getRawValue(),E))}_syncPendingControls(){let E=this._reduceChildren(!1,(I,W)=>!!W._syncPendingControls()||I);return E&&this.updateValueAndValidity({onlySelf:!0}),E}_forEachChild(E){Object.keys(this.controls).forEach(I=>{const W=this.controls[I];W&&E(W,I)})}_setUpControls(){this._forEachChild(E=>{E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(E){for(const[I,W]of Object.entries(this.controls))if(this.contains(I)&&E(W))return!0;return!1}_reduceValue(){return this._reduceChildren({},(I,W,Ae)=>((W.enabled||this.disabled)&&(I[Ae]=W.value),I))}_reduceChildren(E,I){let W=E;return this._forEachChild((Ae,ct)=>{W=I(W,Ae,ct)}),W}_allControlsDisabled(){for(const E of Object.keys(this.controls))if(this.controls[E].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(E){return this.controls.hasOwnProperty(E)?this.controls[E]:null}}class Un extends at{}const Cr=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Br}),Br="always";function ai(D,E){return[...E.path,D]}function gr(D,E,I=Br){Si(D,E),E.valueAccessor.writeValue(D.value),(D.disabled||"always"===I)&&E.valueAccessor.setDisabledState?.(D.disabled),function wr(D,E){E.valueAccessor.registerOnChange(I=>{D._pendingValue=I,D._pendingChange=!0,D._pendingDirty=!0,"change"===D.updateOn&&ri(D,E)})}(D,E),function Et(D,E){const I=(W,Ae)=>{E.valueAccessor.writeValue(W),Ae&&E.viewToModelUpdate(W)};D.registerOnChange(I),E._registerOnDestroy(()=>{D._unregisterOnChange(I)})}(D,E),function Er(D,E){E.valueAccessor.registerOnTouched(()=>{D._pendingTouched=!0,"blur"===D.updateOn&&D._pendingChange&&ri(D,E),"submit"!==D.updateOn&&D.markAsTouched()})}(D,E),function Us(D,E){if(E.valueAccessor.setDisabledState){const I=W=>{E.valueAccessor.setDisabledState(W)};D.registerOnDisabledChange(I),E._registerOnDestroy(()=>{D._unregisterOnDisabledChange(I)})}}(D,E)}function qr(D,E,I=!0){const W=()=>{};E.valueAccessor&&(E.valueAccessor.registerOnChange(W),E.valueAccessor.registerOnTouched(W)),Vn(D,E),D&&(E._invokeOnDestroyCallbacks(),D._registerOnCollectionChange(()=>{}))}function Yn(D,E){D.forEach(I=>{I.registerOnValidatorChange&&I.registerOnValidatorChange(E)})}function Si(D,E){const I=zn(D);null!==E.validator?D.setValidators(Nn(I,E.validator)):"function"==typeof I&&D.setValidators([I]);const W=xe(D);null!==E.asyncValidator?D.setAsyncValidators(Nn(W,E.asyncValidator)):"function"==typeof W&&D.setAsyncValidators([W]);const Ae=()=>D.updateValueAndValidity();Yn(E._rawValidators,Ae),Yn(E._rawAsyncValidators,Ae)}function Vn(D,E){let I=!1;if(null!==D){if(null!==E.validator){const Ae=zn(D);if(Array.isArray(Ae)&&Ae.length>0){const ct=Ae.filter(dn=>dn!==E.validator);ct.length!==Ae.length&&(I=!0,D.setValidators(ct))}}if(null!==E.asyncValidator){const Ae=xe(D);if(Array.isArray(Ae)&&Ae.length>0){const ct=Ae.filter(dn=>dn!==E.asyncValidator);ct.length!==Ae.length&&(I=!0,D.setAsyncValidators(ct))}}}const W=()=>{};return Yn(E._rawValidators,W),Yn(E._rawAsyncValidators,W),I}function ri(D,E){D._pendingDirty&&D.markAsDirty(),D.setValue(D._pendingValue,{emitModelToViewChange:!1}),E.viewToModelUpdate(D._pendingValue),D._pendingChange=!1}function br(D,E){if(!D.hasOwnProperty("model"))return!1;const I=D.model;return!!I.isFirstChange()||!Object.is(E,I.currentValue)}function je(D,E){if(!E)return null;let I,W,Ae;return Array.isArray(E),E.forEach(ct=>{ct.constructor===ve?I=ct:function Fe(D){return Object.getPrototypeOf(D.constructor)===Oe}(ct)?W=ct:Ae=ct}),Ae||W||I||null}function kn(D,E){const I=D.indexOf(E);I>-1&&D.splice(I,1)}function xr(D){return"object"==typeof D&&null!==D&&2===Object.keys(D).length&&"value"in D&&"disabled"in D}const mi=class extends Se{constructor(E=null,I,W){super(we(I),Pe(W,I)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(E),this._setUpdateStrategy(I),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_e(I)&&(I.nonNullable||I.initialValueIsDefault)&&(this.defaultValue=xr(E)?E.value:E)}setValue(E,I={}){this.value=this._pendingValue=E,this._onChange.length&&!1!==I.emitModelToViewChange&&this._onChange.forEach(W=>W(this.value,!1!==I.emitViewToModelChange)),this.updateValueAndValidity(I)}patchValue(E,I={}){this.setValue(E,I)}reset(E=this.defaultValue,I={}){this._applyFormState(E),this.markAsPristine(I),this.markAsUntouched(I),this.setValue(this.value,I),this._pendingChange=!1}_updateValue(){}_anyControls(E){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(E){this._onChange.push(E)}_unregisterOnChange(E){kn(this._onChange,E)}registerOnDisabledChange(E){this._onDisabledChange.push(E)}_unregisterOnDisabledChange(E){kn(this._onDisabledChange,E)}_forEachChild(E){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(E){xr(E)?(this.value=this._pendingValue=E.value,E.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=E}},Vs={provide:Fn,useExisting:(0,h.Gpc)(()=>Kr)},ki=(()=>Promise.resolve())();let Kr=(()=>{class D extends Fn{constructor(I,W,Ae,ct,dn,Kn){super(),this._changeDetectorRef=dn,this.callSetDisabledState=Kn,this.control=new mi,this._registered=!1,this.update=new h.vpe,this._parent=I,this._setValidators(W),this._setAsyncValidators(Ae),this.valueAccessor=je(0,ct)}ngOnChanges(I){if(this._checkForErrors(),!this._registered||"name"in I){if(this._registered&&(this._checkName(),this.formDirective)){const W=I.name.previousValue;this.formDirective.removeControl({name:W,path:this._getPath(W)})}this._setUpControl()}"isDisabled"in I&&this._updateDisabled(I),br(I,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(I){ki.then(()=>{this.control.setValue(I,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(I){const W=I.isDisabled.currentValue,Ae=0!==W&&(0,h.D6c)(W);ki.then(()=>{Ae&&!this.control.disabled?this.control.disable():!Ae&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(I){return this._parent?ai(I,this._parent):[I]}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(St,9),h.Y36(Xe,10),h.Y36(he,10),h.Y36(it,10),h.Y36(h.sBO,8),h.Y36(Cr,8))},D.\u0275dir=h.lG2({type:D,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Vs]),h.qOj,h.TTD]}),D})(),fs=(()=>{class D{}return D.\u0275fac=function(I){return new(I||D)},D.\u0275dir=h.lG2({type:D,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),D})(),es=(()=>{class D{}return D.\u0275fac=function(I){return new(I||D)},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({}),D})();const Bs=new h.OlP("NgModelWithFormControlWarning"),xi={provide:St,useExisting:(0,h.Gpc)(()=>Vi)};let Vi=(()=>{class D extends St{constructor(I,W,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(I),this._setAsyncValidators(W)}ngOnChanges(I){this._checkFormPresent(),I.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(I){const W=this.form.get(I.path);return gr(W,I,this.callSetDisabledState),W.updateValueAndValidity({emitEvent:!1}),this.directives.push(I),W}getControl(I){return this.form.get(I.path)}removeControl(I){qr(I.control||null,I,!1),function lt(D,E){const I=D.indexOf(E);I>-1&&D.splice(I,1)}(this.directives,I)}addFormGroup(I){this._setUpFormContainer(I)}removeFormGroup(I){this._cleanUpFormContainer(I)}getFormGroup(I){return this.form.get(I.path)}addFormArray(I){this._setUpFormContainer(I)}removeFormArray(I){this._cleanUpFormContainer(I)}getFormArray(I){return this.form.get(I.path)}updateModel(I,W){this.form.get(I.path).setValue(W)}onSubmit(I){return this.submitted=!0,function Me(D,E){D._syncPendingControls(),E.forEach(I=>{const W=I.control;"submit"===W.updateOn&&W._pendingChange&&(I.viewToModelUpdate(W._pendingValue),W._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(I),"dialog"===I?.target?.method}onReset(){this.resetForm()}resetForm(I){this.form.reset(I),this.submitted=!1}_updateDomValue(){this.directives.forEach(I=>{const W=I.control,Ae=this.form.get(I.path);W!==Ae&&(qr(W||null,I),(D=>D instanceof mi)(Ae)&&(gr(Ae,I,this.callSetDisabledState),I.control=Ae))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(I){const W=this.form.get(I.path);(function tn(D,E){Si(D,E)})(W,I),W.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(I){if(this.form){const W=this.form.get(I.path);W&&function Dt(D,E){return Vn(D,E)}(W,I)&&W.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Si(this.form,this),this._oldForm&&Vn(this._oldForm,this)}_checkFormPresent(){}}return D.\u0275fac=function(I){return new(I||D)(h.Y36(Xe,10),h.Y36(he,10),h.Y36(Cr,8))},D.\u0275dir=h.lG2({type:D,selectors:[["","formGroup",""]],hostBindings:function(I,W){1&I&&h.NdJ("submit",function(ct){return W.onSubmit(ct)})("reset",function(){return W.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([xi]),h.qOj,h.TTD]}),D})();const Bi={provide:Fn,useExisting:(0,h.Gpc)(()=>Ys)};let Ys=(()=>{class D extends Fn{set isDisabled(I){}constructor(I,W,Ae,ct,dn){super(),this._ngModelWarningConfig=dn,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=I,this._setValidators(W),this._setAsyncValidators(Ae),this.valueAccessor=je(0,ct)}ngOnChanges(I){this._added||this._setUpControl(),br(I,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}get path(){return ai(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return D._ngModelWarningSentOnce=!1,D.\u0275fac=function(I){return new(I||D)(h.Y36(St,13),h.Y36(Xe,10),h.Y36(he,10),h.Y36(it,10),h.Y36(Bs,8))},D.\u0275dir=h.lG2({type:D,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Bi]),h.qOj,h.TTD]}),D})(),$i=(()=>{class D{constructor(){this._validator=tt}ngOnChanges(I){if(this.inputName in I){const W=this.normalizeInput(I[this.inputName].currentValue);this._enabled=this.enabled(W),this._validator=this._enabled?this.createValidator(W):tt,this._onChange&&this._onChange()}}validate(I){return this._validator(I)}registerOnValidatorChange(I){this._onChange=I}enabled(I){return null!=I}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275dir=h.lG2({type:D,features:[h.TTD]}),D})();const No={provide:Xe,useExisting:(0,h.Gpc)(()=>Ni),multi:!0};let Ni=(()=>{class D extends $i{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=I=>Pt}enabled(I){return I}}return D.\u0275fac=function(){let E;return function(W){return(E||(E=h.n5z(D)))(W||D)}}(),D.\u0275dir=h.lG2({type:D,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(I,W){2&I&&h.uIk("required",W._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([No]),h.qOj]}),D})(),Ki=(()=>{class D{}return D.\u0275fac=function(I){return new(I||D)},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({imports:[es]}),D})();class xs extends Se{constructor(E,I,W){super(we(I),Pe(W,I)),this.controls=E,this._initObservables(),this._setUpdateStrategy(I),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(E){return this.controls[this._adjustIndex(E)]}push(E,I={}){this.controls.push(E),this._registerControl(E),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}insert(E,I,W={}){this.controls.splice(E,0,I),this._registerControl(I),this.updateValueAndValidity({emitEvent:W.emitEvent})}removeAt(E,I={}){let W=this._adjustIndex(E);W<0&&(W=0),this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),this.controls.splice(W,1),this.updateValueAndValidity({emitEvent:I.emitEvent})}setControl(E,I,W={}){let Ae=this._adjustIndex(E);Ae<0&&(Ae=0),this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),this.controls.splice(Ae,1),I&&(this.controls.splice(Ae,0,I),this._registerControl(I)),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(E,I={}){ne(this,!1,E),E.forEach((W,Ae)=>{Ce(this,!1,Ae),this.at(Ae).setValue(W,{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I)}patchValue(E,I={}){null!=E&&(E.forEach((W,Ae)=>{this.at(Ae)&&this.at(Ae).patchValue(W,{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I))}reset(E=[],I={}){this._forEachChild((W,Ae)=>{W.reset(E[Ae],{onlySelf:!0,emitEvent:I.emitEvent})}),this._updatePristine(I),this._updateTouched(I),this.updateValueAndValidity(I)}getRawValue(){return this.controls.map(E=>E.getRawValue())}clear(E={}){this.controls.length<1||(this._forEachChild(I=>I._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:E.emitEvent}))}_adjustIndex(E){return E<0?E+this.length:E}_syncPendingControls(){let E=this.controls.reduce((I,W)=>!!W._syncPendingControls()||I,!1);return E&&this.updateValueAndValidity({onlySelf:!0}),E}_forEachChild(E){this.controls.forEach((I,W)=>{E(I,W)})}_updateValue(){this.value=this.controls.filter(E=>E.enabled||this.disabled).map(E=>E.value)}_anyControls(E){return this.controls.some(I=>I.enabled&&E(I))}_setUpControls(){this._forEachChild(E=>this._registerControl(E))}_allControlsDisabled(){for(const E of this.controls)if(E.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(E){E.setParent(this),E._registerOnCollectionChange(this._onCollectionChange)}_find(E){return this.at(E)??null}}function os(D){return!!D&&(void 0!==D.asyncValidators||void 0!==D.validators||void 0!==D.updateOn)}let ho=(()=>{class D{constructor(){this.useNonNullable=!1}get nonNullable(){const I=new D;return I.useNonNullable=!0,I}group(I,W=null){const Ae=this._reduceControls(I);let ct={};return os(W)?ct=W:null!==W&&(ct.validators=W.validator,ct.asyncValidators=W.asyncValidator),new at(Ae,ct)}record(I,W=null){const Ae=this._reduceControls(I);return new Un(Ae,W)}control(I,W,Ae){let ct={};return this.useNonNullable?(os(W)?ct=W:(ct.validators=W,ct.asyncValidators=Ae),new mi(I,{...ct,nonNullable:!0})):new mi(I,W,Ae)}array(I,W,Ae){const ct=I.map(dn=>this._createControl(dn));return new xs(ct,W,Ae)}_reduceControls(I){const W={};return Object.keys(I).forEach(Ae=>{W[Ae]=this._createControl(I[Ae])}),W}_createControl(I){return I instanceof mi||I instanceof Se?I:Array.isArray(I)?this.control(I[0],I.length>1?I[1]:null,I.length>2?I[2]:null):this.control(I)}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),re=(()=>{class D{static withConfig(I){return{ngModule:D,providers:[{provide:Cr,useValue:I.callSetDisabledState??Br}]}}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({imports:[Ki]}),D})(),me=(()=>{class D{static withConfig(I){return{ngModule:D,providers:[{provide:Bs,useValue:I.warnOnNgModelWithFormControl??"always"},{provide:Cr,useValue:I.callSetDisabledState??Br}]}}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({imports:[Ki]}),D})()},1481:(zt,He,N)=>{N.d(He,{Dx:()=>Xt,H7:()=>we,b2:()=>Fn,q6:()=>ft});var h=N(6895),z=N(4650);class G extends h.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class q extends G{static makeCurrent(){(0,h.HT)(new q)}onAndCancel(Ce,ne,Se){return Ce.addEventListener(ne,Se,!1),()=>{Ce.removeEventListener(ne,Se,!1)}}dispatchEvent(Ce,ne){Ce.dispatchEvent(ne)}remove(Ce){Ce.parentNode&&Ce.parentNode.removeChild(Ce)}createElement(Ce,ne){return(ne=ne||this.getDefaultDocument()).createElement(Ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ce){return Ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ce){return Ce instanceof DocumentFragment}getGlobalEventTarget(Ce,ne){return"window"===ne?window:"document"===ne?Ce:"body"===ne?Ce.body:null}getBaseHref(Ce){const ne=function Ie(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==ne?null:function ae(_e){be=be||document.createElement("a"),be.setAttribute("href",_e);const Ce=be.pathname;return"/"===Ce.charAt(0)?Ce:`/${Ce}`}(ne)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ce){return(0,h.Mx)(document.cookie,Ce)}}let be,ge=null;const Ee=new z.OlP("TRANSITION_ID"),se=[{provide:z.ip1,useFactory:function X(_e,Ce,ne){return()=>{ne.get(z.CZH).donePromise.then(()=>{const Se=(0,h.q)(),at=Ce.querySelectorAll(`style[ng-transition="${_e}"]`);for(let wt=0;wt<at.length;wt++)Se.remove(at[wt])})}},deps:[Ee,h.K0,z.zs3],multi:!0}];let ze=(()=>{class _e{build(){return new XMLHttpRequest}}return _e.\u0275fac=function(ne){return new(ne||_e)},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Oe=new z.OlP("EventManagerPlugins");let it=(()=>{class _e{constructor(ne,Se){this._zone=Se,this._eventNameToPlugin=new Map,ne.forEach(at=>{at.manager=this}),this._plugins=ne.slice().reverse()}addEventListener(ne,Se,at){return this._findPluginFor(Se).addEventListener(ne,Se,at)}addGlobalEventListener(ne,Se,at){return this._findPluginFor(Se).addGlobalEventListener(ne,Se,at)}getZone(){return this._zone}_findPluginFor(ne){const Se=this._eventNameToPlugin.get(ne);if(Se)return Se;const at=this._plugins;for(let wt=0;wt<at.length;wt++){const nn=at[wt];if(nn.supports(ne))return this._eventNameToPlugin.set(ne,nn),nn}throw new Error(`No event manager plugin found for event ${ne}`)}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(Oe),z.LFG(z.R0b))},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class vt{constructor(Ce){this._doc=Ce}addGlobalEventListener(Ce,ne,Se){const at=(0,h.q)().getGlobalEventTarget(this._doc,Ce);if(!at)throw new Error(`Unsupported event target ${at} for event ${ne}`);return this.addEventListener(at,ne,Se)}}let qe=(()=>{class _e{constructor(){this.usageCount=new Map}addStyles(ne){for(const Se of ne)1===this.changeUsageCount(Se,1)&&this.onStyleAdded(Se)}removeStyles(ne){for(const Se of ne)0===this.changeUsageCount(Se,-1)&&this.onStyleRemoved(Se)}onStyleRemoved(ne){}onStyleAdded(ne){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ne,Se){const at=this.usageCount;let wt=at.get(ne)??0;return wt+=Se,wt>0?at.set(ne,wt):at.delete(ne),wt}ngOnDestroy(){for(const ne of this.getAllStyles())this.onStyleRemoved(ne);this.usageCount.clear()}}return _e.\u0275fac=function(ne){return new(ne||_e)},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})(),ut=(()=>{class _e extends qe{constructor(ne){super(),this.doc=ne,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ne){for(const Se of this.hostNodes)this.addStyleToHost(Se,ne)}onStyleRemoved(ne){const Se=this.styleRef;Se.get(ne)?.forEach(wt=>wt.remove()),Se.delete(ne)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ne){this.hostNodes.add(ne);for(const Se of this.getAllStyles())this.addStyleToHost(ne,Se)}removeHost(ne){this.hostNodes.delete(ne)}addStyleToHost(ne,Se){const at=this.doc.createElement("style");at.textContent=Se,ne.appendChild(at);const wt=this.styleRef.get(Se);wt?wt.push(at):this.styleRef.set(Se,[at])}resetHostNodes(){const ne=this.hostNodes;ne.clear(),ne.add(this.doc.head)}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(h.K0))},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g,he=new z.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Tt(_e,Ce){return Ce.flat(100).map(ne=>ne.replace(dt,_e))}function Ct(_e){return Ce=>{if("__ngUnwrap__"===Ce)return _e;!1===_e(Ce)&&(Ce.preventDefault(),Ce.returnValue=!1)}}let Pt=(()=>{class _e{constructor(ne,Se,at,wt){this.eventManager=ne,this.sharedStylesHost=Se,this.appId=at,this.removeStylesOnCompDestory=wt,this.rendererByCompId=new Map,this.defaultRenderer=new Ve(ne)}createRenderer(ne,Se){if(!ne||!Se)return this.defaultRenderer;const at=this.getOrCreateRenderer(ne,Se);return at instanceof yt?at.applyToHost(ne):at instanceof tt&&at.applyStyles(),at}getOrCreateRenderer(ne,Se){const at=this.rendererByCompId;let wt=at.get(Se.id);if(!wt){const nn=this.eventManager,Un=this.sharedStylesHost,pr=this.removeStylesOnCompDestory;switch(Se.encapsulation){case z.ifc.Emulated:wt=new yt(nn,Un,Se,this.appId,pr);break;case z.ifc.ShadowDom:return new ht(nn,Un,ne,Se);default:wt=new tt(nn,Un,Se,pr)}wt.onDestroy=()=>at.delete(Se.id),at.set(Se.id,wt)}return wt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(it),z.LFG(ut),z.LFG(z.AFp),z.LFG(he))},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class Ve{constructor(Ce){this.eventManager=Ce,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ce,ne){return ne?document.createElementNS(et[ne]||ne,Ce):document.createElement(Ce)}createComment(Ce){return document.createComment(Ce)}createText(Ce){return document.createTextNode(Ce)}appendChild(Ce,ne){(Ke(Ce)?Ce.content:Ce).appendChild(ne)}insertBefore(Ce,ne,Se){Ce&&(Ke(Ce)?Ce.content:Ce).insertBefore(ne,Se)}removeChild(Ce,ne){Ce&&Ce.removeChild(ne)}selectRootElement(Ce,ne){let Se="string"==typeof Ce?document.querySelector(Ce):Ce;if(!Se)throw new Error(`The selector "${Ce}" did not match any elements`);return ne||(Se.textContent=""),Se}parentNode(Ce){return Ce.parentNode}nextSibling(Ce){return Ce.nextSibling}setAttribute(Ce,ne,Se,at){if(at){ne=at+":"+ne;const wt=et[at];wt?Ce.setAttributeNS(wt,ne,Se):Ce.setAttribute(ne,Se)}else Ce.setAttribute(ne,Se)}removeAttribute(Ce,ne,Se){if(Se){const at=et[Se];at?Ce.removeAttributeNS(at,ne):Ce.removeAttribute(`${Se}:${ne}`)}else Ce.removeAttribute(ne)}addClass(Ce,ne){Ce.classList.add(ne)}removeClass(Ce,ne){Ce.classList.remove(ne)}setStyle(Ce,ne,Se,at){at&(z.JOm.DashCase|z.JOm.Important)?Ce.style.setProperty(ne,Se,at&z.JOm.Important?"important":""):Ce.style[ne]=Se}removeStyle(Ce,ne,Se){Se&z.JOm.DashCase?Ce.style.removeProperty(ne):Ce.style[ne]=""}setProperty(Ce,ne,Se){Ce[ne]=Se}setValue(Ce,ne){Ce.nodeValue=ne}listen(Ce,ne,Se){return"string"==typeof Ce?this.eventManager.addGlobalEventListener(Ce,ne,Ct(Se)):this.eventManager.addEventListener(Ce,ne,Ct(Se))}}function Ke(_e){return"TEMPLATE"===_e.tagName&&void 0!==_e.content}class ht extends Ve{constructor(Ce,ne,Se,at){super(Ce),this.sharedStylesHost=ne,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wt=Tt(at.id,at.styles);for(const nn of wt){const Un=document.createElement("style");Un.textContent=nn,this.shadowRoot.appendChild(Un)}}nodeOrShadowRoot(Ce){return Ce===this.hostEl?this.shadowRoot:Ce}appendChild(Ce,ne){return super.appendChild(this.nodeOrShadowRoot(Ce),ne)}insertBefore(Ce,ne,Se){return super.insertBefore(this.nodeOrShadowRoot(Ce),ne,Se)}removeChild(Ce,ne){return super.removeChild(this.nodeOrShadowRoot(Ce),ne)}parentNode(Ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ce)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class tt extends Ve{constructor(Ce,ne,Se,at,wt=Se.id){super(Ce),this.sharedStylesHost=ne,this.removeStylesOnCompDestory=at,this.rendererUsageCount=0,this.styles=Tt(wt,Se.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class yt extends tt{constructor(Ce,ne,Se,at,wt){const nn=at+"-"+Se.id;super(Ce,ne,Se,wt,nn),this.contentAttr=function Ue(_e){return"_ngcontent-%COMP%".replace(dt,_e)}(nn),this.hostAttr=function At(_e){return"_nghost-%COMP%".replace(dt,_e)}(nn)}applyToHost(Ce){this.applyStyles(),this.setAttribute(Ce,this.hostAttr,"")}createElement(Ce,ne){const Se=super.createElement(Ce,ne);return super.setAttribute(Se,this.contentAttr,""),Se}}let mt=(()=>{class _e extends vt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,Se,at){return ne.addEventListener(Se,at,!1),()=>this.removeEventListener(ne,Se,at)}removeEventListener(ne,Se,at){return ne.removeEventListener(Se,at)}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(h.K0))},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Gt=["alt","control","meta","shift"],Wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mn={alt:_e=>_e.altKey,control:_e=>_e.ctrlKey,meta:_e=>_e.metaKey,shift:_e=>_e.shiftKey};let kt=(()=>{class _e extends vt{constructor(ne){super(ne)}supports(ne){return null!=_e.parseEventName(ne)}addEventListener(ne,Se,at){const wt=_e.parseEventName(Se),nn=_e.eventCallback(wt.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,h.q)().onAndCancel(ne,wt.domEventName,nn))}static parseEventName(ne){const Se=ne.toLowerCase().split("."),at=Se.shift();if(0===Se.length||"keydown"!==at&&"keyup"!==at)return null;const wt=_e._normalizeKey(Se.pop());let nn="",Un=Se.indexOf("code");if(Un>-1&&(Se.splice(Un,1),nn="code."),Gt.forEach(Cr=>{const Br=Se.indexOf(Cr);Br>-1&&(Se.splice(Br,1),nn+=Cr+".")}),nn+=wt,0!=Se.length||0===wt.length)return null;const pr={};return pr.domEventName=at,pr.fullKey=nn,pr}static matchEventFullKeyCode(ne,Se){let at=Wt[ne.key]||ne.key,wt="";return Se.indexOf("code.")>-1&&(at=ne.code,wt="code."),!(null==at||!at)&&(at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),Gt.forEach(nn=>{nn!==at&&(0,mn[nn])(ne)&&(wt+=nn+".")}),wt+=at,wt===Se)}static eventCallback(ne,Se,at){return wt=>{_e.matchEventFullKeyCode(wt,ne)&&at.runGuarded(()=>Se(wt))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(h.K0))},_e.\u0275prov=z.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const ft=(0,z.eFA)(z._c5,"browser",[{provide:z.Lbi,useValue:h.bD},{provide:z.g9A,useValue:function zn(){q.makeCurrent()},multi:!0},{provide:h.K0,useFactory:function un(){return(0,z.RDi)(document),document},deps:[]}]),Ut=new z.OlP(""),on=[{provide:z.rWj,useClass:class le{addToWindow(Ce){z.dqk.getAngularTestability=(Se,at=!0)=>{const wt=Ce.findTestabilityInTree(Se,at);if(null==wt)throw new Error("Could not find testability for element.");return wt},z.dqk.getAllAngularTestabilities=()=>Ce.getAllTestabilities(),z.dqk.getAllAngularRootElements=()=>Ce.getAllRootElements(),z.dqk.frameworkStabilizers||(z.dqk.frameworkStabilizers=[]),z.dqk.frameworkStabilizers.push(Se=>{const at=z.dqk.getAllAngularTestabilities();let wt=at.length,nn=!1;const Un=function(pr){nn=nn||pr,wt--,0==wt&&Se(nn)};at.forEach(function(pr){pr.whenStable(Un)})})}findTestabilityInTree(Ce,ne,Se){return null==ne?null:Ce.getTestability(ne)??(Se?(0,h.q)().isShadowRoot(ne)?this.findTestabilityInTree(Ce,ne.host,!0):this.findTestabilityInTree(Ce,ne.parentElement,!0):null)}},deps:[]},{provide:z.lri,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]},{provide:z.dDg,useClass:z.dDg,deps:[z.R0b,z.eoX,z.rWj]}],St=[{provide:z.zSh,useValue:"root"},{provide:z.qLn,useFactory:function xe(){return new z.qLn},deps:[]},{provide:Oe,useClass:mt,multi:!0,deps:[h.K0,z.R0b,z.Lbi]},{provide:Oe,useClass:kt,multi:!0,deps:[h.K0]},{provide:Pt,useClass:Pt,deps:[it,ut,z.AFp,he]},{provide:z.FYo,useExisting:Pt},{provide:qe,useExisting:ut},{provide:ut,useClass:ut,deps:[h.K0]},{provide:it,useClass:it,deps:[Oe,z.R0b]},{provide:h.JF,useClass:ze,deps:[]},[]];let Fn=(()=>{class _e{constructor(ne){}static withServerTransition(ne){return{ngModule:_e,providers:[{provide:z.AFp,useValue:ne.appId},{provide:Ee,useExisting:z.AFp},se]}}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(Ut,12))},_e.\u0275mod=z.oAB({type:_e}),_e.\u0275inj=z.cJS({providers:[...St,...on],imports:[h.ez,z.hGG]}),_e})(),Xt=(()=>{class _e{constructor(ne){this._doc=ne}getTitle(){return this._doc.title}setTitle(ne){this._doc.title=ne||""}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(h.K0))},_e.\u0275prov=z.Yz7({token:_e,factory:function(ne){let Se=null;return Se=ne?new ne:function Jn(){return new Xt((0,z.LFG)(h.K0))}(),Se},providedIn:"root"}),_e})();typeof window<"u"&&window;let we=(()=>{class _e{}return _e.\u0275fac=function(ne){return new(ne||_e)},_e.\u0275prov=z.Yz7({token:_e,factory:function(ne){let Se=null;return Se=ne?new(ne||_e):z.LFG(Pe),Se},providedIn:"root"}),_e})(),Pe=(()=>{class _e extends we{constructor(ne){super(),this._doc=ne}sanitize(ne,Se){if(null==Se)return null;switch(ne){case z.q3G.NONE:return Se;case z.q3G.HTML:return(0,z.qzn)(Se,"HTML")?(0,z.z3N)(Se):(0,z.EiD)(this._doc,String(Se)).toString();case z.q3G.STYLE:return(0,z.qzn)(Se,"Style")?(0,z.z3N)(Se):Se;case z.q3G.SCRIPT:if((0,z.qzn)(Se,"Script"))return(0,z.z3N)(Se);throw new Error("unsafe value used in a script context");case z.q3G.URL:return(0,z.qzn)(Se,"URL")?(0,z.z3N)(Se):(0,z.mCW)(String(Se));case z.q3G.RESOURCE_URL:if((0,z.qzn)(Se,"ResourceURL"))return(0,z.z3N)(Se);throw new Error(`unsafe value used in a resource URL context (see ${z.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ne} (see ${z.JZr})`)}}bypassSecurityTrustHtml(ne){return(0,z.JVY)(ne)}bypassSecurityTrustStyle(ne){return(0,z.L6k)(ne)}bypassSecurityTrustScript(ne){return(0,z.eBb)(ne)}bypassSecurityTrustUrl(ne){return(0,z.LAX)(ne)}bypassSecurityTrustResourceUrl(ne){return(0,z.pB0)(ne)}}return _e.\u0275fac=function(ne){return new(ne||_e)(z.LFG(h.K0))},_e.\u0275prov=z.Yz7({token:_e,factory:function(ne){let Se=null;return Se=ne?new ne:function $e(_e){return new Pe(_e.get(h.K0))}(z.LFG(z.zs3)),Se},providedIn:"root"}),_e})()},8209:(zt,He,N)=>{N.d(He,{gk:()=>$r,m2:()=>Xn,Q3:()=>ii,OD:()=>mi,F0:()=>gi,Bz:()=>Mo,lC:()=>_s});var h=N(4650),z=N(8996),G=N(9646),q=N(1135),ge=N(6805),Ie=N(9751),be=N(4742),ae=N(4671),Ee=N(3268),X=N(7669),se=N(1810),le=N(5403),ze=N(9672);function Oe(...v){const C=(0,X.yG)(v),g=(0,X.jO)(v),{args:A,keys:k}=(0,be.D)(v);if(0===A.length)return(0,z.D)([],C);const K=new Ie.y(function it(v,C,g=ae.y){return A=>{vt(C,()=>{const{length:k}=v,K=new Array(k);let ee=k,Le=k;for(let ot=0;ot<k;ot++)vt(C,()=>{const sn=(0,z.D)(v[ot],C);let Yt=!1;sn.subscribe((0,le.x)(A,Dn=>{K[ot]=Dn,Yt||(Yt=!0,Le--),Le||A.next(g(K.slice()))},()=>{--ee||A.complete()}))},A)},A)}}(A,C,k?ee=>(0,se.n)(k,ee):ae.y));return g?K.pipe((0,Ee.Z)(g)):K}function vt(v,C,g){v?(0,ze.f)(g,v,C):C()}var qe=N(7272),ut=N(8421);function et(v){return new Ie.y(C=>{(0,ut.Xf)(v()).subscribe(C)})}var dt=N(9635),ve=N(576);function Qe(v,C){const g=(0,ve.m)(v)?v:()=>v,A=k=>k.error(g());return new Ie.y(C?k=>C.schedule(A,0,k):A)}var We=N(515),pt=N(727),Xe=N(4482);function he(){return(0,Xe.e)((v,C)=>{let g=null;v._refCount++;const A=(0,le.x)(C,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(g=null);const k=v._connection,K=g;g=null,k&&(!K||k===K)&&k.unsubscribe(),C.unsubscribe()});v.subscribe(A),A.closed||(g=v.connect())})}class Ue extends Ie.y{constructor(C,g){super(),this.source=C,this.subjectFactory=g,this._subject=null,this._refCount=0,this._connection=null,(0,Xe.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new pt.w0;const g=this.getSubject();C.add(this.source.subscribe((0,le.x)(g,void 0,()=>{this._teardown(),g.complete()},A=>{this._teardown(),g.error(A)},()=>this._teardown()))),C.closed&&(this._connection=null,C=pt.w0.EMPTY)}return C}refCount(){return he()(this)}}var At=N(7579),Tt=N(6895),Ct=N(4004),Pt=N(3900),Ve=N(5698),Ze=N(8675),Be=N(9300),Ke=N(5577),ht=N(590),tt=N(4351),yt=N(8505);function mt(v){return(0,Xe.e)((C,g)=>{let K,A=null,k=!1;A=C.subscribe((0,le.x)(g,void 0,void 0,ee=>{K=(0,ut.Xf)(v(ee,mt(v)(C))),A?(A.unsubscribe(),A=null,K.subscribe(g)):k=!0})),k&&(A.unsubscribe(),A=null,K.subscribe(g))})}var Gt=N(5026);function Wt(v){return v<=0?()=>We.E:(0,Xe.e)((C,g)=>{let A=[];C.subscribe((0,le.x)(g,k=>{A.push(k),v<A.length&&A.shift()},()=>{for(const k of A)g.next(k);g.complete()},void 0,()=>{A=null}))})}var mn=N(8068),kt=N(6590);function Zt(v,C){const g=arguments.length>=2;return A=>A.pipe(v?(0,Be.h)((k,K)=>v(k,K,A)):ae.y,Wt(1),g?(0,kt.d)(C):(0,mn.T)(()=>new ge.K))}var Ln=N(8746),Nn=N(8189),zn=N(1481);const xe="primary",un=Symbol("RouteTitle");class ce{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const g=this.params[C];return Array.isArray(g)?g[0]:g}return null}getAll(C){if(this.has(C)){const g=this.params[C];return Array.isArray(g)?g:[g]}return[]}get keys(){return Object.keys(this.params)}}function ft(v){return new ce(v)}function Ut(v,C,g){const A=g.path.split("/");if(A.length>v.length||"full"===g.pathMatch&&(C.hasChildren()||A.length<v.length))return null;const k={};for(let K=0;K<A.length;K++){const ee=A[K],Le=v[K];if(ee.startsWith(":"))k[ee.substring(1)]=Le;else if(ee!==Le.path)return null}return{consumed:v.slice(0,A.length),posParams:k}}function St(v,C){const g=v?Object.keys(v):void 0,A=C?Object.keys(C):void 0;if(!g||!A||g.length!=A.length)return!1;let k;for(let K=0;K<g.length;K++)if(k=g[K],!Fn(v[k],C[k]))return!1;return!0}function Fn(v,C){if(Array.isArray(v)&&Array.isArray(C)){if(v.length!==C.length)return!1;const g=[...v].sort(),A=[...C].sort();return g.every((k,K)=>A[K]===k)}return v===C}function Tr(v){return Array.prototype.concat.apply([],v)}function jn(v){return v.length>0?v[v.length-1]:null}function Jn(v,C){for(const g in v)v.hasOwnProperty(g)&&C(v[g],g)}function Xt(v){return(0,h.CqO)(v)?v:(0,h.QGY)(v)?(0,z.D)(Promise.resolve(v)):(0,G.of)(v)}const en=!1,Vt={exact:function _r(v,C,g){if(!_t(v.segments,C.segments)||!rr(v.segments,C.segments,g)||v.numberOfChildren!==C.numberOfChildren)return!1;for(const A in C.children)if(!v.children[A]||!_r(v.children[A],C.children[A],g))return!1;return!0},subset:Ti},yr={exact:function hr(v,C){return St(v,C)},subset:function vr(v,C){return Object.keys(C).length<=Object.keys(v).length&&Object.keys(C).every(g=>Fn(v[g],C[g]))},ignored:()=>!0};function Wn(v,C,g){return Vt[g.paths](v.root,C.root,g.matrixParams)&&yr[g.queryParams](v.queryParams,C.queryParams)&&!("exact"===g.fragment&&v.fragment!==C.fragment)}function Ti(v,C,g){return Zn(v,C,C.segments,g)}function Zn(v,C,g,A){if(v.segments.length>g.length){const k=v.segments.slice(0,g.length);return!(!_t(k,g)||C.hasChildren()||!rr(k,g,A))}if(v.segments.length===g.length){if(!_t(v.segments,g)||!rr(v.segments,g,A))return!1;for(const k in C.children)if(!v.children[k]||!Ti(v.children[k],C.children[k],A))return!1;return!0}{const k=g.slice(0,v.segments.length),K=g.slice(v.segments.length);return!!(_t(v.segments,k)&&rr(v.segments,k,A)&&v.children[xe])&&Zn(v.children[xe],C,K,A)}}function rr(v,C,g){return C.every((A,k)=>yr[g](v[k].parameters,A.parameters))}class Pn{constructor(C=new _n([],{}),g={},A=null){this.root=C,this.queryParams=g,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return de.serialize(this)}}class _n{constructor(C,g){this.segments=C,this.children=g,this.parent=null,Jn(g,(A,k)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Te(this)}}class Sr{constructor(C,g){this.path=C,this.parameters=g}get parameterMap(){return this._parameterMap||(this._parameterMap=ft(this.parameters)),this._parameterMap}toString(){return Ce(this)}}function _t(v,C){return v.length===C.length&&v.every((g,A)=>g.path===C[A].path)}let x=(()=>{class v{}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return new B},providedIn:"root"}),v})();class B{parse(C){const g=new Br(C);return new Pn(g.parseRootSegment(),g.parseQueryParams(),g.parseFragment())}serialize(C){const g=`/${ie(C.root,!0)}`,A=function Se(v){const C=Object.keys(v).map(g=>{const A=v[g];return Array.isArray(A)?A.map(k=>`${we(g)}=${we(k)}`).join("&"):`${we(g)}=${we(A)}`}).filter(g=>!!g);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${g}${A}${"string"==typeof C.fragment?`#${function $e(v){return encodeURI(v)}(C.fragment)}`:""}`}}const de=new B;function Te(v){return v.segments.map(C=>Ce(C)).join("/")}function ie(v,C){if(!v.hasChildren())return Te(v);if(C){const g=v.children[xe]?ie(v.children[xe],!1):"",A=[];return Jn(v.children,(k,K)=>{K!==xe&&A.push(`${K}:${ie(k,!1)}`)}),A.length>0?`${g}(${A.join("//")})`:g}{const g=function oe(v,C){let g=[];return Jn(v.children,(A,k)=>{k===xe&&(g=g.concat(C(A,k)))}),Jn(v.children,(A,k)=>{k!==xe&&(g=g.concat(C(A,k)))}),g}(v,(A,k)=>k===xe?[ie(v.children[xe],!1)]:[`${k}:${ie(A,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[xe]?`${Te(v)}/${g[0]}`:`${Te(v)}/(${g.join("//")})`}}function ue(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function we(v){return ue(v).replace(/%3B/gi,";")}function Pe(v){return ue(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xt(v){return decodeURIComponent(v)}function _e(v){return xt(v.replace(/\+/g,"%20"))}function Ce(v){return`${Pe(v.path)}${function ne(v){return Object.keys(v).map(C=>`;${Pe(C)}=${Pe(v[C])}`).join("")}(v.parameters)}`}const at=/^[^\/()?;=#]+/;function wt(v){const C=v.match(at);return C?C[0]:""}const nn=/^[^=?&#]+/,pr=/^[^&#]+/;class Br{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let g={};this.peekStartsWith("/(")&&(this.capture("/"),g=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(C.length>0||Object.keys(g).length>0)&&(A[xe]=new _n(C,g)),A}parseSegment(){const C=wt(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new h.vHH(4009,en);return this.capture(C),new Sr(xt(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const g=wt(this.remaining);if(!g)return;this.capture(g);let A="";if(this.consumeOptional("=")){const k=wt(this.remaining);k&&(A=k,this.capture(A))}C[xt(g)]=xt(A)}parseQueryParam(C){const g=function Un(v){const C=v.match(nn);return C?C[0]:""}(this.remaining);if(!g)return;this.capture(g);let A="";if(this.consumeOptional("=")){const ee=function Cr(v){const C=v.match(pr);return C?C[0]:""}(this.remaining);ee&&(A=ee,this.capture(A))}const k=_e(g),K=_e(A);if(C.hasOwnProperty(k)){let ee=C[k];Array.isArray(ee)||(ee=[ee],C[k]=ee),ee.push(K)}else C[k]=K}parseParens(C){const g={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=wt(this.remaining),k=this.remaining[A.length];if("/"!==k&&")"!==k&&";"!==k)throw new h.vHH(4010,en);let K;A.indexOf(":")>-1?(K=A.slice(0,A.indexOf(":")),this.capture(K),this.capture(":")):C&&(K=xe);const ee=this.parseChildren();g[K]=1===Object.keys(ee).length?ee[xe]:new _n([],ee),this.consumeOptional("//")}return g}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new h.vHH(4011,en)}}function ai(v){return v.segments.length>0?new _n([],{[xe]:v}):v}function gr(v){const C={};for(const A of Object.keys(v.children)){const K=gr(v.children[A]);(K.segments.length>0||K.hasChildren())&&(C[A]=K)}return function qr(v){if(1===v.numberOfChildren&&v.children[xe]){const C=v.children[xe];return new _n(v.segments.concat(C.segments),C.children)}return v}(new _n(v.segments,C))}function Yn(v){return v instanceof Pn}const Us=!1;function Er(v,C,g,A,k){if(0===g.length)return tn(C.root,C.root,C.root,A,k);const K=function bn(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new an(!0,0,v);let C=0,g=!1;const A=v.reduce((k,K,ee)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Le={};return Jn(K.outlets,(ot,sn)=>{Le[sn]="string"==typeof ot?ot.split("/"):ot}),[...k,{outlets:Le}]}if(K.segmentPath)return[...k,K.segmentPath]}return"string"!=typeof K?[...k,K]:0===ee?(K.split("/").forEach((Le,ot)=>{0==ot&&"."===Le||(0==ot&&""===Le?g=!0:".."===Le?C++:""!=Le&&k.push(Le))}),k):[...k,K]},[]);return new an(g,C,A)}(g);return K.toRoot()?tn(C.root,C.root,new _n([],{}),A,k):function ee(ot){const sn=function ir(v,C,g,A){if(v.isAbsolute)return new Nt(C.root,!0,0);if(-1===A)return new Nt(g,g===C.root,0);return function br(v,C,g){let A=v,k=C,K=g;for(;K>k;){if(K-=k,A=A.parent,!A)throw new h.vHH(4005,Us&&"Invalid number of '../'");k=A.segments.length}return new Nt(A,!1,k-K)}(g,A+(ri(v.commands[0])?0:1),v.numberOfDoubleDots)}(K,C,v.snapshot?._urlSegment,ot),Yt=sn.processChildren?je(sn.segmentGroup,sn.index,K.commands):Me(sn.segmentGroup,sn.index,K.commands);return tn(C.root,sn.segmentGroup,Yt,A,k)}(v.snapshot?._lastPathIndex)}function ri(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Et(v){return"object"==typeof v&&null!=v&&v.outlets}function tn(v,C,g,A,k){let ee,K={};A&&Jn(A,(ot,sn)=>{K[sn]=Array.isArray(ot)?ot.map(Yt=>`${Yt}`):`${ot}`}),ee=v===C?g:Dt(v,C,g);const Le=ai(gr(ee));return new Pn(Le,K,k)}function Dt(v,C,g){const A={};return Jn(v.children,(k,K)=>{A[K]=k===C?g:Dt(k,C,g)}),new _n(v.segments,A)}class an{constructor(C,g,A){if(this.isAbsolute=C,this.numberOfDoubleDots=g,this.commands=A,C&&A.length>0&&ri(A[0]))throw new h.vHH(4003,Us&&"Root segment cannot have matrix parameters");const k=A.find(Et);if(k&&k!==jn(A))throw new h.vHH(4004,Us&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nt{constructor(C,g,A){this.segmentGroup=C,this.processChildren=g,this.index=A}}function Me(v,C,g){if(v||(v=new _n([],{})),0===v.segments.length&&v.hasChildren())return je(v,C,g);const A=function lt(v,C,g){let A=0,k=C;const K={match:!1,pathIndex:0,commandIndex:0};for(;k<v.segments.length;){if(A>=g.length)return K;const ee=v.segments[k],Le=g[A];if(Et(Le))break;const ot=`${Le}`,sn=A<g.length-1?g[A+1]:null;if(k>0&&void 0===ot)break;if(ot&&sn&&"object"==typeof sn&&void 0===sn.outlets){if(!lr(ot,sn,ee))return K;A+=2}else{if(!lr(ot,{},ee))return K;A++}k++}return{match:!0,pathIndex:k,commandIndex:A}}(v,C,g),k=g.slice(A.commandIndex);if(A.match&&A.pathIndex<v.segments.length){const K=new _n(v.segments.slice(0,A.pathIndex),{});return K.children[xe]=new _n(v.segments.slice(A.pathIndex),v.children),je(K,0,k)}return A.match&&0===k.length?new _n(v.segments,{}):A.match&&!v.hasChildren()?Lt(v,C,g):A.match?je(v,0,k):Lt(v,C,g)}function je(v,C,g){if(0===g.length)return new _n(v.segments,{});{const A=function Fe(v){return Et(v[0])?v[0].outlets:{[xe]:v}}(g),k={};return!A[xe]&&v.children[xe]&&1===v.numberOfChildren&&0===v.children[xe].segments.length?je(v.children[xe],C,g):(Jn(A,(K,ee)=>{"string"==typeof K&&(K=[K]),null!==K&&(k[ee]=Me(v.children[ee],C,K))}),Jn(v.children,(K,ee)=>{void 0===A[ee]&&(k[ee]=K)}),new _n(v.segments,k))}}function Lt(v,C,g){const A=v.segments.slice(0,C);let k=0;for(;k<g.length;){const K=g[k];if(Et(K)){const ot=rn(K.outlets);return new _n(A,ot)}if(0===k&&ri(g[0])){A.push(new Sr(v.segments[C].path,$t(g[0]))),k++;continue}const ee=Et(K)?K.outlets[xe]:`${K}`,Le=k<g.length-1?g[k+1]:null;ee&&Le&&ri(Le)?(A.push(new Sr(ee,$t(Le))),k+=2):(A.push(new Sr(ee,{})),k++)}return new _n(A,{})}function rn(v){const C={};return Jn(v,(g,A)=>{"string"==typeof g&&(g=[g]),null!==g&&(C[A]=Lt(new _n([],{}),0,g))}),C}function $t(v){const C={};return Jn(v,(g,A)=>C[A]=`${g}`),C}function lr(v,C,g){return v==g.path&&St(C,g.parameters)}const kn="imperative";class xr{constructor(C,g){this.id=C,this.url=g}}class mi extends xr{constructor(C,g,A="imperative",k=null){super(C,g),this.type=0,this.navigationTrigger=A,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xn extends xr{constructor(C,g,A){super(C,g),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $r extends xr{constructor(C,g,A,k){super(C,g),this.reason=A,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ai extends xr{constructor(C,g,A,k){super(C,g),this.reason=A,this.code=k,this.type=16}}class ii extends xr{constructor(C,g,A,k){super(C,g),this.error=A,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mi extends xr{constructor(C,g,A,k){super(C,g),this.urlAfterRedirects=A,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ro extends xr{constructor(C,g,A,k){super(C,g),this.urlAfterRedirects=A,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class er extends xr{constructor(C,g,A,k,K){super(C,g),this.urlAfterRedirects=A,this.state=k,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ni extends xr{constructor(C,g,A,k){super(C,g),this.urlAfterRedirects=A,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uo extends xr{constructor(C,g,A,k){super(C,g),this.urlAfterRedirects=A,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ki{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kr{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fs{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ui{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $o{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class li{constructor(C,g,A){this.routerEvent=C,this.position=g,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ts=(()=>{class v{createUrlTree(g,A,k,K,ee,Le){return Er(g||A.root,k,K,ee,Le)}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac}),v})(),si=(()=>{class v{}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:function(C){return ts.\u0275fac(C)},providedIn:"root"}),v})();class As{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const g=this.pathFromRoot(C);return g.length>1?g[g.length-2]:null}children(C){const g=Bs(C,this._root);return g?g.children.map(A=>A.value):[]}firstChild(C){const g=Bs(C,this._root);return g&&g.children.length>0?g.children[0].value:null}siblings(C){const g=sr(C,this._root);return g.length<2?[]:g[g.length-2].children.map(k=>k.value).filter(k=>k!==C)}pathFromRoot(C){return sr(C,this._root).map(g=>g.value)}}function Bs(v,C){if(v===C.value)return C;for(const g of C.children){const A=Bs(v,g);if(A)return A}return null}function sr(v,C){if(v===C.value)return[C];for(const g of C.children){const A=sr(v,g);if(A.length)return A.unshift(C),A}return[]}class Jr{constructor(C,g){this.value=C,this.children=g}toString(){return`TreeNode(${this.value})`}}function xi(v){const C={};return v&&v.children.forEach(g=>C[g.value.outlet]=g),C}class Vi extends As{constructor(C,g){super(C),this.snapshot=g,Wi(this,C)}toString(){return this.snapshot.toString()}}function ko(v,C){const g=function Ks(v,C){const ee=new Bi([],{},{},"",{},xe,C,null,v.root,-1,{});return new Ys("",new Jr(ee,[]))}(v,C),A=new q.X([new Sr("",{})]),k=new q.X({}),K=new q.X({}),ee=new q.X({}),Le=new q.X(""),ot=new Zs(A,k,ee,Le,K,xe,C,g.root);return ot.snapshot=g.root,new Vi(new Jr(ot,[]),g)}class Zs{constructor(C,g,A,k,K,ee,Le,ot){this.url=C,this.params=g,this.queryParams=A,this.fragment=k,this.data=K,this.outlet=ee,this.component=Le,this.title=this.data?.pipe((0,Ct.U)(sn=>sn[un]))??(0,G.of)(void 0),this._futureSnapshot=ot}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(C=>ft(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(C=>ft(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ns(v,C="emptyOnly"){const g=v.pathFromRoot;let A=0;if("always"!==C)for(A=g.length-1;A>=1;){const k=g[A],K=g[A-1];if(k.routeConfig&&""===k.routeConfig.path)A--;else{if(K.component)break;A--}}return function ps(v){return v.reduce((C,g)=>({params:{...C.params,...g.params},data:{...C.data,...g.data},resolve:{...g.data,...C.resolve,...g.routeConfig?.data,...g._resolvedData}}),{params:{},data:{},resolve:{}})}(g.slice(A))}class Bi{get title(){return this.data?.[un]}constructor(C,g,A,k,K,ee,Le,ot,sn,Yt,Dn){this.url=C,this.params=g,this.queryParams=A,this.fragment=k,this.data=K,this.outlet=ee,this.component=Le,this.routeConfig=ot,this._urlSegment=sn,this._lastPathIndex=Yt,this._resolve=Dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ft(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ys extends As{constructor(C,g){super(g),this.url=C,Wi(this,g)}toString(){return Qs(this._root)}}function Wi(v,C){C.value._routerState=v,C.children.forEach(g=>Wi(v,g))}function Qs(v){const C=v.children.length>0?` { ${v.children.map(Qs).join(", ")} } `:"";return`${v.value}${C}`}function _i(v){if(v.snapshot){const C=v.snapshot,g=v._futureSnapshot;v.snapshot=g,St(C.queryParams,g.queryParams)||v.queryParams.next(g.queryParams),C.fragment!==g.fragment&&v.fragment.next(g.fragment),St(C.params,g.params)||v.params.next(g.params),function on(v,C){if(v.length!==C.length)return!1;for(let g=0;g<v.length;++g)if(!St(v[g],C[g]))return!1;return!0}(C.url,g.url)||v.url.next(g.url),St(C.data,g.data)||v.data.next(g.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function Ms(v,C){const g=St(v.params,C.params)&&function Ft(v,C){return _t(v,C)&&v.every((g,A)=>St(g.parameters,C[A].parameters))}(v.url,C.url);return g&&!(!v.parent!=!C.parent)&&(!v.parent||Ms(v.parent,C.parent))}function Js(v,C,g){if(g&&v.shouldReuseRoute(C.value,g.value.snapshot)){const A=g.value;A._futureSnapshot=C.value;const k=function Eo(v,C,g){return C.children.map(A=>{for(const k of g.children)if(v.shouldReuseRoute(A.value,k.value.snapshot))return Js(v,A,k);return Js(v,A)})}(v,C,g);return new Jr(A,k)}{if(v.shouldAttach(C.value)){const K=v.retrieve(C.value);if(null!==K){const ee=K.route;return ee.value._futureSnapshot=C.value,ee.children=C.children.map(Le=>Js(v,Le)),ee}}const A=function Jo(v){return new Zs(new q.X(v.url),new q.X(v.params),new q.X(v.queryParams),new q.X(v.fragment),new q.X(v.data),v.outlet,v.component,v)}(C.value),k=C.children.map(K=>Js(v,K));return new Jr(A,k)}}const vi="ngNavigationCancelingError";function Xs(v,C){const{redirectTo:g,navigationBehaviorOptions:A}=Yn(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,k=Os(!1,0,C);return k.url=g,k.navigationBehaviorOptions=A,k}function Os(v,C,g){const A=new Error("NavigationCancelingError: "+(v||""));return A[vi]=!0,A.cancellationCode=C,g&&(A.url=g),A}function rs(v){return ms(v)&&Yn(v.url)}function ms(v){return v&&v[vi]}class $i{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new is,this.attachRef=null}}let is=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(g,A){const k=this.getOrCreateContext(g);k.outlet=A,this.contexts.set(g,k)}onChildOutletDestroyed(g){const A=this.getContext(g);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const g=this.contexts;return this.contexts=new Map,g}onOutletReAttached(g){this.contexts=g}getOrCreateContext(g){let A=this.getContext(g);return A||(A=new $i,this.contexts.set(g,A)),A}getContext(g){return this.contexts.get(g)||null}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const ys=!1;let _s=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=xe,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(is),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(g){if(g.name){const{firstChange:A,previousValue:k}=g.name;if(A)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(g){return this.parentContexts.getContext(g)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const g=this.parentContexts.getContext(this.name);g?.route&&(g.attachRef?this.attach(g.attachRef,g.route):this.activateWith(g.route,g.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,ys);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,ys);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,ys);this.location.detach();const g=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(g.instance),g}attach(g,A){this.activated=g,this._activatedRoute=A,this.location.insert(g.hostView),this.attachEvents.emit(g.instance)}deactivate(){if(this.activated){const g=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(g)}}activateWith(g,A){if(this.isActivated)throw new h.vHH(4013,ys);this._activatedRoute=g;const k=this.location,ee=g.snapshot.component,Le=this.parentContexts.getOrCreateContext(this.name).children,ot=new ss(g,Le,k.injector);if(A&&function No(v){return!!v.resolveComponentFactory}(A)){const sn=A.resolveComponentFactory(ee);this.activated=k.createComponent(sn,k.length,ot)}else this.activated=k.createComponent(ee,{index:k.length,injector:ot,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275dir=h.lG2({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),v})();class ss{constructor(C,g,A){this.route=C,this.childContexts=g,this.parent=A}get(C,g){return C===Zs?this.route:C===is?this.childContexts:this.parent.get(C,g)}}let Bn=(()=>{class v{}return v.\u0275fac=function(g){return new(g||v)},v.\u0275cmp=h.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(g,A){1&g&&h._UZ(0,"router-outlet")},dependencies:[_s],encapsulation:2}),v})();function Ni(v,C){return v.providers&&!v._injector&&(v._injector=(0,h.MMx)(v.providers,C,`Route: ${v.path}`)),v._injector??C}function Zr(v){const C=v.children&&v.children.map(Zr),g=C?{...v,children:C}:{...v};return!g.component&&!g.loadComponent&&(C||g.loadChildren)&&g.outlet&&g.outlet!==xe&&(g.component=Bn),g}function Pi(v){return v.outlet||xe}function ws(v,C){const g=v.filter(A=>Pi(A)===C);return g.push(...v.filter(A=>Pi(A)!==C)),g}function Cs(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let C=v.parent;C;C=C.parent){const g=C.routeConfig;if(g?._loadedInjector)return g._loadedInjector;if(g?._injector)return g._injector}return null}class xs{constructor(C,g,A,k){this.routeReuseStrategy=C,this.futureState=g,this.currState=A,this.forwardEvent=k}activate(C){const g=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(g,A,C),_i(this.futureState.root),this.activateChildRoutes(g,A,C)}deactivateChildRoutes(C,g,A){const k=xi(g);C.children.forEach(K=>{const ee=K.value.outlet;this.deactivateRoutes(K,k[ee],A),delete k[ee]}),Jn(k,(K,ee)=>{this.deactivateRouteAndItsChildren(K,A)})}deactivateRoutes(C,g,A){const k=C.value,K=g?g.value:null;if(k===K)if(k.component){const ee=A.getContext(k.outlet);ee&&this.deactivateChildRoutes(C,g,ee.children)}else this.deactivateChildRoutes(C,g,A);else K&&this.deactivateRouteAndItsChildren(g,A)}deactivateRouteAndItsChildren(C,g){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,g):this.deactivateRouteAndOutlet(C,g)}detachAndStoreRouteSubtree(C,g){const A=g.getContext(C.value.outlet),k=A&&C.value.component?A.children:g,K=xi(C);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],k);if(A&&A.outlet){const ee=A.outlet.detach(),Le=A.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:ee,route:C,contexts:Le})}}deactivateRouteAndOutlet(C,g){const A=g.getContext(C.value.outlet),k=A&&C.value.component?A.children:g,K=xi(C);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],k);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(C,g,A){const k=xi(g);C.children.forEach(K=>{this.activateRoutes(K,k[K.value.outlet],A),this.forwardEvent(new $o(K.value.snapshot))}),C.children.length&&this.forwardEvent(new fs(C.value.snapshot))}activateRoutes(C,g,A){const k=C.value,K=g?g.value:null;if(_i(k),k===K)if(k.component){const ee=A.getOrCreateContext(k.outlet);this.activateChildRoutes(C,g,ee.children)}else this.activateChildRoutes(C,g,A);else if(k.component){const ee=A.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const Le=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),ee.children.onOutletReAttached(Le.contexts),ee.attachRef=Le.componentRef,ee.route=Le.route.value,ee.outlet&&ee.outlet.attach(Le.componentRef,Le.route.value),_i(Le.route.value),this.activateChildRoutes(C,null,ee.children)}else{const Le=Cs(k.snapshot),ot=Le?.get(h._Vd)??null;ee.attachRef=null,ee.route=k,ee.resolver=ot,ee.injector=Le,ee.outlet&&ee.outlet.activateWith(k,ee.injector),this.activateChildRoutes(C,null,ee.children)}}else this.activateChildRoutes(C,null,A)}}class eo{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Sn{constructor(C,g){this.component=C,this.route=g}}function os(v,C,g){const A=v._root;return U(A,C?C._root:null,g,[A.value])}function $s(v,C){const g=Symbol(),A=C.get(v,g);return A===g?"function"!=typeof v||(0,h.Z0I)(v)?C.get(v):v:A}function U(v,C,g,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const K=xi(C);return v.children.forEach(ee=>{(function L(v,C,g,A,k={canDeactivateChecks:[],canActivateChecks:[]}){const K=v.value,ee=C?C.value:null,Le=g?g.getContext(v.value.outlet):null;if(ee&&K.routeConfig===ee.routeConfig){const ot=function re(v,C,g){if("function"==typeof g)return g(v,C);switch(g){case"pathParamsChange":return!_t(v.url,C.url);case"pathParamsOrQueryParamsChange":return!_t(v.url,C.url)||!St(v.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ms(v,C)||!St(v.queryParams,C.queryParams);default:return!Ms(v,C)}}(ee,K,K.routeConfig.runGuardsAndResolvers);ot?k.canActivateChecks.push(new eo(A)):(K.data=ee.data,K._resolvedData=ee._resolvedData),U(v,C,K.component?Le?Le.children:null:g,A,k),ot&&Le&&Le.outlet&&Le.outlet.isActivated&&k.canDeactivateChecks.push(new Sn(Le.outlet.component,ee))}else ee&&me(C,Le,k),k.canActivateChecks.push(new eo(A)),U(v,null,K.component?Le?Le.children:null:g,A,k)})(ee,K[ee.value.outlet],g,A.concat([ee.value]),k),delete K[ee.value.outlet]}),Jn(K,(ee,Le)=>me(ee,g.getContext(Le),k)),k}function me(v,C,g){const A=xi(v),k=v.value;Jn(A,(K,ee)=>{me(K,k.component?C?C.children.getContext(ee):null:C,g)}),g.canDeactivateChecks.push(new Sn(k.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,k))}function D(v){return"function"==typeof v}function or(v){return v instanceof ge.K||"EmptyError"===v?.name}const ar=Symbol("INITIAL_VALUE");function Hr(){return(0,Pt.w)(v=>Oe(v.map(C=>C.pipe((0,Ve.q)(1),(0,Ze.O)(ar)))).pipe((0,Ct.U)(C=>{for(const g of C)if(!0!==g){if(g===ar)return ar;if(!1===g||g instanceof Pn)return g}return!0}),(0,Be.h)(C=>C!==ar),(0,Ve.q)(1)))}function bo(v){return(0,dt.z)((0,yt.b)(C=>{if(Yn(C))throw Xs(0,C)}),(0,Ct.U)(C=>!0===C))}const Hs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Io(v,C,g,A,k){const K=Xo(v,C,g);return K.matched?function ha(v,C,g,A){const k=C.canMatch;if(!k||0===k.length)return(0,G.of)(!0);const K=k.map(ee=>{const Le=$s(ee,v);return Xt(function dn(v){return v&&D(v.canMatch)}(Le)?Le.canMatch(C,g):v.runInContext(()=>Le(C,g)))});return(0,G.of)(K).pipe(Hr(),bo())}(A=Ni(C,A),C,g).pipe((0,Ct.U)(ee=>!0===ee?K:{...Hs})):(0,G.of)(K)}function Xo(v,C,g){if(""===C.path)return"full"===C.pathMatch&&(v.hasChildren()||g.length>0)?{...Hs}:{matched:!0,consumedSegments:[],remainingSegments:g,parameters:{},positionalParamSegments:{}};const k=(C.matcher||Ut)(g,v,C);if(!k)return{...Hs};const K={};Jn(k.posParams,(Le,ot)=>{K[ot]=Le.path});const ee=k.consumed.length>0?{...K,...k.consumed[k.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:k.consumed,remainingSegments:g.slice(k.consumed.length),parameters:ee,positionalParamSegments:k.posParams??{}}}function fo(v,C,g,A){if(g.length>0&&function Ra(v,C,g){return g.some(A=>ea(v,C,A)&&Pi(A)!==xe)}(v,g,A)){const K=new _n(C,function Pa(v,C,g,A){const k={};k[xe]=A,A._sourceSegment=v,A._segmentIndexShift=C.length;for(const K of g)if(""===K.path&&Pi(K)!==xe){const ee=new _n([],{});ee._sourceSegment=v,ee._segmentIndexShift=C.length,k[Pi(K)]=ee}return k}(v,C,A,new _n(g,v.children)));return K._sourceSegment=v,K._segmentIndexShift=C.length,{segmentGroup:K,slicedSegments:[]}}if(0===g.length&&function ku(v,C,g){return g.some(A=>ea(v,C,A))}(v,g,A)){const K=new _n(v.segments,function Ru(v,C,g,A,k){const K={};for(const ee of A)if(ea(v,g,ee)&&!k[Pi(ee)]){const Le=new _n([],{});Le._sourceSegment=v,Le._segmentIndexShift=C.length,K[Pi(ee)]=Le}return{...k,...K}}(v,C,g,A,v.children));return K._sourceSegment=v,K._segmentIndexShift=C.length,{segmentGroup:K,slicedSegments:g}}const k=new _n(v.segments,v.children);return k._sourceSegment=v,k._segmentIndexShift=C.length,{segmentGroup:k,slicedSegments:g}}function ea(v,C,g){return(!(v.hasChildren()||C.length>0)||"full"!==g.pathMatch)&&""===g.path}function fa(v,C,g,A){return!!(Pi(v)===A||A!==xe&&ea(C,g,v))&&("**"===v.path||Xo(C,v,g).matched)}function Za(v,C,g){return 0===C.length&&!v.children[g]}const ci=!1;class to{constructor(C){this.segmentGroup=C||null}}class Do{constructor(C){this.urlTree=C}}function pi(v){return Qe(new to(v))}function jo(v){return Qe(new Do(v))}class ka{constructor(C,g,A,k,K){this.injector=C,this.configLoader=g,this.urlSerializer=A,this.urlTree=k,this.config=K,this.allowRedirects=!0}apply(){const C=fo(this.urlTree.root,[],[],this.config).segmentGroup,g=new _n(C.segments,C.children);return this.expandSegmentGroup(this.injector,this.config,g,xe).pipe((0,Ct.U)(K=>this.createUrlTree(gr(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mt(K=>{if(K instanceof Do)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof to?this.noMatchError(K):K}))}match(C){return this.expandSegmentGroup(this.injector,this.config,C.root,xe).pipe((0,Ct.U)(k=>this.createUrlTree(gr(k),C.queryParams,C.fragment))).pipe(mt(k=>{throw k instanceof to?this.noMatchError(k):k}))}noMatchError(C){return new h.vHH(4002,ci)}createUrlTree(C,g,A){const k=ai(C);return new Pn(k,g,A)}expandSegmentGroup(C,g,A,k){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(C,g,A).pipe((0,Ct.U)(K=>new _n([],K))):this.expandSegment(C,A,g,A.segments,k,!0)}expandChildren(C,g,A){const k=[];for(const K of Object.keys(A.children))"primary"===K?k.unshift(K):k.push(K);return(0,z.D)(k).pipe((0,tt.b)(K=>{const ee=A.children[K],Le=ws(g,K);return this.expandSegmentGroup(C,Le,ee,K).pipe((0,Ct.U)(ot=>({segment:ot,outlet:K})))}),(0,Gt.R)((K,ee)=>(K[ee.outlet]=ee.segment,K),{}),Zt())}expandSegment(C,g,A,k,K,ee){return(0,z.D)(A).pipe((0,tt.b)(Le=>this.expandSegmentAgainstRoute(C,g,A,Le,k,K,ee).pipe(mt(sn=>{if(sn instanceof to)return(0,G.of)(null);throw sn}))),(0,ht.P)(Le=>!!Le),mt((Le,ot)=>{if(or(Le))return Za(g,k,K)?(0,G.of)(new _n([],{})):pi(g);throw Le}))}expandSegmentAgainstRoute(C,g,A,k,K,ee,Le){return fa(k,g,K,ee)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(C,g,k,K,ee):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,g,A,k,K,ee):pi(g):pi(g)}expandSegmentAgainstRouteUsingRedirect(C,g,A,k,K,ee){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,A,k,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(C,g,A,k,K,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,g,A,k){const K=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?jo(K):this.lineralizeSegments(A,K).pipe((0,Ke.z)(ee=>{const Le=new _n(ee,{});return this.expandSegment(C,Le,g,ee,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,g,A,k,K,ee){const{matched:Le,consumedSegments:ot,remainingSegments:sn,positionalParamSegments:Yt}=Xo(g,k,K);if(!Le)return pi(g);const Dn=this.applyRedirectCommands(ot,k.redirectTo,Yt);return k.redirectTo.startsWith("/")?jo(Dn):this.lineralizeSegments(k,Dn).pipe((0,Ke.z)(Gr=>this.expandSegment(C,g,A,Gr.concat(sn),ee,!1)))}matchSegmentAgainstRoute(C,g,A,k,K){return"**"===A.path?(C=Ni(A,C),A.loadChildren?(A._loadedRoutes?(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(C,A)).pipe((0,Ct.U)(Le=>(A._loadedRoutes=Le.routes,A._loadedInjector=Le.injector,new _n(k,{})))):(0,G.of)(new _n(k,{}))):Io(g,A,k,C).pipe((0,Pt.w)(({matched:ee,consumedSegments:Le,remainingSegments:ot})=>ee?this.getChildConfig(C=A._injector??C,A,k).pipe((0,Ke.z)(Yt=>{const Dn=Yt.injector??C,Gr=Yt.routes,{segmentGroup:Is,slicedSegments:yo}=fo(g,Le,ot,Gr),O=new _n(Is.segments,Is.children);if(0===yo.length&&O.hasChildren())return this.expandChildren(Dn,Gr,O).pipe((0,Ct.U)(Ne=>new _n(Le,Ne)));if(0===Gr.length&&0===yo.length)return(0,G.of)(new _n(Le,{}));const R=Pi(A)===K;return this.expandSegment(Dn,O,Gr,yo,R?xe:K,!0).pipe((0,Ct.U)(fe=>new _n(Le.concat(fe.segments),fe.children)))})):pi(g)))}getChildConfig(C,g,A){return g.children?(0,G.of)({routes:g.children,injector:C}):g.loadChildren?void 0!==g._loadedRoutes?(0,G.of)({routes:g._loadedRoutes,injector:g._loadedInjector}):function fi(v,C,g,A){const k=C.canLoad;if(void 0===k||0===k.length)return(0,G.of)(!0);const K=k.map(ee=>{const Le=$s(ee,v);return Xt(function I(v){return v&&D(v.canLoad)}(Le)?Le.canLoad(C,g):v.runInContext(()=>Le(C,g)))});return(0,G.of)(K).pipe(Hr(),bo())}(C,g,A).pipe((0,Ke.z)(k=>k?this.configLoader.loadChildren(C,g).pipe((0,yt.b)(K=>{g._loadedRoutes=K.routes,g._loadedInjector=K.injector})):function Rr(v){return Qe(Os(ci,3))}())):(0,G.of)({routes:[],injector:C})}lineralizeSegments(C,g){let A=[],k=g.root;for(;;){if(A=A.concat(k.segments),0===k.numberOfChildren)return(0,G.of)(A);if(k.numberOfChildren>1||!k.children[xe])return C.redirectTo,Qe(new h.vHH(4e3,ci));k=k.children[xe]}}applyRedirectCommands(C,g,A){return this.applyRedirectCreateUrlTree(g,this.urlSerializer.parse(g),C,A)}applyRedirectCreateUrlTree(C,g,A,k){const K=this.createSegmentGroup(C,g.root,A,k);return new Pn(K,this.createQueryParams(g.queryParams,this.urlTree.queryParams),g.fragment)}createQueryParams(C,g){const A={};return Jn(C,(k,K)=>{if("string"==typeof k&&k.startsWith(":")){const Le=k.substring(1);A[K]=g[Le]}else A[K]=k}),A}createSegmentGroup(C,g,A,k){const K=this.createSegments(C,g.segments,A,k);let ee={};return Jn(g.children,(Le,ot)=>{ee[ot]=this.createSegmentGroup(C,Le,A,k)}),new _n(K,ee)}createSegments(C,g,A,k){return g.map(K=>K.path.startsWith(":")?this.findPosParam(C,K,k):this.findOrReturn(K,A))}findPosParam(C,g,A){const k=A[g.path.substring(1)];if(!k)throw new h.vHH(4001,ci);return k}findOrReturn(C,g){let A=0;for(const k of g){if(k.path===C.path)return g.splice(A),k;A++}return C}}class Nu{}class b{constructor(C,g,A,k,K,ee,Le){this.injector=C,this.rootComponentType=g,this.config=A,this.urlTree=k,this.url=K,this.paramsInheritanceStrategy=ee,this.urlSerializer=Le}recognize(){const C=fo(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,xe).pipe((0,Ct.U)(g=>{if(null===g)return null;const A=new Bi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xe,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new Jr(A,g),K=new Ys(this.url,k);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(C){const g=C.value,A=ns(g,this.paramsInheritanceStrategy);g.params=Object.freeze(A.params),g.data=Object.freeze(A.data),C.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(C,g,A,k){return 0===A.segments.length&&A.hasChildren()?this.processChildren(C,g,A):this.processSegment(C,g,A,A.segments,k)}processChildren(C,g,A){return(0,z.D)(Object.keys(A.children)).pipe((0,tt.b)(k=>{const K=A.children[k],ee=ws(g,k);return this.processSegmentGroup(C,ee,K,k)}),(0,Gt.R)((k,K)=>k&&K?(k.push(...K),k):null),function Cn(v,C=!1){return(0,Xe.e)((g,A)=>{let k=0;g.subscribe((0,le.x)(A,K=>{const ee=v(K,k++);(ee||C)&&A.next(K),!ee&&A.complete()}))})}(k=>null!==k),(0,kt.d)(null),Zt(),(0,Ct.U)(k=>{if(null===k)return null;const K=ye(k);return function $(v){v.sort((C,g)=>C.value.outlet===xe?-1:g.value.outlet===xe?1:C.value.outlet.localeCompare(g.value.outlet))}(K),K}))}processSegment(C,g,A,k,K){return(0,z.D)(g).pipe((0,tt.b)(ee=>this.processSegmentAgainstRoute(ee._injector??C,ee,A,k,K)),(0,ht.P)(ee=>!!ee),mt(ee=>{if(or(ee))return Za(A,k,K)?(0,G.of)([]):(0,G.of)(null);throw ee}))}processSegmentAgainstRoute(C,g,A,k,K){if(g.redirectTo||!fa(g,A,k,K))return(0,G.of)(null);let ee;if("**"===g.path){const Le=k.length>0?jn(k).parameters:{},ot=vn(A)+k.length,sn=new Bi(k,Le,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mr(g),Pi(g),g.component??g._loadedComponent??null,g,Mt(A),ot,Ur(g));ee=(0,G.of)({snapshot:sn,consumedSegments:[],remainingSegments:[]})}else ee=Io(A,g,k,C).pipe((0,Ct.U)(({matched:Le,consumedSegments:ot,remainingSegments:sn,parameters:Yt})=>{if(!Le)return null;const Dn=vn(A)+ot.length;return{snapshot:new Bi(ot,Yt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mr(g),Pi(g),g.component??g._loadedComponent??null,g,Mt(A),Dn,Ur(g)),consumedSegments:ot,remainingSegments:sn}}));return ee.pipe((0,Pt.w)(Le=>{if(null===Le)return(0,G.of)(null);const{snapshot:ot,consumedSegments:sn,remainingSegments:Yt}=Le;C=g._injector??C;const Dn=g._loadedInjector??C,Gr=function P(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(g),{segmentGroup:Is,slicedSegments:yo}=fo(A,sn,Yt,Gr.filter(R=>void 0===R.redirectTo));if(0===yo.length&&Is.hasChildren())return this.processChildren(Dn,Gr,Is).pipe((0,Ct.U)(R=>null===R?null:[new Jr(ot,R)]));if(0===Gr.length&&0===yo.length)return(0,G.of)([new Jr(ot,[])]);const O=Pi(g)===K;return this.processSegment(Dn,Gr,Is,yo,O?xe:K).pipe((0,Ct.U)(R=>null===R?null:[new Jr(ot,R)]))}))}}function Y(v){const C=v.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function ye(v){const C=[],g=new Set;for(const A of v){if(!Y(A)){C.push(A);continue}const k=C.find(K=>A.value.routeConfig===K.value.routeConfig);void 0!==k?(k.children.push(...A.children),g.add(k)):C.push(A)}for(const A of g){const k=ye(A.children);C.push(new Jr(A.value,k))}return C.filter(A=>!g.has(A))}function Mt(v){let C=v;for(;C._sourceSegment;)C=C._sourceSegment;return C}function vn(v){let C=v,g=C._segmentIndexShift??0;for(;C._sourceSegment;)C=C._sourceSegment,g+=C._segmentIndexShift??0;return g-1}function mr(v){return v.data||{}}function Ur(v){return v.resolve||{}}function cn(v){return"string"==typeof v.title||null===v.title}function Ci(v){return(0,Pt.w)(C=>{const g=v(C);return g?(0,z.D)(g).pipe((0,Ct.U)(()=>C)):(0,G.of)(C)})}const bs=new h.OlP("ROUTES");let Yr=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(g){if(this.componentLoaders.get(g))return this.componentLoaders.get(g);if(g._loadedComponent)return(0,G.of)(g._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(g);const A=Xt(g.loadComponent()).pipe((0,Ct.U)(Ho),(0,yt.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(g),g._loadedComponent=K}),(0,Ln.x)(()=>{this.componentLoaders.delete(g)})),k=new Ue(A,()=>new At.x).pipe(he());return this.componentLoaders.set(g,k),k}loadChildren(g,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const K=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Ct.U)(Le=>{this.onLoadEndListener&&this.onLoadEndListener(A);let ot,sn,Yt=!1;Array.isArray(Le)?sn=Le:(ot=Le.create(g).injector,sn=Tr(ot.get(bs,[],h.XFs.Self|h.XFs.Optional)));return{routes:sn.map(Zr),injector:ot}}),(0,Ln.x)(()=>{this.childrenLoaders.delete(A)})),ee=new Ue(K,()=>new At.x).pipe(he());return this.childrenLoaders.set(A,ee),ee}loadModuleFactoryOrRoutes(g){return Xt(g()).pipe((0,Ct.U)(Ho),(0,Ke.z)(A=>A instanceof h.YKP||Array.isArray(A)?(0,G.of)(A):(0,z.D)(this.compiler.compileModuleAsync(A))))}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function Ho(v){return function qt(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let no=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new At.x,this.configLoader=(0,h.f3M)(Yr),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(x),this.rootContexts=(0,h.f3M)(is),this.navigationId=0,this.afterPreactivation=()=>(0,G.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new ki(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new Vs(k))}complete(){this.transitions?.complete()}handleNavigationRequest(g){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...g,id:A})}setupNavigations(g){return this.transitions=new q.X({id:0,targetPageId:0,currentUrlTree:g.currentUrlTree,currentRawUrl:g.currentUrlTree,extractedUrl:g.urlHandlingStrategy.extract(g.currentUrlTree),urlAfterRedirects:g.urlHandlingStrategy.extract(g.currentUrlTree),rawUrl:g.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:kn,restoredState:null,currentSnapshot:g.routerState.snapshot,targetSnapshot:null,currentRouterState:g.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Be.h)(A=>0!==A.id),(0,Ct.U)(A=>({...A,extractedUrl:g.urlHandlingStrategy.extract(A.rawUrl)})),(0,Pt.w)(A=>{let k=!1,K=!1;return(0,G.of)(A).pipe((0,yt.b)(ee=>{this.currentNavigation={id:ee.id,initialUrl:ee.rawUrl,extractedUrl:ee.extractedUrl,trigger:ee.source,extras:ee.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Pt.w)(ee=>{const Le=g.browserUrlTree.toString(),ot=!g.navigated||ee.extractedUrl.toString()!==Le||Le!==g.currentUrlTree.toString();if(!ot&&"reload"!==(ee.extras.onSameUrlNavigation??g.onSameUrlNavigation)){const Yt="";return this.events.next(new Ai(ee.id,g.serializeUrl(A.rawUrl),Yt,0)),g.rawUrlTree=ee.rawUrl,ee.resolve(null),We.E}if(g.urlHandlingStrategy.shouldProcessUrl(ee.rawUrl))return pa(ee.source)&&(g.browserUrlTree=ee.extractedUrl),(0,G.of)(ee).pipe((0,Pt.w)(Yt=>{const Dn=this.transitions?.getValue();return this.events.next(new mi(Yt.id,this.urlSerializer.serialize(Yt.extractedUrl),Yt.source,Yt.restoredState)),Dn!==this.transitions?.getValue()?We.E:Promise.resolve(Yt)}),function Qt(v,C,g,A){return(0,Pt.w)(k=>function Lr(v,C,g,A,k){return new ka(v,C,g,A,k).apply()}(v,C,g,k.extractedUrl,A).pipe((0,Ct.U)(K=>({...k,urlAfterRedirects:K}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,g.config),(0,yt.b)(Yt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Yt.urlAfterRedirects},A.urlAfterRedirects=Yt.urlAfterRedirects}),function qn(v,C,g,A,k){return(0,Ke.z)(K=>function st(v,C,g,A,k,K,ee="emptyOnly"){return new b(v,C,g,A,k,ee,K).recognize().pipe((0,Pt.w)(Le=>null===Le?function Jt(v){return new Ie.y(C=>C.error(v))}(new Nu):(0,G.of)(Le)))}(v,C,g,K.urlAfterRedirects,A.serialize(K.urlAfterRedirects),A,k).pipe((0,Ct.U)(ee=>({...K,targetSnapshot:ee}))))}(this.environmentInjector,this.rootComponentType,g.config,this.urlSerializer,g.paramsInheritanceStrategy),(0,yt.b)(Yt=>{if(A.targetSnapshot=Yt.targetSnapshot,"eager"===g.urlUpdateStrategy){if(!Yt.extras.skipLocationChange){const Gr=g.urlHandlingStrategy.merge(Yt.urlAfterRedirects,Yt.rawUrl);g.setBrowserUrl(Gr,Yt)}g.browserUrlTree=Yt.urlAfterRedirects}const Dn=new Mi(Yt.id,this.urlSerializer.serialize(Yt.extractedUrl),this.urlSerializer.serialize(Yt.urlAfterRedirects),Yt.targetSnapshot);this.events.next(Dn)}));if(ot&&g.urlHandlingStrategy.shouldProcessUrl(g.rawUrlTree)){const{id:Yt,extractedUrl:Dn,source:Gr,restoredState:Is,extras:yo}=ee,O=new mi(Yt,this.urlSerializer.serialize(Dn),Gr,Is);this.events.next(O);const R=ko(Dn,this.rootComponentType).snapshot;return A={...ee,targetSnapshot:R,urlAfterRedirects:Dn,extras:{...yo,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(A)}{const Yt="";return this.events.next(new Ai(ee.id,g.serializeUrl(A.extractedUrl),Yt,1)),g.rawUrlTree=ee.rawUrl,ee.resolve(null),We.E}}),(0,yt.b)(ee=>{const Le=new Ro(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(Le)}),(0,Ct.U)(ee=>A={...ee,guards:os(ee.targetSnapshot,ee.currentSnapshot,this.rootContexts)}),function Fr(v,C){return(0,Ke.z)(g=>{const{targetSnapshot:A,currentSnapshot:k,guards:{canActivateChecks:K,canDeactivateChecks:ee}}=g;return 0===ee.length&&0===K.length?(0,G.of)({...g,guardsResult:!0}):function as(v,C,g,A){return(0,z.D)(v).pipe((0,Ke.z)(k=>function js(v,C,g,A,k){const K=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,G.of)(!0);const ee=K.map(Le=>{const ot=Cs(C)??k,sn=$s(Le,ot);return Xt(function ct(v){return v&&D(v.canDeactivate)}(sn)?sn.canDeactivate(v,C,g,A):ot.runInContext(()=>sn(v,C,g,A))).pipe((0,ht.P)())});return(0,G.of)(ee).pipe(Hr())}(k.component,k.route,g,C,A)),(0,ht.P)(k=>!0!==k,!0))}(ee,A,k,v).pipe((0,Ke.z)(Le=>Le&&function E(v){return"boolean"==typeof v}(Le)?function ur(v,C,g,A){return(0,z.D)(C).pipe((0,tt.b)(k=>(0,qe.z)(function Xr(v,C){return null!==v&&C&&C(new Kr(v)),(0,G.of)(!0)}(k.route.parent,A),function Ir(v,C){return null!==v&&C&&C(new ui(v)),(0,G.of)(!0)}(k.route,A),function hi(v,C,g){const A=C[C.length-1],K=C.slice(0,C.length-1).reverse().map(ee=>function ho(v){const C=v.routeConfig?v.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:v,guards:C}:null}(ee)).filter(ee=>null!==ee).map(ee=>et(()=>{const Le=ee.guards.map(ot=>{const sn=Cs(ee.node)??g,Yt=$s(ot,sn);return Xt(function Ae(v){return v&&D(v.canActivateChild)}(Yt)?Yt.canActivateChild(A,v):sn.runInContext(()=>Yt(A,v))).pipe((0,ht.P)())});return(0,G.of)(Le).pipe(Hr())}));return(0,G.of)(K).pipe(Hr())}(v,k.path,g),function Es(v,C,g){const A=C.routeConfig?C.routeConfig.canActivate:null;if(!A||0===A.length)return(0,G.of)(!0);const k=A.map(K=>et(()=>{const ee=Cs(C)??g,Le=$s(K,ee);return Xt(function W(v){return v&&D(v.canActivate)}(Le)?Le.canActivate(C,v):ee.runInContext(()=>Le(C,v))).pipe((0,ht.P)())}));return(0,G.of)(k).pipe(Hr())}(v,k.route,g))),(0,ht.P)(k=>!0!==k,!0))}(A,K,v,C):(0,G.of)(Le)),(0,Ct.U)(Le=>({...g,guardsResult:Le})))})}(this.environmentInjector,ee=>this.events.next(ee)),(0,yt.b)(ee=>{if(A.guardsResult=ee.guardsResult,Yn(ee.guardsResult))throw Xs(0,ee.guardsResult);const Le=new er(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot,!!ee.guardsResult);this.events.next(Le)}),(0,Be.h)(ee=>!!ee.guardsResult||(g.restoreHistory(ee),this.cancelNavigationTransition(ee,"",3),!1)),Ci(ee=>{if(ee.guards.canActivateChecks.length)return(0,G.of)(ee).pipe((0,yt.b)(Le=>{const ot=new ni(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(ot)}),(0,Pt.w)(Le=>{let ot=!1;return(0,G.of)(Le).pipe(function wi(v,C){return(0,Ke.z)(g=>{const{targetSnapshot:A,guards:{canActivateChecks:k}}=g;if(!k.length)return(0,G.of)(g);let K=0;return(0,z.D)(k).pipe((0,tt.b)(ee=>function ln(v,C,g,A){const k=v.routeConfig,K=v._resolve;return void 0!==k?.title&&!cn(k)&&(K[un]=k.title),function Ar(v,C,g,A){const k=function po(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===k.length)return(0,G.of)({});const K={};return(0,z.D)(k).pipe((0,Ke.z)(ee=>function On(v,C,g,A){const k=Cs(C)??A,K=$s(v,k);return Xt(K.resolve?K.resolve(C,g):k.runInContext(()=>K(C,g)))}(v[ee],C,g,A).pipe((0,ht.P)(),(0,yt.b)(Le=>{K[ee]=Le}))),Wt(1),function wn(v){return(0,Ct.U)(()=>v)}(K),mt(ee=>or(ee)?We.E:Qe(ee)))}(K,v,C,A).pipe((0,Ct.U)(ee=>(v._resolvedData=ee,v.data=ns(v,g).resolve,k&&cn(k)&&(v.data[un]=k.title),null)))}(ee.route,A,v,C)),(0,yt.b)(()=>K++),Wt(1),(0,Ke.z)(ee=>K===k.length?(0,G.of)(g):We.E))})}(g.paramsInheritanceStrategy,this.environmentInjector),(0,yt.b)({next:()=>ot=!0,complete:()=>{ot||(g.restoreHistory(Le),this.cancelNavigationTransition(Le,"",2))}}))}),(0,yt.b)(Le=>{const ot=new uo(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(ot)}))}),Ci(ee=>{const Le=ot=>{const sn=[];ot.routeConfig?.loadComponent&&!ot.routeConfig._loadedComponent&&sn.push(this.configLoader.loadComponent(ot.routeConfig).pipe((0,yt.b)(Yt=>{ot.component=Yt}),(0,Ct.U)(()=>{})));for(const Yt of ot.children)sn.push(...Le(Yt));return sn};return Oe(Le(ee.targetSnapshot.root)).pipe((0,kt.d)(),(0,Ve.q)(1))}),Ci(()=>this.afterPreactivation()),(0,Ct.U)(ee=>{const Le=function gs(v,C,g){const A=Js(v,C._root,g?g._root:void 0);return new Vi(A,C)}(g.routeReuseStrategy,ee.targetSnapshot,ee.currentRouterState);return A={...ee,targetRouterState:Le}}),(0,yt.b)(ee=>{g.currentUrlTree=ee.urlAfterRedirects,g.rawUrlTree=g.urlHandlingStrategy.merge(ee.urlAfterRedirects,ee.rawUrl),g.routerState=ee.targetRouterState,"deferred"===g.urlUpdateStrategy&&(ee.extras.skipLocationChange||g.setBrowserUrl(g.rawUrlTree,ee),g.browserUrlTree=ee.urlAfterRedirects)}),((v,C,g)=>(0,Ct.U)(A=>(new xs(C,A.targetRouterState,A.currentRouterState,g).activate(v),A)))(this.rootContexts,g.routeReuseStrategy,ee=>this.events.next(ee)),(0,yt.b)({next:ee=>{k=!0,this.lastSuccessfulNavigation=this.currentNavigation,g.navigated=!0,this.events.next(new Xn(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(g.currentUrlTree))),g.titleStrategy?.updateTitle(ee.targetRouterState.snapshot),ee.resolve(!0)},complete:()=>{k=!0}}),(0,Ln.x)(()=>{k||K||this.cancelNavigationTransition(A,"",1),this.currentNavigation?.id===A.id&&(this.currentNavigation=null)}),mt(ee=>{if(K=!0,ms(ee)){rs(ee)||(g.navigated=!0,g.restoreHistory(A,!0));const Le=new $r(A.id,this.urlSerializer.serialize(A.extractedUrl),ee.message,ee.cancellationCode);if(this.events.next(Le),rs(ee)){const ot=g.urlHandlingStrategy.merge(ee.url,g.rawUrlTree),sn={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===g.urlUpdateStrategy||pa(A.source)};g.scheduleNavigation(ot,kn,null,sn,{resolve:A.resolve,reject:A.reject,promise:A.promise})}else A.resolve(!1)}else{g.restoreHistory(A,!0);const Le=new ii(A.id,this.urlSerializer.serialize(A.extractedUrl),ee,A.targetSnapshot??void 0);this.events.next(Le);try{A.resolve(g.errorHandler(ee))}catch(ot){A.reject(ot)}}return We.E}))}))}cancelNavigationTransition(g,A,k){const K=new $r(g.id,this.urlSerializer.serialize(g.extractedUrl),A,k);this.events.next(K),g.resolve(!1)}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function pa(v){return v!==kn}let To=(()=>{class v{buildTitle(g){let A,k=g.root;for(;void 0!==k;)A=this.getResolvedTitleForRoute(k)??A,k=k.children.find(K=>K.outlet===xe);return A}getResolvedTitleForRoute(g){return g.data[un]}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(ga)},providedIn:"root"}),v})(),ga=(()=>{class v extends To{constructor(g){super(),this.title=g}updateTitle(g){const A=this.buildTitle(g);void 0!==A&&this.title.setTitle(A)}}return v.\u0275fac=function(g){return new(g||v)(h.LFG(zn.Dx))},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Ps=(()=>{class v{}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(ya)},providedIn:"root"}),v})();class ma{shouldDetach(C){return!1}store(C,g){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,g){return C.routeConfig===g.routeConfig}}let ya=(()=>{class v extends ma{}return v.\u0275fac=function(){let C;return function(A){return(C||(C=h.n5z(v)))(A||v)}}(),v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Fo=new h.OlP("",{providedIn:"root",factory:()=>({})});let ta=(()=>{class v{}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(_a)},providedIn:"root"}),v})(),_a=(()=>{class v{shouldProcessUrl(g){return!0}extract(g){return g}merge(g,A){return g}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();function va(v){throw v}function rt(v,C,g){return C.parse("/")}const ro={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},io={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gi=(()=>{class v{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Fo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||va,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||rt,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(ta),this.routeReuseStrategy=(0,h.f3M)(Ps),this.urlCreationStrategy=(0,h.f3M)(si),this.titleStrategy=(0,h.f3M)(To),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Tr((0,h.f3M)(bs,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(no),this.urlSerializer=(0,h.f3M)(x),this.location=(0,h.f3M)(Tt.Ye),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ko(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(g=>{this.lastSuccessfulId=g.id,this.currentPageId=g.targetPageId},g=>{this.console.warn(`Unhandled Navigation Error: ${g}`)})}resetRootComponentType(g){this.routerState.root.component=g,this.navigationTransitions.rootComponentType=g}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const g=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),kn,g)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(g=>{const A="popstate"===g.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(g.url,A,g.state)},0)}))}navigateToSyncWithBrowser(g,A,k){const K={replaceUrl:!0},ee=k?.navigationId?k:null;if(k){const ot={...k};delete ot.navigationId,delete ot.\u0275routerPageId,0!==Object.keys(ot).length&&(K.state=ot)}const Le=this.parseUrl(g);this.scheduleNavigation(Le,A,ee,K)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(g){this.config=g.map(Zr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(g,A={}){const{relativeTo:k,queryParams:K,fragment:ee,queryParamsHandling:Le,preserveFragment:ot}=A,sn=ot?this.currentUrlTree.fragment:ee;let Yt=null;switch(Le){case"merge":Yt={...this.currentUrlTree.queryParams,...K};break;case"preserve":Yt=this.currentUrlTree.queryParams;break;default:Yt=K||null}return null!==Yt&&(Yt=this.removeEmptyProps(Yt)),this.urlCreationStrategy.createUrlTree(k,this.routerState,this.currentUrlTree,g,Yt,sn??null)}navigateByUrl(g,A={skipLocationChange:!1}){const k=Yn(g)?g:this.parseUrl(g),K=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(K,kn,null,A)}navigate(g,A={skipLocationChange:!1}){return function Lo(v){for(let C=0;C<v.length;C++){const g=v[C];if(null==g)throw new h.vHH(4008,false)}}(g),this.navigateByUrl(this.createUrlTree(g,A),A)}serializeUrl(g){return this.urlSerializer.serialize(g)}parseUrl(g){let A;try{A=this.urlSerializer.parse(g)}catch(k){A=this.malformedUriErrorHandler(k,this.urlSerializer,g)}return A}isActive(g,A){let k;if(k=!0===A?{...ro}:!1===A?{...io}:A,Yn(g))return Wn(this.currentUrlTree,g,k);const K=this.parseUrl(g);return Wn(this.currentUrlTree,K,k)}removeEmptyProps(g){return Object.keys(g).reduce((A,k)=>{const K=g[k];return null!=K&&(A[k]=K),A},{})}scheduleNavigation(g,A,k,K,ee){if(this.disposed)return Promise.resolve(!1);let Le,ot,sn,Yt;return ee?(Le=ee.resolve,ot=ee.reject,sn=ee.promise):sn=new Promise((Dn,Gr)=>{Le=Dn,ot=Gr}),Yt="computed"===this.canceledNavigationResolution?k&&k.\u0275routerPageId?k.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Yt,source:A,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:g,extras:K,resolve:Le,reject:ot,promise:sn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),sn.catch(Dn=>Promise.reject(Dn))}setBrowserUrl(g,A){const k=this.urlSerializer.serialize(g),K={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(k)||A.extras.replaceUrl?this.location.replaceState(k,"",K):this.location.go(k,"",K)}restoreHistory(g,A=!1){if("computed"===this.canceledNavigationResolution){const k=this.currentPageId-g.targetPageId;"popstate"!==g.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===k?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===k&&(this.resetState(g),this.browserUrlTree=g.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(k)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(g),this.resetUrlToCurrentUrlTree())}resetState(g){this.routerState=g.currentRouterState,this.currentUrlTree=g.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,g.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(g,A){return"computed"===this.canceledNavigationResolution?{navigationId:g,\u0275routerPageId:A}:{navigationId:g}}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class Ca{}let El=(()=>{class v{constructor(g,A,k,K,ee){this.router=g,this.injector=k,this.preloadingStrategy=K,this.loader=ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,Be.h)(g=>g instanceof Xn),(0,tt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(g,A){const k=[];for(const K of A){K.providers&&!K._injector&&(K._injector=(0,h.MMx)(K.providers,g,`Route: ${K.path}`));const ee=K._injector??g,Le=K._loadedInjector??ee;(K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent)&&k.push(this.preloadConfig(ee,K)),(K.children||K._loadedRoutes)&&k.push(this.processRoutes(Le,K.children??K._loadedRoutes))}return(0,z.D)(k).pipe((0,Nn.J)())}preloadConfig(g,A){return this.preloadingStrategy.preload(A,()=>{let k;k=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(g,A):(0,G.of)(null);const K=k.pipe((0,Ke.z)(ee=>null===ee?(0,G.of)(void 0):(A._loadedRoutes=ee.routes,A._loadedInjector=ee.injector,this.processRoutes(ee.injector??g,ee.routes))));if(A.loadComponent&&!A._loadedComponent){const ee=this.loader.loadComponent(A);return(0,z.D)([K,ee]).pipe((0,Nn.J)())}return K})}}return v.\u0275fac=function(g){return new(g||v)(h.LFG(gi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Ca),h.LFG(Yr))},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Ri=new h.OlP("");let Ea=(()=>{class v{constructor(g,A,k,K,ee={}){this.urlSerializer=g,this.transitions=A,this.viewportScroller=k,this.zone=K,this.options=ee,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ee.scrollPositionRestoration=ee.scrollPositionRestoration||"disabled",ee.anchorScrolling=ee.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(g=>{g instanceof mi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=g.navigationTrigger,this.restoredId=g.restoredState?g.restoredState.navigationId:0):g instanceof Xn&&(this.lastId=g.id,this.scheduleScrollEvent(g,this.urlSerializer.parse(g.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(g=>{g instanceof li&&(g.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(g.position):g.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(g.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(g,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new li(g,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return v.\u0275fac=function(g){h.$Z()},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac}),v})();var Yi=(()=>((Yi=Yi||{})[Yi.COMPLETE=0]="COMPLETE",Yi[Yi.FAILED=1]="FAILED",Yi[Yi.REDIRECTING=2]="REDIRECTING",Yi))();const Qr=!1;function Qi(v,C){return{\u0275kind:v,\u0275providers:C}}const Na=new h.OlP("",{providedIn:"root",factory:()=>!1});function ei(){const v=(0,h.f3M)(h.zs3);return C=>{const g=v.get(h.z2F);if(C!==g.components[0])return;const A=v.get(gi),k=v.get(Lu);1===v.get(Fa)&&A.initialNavigation(),v.get(cu,null,h.XFs.Optional)?.setUpPreloading(),v.get(Ri,null,h.XFs.Optional)?.init(),A.resetRootComponentType(g.componentTypes[0]),k.closed||(k.next(),k.unsubscribe())}}const Lu=new h.OlP(Qr?"bootstrap done indicator":"",{factory:()=>new At.x}),Fa=new h.OlP(Qr?"initial navigation":"",{providedIn:"root",factory:()=>1});function nc(){let v=[];return v=Qr?[{provide:h.Xts,multi:!0,useFactory:()=>{const C=(0,h.f3M)(gi);return()=>C.events.subscribe(g=>{console.group?.(`Router Event: ${g.constructor.name}`),console.log(function Oi(v){if(!("type"in v))return`Unknown Router Event: ${v.constructor.name}`;switch(v.type){case 14:return`ActivationEnd(path: '${v.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${v.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${v.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${v.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}', state: ${v.state}, shouldActivate: ${v.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}', state: ${v.state})`;case 2:return`NavigationCancel(id: ${v.id}, url: '${v.url}')`;case 16:return`NavigationSkipped(id: ${v.id}, url: '${v.url}')`;case 1:return`NavigationEnd(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${v.id}, url: '${v.url}', error: ${v.error})`;case 0:return`NavigationStart(id: ${v.id}, url: '${v.url}')`;case 6:return`ResolveEnd(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}', state: ${v.state})`;case 5:return`ResolveStart(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}', state: ${v.state})`;case 10:return`RouteConfigLoadEnd(path: ${v.route.path})`;case 9:return`RouteConfigLoadStart(path: ${v.route.path})`;case 4:return`RoutesRecognized(id: ${v.id}, url: '${v.url}', urlAfterRedirects: '${v.urlAfterRedirects}', state: ${v.state})`;case 15:return`Scroll(anchor: '${v.anchor}', position: '${v.position?`${v.position[0]}, ${v.position[1]}`:null}')`}}(g)),console.log(g),console.groupEnd?.()})}}]:[],Qi(1,v)}const cu=new h.OlP(Qr?"router preloader":"");function rc(v){return Qi(0,[{provide:cu,useExisting:El},{provide:Ca,useExisting:v}])}const di=!1,Ao=new h.OlP(di?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Go=[Tt.Ye,{provide:x,useClass:B},gi,is,{provide:Zs,useFactory:function ra(v){return v.routerState.root},deps:[gi]},Yr,di?{provide:Na,useValue:!0}:[]];function ls(){return new h.PXZ("Router",gi)}let Mo=(()=>{class v{constructor(g){}static forRoot(g,A){return{ngModule:v,providers:[Go,di&&A?.enableTracing?nc().\u0275providers:[],{provide:bs,multi:!0,useValue:g},{provide:Ao,useFactory:Ei,deps:[[gi,new h.FiY,new h.tp0]]},{provide:Fo,useValue:A||{}},A?.useHash?{provide:Tt.S$,useClass:Tt.Do}:{provide:Tt.S$,useClass:Tt.b0},{provide:Ri,useFactory:()=>{const v=(0,h.f3M)(Tt.EM),C=(0,h.f3M)(h.R0b),g=(0,h.f3M)(Fo),A=(0,h.f3M)(no),k=(0,h.f3M)(x);return g.scrollOffset&&v.setOffset(g.scrollOffset),new Ea(k,A,v,C,g)}},A?.preloadingStrategy?rc(A.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:ls},A?.initialNavigation?du(A):[],[{provide:ia,useFactory:ei},{provide:h.tb,multi:!0,useExisting:ia}]]}}static forChild(g){return{ngModule:v,providers:[{provide:bs,multi:!0,useValue:g}]}}}return v.\u0275fac=function(g){return new(g||v)(h.LFG(Ao,8))},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[Bn]}),v})();function Ei(v){if(di&&v)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function du(v){return["disabled"===v.initialNavigation?Qi(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const C=(0,h.f3M)(gi);return()=>{C.setUpLocationChangeListener()}}},{provide:Fa,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Qi(2,[{provide:Fa,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:C=>{const g=C.get(Tt.V_,Promise.resolve());return()=>g.then(()=>new Promise(A=>{const k=C.get(gi),K=C.get(Lu);(function Ya(v,C){v.events.pipe((0,Be.h)(g=>g instanceof Xn||g instanceof $r||g instanceof ii||g instanceof Ai),(0,Ct.U)(g=>g instanceof Xn||g instanceof Ai?Yi.COMPLETE:g instanceof $r&&(0===g.code||1===g.code)?Yi.REDIRECTING:Yi.FAILED),(0,Be.h)(g=>g!==Yi.REDIRECTING),(0,Ve.q)(1)).subscribe(()=>{C()})})(k,()=>{A(!0)}),C.get(no).afterPreactivation=()=>(A(!0),K.closed?(0,G.of)(void 0):K),k.initialNavigation()}))}}]).\u0275providers:[]]}const ia=new h.OlP(di?"Router Initializer":"")},3942:(zt,He,N)=>{N.d(He,{Z:()=>it});var h=N(2090),z=N(4859),G=N(9681),q=N(1877);class ge{constructor(qe,ut){this._delegate=qe,this.firebase=ut,(0,G._addComponent)(qe,new z.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(qe,ut=G._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(qe);return!dt.isInitialized()&&"EXPLICIT"===(null===(et=dt.getComponent())||void 0===et?void 0:et.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:ut})}_removeServiceInstance(qe,ut=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(ut)}_addComponent(qe){(0,G._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,G._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Ee(){const vt=function ae(vt){const qe={},ut={__esModule:!0,initializeApp:function ve(Xe,he={}){const Ue=G.initializeApp(Xe,he);if((0,h.r3)(qe,Ue.name))return qe[Ue.name];const At=new vt(Ue,ut);return qe[Ue.name]=At,At},app:dt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function We(Xe){const he=Xe.name,Ue=he.replace("-compat","");if(G._registerComponent(Xe)&&"PUBLIC"===Xe.type){const At=(Tt=dt())=>{if("function"!=typeof Tt[Ue])throw be.create("invalid-app-argument",{appName:he});return Tt[Ue]()};void 0!==Xe.serviceProps&&(0,h.ZB)(At,Xe.serviceProps),ut[Ue]=At,vt.prototype[Ue]=function(...Tt){return this._getService.bind(this,he).apply(this,Xe.multipleInstances?Tt:[])}}return"PUBLIC"===Xe.type?ut[Ue]:null},removeApp:function et(Xe){delete qe[Xe]},useAsService:function pt(Xe,he){return"serverAuth"===he?null:he},modularAPIs:G}};function dt(Xe){if(!(0,h.r3)(qe,Xe=Xe||G._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Xe});return qe[Xe]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function Qe(){return Object.keys(qe).map(Xe=>qe[Xe])}}),dt.App=vt,ut}(ge);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function qe(ut){(0,h.ZB)(vt,ut)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),vt}(),se=new q.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=X;!function Oe(vt){(0,G.registerVersion)("@firebase/app-compat","0.2.7",vt)}()},9681:(zt,He,N)=>{N.r(He),N.d(He,{FirebaseError:()=>q.ZR,SDK_VERSION:()=>zn,_DEFAULT_ENTRY_NAME:()=>ht,_addComponent:()=>Gt,_addOrOverwriteComponent:()=>Wt,_apps:()=>yt,_clearComponents:()=>Cn,_components:()=>mt,_getProvider:()=>kt,_registerComponent:()=>mn,_removeServiceInstance:()=>Zt,deleteApp:()=>ft,getApp:()=>un,getApps:()=>ce,initializeApp:()=>xe,onLog:()=>St,registerVersion:()=>on,setLogLevel:()=>Fn});var h=N(5861),z=N(4859),G=N(1877),q=N(2090),ge=N(8766);class Ie{constructor(_t){this.container=_t}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function be(Ft){return"VERSION"===Ft.getComponent()?.type}(oe)){const x=oe.getImmediate();return`${x.library}/${x.version}`}return null}).filter(oe=>oe).join(" ")}}const ae="@firebase/app",X=new G.Yd("@firebase/app"),ht="[DEFAULT]",tt={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,mt=new Map;function Gt(Ft,_t){try{Ft.container.addComponent(_t)}catch(oe){X.debug(`Component ${_t.name} failed to register with FirebaseApp ${Ft.name}`,oe)}}function Wt(Ft,_t){Ft.container.addOrOverwriteComponent(_t)}function mn(Ft){const _t=Ft.name;if(mt.has(_t))return X.debug(`There were multiple attempts to register component ${_t}.`),!1;mt.set(_t,Ft);for(const oe of yt.values())Gt(oe,Ft);return!0}function kt(Ft,_t){const oe=Ft.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),Ft.container.getProvider(_t)}function Zt(Ft,_t,oe=ht){kt(Ft,_t).clearInstance(oe)}function Cn(){mt.clear()}const Ln=new q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(_t,oe,x){this._isDeleted=!1,this._options=Object.assign({},_t),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=x,this.container.addComponent(new z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_t){this.checkDestroyed(),this._automaticDataCollectionEnabled=_t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_t){this._isDeleted=_t}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const zn="9.19.1";function xe(Ft,_t={}){let oe=Ft;"object"!=typeof _t&&(_t={name:_t});const x=Object.assign({name:ht,automaticDataCollectionEnabled:!1},_t),B=x.name;if("string"!=typeof B||!B)throw Ln.create("bad-app-name",{appName:String(B)});if(oe||(oe=(0,q.aH)()),!oe)throw Ln.create("no-options");const de=yt.get(B);if(de){if((0,q.vZ)(oe,de.options)&&(0,q.vZ)(x,de.config))return de;throw Ln.create("duplicate-app",{appName:B})}const Te=new z.H0(B);for(const ue of mt.values())Te.addComponent(ue);const ie=new Nn(oe,x,Te);return yt.set(B,ie),ie}function un(Ft=ht){const _t=yt.get(Ft);if(!_t&&Ft===ht)return xe();if(!_t)throw Ln.create("no-app",{appName:Ft});return _t}function ce(){return Array.from(yt.values())}function ft(Ft){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(Ft){const _t=Ft.name;yt.has(_t)&&(yt.delete(_t),yield Promise.all(Ft.container.getProviders().map(oe=>oe.delete())),Ft.isDeleted=!0)})).apply(this,arguments)}function on(Ft,_t,oe){var x;let B=null!==(x=tt[Ft])&&void 0!==x?x:Ft;oe&&(B+=`-${oe}`);const de=B.match(/\s|\//),Te=_t.match(/\s|\//);if(de||Te){const ie=[`Unable to register library "${B}" with version "${_t}":`];return de&&ie.push(`library name "${B}" contains illegal characters (whitespace or "/")`),de&&Te&&ie.push("and"),Te&&ie.push(`version name "${_t}" contains illegal characters (whitespace or "/")`),void X.warn(ie.join(" "))}mn(new z.wA(`${B}-version`,()=>({library:B,version:_t}),"VERSION"))}function St(Ft,_t){if(null!==Ft&&"function"!=typeof Ft)throw Ln.create("invalid-log-argument");(0,G.Am)(Ft,_t)}function Fn(Ft){(0,G.Ub)(Ft)}const Tr="firebase-heartbeat-database",jn=1,Nr="firebase-heartbeat-store";let Jn=null;function Xt(){return Jn||(Jn=(0,ge.X3)(Tr,jn,{upgrade:(Ft,_t)=>{0===_t&&Ft.createObjectStore(Nr)}}).catch(Ft=>{throw Ln.create("idb-open",{originalErrorMessage:Ft.message})})),Jn}function Vt(){return(Vt=(0,h.Z)(function*(Ft){try{return(yield Xt()).transaction(Nr).objectStore(Nr).get(hr(Ft))}catch(_t){if(_t instanceof q.ZR)X.warn(_t.message);else{const oe=Ln.create("idb-get",{originalErrorMessage:_t?.message});X.warn(oe.message)}}})).apply(this,arguments)}function yr(Ft,_t){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(Ft,_t){try{const x=(yield Xt()).transaction(Nr,"readwrite");return yield x.objectStore(Nr).put(_t,hr(Ft)),x.done}catch(oe){if(oe instanceof q.ZR)X.warn(oe.message);else{const x=Ln.create("idb-set",{originalErrorMessage:oe?.message});X.warn(x.message)}}})).apply(this,arguments)}function hr(Ft){return`${Ft.name}!${Ft.options.appId}`}class Ti{constructor(_t){this.container=_t,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new Pn(oe),this._heartbeatsCachePromise=this._storage.read().then(x=>(this._heartbeatsCache=x,x))}triggerHeartbeat(){var _t=this;return(0,h.Z)(function*(){const x=_t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),B=Zn();if(null===_t._heartbeatsCache&&(_t._heartbeatsCache=yield _t._heartbeatsCachePromise),_t._heartbeatsCache.lastSentHeartbeatDate!==B&&!_t._heartbeatsCache.heartbeats.some(de=>de.date===B))return _t._heartbeatsCache.heartbeats.push({date:B,agent:x}),_t._heartbeatsCache.heartbeats=_t._heartbeatsCache.heartbeats.filter(de=>{const Te=new Date(de.date).valueOf();return Date.now()-Te<=2592e6}),_t._storage.overwrite(_t._heartbeatsCache)})()}getHeartbeatsHeader(){var _t=this;return(0,h.Z)(function*(){if(null===_t._heartbeatsCache&&(yield _t._heartbeatsCachePromise),null===_t._heartbeatsCache||0===_t._heartbeatsCache.heartbeats.length)return"";const oe=Zn(),{heartbeatsToSend:x,unsentEntries:B}=function rr(Ft,_t=1024){const oe=[];let x=Ft.slice();for(const B of Ft){const de=oe.find(Te=>Te.agent===B.agent);if(de){if(de.dates.push(B.date),_n(oe)>_t){de.dates.pop();break}}else if(oe.push({agent:B.agent,dates:[B.date]}),_n(oe)>_t){oe.pop();break}x=x.slice(1)}return{heartbeatsToSend:oe,unsentEntries:x}}(_t._heartbeatsCache.heartbeats),de=(0,q.L)(JSON.stringify({version:2,heartbeats:x}));return _t._heartbeatsCache.lastSentHeartbeatDate=oe,B.length>0?(_t._heartbeatsCache.heartbeats=B,yield _t._storage.overwrite(_t._heartbeatsCache)):(_t._heartbeatsCache.heartbeats=[],_t._storage.overwrite(_t._heartbeatsCache)),de})()}}function Zn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(_t){this.app=_t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,q.hl)()&&(0,q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _t=this;return(0,h.Z)(function*(){return(yield _t._canUseIndexedDBPromise)&&(yield function en(Ft){return Vt.apply(this,arguments)}(_t.app))||{heartbeats:[]}})()}overwrite(_t){var oe=this;return(0,h.Z)(function*(){var x;if(yield oe._canUseIndexedDBPromise){const de=yield oe.read();return yr(oe.app,{lastSentHeartbeatDate:null!==(x=_t.lastSentHeartbeatDate)&&void 0!==x?x:de.lastSentHeartbeatDate,heartbeats:_t.heartbeats})}})()}add(_t){var oe=this;return(0,h.Z)(function*(){var x;if(yield oe._canUseIndexedDBPromise){const de=yield oe.read();return yr(oe.app,{lastSentHeartbeatDate:null!==(x=_t.lastSentHeartbeatDate)&&void 0!==x?x:de.lastSentHeartbeatDate,heartbeats:[...de.heartbeats,..._t.heartbeats]})}})()}}function _n(Ft){return(0,q.L)(JSON.stringify({version:2,heartbeats:Ft})).length}!function Sr(Ft){mn(new z.wA("platform-logger",_t=>new Ie(_t),"PRIVATE")),mn(new z.wA("heartbeat",_t=>new Ti(_t),"PRIVATE")),on(ae,"0.9.7",Ft),on(ae,"0.9.7","esm2017"),on("fire-js","")}("")},4859:(zt,He,N)=>{N.d(He,{H0:()=>ae,wA:()=>G});var h=N(5861),z=N(2090);class G{constructor(X,se,le){this.name=X,this.instanceFactory=se,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const q="[DEFAULT]";class ge{constructor(X,se){this.name=X,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const se=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(se)){const le=new z.BH;if(this.instancesDeferred.set(se,le),this.isInitialized(se)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:se});ze&&le.resolve(ze)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(X){var se;const le=this.normalizeInstanceIdentifier(X?.identifier),ze=null!==(se=X?.optional)&&void 0!==se&&se;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(Oe){if(ze)return null;throw Oe}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function be(Ee){return"EAGER"===Ee.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:q})}catch{}for(const[se,le]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(se);try{const Oe=this.getOrInitializeService({instanceIdentifier:ze});le.resolve(Oe)}catch{}}}}clearInstance(X=q){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,h.Z)(function*(){const se=Array.from(X.instances.values());yield Promise.all([...se.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...se.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=q){return this.instances.has(X)}getOptions(X=q){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:se={}}=X,le=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:le,options:se});for(const[Oe,it]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(Oe)&&it.resolve(ze);return ze}onInit(X,se){var le;const ze=this.normalizeInstanceIdentifier(se),Oe=null!==(le=this.onInitCallbacks.get(ze))&&void 0!==le?le:new Set;Oe.add(X),this.onInitCallbacks.set(ze,Oe);const it=this.instances.get(ze);return it&&X(it,ze),()=>{Oe.delete(X)}}invokeOnInitCallbacks(X,se){const le=this.onInitCallbacks.get(se);if(le)for(const ze of le)try{ze(X,se)}catch{}}getOrInitializeService({instanceIdentifier:X,options:se={}}){let le=this.instances.get(X);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=X,Ee===q?void 0:Ee),options:se}),this.instances.set(X,le),this.instancesOptions.set(X,se),this.invokeOnInitCallbacks(le,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,le)}catch{}var Ee;return le||null}normalizeInstanceIdentifier(X=q){return this.component?this.component.multipleInstances?X:q:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const se=this.getProvider(X.name);if(se.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);se.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const se=new ge(X,this);return this.providers.set(X,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(zt,He,N)=>{N.d(He,{Am:()=>Ee,Ub:()=>ae,Yd:()=>be,in:()=>z});const h=[];var z=(()=>{return(X=z||(z={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",z;var X})();const G={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},q=z.INFO,ge={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Ie=(X,se,...le)=>{if(se<X.logLevel)return;const ze=(new Date).toISOString(),Oe=ge[se];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Oe](`[${ze}]  ${X.name}:`,...le)};class be{constructor(se){this.name=se,this._logLevel=q,this._logHandler=Ie,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in z))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?G[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...se),this._logHandler(this,z.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...se),this._logHandler(this,z.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,z.INFO,...se),this._logHandler(this,z.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,z.WARN,...se),this._logHandler(this,z.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...se),this._logHandler(this,z.ERROR,...se)}}function ae(X){h.forEach(se=>{se.setLogLevel(X)})}function Ee(X,se){for(const le of h){let ze=null;se&&se.level&&(ze=G[se.level]),le.userLogHandler=null===X?null:(Oe,it,...vt)=>{const qe=vt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");it>=(ze??Oe.logLevel)&&X({level:z[it].toLowerCase(),message:qe,args:vt,type:Oe.name})}}}},259:(zt,He,N)=>{N.d(He,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp});var h=N(9681);(0,h.registerVersion)("firebase","9.19.1","app")},9260:(zt,He,N)=>{N.d(He,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(zt,He,N)=>{N.r(He);var h=N(5861),z=N(3942),G=N(2090),q=N(9681),ge=N(1877),Ie=N(655),be=N(4859);const Ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},le_EMAIL_SIGNIN="EMAIL_SIGNIN",le_PASSWORD_RESET="PASSWORD_RESET",le_RECOVER_EMAIL="RECOVER_EMAIL",le_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",le_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",le_VERIFY_EMAIL="VERIFY_EMAIL";const it=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},vt=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new ge.Yd("@firebase/auth");function dt(y,...c){et.logLevel<=ge.in.ERROR&&et.error(`Auth (${q.SDK_VERSION}): ${y}`,...c)}function ve(y,...c){throw Xe(y,...c)}function Qe(y,...c){return Xe(y,...c)}function We(y,c,f){const w=Object.assign(Object.assign({},vt()),{[c]:f});return new G.LL("auth","Firebase",w).create(c,{appName:y.name})}function pt(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&ve(y,"argument-error"),We(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(y,...c){if("string"!=typeof y){const f=c[0],w=[...c.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(f,...w)}return qe.create(y,...c)}function he(y,c,...f){if(!y)throw Xe(c,...f)}function Ue(y){const c="INTERNAL ASSERTION FAILED: "+y;throw dt(c),new Error(c)}function At(y,c){y||Ue(c)}const Tt=new Map;function Ct(y){At(y instanceof Function,"Expected a class definition");let c=Tt.get(y);return c?(At(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,Tt.set(y,c),c)}function Ze(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Be(){return"http:"===Ke()||"https:"===Ke()}function Ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class yt{constructor(c,f){this.shortDelay=c,this.longDelay=f,At(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mt(y,c){At(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Gt{static initialize(c,f,w){this.fetchImpl=c,f&&(this.headersImpl=f),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new yt(3e4,6e4);function kt(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function Zt(y,c,f,w){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(y,c,f,w,V={}){return wn(y,V,(0,h.Z)(function*(){let J={},ke={};w&&("GET"===c?ke=w:J={body:JSON.stringify(w)});const gt=(0,G.xO)(Object.assign({key:y.config.apiKey},ke)).slice(1),jt=yield y._getAdditionalHeaders();return jt["Content-Type"]="application/json",y.languageCode&&(jt["X-Firebase-Locale"]=y.languageCode),Gt.fetch()(xe(y,y.config.apiHost,f,gt),Object.assign({method:c,headers:jt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function wn(y,c,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(y,c,f){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Wt),c);try{const V=new un(y),J=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const ke=yield J.json();if("needConfirmation"in ke)throw ce(y,"account-exists-with-different-credential",ke);if(J.ok&&!("errorMessage"in ke))return ke;{const gt=J.ok?ke.errorMessage:ke.error.message,[jt,hn]=gt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw ce(y,"credential-already-in-use",ke);if("EMAIL_EXISTS"===jt)throw ce(y,"email-already-in-use",ke);if("USER_DISABLED"===jt)throw ce(y,"user-disabled",ke);const xn=w[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(hn)throw We(y,xn,hn);ve(y,xn)}}catch(V){if(V instanceof G.ZR)throw V;ve(y,"network-request-failed",{message:String(V)})}})).apply(this,arguments)}function Nn(y,c,f,w){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(y,c,f,w,V={}){const J=yield Zt(y,c,f,w,V);return"mfaPendingCredential"in J&&ve(y,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function xe(y,c,f,w){const V=`${c}${f}?${w}`;return y.config.emulator?mt(y.config,V):`${y.config.apiScheme}://${V}`}class un{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,w)=>{this.timer=setTimeout(()=>w(Qe(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ce(y,c,f){const w={appName:y.name};f.email&&(w.email=f.email),f.phoneNumber&&(w.phoneNumber=f.phoneNumber);const V=Qe(y,c,w);return V.customData._tokenResponse=f,V}function Ut(){return(Ut=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function jn(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Xt(){return(Xt=(0,h.Z)(function*(y,c=!1){const f=(0,G.m9)(y),w=yield f.getIdToken(c),V=Vt(w);he(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const J="object"==typeof V.firebase?V.firebase:void 0,ke=J?.sign_in_provider;return{claims:V,token:w,authTime:jn(en(V.auth_time)),issuedAtTime:jn(en(V.iat)),expirationTime:jn(en(V.exp)),signInProvider:ke||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function en(y){return 1e3*Number(y)}function Vt(y){const[c,f,w]=y.split(".");if(void 0===c||void 0===f||void 0===w)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,G.tV)(f);return V?JSON.parse(V):(dt("Failed to decode base64 JWT payload"),null)}catch(V){return dt("Caught error parsing JWT payload as JSON",V?.toString()),null}}function Wn(y,c){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(w){throw w instanceof G.ZR&&function _r({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}class vr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const w=this.getInterval(c);this.timerId=setTimeout((0,h.Z)(function*(){yield f.iteration()}),w)}iteration(){var c=this;return(0,h.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&c.schedule(!0))}c.schedule()})()}}class Ti{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zn(y){return rr.apply(this,arguments)}function rr(){return rr=(0,h.Z)(function*(y){var c;const f=y.auth,w=yield y.getIdToken(),V=yield Wn(y,function Fn(y,c){return Tr.apply(this,arguments)}(f,{idToken:w}));he(V?.users.length,f,"internal-error");const J=V.users[0];y._notifyReloadListener(J);const ke=null!==(c=J.providerUserInfo)&&void 0!==c&&c.length?function Ft(y){return y.map(c=>{var{providerId:f}=c,w=(0,Ie._T)(c,["providerId"]);return{providerId:f,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(J.providerUserInfo):[],gt=function Sr(y,c){return[...y.filter(w=>!c.some(V=>V.providerId===w.providerId)),...c]}(y.providerData,ke),xn=!!y.isAnonymous&&!(y.email&&J.passwordHash||gt?.length),Tn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:gt,metadata:new Ti(J.createdAt,J.lastLoginAt),isAnonymous:xn};Object.assign(y,Tn)}),rr.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(y){const c=(0,G.m9)(y);yield Zn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function oe(){return(oe=(0,h.Z)(function*(y,c){const f=yield wn(y,{},(0,h.Z)(function*(){const w=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:V,apiKey:J}=y.config,ke=xe(y,V,"/v1/token",`key=${J}`),gt=yield y._getAdditionalHeaders();return gt["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(ke,{method:"POST",headers:gt,body:w})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class x{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){he(c.idToken,"internal-error"),he(typeof c.idToken<"u","internal-error"),he(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function yr(y){const c=Vt(y);return he(c,"internal-error"),he(typeof c.exp<"u","internal-error"),he(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var w=this;return(0,h.Z)(function*(){return he(!w.accessToken||w.refreshToken,c,"user-token-expired"),f||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(c,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var w=this;return(0,h.Z)(function*(){const{accessToken:V,refreshToken:J,expiresIn:ke}=yield function _t(y,c){return oe.apply(this,arguments)}(c,f);w.updateTokensAndExpiration(V,J,Number(ke))})()}updateTokensAndExpiration(c,f,w){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(c,f){const{refreshToken:w,accessToken:V,expirationTime:J}=f,ke=new x;return w&&(he("string"==typeof w,"internal-error",{appName:c}),ke.refreshToken=w),V&&(he("string"==typeof V,"internal-error",{appName:c}),ke.accessToken=V),J&&(he("number"==typeof J,"internal-error",{appName:c}),ke.expirationTime=J),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new x,this.toJSON())}_performRefresh(){return Ue("not implemented")}}function B(y,c){he("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class de{constructor(c){var{uid:f,auth:w,stsTokenManager:V}=c,J=(0,Ie._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=w,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Ti(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,h.Z)(function*(){const w=yield Wn(f,f.stsTokenManager.getToken(f.auth,c));return he(w,f.auth,"internal-error"),f.accessToken!==w&&(f.accessToken=w,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),w})()}getIdTokenResult(c){return function Jn(y){return Xt.apply(this,arguments)}(this,c)}reload(){return function Pn(y){return _n.apply(this,arguments)}(this)}_assign(c){this!==c&&(he(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const f=new de(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(c){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var w=this;return(0,h.Z)(function*(){let V=!1;c.idToken&&c.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(c),V=!0),f&&(yield Zn(w)),yield w.auth._persistUserIfCurrent(w),V&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var c=this;return(0,h.Z)(function*(){const f=yield c.getIdToken();return yield Wn(c,function ft(y,c){return Ut.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var w,V,J,ke,gt,jt,hn,xn;const Tn=null!==(w=f.displayName)&&void 0!==w?w:void 0,Ji=null!==(V=f.email)&&void 0!==V?V:void 0,Vo=null!==(J=f.phoneNumber)&&void 0!==J?J:void 0,tl=null!==(ke=f.photoURL)&&void 0!==ke?ke:void 0,Vf=null!==(gt=f.tenantId)&&void 0!==gt?gt:void 0,Sh=null!==(jt=f._redirectEventId)&&void 0!==jt?jt:void 0,xl=null!==(hn=f.createdAt)&&void 0!==hn?hn:void 0,nl=null!==(xn=f.lastLoginAt)&&void 0!==xn?xn:void 0,{uid:Pl,emailVerified:Ah,isAnonymous:wd,providerData:Rl,stsTokenManager:Mh}=f;he(Pl&&Mh,c,"internal-error");const Oh=x.fromJSON(this.name,Mh);he("string"==typeof Pl,c,"internal-error"),B(Tn,c.name),B(Ji,c.name),he("boolean"==typeof Ah,c,"internal-error"),he("boolean"==typeof wd,c,"internal-error"),B(Vo,c.name),B(tl,c.name),B(Vf,c.name),B(Sh,c.name),B(xl,c.name),B(nl,c.name);const Cd=new de({uid:Pl,auth:c,email:Ji,emailVerified:Ah,displayName:Tn,isAnonymous:wd,photoURL:tl,phoneNumber:Vo,tenantId:Vf,stsTokenManager:Oh,createdAt:xl,lastLoginAt:nl});return Rl&&Array.isArray(Rl)&&(Cd.providerData=Rl.map(Bf=>Object.assign({},Bf))),Sh&&(Cd._redirectEventId=Sh),Cd}static _fromIdTokenResponse(c,f,w=!1){return(0,h.Z)(function*(){const V=new x;V.updateFromServerResponse(f);const J=new de({uid:f.localId,auth:c,stsTokenManager:V,isAnonymous:w});return yield Zn(J),J})()}}const ie=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(f,w){var V=this;return(0,h.Z)(function*(){V.storage[f]=w})()}_get(f){var w=this;return(0,h.Z)(function*(){const V=w.storage[f];return void 0===V?null:V})()}_remove(f){var w=this;return(0,h.Z)(function*(){delete w.storage[f]})()}_addListener(f,w){}_removeListener(f,w){}}return y.type="NONE",y})();function ue(y,c,f){return`firebase:${y}:${c}:${f}`}class we{constructor(c,f,w){this.persistence=c,this.auth=f,this.userKey=w;const{config:V,name:J}=this.auth;this.fullUserKey=ue(this.userKey,V.apiKey,J),this.fullPersistenceKey=ue("persistence",V.apiKey,J),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,h.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?de._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,h.Z)(function*(){if(f.persistence===c)return;const w=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,w?f.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,w="authUser"){return(0,h.Z)(function*(){if(!f.length)return new we(Ct(ie),c,w);const V=(yield Promise.all(f.map(function(){var hn=(0,h.Z)(function*(xn){if(yield xn._isAvailable())return xn});return function(xn){return hn.apply(this,arguments)}}()))).filter(hn=>hn);let J=V[0]||Ct(ie);const ke=ue(w,c.config.apiKey,c.name);let gt=null;for(const hn of f)try{const xn=yield hn._get(ke);if(xn){const Tn=de._fromJSON(c,xn);hn!==J&&(gt=Tn),J=hn;break}}catch{}const jt=V.filter(hn=>hn._shouldAllowMigration);return J._shouldAllowMigration&&jt.length?(J=jt[0],gt&&(yield J._set(ke,gt.toJSON())),yield Promise.all(f.map(function(){var hn=(0,h.Z)(function*(xn){if(xn!==J)try{yield xn._remove(ke)}catch{}});return function(xn){return hn.apply(this,arguments)}}())),new we(J,c,w)):new we(J,c,w)})()}}function $e(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ce(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Pe(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Se(c))return"Blackberry";if(at(c))return"Webos";if(xt(c))return"Safari";if((c.includes("chrome/")||_e(c))&&!c.includes("edge/"))return"Chrome";if(ne(c))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Pe(y=(0,G.z$)()){return/firefox\//i.test(y)}function xt(y=(0,G.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function _e(y=(0,G.z$)()){return/crios\//i.test(y)}function Ce(y=(0,G.z$)()){return/iemobile/i.test(y)}function ne(y=(0,G.z$)()){return/android/i.test(y)}function Se(y=(0,G.z$)()){return/blackberry/i.test(y)}function at(y=(0,G.z$)()){return/webos/i.test(y)}function wt(y=(0,G.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Cr(y=(0,G.z$)()){return wt(y)||ne(y)||at(y)||Se(y)||/windows phone/i.test(y)||Ce(y)}function ai(y,c=[]){let f;switch(y){case"Browser":f=$e((0,G.z$)());break;case"Worker":f=`${$e((0,G.z$)())}-${y}`;break;default:f=y}const w=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${q.SDK_VERSION}/${w}`}class gr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const w=J=>new Promise((ke,gt)=>{try{ke(c(J))}catch(jt){gt(jt)}});w.onAbort=f,this.queue.push(w);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,h.Z)(function*(){if(f.auth.currentUser===c)return;const w=[];try{for(const V of f.queue)yield V(c),V.onAbort&&w.push(V.onAbort)}catch(V){w.reverse();for(const J of w)try{J()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:V?.message})}})()}}class qr{constructor(c,f,w){this.app=c,this.heartbeatServiceProvider=f,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(c,f){var w=this;return f&&(this._popupRedirectResolver=Ct(f)),this._initializationPromise=this.queue((0,h.Z)(function*(){var V,J;if(!w._deleted&&(w.persistenceManager=yield we.create(w,c),!w._deleted)){if(null!==(V=w._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(f),w.lastNotifiedUid=(null===(J=w.currentUser)||void 0===J?void 0:J.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,h.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,h.Z)(function*(){var w;const V=yield f.assertedPersistence.getCurrentUser();let J=V,ke=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const gt=null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId,jt=J?._redirectEventId,hn=yield f.tryRedirectSignIn(c);(!gt||gt===jt)&&hn?.user&&(J=hn.user,ke=!0)}if(!J)return f.directlySetCurrentUser(null);if(!J._redirectEventId){if(ke)try{yield f.beforeStateQueue.runMiddleware(J)}catch(gt){J=V,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(gt))}return J?f.reloadAndSetCurrentUserOrClear(J):f.directlySetCurrentUser(null)}return he(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===J._redirectEventId?f.directlySetCurrentUser(J):f.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(c){var f=this;return(0,h.Z)(function*(){let w=null;try{w=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,h.Z)(function*(){try{yield Zn(c)}catch(w){if("auth/network-request-failed"!==w?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function tt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,h.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,h.Z)(function*(){const w=c?(0,G.m9)(c):null;return w&&he(w.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(w&&w._clone(f))})()}_updateCurrentUser(c,f=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return c&&he(w.tenantId===c.tenantId,w,"tenant-id-mismatch"),f||(yield w.beforeStateQueue.runMiddleware(c)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(c),w.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,h.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,h.Z)(function*(){yield f.assertedPersistence.setPersistence(Ct(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,w){return this.registerStateListener(this.authStateSubscription,c,f,w)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,w){return this.registerStateListener(this.idTokenSubscription,c,f,w)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var w=this;return(0,h.Z)(function*(){const V=yield w.getOrInitRedirectPersistenceManager(f);return null===c?V.removeCurrentUser():V.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,h.Z)(function*(){if(!f.redirectPersistenceManager){const w=c&&Ct(c)||f._popupRedirectResolver;he(w,f,"argument-error"),f.redirectPersistenceManager=yield we.create(f,[Ct(w._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,h.Z)(function*(){var w,V;return f._isInitialized&&(yield f.queue((0,h.Z)(function*(){}))),(null===(w=f._currentUser)||void 0===w?void 0:w._redirectEventId)===c?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,h.Z)(function*(){if(c===f.currentUser)return f.queue((0,h.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,w,V){if(this._deleted)return()=>{};const J="function"==typeof f?f:f.next.bind(f),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return he(ke,this,"internal-error"),ke.then(()=>J(this.currentUser)),"function"==typeof f?c.addObserver(f,w,V):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,h.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ai(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,h.Z)(function*(){var f;const w={"X-Client-Version":c.clientVersion};c.app.options.appId&&(w["X-Firebase-gmpid"]=c.app.options.appId);const V=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(w["X-Firebase-Client"]=V),w})()}}function Yn(y){return(0,G.m9)(y)}class Us{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vn(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function Er(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class Et{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Ue("not implemented")}_getIdTokenResponse(c){return Ue("not implemented")}_linkToIdToken(c,f){return Ue("not implemented")}_getReauthenticationResolver(c){return Ue("not implemented")}}function tn(y,c){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:resetPassword",kt(y,c))})).apply(this,arguments)}function an(y,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:update",kt(y,c))})).apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithPassword",kt(y,c))})).apply(this,arguments)}function Fe(y,c){return Me.apply(this,arguments)}function Me(){return(Me=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:sendOobCode",kt(y,c))})).apply(this,arguments)}function lt(){return(lt=(0,h.Z)(function*(y,c){return Fe(y,c)})).apply(this,arguments)}function rn(){return(rn=(0,h.Z)(function*(y,c){return Fe(y,c)})).apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(y,c){return Fe(y,c)})).apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(y,c){return Fe(y,c)})).apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,c))})).apply(this,arguments)}class ii extends Et{constructor(c,f,w,V=null){super("password",w),this._email=c,this._password=f,this._tenantId=V}static _fromEmailAndPassword(c,f){return new ii(c,f,"password")}static _fromEmailAndCode(c,f,w=null){return new ii(c,f,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,h.Z)(function*(){switch(f.signInMethod){case"password":return function ir(y,c){return br.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function mi(y,c){return Xn.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:ve(c,"internal-error")}})()}_linkToIdToken(c,f){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return an(c,{idToken:f,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function $r(y,c){return Ai.apply(this,arguments)}(c,{idToken:f,email:w._email,oobCode:w._password});default:ve(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Mi(y,c){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithIdp",kt(y,c))})).apply(this,arguments)}class ni extends Et{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new ni(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):ve("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:V}=f,J=(0,Ie._T)(f,["providerId","signInMethod"]);if(!w||!V)return null;const ke=new ni(w,V);return ke.idToken=J.idToken||void 0,ke.accessToken=J.accessToken||void 0,ke.secret=J.secret,ke.nonce=J.nonce,ke.pendingToken=J.pendingToken||null,ke}_getIdTokenResponse(c){return Mi(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,Mi(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Mi(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function Vs(){return(Vs=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:sendVerificationCode",kt(y,c))})).apply(this,arguments)}function Kr(){return(Kr=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c))})).apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(y,c){const f=yield Nn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,c));if(f.temporaryProof)throw ce(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const $o={USER_NOT_FOUND:"user-not-found"};function Oi(){return(Oi=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),$o)})).apply(this,arguments)}class es extends Et{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new es({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new es({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function ki(y,c){return Kr.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function fs(y,c){return ui.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function li(y,c){return Oi.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:w,verificationCode:V}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:w,code:V}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:J}=c;return w||f||V||J?new es({verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:J}):null}}class si{constructor(c){var f,w,V,J,ke,gt;const jt=(0,G.zd)((0,G.pd)(c)),hn=null!==(f=jt.apiKey)&&void 0!==f?f:null,xn=null!==(w=jt.oobCode)&&void 0!==w?w:null,Tn=function ts(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=jt.mode)&&void 0!==V?V:null);he(hn&&xn&&Tn,"argument-error"),this.apiKey=hn,this.operation=Tn,this.code=xn,this.continueUrl=null!==(J=jt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(ke=jt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(gt=jt.tenantId)&&void 0!==gt?gt:null}static parseLink(c){const f=function yi(y){const c=(0,G.zd)((0,G.pd)(y)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,w=(0,G.zd)((0,G.pd)(y)).deep_link_id;return(w?(0,G.zd)((0,G.pd)(w)).link:null)||w||f||c||y}(c);try{return new si(f)}catch{return null}}}let Bs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,w){return ii._fromEmailAndPassword(f,w)}static credentialWithLink(f,w){const V=si.parseLink(w);return he(V,"argument-error"),ii._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class sr{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Jr extends sr{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class xi extends Jr{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return he("providerId"in f&&"signInMethod"in f,"argument-error"),ni._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return he(c.idToken||c.accessToken,"argument-error"),ni._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return xi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return xi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:w,oauthTokenSecret:V,pendingToken:J,nonce:ke,providerId:gt}=c;if(!w&&!V&&!f&&!J||!gt)return null;try{return new xi(gt)._credential({idToken:f,accessToken:w,nonce:ke,pendingToken:J})}catch{return null}}}let Vi=(()=>{class y extends Jr{constructor(){super("facebook.com")}static credential(f){return ni._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ko=(()=>{class y extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,w){return ni._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:w,oauthAccessToken:V}=f;if(!w&&!V)return null;try{return y.credential(w,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ks=(()=>{class y extends Jr{constructor(){super("github.com")}static credential(f){return ni._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ns extends Et{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Mi(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,Mi(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Mi(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:V,pendingToken:J}=f;return w&&V&&J&&w===V?new ns(w,J):null}static _create(c,f){return new ns(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bi extends sr{constructor(c){he(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Bi.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Bi.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=ns.fromJSON(c);return he(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:w}=c;if(!f||!w)return null;try{return ns._create(w,f)}catch{return null}}}let Ys=(()=>{class y extends Jr{constructor(){super("twitter.com")}static credential(f,w){return ni._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:w,oauthTokenSecret:V}=f;if(!w||!V)return null;try{return y.credential(w,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Wi(y,c){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signUp",kt(y,c))})).apply(this,arguments)}class _i{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,w,V=!1){return(0,h.Z)(function*(){const J=yield de._fromIdTokenResponse(c,w,V),ke=Ms(w);return new _i({user:J,providerId:ke,_tokenResponse:w,operationType:f})})()}static _forOperation(c,f,w){return(0,h.Z)(function*(){yield c._updateTokensIfNecessary(w,!0);const V=Ms(w);return new _i({user:c,providerId:V,_tokenResponse:w,operationType:f})})()}}function Ms(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Js(){return(Js=(0,h.Z)(function*(y){var c;const f=Yn(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new _i({user:f.currentUser,providerId:null,operationType:"signIn"});const w=yield Wi(f,{returnSecureToken:!0}),V=yield _i._fromIdTokenResponse(f,"signIn",w,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class Eo extends G.ZR{constructor(c,f,w,V){var J;super(f.code,f.message),this.operationType=w,this.user=V,Object.setPrototypeOf(this,Eo.prototype),this.customData={appName:c.name,tenantId:null!==(J=c.tenantId)&&void 0!==J?J:void 0,_serverResponse:f.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(c,f,w,V){return new Eo(c,f,w,V)}}function Jo(y,c,f,w){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?Eo._fromErrorAndOperation(y,J,c,w):J})}function vi(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Os(){return Os=(0,h.Z)(function*(y,c){const f=(0,G.m9)(y);yield $i(!0,f,c);const{providerUserInfo:w}=yield function on(y,c){return St.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),V=vi(w||[]);return f.providerData=f.providerData.filter(J=>V.has(J.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Os.apply(this,arguments)}function rs(y,c){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(y,c,f=!1){const w=yield Wn(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return _i._forOperation(y,"link",w)})).apply(this,arguments)}function $i(y,c,f){return is.apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(y,c,f){yield Zn(c);const V=!1===y?"provider-already-linked":"no-such-provider";he(vi(c.providerData).has(f)===y,c.auth,V)})).apply(this,arguments)}function ys(y,c){return _s.apply(this,arguments)}function _s(){return(_s=(0,h.Z)(function*(y,c,f=!1){const{auth:w}=y,V="reauthenticate";try{const J=yield Wn(y,Jo(w,V,c,y),f);he(J.idToken,w,"internal-error");const ke=Vt(J.idToken);he(ke,w,"internal-error");const{sub:gt}=ke;return he(y.uid===gt,w,"user-mismatch"),_i._forOperation(y,V,J)}catch(J){throw"auth/user-not-found"===J?.code&&ve(w,"user-mismatch"),J}})).apply(this,arguments)}function ss(y,c){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(y,c,f=!1){const w="signIn",V=yield Jo(y,w,c),J=yield _i._fromIdTokenResponse(y,w,V);return f||(yield y._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Bn(y,c){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y,c){return ss(Yn(y),c)})).apply(this,arguments)}function vs(y,c){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(y,c){const f=(0,G.m9)(y);return yield $i(!1,f,c.providerId),rs(f,c)})).apply(this,arguments)}function lo(y,c){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(y,c){return ys((0,G.m9)(y),c)})).apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(y,c){return Nn(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,c))})).apply(this,arguments)}function qi(){return qi=(0,h.Z)(function*(y,c){const f=Yn(y),w=yield function zr(y,c){return co.apply(this,arguments)}(f,{token:c,returnSecureToken:!0}),V=yield _i._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(V.user),V}),qi.apply(this,arguments)}class Zr{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Pi._fromServerResponse(c,f):"totpInfo"in f?ws._fromServerResponse(c,f):ve(c,"internal-error")}}class Pi extends Zr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Pi(f)}}class ws extends Zr{constructor(c){super("totp",c)}static _fromServerResponse(c,f){return new ws(f)}}function Cs(y,c,f){var w;he((null===(w=f.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),he(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(he(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(he(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function xs(){return xs=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y),V={requestType:"PASSWORD_RESET",email:c};f&&Cs(w,V,f),yield function Lt(y,c){return rn.apply(this,arguments)}(w,V)}),xs.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(y,c,f){yield tn((0,G.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function ho(){return ho=(0,h.Z)(function*(y,c){yield function Nt(y,c){return In.apply(this,arguments)}((0,G.m9)(y),{oobCode:c})}),ho.apply(this,arguments)}function $s(y,c){return U.apply(this,arguments)}function U(){return(U=(0,h.Z)(function*(y,c){const f=(0,G.m9)(y),w=yield tn(f,{oobCode:c}),V=w.requestType;switch(he(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(w.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(w.mfaInfo,f,"internal-error");default:he(w.email,f,"internal-error")}let J=null;return w.mfaInfo&&(J=Zr._fromServerResponse(Yn(f),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:J},operation:V}})).apply(this,arguments)}function re(){return(re=(0,h.Z)(function*(y,c){const{data:f}=yield $s((0,G.m9)(y),c);return f.email})).apply(this,arguments)}function D(){return(D=(0,h.Z)(function*(y,c,f){const w=Yn(y),V=yield Wi(w,{returnSecureToken:!0,email:c,password:f}),J=yield _i._fromIdTokenResponse(w,"signIn",V);return yield w._updateCurrentUser(J.user),J})).apply(this,arguments)}function W(){return W=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y),V={requestType:"EMAIL_SIGNIN",email:c};he(f.handleCodeInApp,w,"argument-error"),f&&Cs(w,V,f),yield function $t(y,c){return lr.apply(this,arguments)}(w,V)}),W.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y),V=Bs.credentialWithLink(c,f||Ze());return he(V._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Bn(w,V)})).apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:createAuthUri",kt(y,c))})).apply(this,arguments)}function ar(){return ar=(0,h.Z)(function*(y,c){const w={identifier:c,continueUri:Be()?Ze():"http://localhost"},{signinMethods:V}=yield function Kn(y,c){return $n.apply(this,arguments)}((0,G.m9)(y),w);return V||[]}),ar.apply(this,arguments)}function Fr(){return Fr=(0,h.Z)(function*(y,c){const f=(0,G.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Cs(f.auth,V,c);const{email:J}=yield function je(y,c){return lt.apply(this,arguments)}(f.auth,V);J!==y.email&&(yield y.reload())}),Fr.apply(this,arguments)}function ur(){return ur=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Cs(w.auth,J,f);const{email:ke}=yield function kn(y,c){return xr.apply(this,arguments)}(w.auth,J);ke!==y.email&&(yield y.reload())}),ur.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(y,c){return Zt(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function hi(){return hi=(0,h.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const w=(0,G.m9)(y),J={idToken:yield w.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},ke=yield Wn(w,function Ir(y,c){return Xr.apply(this,arguments)}(w.auth,J));w.displayName=ke.displayName||null,w.photoURL=ke.photoUrl||null;const gt=w.providerData.find(({providerId:jt})=>"password"===jt);gt&&(gt.displayName=w.displayName,gt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ke)}),hi.apply(this,arguments)}function bo(y,c,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(y,c,f){const{auth:w}=y,J={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(J.email=c),f&&(J.password=f);const ke=yield Wn(y,an(w,J));yield y._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class Io{constructor(c,f,w={}){this.isNewUser=c,this.providerId=f,this.profile=w}}class Xo extends Io{constructor(c,f,w,V){super(c,f,w),this.username=V}}class fo extends Io{constructor(c,f){super(c,"facebook.com",f)}}class Ru extends Xo{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Pa extends Io{constructor(c,f){super(c,"google.com",f)}}class Ra extends Xo{constructor(c,f,w){super(c,"twitter.com",f,w)}}function ku(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Hs(y){var c,f;if(!y)return null;const{providerId:w}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},J=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const ke=null===(f=null===(c=Vt(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(ke)return new Io(J,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!w)return null;switch(w){case"facebook.com":return new fo(J,V);case"github.com":return new Ru(J,V);case"google.com":return new Pa(J,V);case"twitter.com":return new Ra(J,V,y.screenName||null);case"custom":case"anonymous":return new Io(J,null);default:return new Io(J,w,V)}}(f)}class Rr{constructor(c,f,w){this.type=c,this.credential=f,this.auth=w}static _fromIdtoken(c,f){return new Rr("enroll",c,f)}static _fromMfaPendingCredential(c){return new Rr("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,w;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Rr._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(w=c.multiFactorSession)&&void 0!==w&&w.idToken)return Rr._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Lr{constructor(c,f,w){this.session=c,this.hints=f,this.signInResolver=w}static _fromError(c,f){const w=Yn(c),V=f.customData._serverResponse,J=(V.mfaInfo||[]).map(gt=>Zr._fromServerResponse(w,gt));he(V.mfaPendingCredential,w,"internal-error");const ke=Rr._fromMfaPendingCredential(V.mfaPendingCredential);return new Lr(ke,J,function(){var gt=(0,h.Z)(function*(jt){const hn=yield jt._process(w,ke);delete V.mfaInfo,delete V.mfaPendingCredential;const xn=Object.assign(Object.assign({},V),{idToken:hn.idToken,refreshToken:hn.refreshToken});switch(f.operationType){case"signIn":const Tn=yield _i._fromIdTokenResponse(w,f.operationType,xn);return yield w._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return he(f.user,w,"internal-error"),_i._forOperation(f.user,f.operationType,xn);default:ve(w,"internal-error")}});return function(jt){return gt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,h.Z)(function*(){return f.signInResolver(c)})()}}class b{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(w=>Zr._fromServerResponse(c.auth,w)))})}static _fromUser(c){return new b(c)}getSession(){var c=this;return(0,h.Z)(function*(){return Rr._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var w=this;return(0,h.Z)(function*(){const V=c,J=yield w.getSession(),ke=yield Wn(w.user,V._process(w.user.auth,J,f));return yield w.user._updateTokensIfNecessary(ke),w.user.reload()})()}unenroll(c){var f=this;return(0,h.Z)(function*(){const w="string"==typeof c?c:c.uid,V=yield f.user.getIdToken();try{const J=yield Wn(f.user,function st(y,c){return Zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,c))}(f.user.auth,{idToken:V,mfaEnrollmentId:w}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ke})=>ke!==w),yield f.user._updateTokensIfNecessary(J),yield f.user.reload()}catch(J){throw J}})()}}const $=new WeakMap,Y="__sak";class ye{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Y,"1"),this.storage.removeItem(Y),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const mr=(()=>{class y extends ye{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,w)=>this.onStorageEvent(f,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nt(){const y=(0,G.z$)();return xt(y)||wt(y)}()&&function Br(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cr(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const w of Object.keys(this.listeners)){const V=this.storage.getItem(w),J=this.localCache[w];V!==J&&f(w,J,V)}}onStorageEvent(f,w=!1){if(!f.key)return void this.forAllChangedKeys((gt,jt,hn)=>{this.notifyListeners(gt,hn)});const V=f.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const gt=this.storage.getItem(V);if(f.newValue!==gt)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!w)return}const J=()=>{const gt=this.storage.getItem(V);!w&&this.localCache[V]===gt||this.notifyListeners(V,gt)},ke=this.storage.getItem(V);!function pr(){return(0,G.w1)()&&10===document.documentMode}()||ke===f.newValue||f.newValue===f.oldValue?J():setTimeout(J,10)}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const J of Array.from(V))J(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,w,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:w,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,w){var V=()=>super._set,J=this;return(0,h.Z)(function*(){yield V().call(J,f,w),J.localCache[f]=JSON.stringify(w)})()}_get(f){var w=()=>super._get,V=this;return(0,h.Z)(function*(){const J=yield w().call(V,f);return V.localCache[f]=JSON.stringify(J),J})()}_remove(f){var w=()=>super._remove,V=this;return(0,h.Z)(function*(){yield w().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),qn=(()=>{class y extends ye{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,w){}_removeListener(f,w){}}return y.type="SESSION",y})();let ln=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const w=this.receivers.find(J=>J.isListeningto(f));if(w)return w;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var w=this;return(0,h.Z)(function*(){const V=f,{eventId:J,eventType:ke,data:gt}=V.data,jt=w.handlersMap[ke];if(!jt?.size)return;V.ports[0].postMessage({status:"ack",eventId:J,eventType:ke});const hn=Array.from(jt).map(function(){var Tn=(0,h.Z)(function*(Ji){return Ji(V.origin,gt)});return function(Ji){return Tn.apply(this,arguments)}}()),xn=yield function wi(y){return Promise.all(y.map(function(){var c=(0,h.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(w){return{fulfilled:!1,reason:w}}});return function(f){return c.apply(this,arguments)}}()))}(hn);V.ports[0].postMessage({status:"done",eventId:J,eventType:ke,response:xn})})()}_subscribe(f,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(w)}_unsubscribe(f,w){this.handlersMap[f]&&w&&this.handlersMap[f].delete(w),(!w||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ar(y="",c=10){let f="";for(let w=0;w<c;w++)f+=Math.floor(10*Math.random());return y+f}class po{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,w=50){var V=this;return(0,h.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let ke,gt;return new Promise((jt,hn)=>{const xn=Ar("",20);J.port1.start();const Tn=setTimeout(()=>{hn(new Error("unsupported_event"))},w);gt={messageChannel:J,onMessage(Ji){const Vo=Ji;if(Vo.data.eventId===xn)switch(Vo.data.status){case"ack":clearTimeout(Tn),ke=setTimeout(()=>{hn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),jt(Vo.data.response);break;default:clearTimeout(Tn),clearTimeout(ke),hn(new Error("invalid_response"))}}},V.handlers.add(gt),J.port1.addEventListener("message",gt.onMessage),V.target.postMessage({eventType:c,eventId:xn,data:f},[J.port2])}).finally(()=>{gt&&V.removeMessageHandler(gt)})})()}}function On(){return window}function Ci(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function bs(){return(bs=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ho="firebaseLocalStorageDb",go=1,no="firebaseLocalStorage",pa="fbase_key";class To{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ga(y,c){return y.transaction([no],c?"readwrite":"readonly").objectStore(no)}function ma(){const y=indexedDB.open(Ho,go);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(no,{keyPath:pa})}catch(V){f(V)}}),y.addEventListener("success",(0,h.Z)(function*(){const w=y.result;w.objectStoreNames.contains(no)?c(w):(w.close(),yield function Ps(){const y=indexedDB.deleteDatabase(Ho);return new To(y).toPromise()}(),c(yield ma()))}))})}function ya(y,c,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(y,c,f){const w=ga(y,!0).put({[pa]:c,value:f});return new To(w).toPromise()})).apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(y,c){const f=ga(y,!1).get(c),w=yield new To(f).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function _a(y,c){const f=ga(y,!0).delete(c);return new To(f).toPromise()}const ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,h.Z)(function*(){return f.db||(f.db=yield ma()),f.db})()}_withRetries(f){var w=this;return(0,h.Z)(function*(){let V=0;for(;;)try{const J=yield w._openDb();return yield f(J)}catch(J){if(V++>3)throw J;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,h.Z)(function*(){return Ci()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,h.Z)(function*(){f.receiver=ln._getInstance(function qt(){return Ci()?self:null}()),f.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(V,J){return{keyProcessed:(yield f._poll()).includes(J.key)}});return function(V,J){return w.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(V,J){return["keyChanged"]});return function(V,J){return w.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,h.Z)(function*(){var w,V;if(f.activeServiceWorker=yield function tr(){return bs.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new po(f.activeServiceWorker);const J=yield f.sender._send("ping",{},800);J&&null!==(w=J[0])&&void 0!==w&&w.fulfilled&&null!==(V=J[0])&&void 0!==V&&V.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Yr(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:f},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ma();return yield ya(f,Y,"1"),yield _a(f,Y),!0}catch{}return!1})()}_withPendingWrite(f){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield f()}finally{w.pendingWrites--}})()}_set(f,w){var V=this;return(0,h.Z)(function*(){return V._withPendingWrite((0,h.Z)(function*(){return yield V._withRetries(J=>ya(J,f,w)),V.localCache[f]=w,V.notifyServiceWorker(f)}))})()}_get(f){var w=this;return(0,h.Z)(function*(){const V=yield w._withRetries(J=>function Fo(y,c){return ta.apply(this,arguments)}(J,f));return w.localCache[f]=V,V})()}_remove(f){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(V=>_a(V,f)),delete w.localCache[f],w.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,h.Z)(function*(){const w=yield f._withRetries(ke=>{const gt=ga(ke,!1).getAll();return new To(gt).toPromise()});if(!w)return[];if(0!==f.pendingWrites)return[];const V=[],J=new Set;for(const{fbase_key:ke,value:gt}of w)J.add(ke),JSON.stringify(f.localCache[ke])!==JSON.stringify(gt)&&(f.notifyListeners(ke,gt),V.push(ke));for(const ke of Object.keys(f.localCache))f.localCache[ke]&&!J.has(ke)&&(f.notifyListeners(ke,null),V.push(ke));return V})()}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const J of Array.from(V))J(w)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wa(){return(wa=(0,h.Z)(function*(y){return(yield Zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ca(y){return new Promise((c,f)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=c,w.onerror=V=>{const J=Qe("internal-error");J.customData=V,f(J)},w.type="text/javascript",w.charset="UTF-8",function Uo(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(w)})}function us(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ri=1e12;class Ea{constructor(c){this.auth=c,this.counter=Ri,this._widgets=new Map}render(c,f){const w=this.counter;return this._widgets.set(w,new Yi(c,this.auth.name,f||{})),this.counter++,w}reset(c){var f;const w=c||Ri;null===(f=this._widgets.get(w))||void 0===f||f.delete(),this._widgets.delete(w)}getResponse(c){var f;return(null===(f=this._widgets.get(c||Ri))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,h.Z)(function*(){var w;return null===(w=f._widgets.get(c||Ri))||void 0===w||w.execute(),""})()}}class Yi{constructor(c,f,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof c?document.getElementById(c):c;he(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ya(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qr=us("rcb"),na=new yt(3e4,6e4);class Qi{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=On().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return he(function Na(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(On().grecaptcha):new Promise((w,V)=>{const J=On().setTimeout(()=>{V(Qe(c,"network-request-failed"))},na.get());On()[Qr]=()=>{On().clearTimeout(J),delete On()[Qr];const gt=On().grecaptcha;if(!gt)return void V(Qe(c,"internal-error"));const jt=gt.render;gt.render=(hn,xn)=>{const Tn=jt(hn,xn);return this.counter++,Tn},this.hostLanguage=f,w(gt)},Ca(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Qr,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(J),V(Qe(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=On().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zo{load(c){return(0,h.Z)(function*(){return new Ea(c)})()}clearedOneInstance(){}}const Xl="recaptcha",ec={theme:"light",type:"image"};class ei{constructor(c,f=Object.assign({},ec),w){this.parameters=f,this.type=Xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yn(w),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof c?document.getElementById(c):c;he(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zo:new Qi,this.validateStartingState()}verify(){var c=this;return(0,h.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),w=c.getAssertedRecaptcha();return w.getResponse(f)||new Promise(J=>{const ke=gt=>{gt&&(c.tokenChangeListeners.delete(ke),J(gt))};c.tokenChangeListeners.add(ke),c.isInvisible&&w.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(w=>w(f)),"function"==typeof c)c(f);else if("string"==typeof c){const w=On()[c];"function"==typeof w&&w(f)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,h.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const w=document.createElement("div");f.appendChild(w),f=w}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,h.Z)(function*(){he(Be()&&!Ci(),c.auth,"internal-error"),yield function Lu(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Zi(y){return wa.apply(this,arguments)}(c.auth);he(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fa{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=es._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Uu(){return(Uu=(0,h.Z)(function*(y,c,f){const w=Yn(y),V=yield bl(w,c,(0,G.m9)(f));return new Fa(V,J=>Bn(w,J))})).apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y);yield $i(!1,w,"phone");const V=yield bl(w.auth,c,(0,G.m9)(f));return new Fa(V,J=>vs(w,J))})).apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y),V=yield bl(w.auth,c,(0,G.m9)(f));return new Fa(V,J=>lo(w,J))})).apply(this,arguments)}function bl(y,c,f){return Il.apply(this,arguments)}function Il(){return Il=(0,h.Z)(function*(y,c,f){var w;const V=yield f.verify();try{let J;if(he("string"==typeof V,y,"argument-error"),he(f.type===Xl,y,"argument-error"),J="string"==typeof c?{phoneNumber:c}:c,"session"in J){const ke=J.session;if("phoneNumber"in J)return he("enroll"===ke.type,y,"internal-error"),(yield function Qt(y,c){return Zt(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,c))}(y,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{he("signin"===ke.type,y,"internal-error");const gt=(null===(w=J.multiFactorHint)||void 0===w?void 0:w.uid)||J.multiFactorUid;return he(gt,y,"missing-multi-factor-info"),(yield function io(y,c){return Zt(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,c))}(y,{mfaPendingCredential:ke.credential,mfaEnrollmentId:gt,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield function uo(y,c){return Vs.apply(this,arguments)}(y,{phoneNumber:J.phoneNumber,recaptchaToken:V});return ke}}finally{f._reset()}}),Il.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(y,c){yield rs((0,G.m9)(y),c)})).apply(this,arguments)}let Ao=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=Yn(f)}verifyPhoneNumber(f,w){return bl(this.auth,f,(0,G.m9)(w))}static credential(f,w){return es._fromVerification(f,w)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:w,temporaryProof:V}=f;return w&&V?es._fromTokenResponse(w,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Go(y,c){return c?Ct(c):(he(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ls extends Et{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Mi(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Mi(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Mi(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Mo(y){return ss(y.auth,new ls(y),y.bypassAuthState)}function Ua(y){const{auth:c,user:f}=y;return he(f,c,"internal-error"),ys(f,new ls(y),y.bypassAuthState)}function Ia(y){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(y){const{auth:c,user:f}=y;return he(f,c,"internal-error"),rs(f,new ls(y),y.bypassAuthState)})).apply(this,arguments)}class Ei{constructor(c,f,w,V,J=!1){this.auth=c,this.resolver=w,this.user=V,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,h.Z)(function*(w,V){c.pendingPromise={resolve:w,reject:V};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(J){c.reject(J)}});return function(w,V){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:V,postBody:J,tenantId:ke,error:gt,type:jt}=c;if(gt)return void f.reject(gt);const hn={auth:f.auth,requestUri:w,sessionId:V,tenantId:ke||void 0,postBody:J||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(jt)(hn))}catch(xn){f.reject(xn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Mo;case"linkViaPopup":case"linkViaRedirect":return Ia;case"reauthViaPopup":case"reauthViaRedirect":return Ua;default:ve(this.auth,"internal-error")}}resolve(c){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const du=new yt(2e3,1e4);function Vu(){return(Vu=(0,h.Z)(function*(y,c,f){const w=Yn(y);pt(y,c,sr);const V=Go(w,f);return new A(w,"signInViaPopup",c,V).executeNotNull()})).apply(this,arguments)}function v(){return(v=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y);pt(w.auth,c,sr);const V=Go(w.auth,f);return new A(w.auth,"reauthViaPopup",c,V,w).executeNotNull()})).apply(this,arguments)}function g(){return(g=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y);pt(w.auth,c,sr);const V=Go(w.auth,f);return new A(w.auth,"linkViaPopup",c,V,w).executeNotNull()})).apply(this,arguments)}let A=(()=>{class y extends Ei{constructor(f,w,V,J,ke){super(f,w,J,ke),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,h.Z)(function*(){const w=yield f.execute();return he(w,f.auth,"internal-error"),w})()}onExecution(){var f=this;return(0,h.Z)(function*(){At(1===f.filter.length,"Popup operations only handle one event");const w=Ar();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],w),f.authWindow.associatedEvent=w,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(Qe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var w,V;this.pollId=null!==(V=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,du.get())};f()}}return y.currentPopupAction=null,y})();const k="pendingRedirect",K=new Map;class ee extends Ei{constructor(c,f,w=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,w),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,h.Z)(function*(){let w=K.get(f.auth._key());if(!w){try{const J=(yield function Le(y,c){return ot.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;w=()=>Promise.resolve(J)}catch(V){w=()=>Promise.reject(V)}K.set(f.auth._key(),w)}return f.bypassAuthState||K.set(f.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(w,c);if("unknown"!==c.type){if(c.eventId){const V=yield w.auth._redirectUserForId(c.eventId);if(V)return w.user=V,f().call(w,c);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ot(){return(ot=(0,h.Z)(function*(y,c){const f=yo(c),w=Is(y);if(!(yield w._isAvailable()))return!1;const V="true"===(yield w._get(f));return yield w._remove(f),V})).apply(this,arguments)}function sn(y,c){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,h.Z)(function*(y,c){return Is(y)._set(yo(c),"true")})).apply(this,arguments)}function Gr(y,c){K.set(y._key(),c)}function Is(y){return Ct(y._redirectPersistence)}function yo(y){return ue(k,y.config.apiKey,y.name)}function O(y,c,f){return function R(y,c,f){return Z.apply(this,arguments)}(y,c,f)}function Z(){return(Z=(0,h.Z)(function*(y,c,f){const w=Yn(y);pt(y,c,sr),yield w._initializationPromise;const V=Go(w,f);return yield sn(V,w),V._openRedirect(w,c,"signInViaRedirect")})).apply(this,arguments)}function fe(y,c,f){return function Ne(y,c,f){return Ye.apply(this,arguments)}(y,c,f)}function Ye(){return(Ye=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y);pt(w.auth,c,sr),yield w.auth._initializationPromise;const V=Go(w.auth,f);yield sn(V,w.auth);const J=yield ji(w);return V._openRedirect(w.auth,c,"reauthViaRedirect",J)})).apply(this,arguments)}function Rt(y,c,f){return function yn(y,c,f){return gn.apply(this,arguments)}(y,c,f)}function gn(){return(gn=(0,h.Z)(function*(y,c,f){const w=(0,G.m9)(y);pt(w.auth,c,sr),yield w.auth._initializationPromise;const V=Go(w.auth,f);yield $i(!1,w,c.providerId),yield sn(V,w.auth);const J=yield ji(w);return V._openRedirect(w.auth,c,"linkViaRedirect",J)})).apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(y,c){return yield Yn(y)._initializationPromise,Hn(y,c,!1)})).apply(this,arguments)}function Hn(y,c){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(y,c,f=!1){const w=Yn(y),V=Go(w,c),ke=yield new ee(w,V,f).execute();return ke&&!f&&(delete ke.user._redirectEventId,yield w._persistUserIfCurrent(ke.user),yield w._setRedirectUser(null,c)),ke})).apply(this,arguments)}function ji(y){return sa.apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(y){const c=Ar(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Va{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(c,w)&&(f=!0,this.sendToConsumer(c,w),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function $u(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var w;if(c.error&&!Rs(c)){const V=(null===(w=c.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";f.onError(Qe(this.auth,V))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const w=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&w}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zs(c))}saveEventToCache(c){this.cachedEventUids.add(zs(c)),this.lastProcessedEventTime=Date.now()}}function zs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Rs({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function dh(y){return ic.apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(y,c={}){return Zt(y,"GET","/v1/projects",c)})).apply(this,arguments)}const Tf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,td=/^https?/;function sc(){return(sc=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield dh(y);for(const f of c)try{if(bi(f))return}catch{}ve(y,"unauthorized-domain")})).apply(this,arguments)}function bi(y){const c=Ze(),{protocol:f,hostname:w}=new URL(c);if(y.startsWith("chrome-extension://")){const ke=new URL(y);return""===ke.hostname&&""===w?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&ke.hostname===w}if(!td.test(f))return!1;if(Tf.test(y))return w===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(w)}const Da=new yt(3e4,6e4);function hh(){const y=On().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let oa=null;const Af=new yt(5e3,15e3),kr="__/auth/iframe",oi="emulator/auth/iframe",Dl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oc(y){const c=y.config;he(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?mt(c,oi):`https://${y.config.authDomain}/${kr}`,w={apiKey:c.apiKey,appName:y.name,v:q.SDK_VERSION},V=nd.get(y.config.apiHost);V&&(w.eid=V);const J=y._getFrameworks();return J.length&&(w.fw=J.join(",")),`${f}?${(0,G.xO)(w).slice(1)}`}function ju(){return ju=(0,h.Z)(function*(y){const c=yield function bg(y){return oa=oa||function Sf(y){return new Promise((c,f)=>{var w,V,J;function ke(){hh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{hh(),f(Qe(y,"network-request-failed"))},timeout:Da.get()})}if(null!==(V=null===(w=On().gapi)||void 0===w?void 0:w.iframes)&&void 0!==V&&V.Iframe)c(gapi.iframes.getContext());else{if(null===(J=On().gapi)||void 0===J||!J.load){const gt=us("iframefcb");return On()[gt]=()=>{gapi.load?ke():f(Qe(y,"network-request-failed"))},Ca(`https://apis.google.com/js/api.js?onload=${gt}`).catch(jt=>f(jt))}ke()}}).catch(c=>{throw oa=null,c})}(y),oa}(y),f=On().gapi;return he(f,y,"internal-error"),c.open({where:document.body,url:oc(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dl,dontclear:!0},w=>new Promise(function(){var V=(0,h.Z)(function*(J,ke){yield w.restyle({setHideOnLeave:!1});const gt=Qe(y,"network-request-failed"),jt=On().setTimeout(()=>{ke(gt)},Af.get());function hn(){On().clearTimeout(jt),J(w)}w.ping(hn).then(hn,()=>{ke(gt)})});return function(J,ke){return V.apply(this,arguments)}}()))}),ju.apply(this,arguments)}const rd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},id=500,aa=600,Mf="_blank",Of="http://localhost";class fh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ph="__/auth/handler",xf="emulator/auth/handler";function ad(y,c,f,w,V,J){he(y.config.authDomain,y,"auth-domain-config-required"),he(y.config.apiKey,y,"invalid-api-key");const ke={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:w,v:q.SDK_VERSION,eventId:V};if(c instanceof sr){c.setDefaultLanguage(y.languageCode),ke.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(ke.customParameters=JSON.stringify(c.getCustomParameters()));for(const[jt,hn]of Object.entries(J||{}))ke[jt]=hn}if(c instanceof Jr){const jt=c.getScopes().filter(hn=>""!==hn);jt.length>0&&(ke.scopes=jt.join(","))}y.tenantId&&(ke.tid=y.tenantId);const gt=ke;for(const jt of Object.keys(gt))void 0===gt[jt]&&delete gt[jt];return`${function gh({config:y}){return y.emulator?mt(y,xf):`https://${y.authDomain}/${ph}`}(y)}?${(0,G.xO)(gt).slice(1)}`}const Tl="webStorageSupport",Ds=class hu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qn,this._completeRedirectFn=Hn,this._overrideRedirectResult=Gr}_openPopup(c,f,w,V){var J=this;return(0,h.Z)(function*(){var ke;At(null===(ke=J.eventManagers[c._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const gt=ad(c,f,w,Ze(),V);return function sd(y,c,f,w=id,V=aa){const J=Math.max((window.screen.availHeight-V)/2,0).toString(),ke=Math.max((window.screen.availWidth-w)/2,0).toString();let gt="";const jt=Object.assign(Object.assign({},rd),{width:w.toString(),height:V.toString(),top:J,left:ke}),hn=(0,G.z$)().toLowerCase();f&&(gt=_e(hn)?Mf:f),Pe(hn)&&(c=c||Of,jt.scrollbars="yes");const xn=Object.entries(jt).reduce((Ji,[Vo,tl])=>`${Ji}${Vo}=${tl},`,"");if(function Un(y=(0,G.z$)()){var c;return wt(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(hn)&&"_self"!==gt)return function od(y,c){const f=document.createElement("a");f.href=y,f.target=c;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(w)}(c||"",gt),new fh(null);const Tn=window.open(c||"",gt,xn);he(Tn,y,"popup-blocked");try{Tn.focus()}catch{}return new fh(Tn)}(c,gt,Ar())})()}_openRedirect(c,f,w,V){var J=this;return(0,h.Z)(function*(){return yield J._originValidation(c),function cn(y){On().location.href=y}(ad(c,f,w,Ze(),V)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:V,promise:J}=this.eventManagers[f];return V?Promise.resolve(V):(At(J,"If manager is not set, promise should be"),J)}const w=this.initAndGetManager(c);return this.eventManagers[f]={promise:w},w.catch(()=>{delete this.eventManagers[f]}),w}initAndGetManager(c){var f=this;return(0,h.Z)(function*(){const w=yield function ac(y){return ju.apply(this,arguments)}(c),V=new Va(c);return w.register("authEvent",J=>(he(J?.authEvent,c,"invalid-auth-event"),{status:V.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:V},f.iframes[c._key()]=w,V})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(Tl,{type:Tl},V=>{var J;const ke=null===(J=V?.[0])||void 0===J?void 0:J[Tl];void 0!==ke&&f(!!ke),ve(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Gs(y){return sc.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return Cr()||xt()||wt()}};class Hu{constructor(c){this.factorId=c}_process(c,f,w){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,w);case"signin":return this._finalizeSignIn(c,f.credential);default:return Ue("unexpected MultiFactorSessionType")}}}class fu extends Hu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new fu(c)}_finalizeEnroll(c,f,w){return function En(y,c){return Zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,c))}(c,{idToken:f,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function gi(y,c){return Zt(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class y{constructor(){}static assertion(f){return fu._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var ud="@firebase/auth";class cc{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,h.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(w=>{c(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);f&&(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ba(){return window}(0,G.Pz)("authIdTokenMaxAge"),function pu(y){(0,q._registerComponent)(new be.wA("auth",(c,{options:f})=>{const w=c.getProvider("app").getImmediate(),V=c.getProvider("heartbeat"),{apiKey:J,authDomain:ke}=w.options;return((gt,jt)=>{he(J&&!J.includes(":"),"invalid-api-key",{appName:gt.name}),he(!ke?.includes(":"),"argument-error",{appName:gt.name});const hn={apiKey:J,authDomain:ke,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ai(y)},xn=new qr(gt,jt,hn);return function Ve(y,c){const f=c?.persistence||[],w=(Array.isArray(f)?f:[f]).map(Ct);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(w,c?.popupRedirectResolver)}(xn,f),xn})(w,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,w)=>{c.getProvider("auth-internal").initialize()})),(0,q._registerComponent)(new be.wA("auth-internal",c=>{const f=Yn(c.getProvider("auth").getImmediate());return new cc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)(ud,"0.22.0",function dc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,q.registerVersion)(ud,"0.22.0","esm2017")}("Browser");const $a=2e3;function hc(){return hc=(0,h.Z)(function*(y,c,f){var w;const{BuildInfo:V}=Ba();At(c.sessionId,"AuthEvent did not contain a session ID");const J=yield function _h(y){return Oo.apply(this,arguments)}(c.sessionId),ke={};return wt()?ke.ibi=V.packageName:ne()?ke.apn=V.packageName:ve(y,"operation-not-supported-in-this-environment"),V.displayName&&(ke.appDisplayName=V.displayName),ke.sessionId=J,ad(y,f,c.type,void 0,null!==(w=c.eventId)&&void 0!==w?w:void 0,ke)}),hc.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(y){const{BuildInfo:c}=Ba(),f={};wt()?f.iosBundleId=c.packageName:ne()?f.androidPackageName=c.packageName:ve(y,"operation-not-supported-in-this-environment"),yield dh(y,f)})).apply(this,arguments)}function zu(){return(zu=(0,h.Z)(function*(y,c,f){const{cordova:w}=Ba();let V=()=>{};try{yield new Promise((J,ke)=>{let gt=null;function jt(){var Tn;J();const Ji=null===(Tn=w.plugins.browsertab)||void 0===Tn?void 0:Tn.close;"function"==typeof Ji&&Ji(),"function"==typeof f?.close&&f.close()}function hn(){gt||(gt=window.setTimeout(()=>{ke(Qe(y,"redirect-cancelled-by-user"))},$a))}function xn(){"visible"===document?.visibilityState&&hn()}c.addPassiveListener(jt),document.addEventListener("resume",hn,!1),ne()&&document.addEventListener("visibilitychange",xn,!1),V=()=>{c.removePassiveListener(jt),document.removeEventListener("resume",hn,!1),document.removeEventListener("visibilitychange",xn,!1),gt&&window.clearTimeout(gt)}})}finally{V()}})).apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(y){const c=function vh(y){if(At(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let w=0;w<y.length;w++)f[w]=y.charCodeAt(w);return f}(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ml=20;class Pf extends Va{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,h.Z)(function*(){yield c.initPromise})()}}function wh(y){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y){const c=yield Wu()._get(qu(y));return c&&(yield Wu()._remove(qu(y))),c})).apply(this,arguments)}function hd(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<Ml;f++){const w=Math.floor(Math.random()*c.length);y.push(c.charAt(w))}return y.join("")}function Wu(){return Ct(mr)}function qu(y){return ue("authEvent",y.config.apiKey,y.name)}function Ku(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,G.zd)(f.join("?"))}const fd=class Qa{constructor(){this._redirectPersistence=qn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hn,this._overrideRedirectResult=Gr}_initialize(c){var f=this;return(0,h.Z)(function*(){const w=c._key();let V=f.eventManagers.get(w);return V||(V=new Pf(c),f.eventManagers.set(w,V),f.attachCallbackListeners(c,V)),V})()}_openPopup(c){ve(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,w,V){var J=this;return(0,h.Z)(function*(){!function Gu(y){var c,f,w,V,J,ke,gt,jt,hn,xn;const Tn=Ba();he("function"==typeof(null===(c=Tn?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof(null===(f=Tn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he("function"==typeof(null===(J=null===(V=null===(w=Tn?.cordova)||void 0===w?void 0:w.plugins)||void 0===V?void 0:V.browsertab)||void 0===J?void 0:J.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(jt=null===(gt=null===(ke=Tn?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===jt?void 0:jt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(xn=null===(hn=Tn?.cordova)||void 0===hn?void 0:hn.InAppBrowser)||void 0===xn?void 0:xn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const ke=yield J._initialize(c);yield ke.initialized(),ke.resetRedirect(),function Dn(){K.clear()}(),yield J._originValidation(c);const gt=function Rf(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:hd(),postBody:null,tenantId:y.tenantId,error:Qe(y,"no-auth-event")}}(c,w,V);yield function cr(y,c){return Wu()._set(qu(y),c)}(c,gt);const jt=yield function mh(y,c,f){return hc.apply(this,arguments)}(c,gt,f),hn=yield function yh(y){const{cordova:c}=Ba();return new Promise(f=>{c.plugins.browsertab.isAvailable(w=>{let V=null;w?c.plugins.browsertab.openUrl(y):V=c.InAppBrowser.open(y,function nn(y=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(jt);return function Ts(y,c,f){return zu.apply(this,arguments)}(c,ke,hn)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function dd(y){return Wo.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:w,handleOpenURL:V,BuildInfo:J}=Ba(),ke=setTimeout((0,h.Z)(function*(){yield wh(c),f.onEvent(Ja())}),500),gt=function(){var xn=(0,h.Z)(function*(Tn){clearTimeout(ke);const Ji=yield wh(c);let Vo=null;Ji&&Tn?.url&&(Vo=function fc(y,c){var f,w;const V=function Ch(y){const c=Ku(y),f=c.link?decodeURIComponent(c.link):void 0,w=Ku(f).link,V=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ku(V).link||V||w||f||y}(c);if(V.includes("/__/auth/callback")){const J=Ku(V),ke=J.firebaseError?function kf(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(J.firebaseError)):null,gt=null===(w=null===(f=ke?.code)||void 0===f?void 0:f.split("auth/"))||void 0===w?void 0:w[1],jt=gt?Qe(gt):null;return jt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:jt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(Ji,Tn.url)),f.onEvent(Vo||Ja())});return function(Ji){return xn.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,gt);const jt=V,hn=`${J.packageName.toLowerCase()}://`;Ba().handleOpenURL=function(){var xn=(0,h.Z)(function*(Tn){if(Tn.toLowerCase().startsWith(hn)&&gt({url:Tn}),"function"==typeof jt)try{jt(Tn)}catch(Ji){console.error(Ji)}});return function(Tn){return xn.apply(this,arguments)}}()}};function Ja(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qe("no-auth-event")}}const pd=1e3;function Sa(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function pc(y=(0,G.z$)()){return!("file:"!==Sa()&&"ionic:"!==Sa()&&"capacitor:"!==Sa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function gc(){try{const y=self.localStorage,c=Ar();if(y)return y.setItem(c,"1"),y.removeItem(c),!function gd(y=(0,G.z$)()){return function yu(){return(0,G.w1)()&&11===document?.documentMode}()||function _u(y=(0,G.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,G.hl)()}catch{return Ha()&&(0,G.hl)()}return!1}function Ha(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ol(){return(function bh(){return"http:"===Sa()||"https:"===Sa()}()||(0,G.ru)()||pc())&&!function Ii(){return(0,G.b$)()||(0,G.UG)()}()&&gc()&&!Ha()}function vu(){return pc()&&typeof document<"u"}function Ko(){return(Ko=(0,h.Z)(function*(){return!!vu()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},pd);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const xo={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=he,Xa="persistence";function eu(y){return wu.apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(y){yield y._initializationPromise;const c=Dh(),f=ue(Xa,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function Dh(){var y;try{return(null===(y=function Ih(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const md=he;class Cu{constructor(){this.browserResolver=Ct(Ds),this.cordovaResolver=Ct(fd),this.underlyingResolver=null,this._redirectPersistence=qn,this._completeRedirectFn=Hn,this._overrideRedirectResult=Gr}_initialize(c){var f=this;return(0,h.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,w,V){var J=this;return(0,h.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(c,f,w,V)})()}_openRedirect(c,f,w,V){var J=this;return(0,h.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(c,f,w,V)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return vu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return md(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,h.Z)(function*(){if(c.underlyingResolver)return;const f=yield function Zu(){return Ko.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Th(y){return y.unwrap()}function Vr(y){return Qu(y)}function Qu(y){const{_tokenResponse:c}=y instanceof G.ZR?y.customData:y;if(!c)return null;if(!(y instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Ao.credentialFromResult(y);const f=c.providerId;if(!f||f===Ee.PASSWORD)return null;let w;switch(f){case Ee.GOOGLE:w=ko;break;case Ee.FACEBOOK:w=Vi;break;case Ee.GITHUB:w=Ks;break;case Ee.TWITTER:w=Ys;break;default:const{oauthIdToken:V,oauthAccessToken:J,oauthTokenSecret:ke,pendingToken:gt,nonce:jt}=c;return J||ke||V||gt?gt?f.startsWith("saml.")?ns._create(f,gt):ni._fromParams({providerId:f,signInMethod:f,pendingToken:gt,idToken:V,accessToken:J}):new xi(f).credential({idToken:V,accessToken:J,rawNonce:jt}):null}return y instanceof G.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function ks(y,c){return c.catch(f=>{throw f instanceof G.ZR&&function yd(y,c){var f;const w=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Ju(y,function ka(y,c){var f;const w=(0,G.m9)(y),V=c;return he(c.customData.operationType,w,"argument-error"),he(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,w,"argument-error"),Lr._fromError(w,V)}(y,c));else if(w){const V=Qu(c),J=c;V&&(J.credential=V,J.tenantId=w.tenantId||void 0,J.email=w.email||void 0,J.phoneNumber=w.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Vr(f),additionalUserInfo:ku(f),user:Ns.getOrCreate(V)}})}function Eu(y,c){return nu.apply(this,arguments)}function nu(){return(nu=(0,h.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:w=>ks(y,f.confirm(w))}})).apply(this,arguments)}class Ju{constructor(c,f){this.resolver=f,this.auth=function Hi(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ks(Th(this.auth),this.resolver.resolveSignIn(c))}}class Ns{constructor(c){this._delegate=c,this.multiFactor=function P(y){const c=(0,G.m9)(y);return $.has(c)||$.set(c,b._fromUser(c)),$.get(c)}(c)}static getOrCreate(c){return Ns.USER_MAP.has(c)||Ns.USER_MAP.set(c,new Ns(c)),Ns.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,h.Z)(function*(){return ks(f.auth,vs(f._delegate,c))})()}linkWithPhoneNumber(c,f){var w=this;return(0,h.Z)(function*(){return Eu(w.auth,function nc(y,c,f){return cu.apply(this,arguments)}(w._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,h.Z)(function*(){return ks(f.auth,function C(y,c,f){return g.apply(this,arguments)}(f._delegate,c,Cu))})()}linkWithRedirect(c){var f=this;return(0,h.Z)(function*(){return yield eu(Yn(f.auth)),Rt(f._delegate,c,Cu)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,h.Z)(function*(){return ks(f.auth,lo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Eu(this.auth,function rc(y,c,f){return ba.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return ks(this.auth,function Mr(y,c,f){return v.apply(this,arguments)}(this._delegate,c,Cu))}reauthenticateWithRedirect(c){var f=this;return(0,h.Z)(function*(){return yield eu(Yn(f.auth)),fe(f._delegate,c,Cu)})()}sendEmailVerification(c){return function Hr(y,c){return Fr.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,h.Z)(function*(){return yield function Xs(y,c){return Os.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function js(y,c){return bo((0,G.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function fi(y,c){return bo((0,G.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function di(y,c){return La.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Es(y,c){return hi.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function as(y,c,f){return ur.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ns.USER_MAP=new WeakMap;const Xu=he;let _d=(()=>{class y{constructor(f,w){if(this.app=f,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;Xu(V,"invalid-api-key",{appName:f.name}),Xu(V,"invalid-api-key",{appName:f.name});const J=typeof window<"u"?Cu:void 0;this._delegate=w.initialize({options:{persistence:Ff(V,f.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(it),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,w){!function Si(y,c,f){const w=Yn(y);he(w._canInitEmulator,w,"emulator-config-failed"),he(/^https?:\/\//.test(c),w,"invalid-emulator-scheme");const V=!!f?.disableWarnings,J=Vn(c),{host:ke,port:gt}=function wr(y){const c=Vn(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const w=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(w);if(V){const J=V[1];return{host:J,port:Er(w.substr(J.length+1))}}{const[J,ke]=w.split(":");return{host:J,port:Er(ke)}}}(c);w.config.emulator={url:`${J}//${ke}${null===gt?"":`:${gt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ke,port:gt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function ri(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,w)}applyActionCode(f){return function os(y,c){return ho.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return $s(this._delegate,f)}confirmPasswordReset(f,w){return function eo(y,c,f){return Sn.apply(this,arguments)}(this._delegate,f,w)}createUserWithEmailAndPassword(f,w){var V=this;return(0,h.Z)(function*(){return ks(V._delegate,function me(y,c,f){return D.apply(this,arguments)}(V._delegate,f,w))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function or(y,c){return ar.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ae(y,c){return"EMAIL_SIGNIN"===si.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,h.Z)(function*(){Xu(Ol(),f._delegate,"operation-not-supported-in-this-environment");const w=yield function Rn(y,c){return nr.apply(this,arguments)}(f._delegate,Cu);return w?ks(f._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Nf(y,c){Yn(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,w,V){const{next:J,error:ke,complete:gt}=vd(f,w,V);return this._delegate.onAuthStateChanged(J,ke,gt)}onIdTokenChanged(f,w,V){const{next:J,error:ke,complete:gt}=vd(f,w,V);return this._delegate.onIdTokenChanged(J,ke,gt)}sendSignInLinkToEmail(f,w){return function I(y,c,f){return W.apply(this,arguments)}(this._delegate,f,w)}sendPasswordResetEmail(f,w){return function Ki(y,c,f){return xs.apply(this,arguments)}(this._delegate,f,w||void 0)}setPersistence(f){var w=this;return(0,h.Z)(function*(){let V;switch(function mc(y,c){Yu(Object.values(xo).includes(c),y,"invalid-persistence-type"),(0,G.b$)()?Yu(c!==xo.SESSION,y,"unsupported-persistence-type"):(0,G.UG)()?Yu(c===xo.NONE,y,"unsupported-persistence-type"):Ha()?Yu(c===xo.NONE||c===xo.LOCAL&&(0,G.hl)(),y,"unsupported-persistence-type"):Yu(c===xo.NONE||gc(),y,"unsupported-persistence-type")}(w._delegate,f),f){case xo.SESSION:V=qn;break;case xo.LOCAL:V=(yield Ct(ro)._isAvailable())?ro:mr;break;case xo.NONE:V=ie;break;default:return ve("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ks(this._delegate,function gs(y){return Js.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ks(this._delegate,Bn(this._delegate,f))}signInWithCustomToken(f){return ks(this._delegate,function Pr(y,c){return qi.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,w){return ks(this._delegate,function E(y,c,f){return Bn((0,G.m9)(y),Bs.credential(c,f))}(this._delegate,f,w))}signInWithEmailLink(f,w){return ks(this._delegate,function ct(y,c,f){return dn.apply(this,arguments)}(this._delegate,f,w))}signInWithPhoneNumber(f,w){return Eu(this._delegate,function tc(y,c,f){return Uu.apply(this,arguments)}(this._delegate,f,w))}signInWithPopup(f){var w=this;return(0,h.Z)(function*(){return Xu(Ol(),w._delegate,"operation-not-supported-in-this-environment"),ks(w._delegate,function ia(y,c,f){return Vu.apply(this,arguments)}(w._delegate,f,Cu))})()}signInWithRedirect(f){var w=this;return(0,h.Z)(function*(){return Xu(Ol(),w._delegate,"operation-not-supported-in-this-environment"),yield eu(w._delegate),O(w._delegate,f,Cu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function L(y,c){return re.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=xo,y})();function vd(y,c,f){let w=y;"function"!=typeof y&&({next:w,error:c,complete:f}=y);const V=w;return{next:ke=>V(ke&&Ns.getOrCreate(ke)),error:c,complete:f}}function Ff(y,c){const f=function tu(y,c){const f=Dh();if(!f)return[];const w=ue(Xa,y,c);switch(f.getItem(w)){case xo.NONE:return[ie];case xo.LOCAL:return[ro,qn];case xo.SESSION:return[qn];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(ro)&&f.push(ro),typeof window<"u")for(const w of[mr,qn])f.includes(w)||f.push(w);return f.includes(ie)||f.push(ie),f}class yc{constructor(){this.providerId="phone",this._delegate=new Ao(Th(z.Z.auth()))}static credential(c,f){return Ao.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}yc.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,yc.PROVIDER_ID=Ao.PROVIDER_ID;const Aa=he;class el{constructor(c,f,w=z.Z.app()){var V;Aa(null===(V=w.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ei(c,f,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Uf(y){y.INTERNAL.registerComponent(new be.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),w=c.getProvider("auth");return new _d(f,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:le_EMAIL_SIGNIN,PASSWORD_RESET:le_PASSWORD_RESET,RECOVER_EMAIL:le_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:le_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:le_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:le_VERIFY_EMAIL}},EmailAuthProvider:Bs,FacebookAuthProvider:Vi,GithubAuthProvider:Ks,GoogleAuthProvider:ko,OAuthProvider:xi,SAMLAuthProvider:Bi,PhoneAuthProvider:yc,PhoneMultiFactorGenerator:uc,RecaptchaVerifier:el,TwitterAuthProvider:Ys,Auth:_d,AuthCredential:Et,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.7")}(z.Z)},8766:(zt,He,N)=>{N.d(He,{Lj:()=>ve,X3:()=>dt});var h=N(5861);const z=(he,Ue)=>Ue.some(At=>he instanceof At);let G,q;const be=new WeakMap,ae=new WeakMap,Ee=new WeakMap,X=new WeakMap,se=new WeakMap;let Oe={get(he,Ue,At){if(he instanceof IDBTransaction){if("done"===Ue)return ae.get(he);if("objectStoreNames"===Ue)return he.objectStoreNames||Ee.get(he);if("store"===Ue)return At.objectStoreNames[1]?void 0:At.objectStore(At.objectStoreNames[0])}return ut(he[Ue])},set:(he,Ue,At)=>(he[Ue]=At,!0),has:(he,Ue)=>he instanceof IDBTransaction&&("done"===Ue||"store"===Ue)||Ue in he};function qe(he){return"function"==typeof he?function vt(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...Ue){return he.apply(et(this),Ue),ut(be.get(this))}:function(...Ue){return ut(he.apply(et(this),Ue))}:function(Ue,...At){const Tt=he.call(et(this),Ue,...At);return Ee.set(Tt,Ue.sort?Ue.sort():[Ue]),ut(Tt)}}(he):(he instanceof IDBTransaction&&function ze(he){if(ae.has(he))return;const Ue=new Promise((At,Tt)=>{const Ct=()=>{he.removeEventListener("complete",Pt),he.removeEventListener("error",Ve),he.removeEventListener("abort",Ve)},Pt=()=>{At(),Ct()},Ve=()=>{Tt(he.error||new DOMException("AbortError","AbortError")),Ct()};he.addEventListener("complete",Pt),he.addEventListener("error",Ve),he.addEventListener("abort",Ve)});ae.set(he,Ue)}(he),z(he,function ge(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Oe):he)}function ut(he){if(he instanceof IDBRequest)return function le(he){const Ue=new Promise((At,Tt)=>{const Ct=()=>{he.removeEventListener("success",Pt),he.removeEventListener("error",Ve)},Pt=()=>{At(ut(he.result)),Ct()},Ve=()=>{Tt(he.error),Ct()};he.addEventListener("success",Pt),he.addEventListener("error",Ve)});return Ue.then(At=>{At instanceof IDBCursor&&be.set(At,he)}).catch(()=>{}),se.set(Ue,he),Ue}(he);if(X.has(he))return X.get(he);const Ue=qe(he);return Ue!==he&&(X.set(he,Ue),se.set(Ue,he)),Ue}const et=he=>se.get(he);function dt(he,Ue,{blocked:At,upgrade:Tt,blocking:Ct,terminated:Pt}={}){const Ve=indexedDB.open(he,Ue),Ze=ut(Ve);return Tt&&Ve.addEventListener("upgradeneeded",Be=>{Tt(ut(Ve.result),Be.oldVersion,Be.newVersion,ut(Ve.transaction))}),At&&Ve.addEventListener("blocked",()=>At()),Ze.then(Be=>{Pt&&Be.addEventListener("close",()=>Pt()),Ct&&Be.addEventListener("versionchange",()=>Ct())}).catch(()=>{}),Ze}function ve(he,{blocked:Ue}={}){const At=indexedDB.deleteDatabase(he);return Ue&&At.addEventListener("blocked",()=>Ue()),ut(At).then(()=>{})}const Qe=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],pt=new Map;function Xe(he,Ue){if(!(he instanceof IDBDatabase)||Ue in he||"string"!=typeof Ue)return;if(pt.get(Ue))return pt.get(Ue);const At=Ue.replace(/FromIndex$/,""),Tt=Ue!==At,Ct=We.includes(At);if(!(At in(Tt?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Qe.includes(At))return;const Pt=function(){var Ve=(0,h.Z)(function*(Ze,...Be){const Ke=this.transaction(Ze,Ct?"readwrite":"readonly");let ht=Ke.store;return Tt&&(ht=ht.index(Be.shift())),(yield Promise.all([ht[At](...Be),Ct&&Ke.done]))[0]});return function(Be){return Ve.apply(this,arguments)}}();return pt.set(Ue,Pt),Pt}!function it(he){Oe=he(Oe)}(he=>({...he,get:(Ue,At,Tt)=>Xe(Ue,At)||he.get(Ue,At,Tt),has:(Ue,At)=>!!Xe(Ue,At)||he.has(Ue,At)}))},6081:(zt,He,N)=>{N.d(He,{Cz:()=>zn,Eo:()=>Gt,Js:()=>mn,LA:()=>mt,cS:()=>wn});var h=N(4650),z=N(1135),G=N(6895),q=N(9300),ge=N(8746),Ie=N(1481),be=N(8209),ae=N(529);function Ee(xe,un){if(1&xe&&h._UZ(0,"div",9),2&xe){const ce=h.oxw();h.Udp("height",ce.pbThickness,"px")("color",ce.pbColor),h.ekj("ngx-position-absolute",ce.loaderId!==ce.defaultConfig.masterLoaderId)("loading-foreground",ce.showForeground)("foreground-closing",ce.foregroundClosing)("fast-closing",ce.foregroundClosing&&ce.fastFadeOut),h.Q6J("ngClass","ngx-progress-bar-"+ce.pbDirection)}}function X(xe,un){if(1&xe&&h._UZ(0,"img",10),2&xe){const ce=h.oxw();h.Udp("width",ce.logoSize,"px")("height",ce.logoSize,"px")("top",ce.logoTop),h.Q6J("ngClass",ce.logoPosition)("src",ce.trustedLogoUrl,h.LSH)}}function se(xe,un){1&xe&&h._UZ(0,"div")}function le(xe,un){if(1&xe&&(h.TgZ(0,"div"),h.YNc(1,se,1,0,"div",11),h.qZA()),2&xe){const ce=h.oxw();h.Tol(ce.fgSpinnerClass),h.xp6(1),h.Q6J("ngForOf",ce.fgDivs)}}function ze(xe,un){1&xe&&h.GkF(0)}function Oe(xe,un){if(1&xe&&h.YNc(0,ze,1,0,"ng-container",12),2&xe){const ce=h.oxw();h.Q6J("ngTemplateOutlet",ce.fgsTemplate)}}function it(xe,un){1&xe&&h._UZ(0,"div")}function vt(xe,un){if(1&xe&&(h.TgZ(0,"div"),h.YNc(1,it,1,0,"div",11),h.qZA()),2&xe){const ce=h.oxw();h.Tol(ce.bgSpinnerClass),h.xp6(1),h.Q6J("ngForOf",ce.bgDivs)}}function qe(xe,un){1&xe&&h.GkF(0)}function ut(xe,un){if(1&xe&&h.YNc(0,qe,1,0,"ng-container",12),2&xe){const ce=h.oxw();h.Q6J("ngTemplateOutlet",ce.bgsTemplate)}}var et=(()=>{return(xe=et||(et={})).ballScaleMultiple="ball-scale-multiple",xe.ballSpin="ball-spin",xe.ballSpinClockwise="ball-spin-clockwise",xe.ballSpinClockwiseFadeRotating="ball-spin-clockwise-fade-rotating",xe.ballSpinFadeRotating="ball-spin-fade-rotating",xe.chasingDots="chasing-dots",xe.circle="circle",xe.cubeGrid="cube-grid",xe.doubleBounce="double-bounce",xe.fadingCircle="fading-circle",xe.foldingCube="folding-cube",xe.pulse="pulse",xe.rectangleBounce="rectangle-bounce",xe.rectangleBounceParty="rectangle-bounce-party",xe.rectangleBouncePulseOut="rectangle-bounce-pulse-out",xe.rectangleBouncePulseOutRapid="rectangle-bounce-pulse-out-rapid",xe.rotatingPlane="rotating-plane",xe.squareJellyBox="square-jelly-box",xe.squareLoader="square-loader",xe.threeBounce="three-bounce",xe.threeStrings="three-strings",xe.wanderingCubes="wandering-cubes",et;var xe})(),dt=(()=>{return(xe=dt||(dt={})).bottomCenter="bottom-center",xe.bottomLeft="bottom-left",xe.bottomRight="bottom-right",xe.centerCenter="center-center",xe.centerLeft="center-left",xe.centerRight="center-right",xe.topCenter="top-center",xe.topLeft="top-left",xe.topRight="top-right",dt;var xe})(),ve=(()=>{return(xe=ve||(ve={})).leftToRight="ltr",xe.rightToLeft="rtl",ve;var xe})();const Qe="fg-default",We="bg-default",Xe={},Ct=!1,Pt=!0,Be="$_http-loader",Ke="$_router_loader",ht={"ball-scale-multiple":{divs:3,class:"sk-ball-scale-multiple"},"ball-spin":{divs:8,class:"sk-ball-spin"},"ball-spin-clockwise":{divs:8,class:"sk-ball-spin-clockwise"},"ball-spin-clockwise-fade-rotating":{divs:8,class:"sk-ball-spin-clockwise-fade-rotating"},"ball-spin-fade-rotating":{divs:8,class:"sk-ball-spin-fade-rotating"},"chasing-dots":{divs:2,class:"sk-chasing-dots"},circle:{divs:12,class:"sk-circle"},"cube-grid":{divs:9,class:"sk-cube-grid"},"double-bounce":{divs:2,class:"sk-double-bounce"},"fading-circle":{divs:12,class:"sk-fading-circle"},"folding-cube":{divs:4,class:"sk-folding-cube"},pulse:{divs:1,class:"sk-pulse"},"rectangle-bounce":{divs:5,class:"sk-rectangle-bounce"},"rectangle-bounce-party":{divs:5,class:"sk-rectangle-bounce-party"},"rectangle-bounce-pulse-out":{divs:5,class:"sk-rectangle-bounce-pulse-out"},"rectangle-bounce-pulse-out-rapid":{divs:5,class:"sk-rectangle-bounce-pulse-out-rapid"},"rotating-plane":{divs:1,class:"sk-rotating-plane"},"square-jelly-box":{divs:2,class:"sk-square-jelly-box"},"square-loader":{divs:1,class:"sk-square-loader"},"three-bounce":{divs:3,class:"sk-three-bounce"},"three-strings":{divs:3,class:"sk-three-strings"},"wandering-cubes":{divs:2,class:"sk-wandering-cubes"}},tt={bgsColor:"#00ACC1",bgsOpacity:.5,bgsPosition:dt.bottomRight,bgsSize:60,bgsType:et.ballSpinClockwise,blur:5,delay:0,fastFadeOut:!1,fgsColor:"#00ACC1",fgsPosition:dt.centerCenter,fgsSize:60,fgsType:et.ballSpinClockwise,gap:24,logoPosition:dt.centerCenter,logoSize:120,logoUrl:"",masterLoaderId:"master",overlayBorderRadius:"0",overlayColor:"rgba(40, 40, 40, 0.8)",pbColor:"#00ACC1",pbDirection:ve.leftToRight,pbThickness:3,hasProgressBar:!0,text:"",textColor:"#FFFFFF",textPosition:dt.centerCenter,maxTime:-1,minTime:300},yt=new h.OlP("ngxUiLoaderCustom.config");let mt=(()=>{class xe{constructor(ce){this.config=ce,this.defaultConfig={...tt},this.config&&(this.config.minTime&&this.config.minTime<0&&(this.config.minTime=0),this.defaultConfig={...this.defaultConfig,...this.config}),this.loaders={},this.showForeground=new z.X({loaderId:"",isShow:!1}),this.showForeground$=this.showForeground.asObservable(),this.showBackground=new z.X({loaderId:"",isShow:!1}),this.showBackground$=this.showBackground.asObservable(),this.fgClosing=new z.X({loaderId:"",isShow:!1}),this.foregroundClosing$=this.fgClosing.asObservable(),this.bgClosing=new z.X({loaderId:"",isShow:!1}),this.backgroundClosing$=this.bgClosing.asObservable()}bindLoaderData(ce){const ft=ce===this.defaultConfig.masterLoaderId;if(this.loaders[ce]){if(this.loaders[ce].isBound)throw new Error(`[ngx-ui-loader] - loaderId "${ce}" is duplicated.`);this.loaders[ce].isBound=!0,this.loaders[ce].isMaster=ft,this.hasRunningTask(Pt,ce)?this.showForeground.next({loaderId:ce,isShow:!0}):this.hasRunningTask(Ct,ce)&&this.showBackground.next({loaderId:ce,isShow:!0})}else this.createLoaderData(ce,ft,!0)}destroyLoaderData(ce){this.stopAllLoader(ce),delete this.loaders[ce]}getDefaultConfig(){return{...this.defaultConfig}}getLoaders(){return JSON.parse(JSON.stringify(this.loaders))}getLoader(ce){return this.loaders[ce=ce||this.defaultConfig.masterLoaderId]?JSON.parse(JSON.stringify(this.loaders[ce])):null}startLoader(ce,ft=Qe,Ut){this.readyToStart(ce,ft,!0,Ut)&&(this.loaders[ce].tasks[ft].isOtherRunning||(this.hasRunningTask(Ct,ce)&&(this.backgroundCloseout(ce),this.showBackground.next({loaderId:ce,isShow:!1})),this.showForeground.next({loaderId:ce,isShow:!0})))}start(ce=Qe,ft){this.startLoader(this.defaultConfig.masterLoaderId,ce,ft)}startBackgroundLoader(ce,ft=We,Ut){this.readyToStart(ce,ft,!1,Ut)&&!this.hasRunningTask(Pt,ce)&&!this.loaders[ce].tasks[ft].isOtherRunning&&this.showBackground.next({loaderId:ce,isShow:!0})}startBackground(ce=We,ft){this.startBackgroundLoader(this.defaultConfig.masterLoaderId,ce,ft)}stopLoader(ce,ft=Qe){this.readyToStop(ce,ft)&&(this.hasRunningTask(Pt,ce)||(this.foregroundCloseout(ce),this.showForeground.next({loaderId:ce,isShow:!1}),this.hasRunningTask(Ct,ce)&&setTimeout(()=>{this.hasRunningTask(Ct,ce)&&this.showBackground.next({loaderId:ce,isShow:!0})},this.defaultConfig.fastFadeOut?300:500)))}stop(ce=Qe){this.stopLoader(this.defaultConfig.masterLoaderId,ce)}stopBackgroundLoader(ce,ft=We){this.readyToStop(ce,ft)&&!this.hasRunningTask(Pt,ce)&&!this.hasRunningTask(Ct,ce)&&(this.backgroundCloseout(ce),this.showBackground.next({loaderId:ce,isShow:!1}))}stopBackground(ce=We){this.stopBackgroundLoader(this.defaultConfig.masterLoaderId,ce)}stopAllLoader(ce){this.loaders[ce]?(this.hasRunningTask(Pt,ce)?(this.foregroundCloseout(ce),this.showForeground.next({loaderId:ce,isShow:!1})):this.hasRunningTask(Ct,ce)&&(this.backgroundCloseout(ce),this.showBackground.next({loaderId:ce,isShow:!1})),this.clearAllTimers(this.loaders[ce].tasks),this.loaders[ce].tasks={}):console.warn(`[ngx-ui-loader] - loaderId "${ce}" does not exist.`)}stopAll(){this.stopAllLoader(this.defaultConfig.masterLoaderId)}hasRunningTask(ce,ft,Ut){if(this.loaders[ft]){const on=this.loaders[ft].tasks;return Ut?!!on[Ut]&&!!on[Ut].startAt:Object.keys(on).some(St=>!!on[St].startAt&&on[St].isForeground===ce)}return!1}createLoaderData(ce,ft,Ut){this.loaders[ce]||(this.loaders[ce]={loaderId:ce,tasks:{},isMaster:ft,isBound:Ut})}foregroundCloseout(ce){this.fgClosing.next({loaderId:ce,isShow:!0}),setTimeout(()=>{this.fgClosing.next({loaderId:ce,isShow:!1})},this.defaultConfig.fastFadeOut?601:1001)}backgroundCloseout(ce){this.bgClosing.next({loaderId:ce,isShow:!0}),setTimeout(()=>{this.bgClosing.next({loaderId:ce,isShow:!1})},this.defaultConfig.fastFadeOut?601:1001)}clearTimers(ce){clearTimeout(ce.delayTimer),clearTimeout(ce.maxTimer),clearTimeout(ce.minTimer)}clearAllTimers(ce){Object.keys(ce).map(ft=>{this.clearTimers(ce[ft])})}readyToStart(ce,ft,Ut,on=Xe){this.createLoaderData(ce,void 0,!1);const St=this.hasRunningTask(Ut,ce);if(this.loaders[ce].tasks[ft]){if(this.loaders[ce].tasks[ft].isForeground!==Ut)throw new Error(`[ngx-ui-loader] - taskId "${ft}" is duplicated.`)}else this.loaders[ce].tasks[ft]={taskId:ft,isForeground:Ut,minTime:on.minTime>=0?on.minTime:this.defaultConfig.minTime,maxTime:on.maxTime?on.maxTime:this.defaultConfig.maxTime,delay:on.delay>=0?on.delay:this.defaultConfig.delay};return!(this.setDelayTimer(this.loaders[ce].tasks[ft],ce)||(this.loaders[ce].tasks[ft]={...this.loaders[ce].tasks[ft],isOtherRunning:St,startAt:Date.now()},this.setMaxTimer(this.loaders[ce].tasks[ft],ce),!this.loaders[ce].isBound))}readyToStop(ce,ft){if(!this.loaders[ce])return console.warn(`[ngx-ui-loader] - loaderId "${ce}" does not exist.`),!1;const Ut=this.loaders[ce].tasks[ft];return!(!Ut||(Ut.isDelayed?(this.clearTimers(Ut),delete this.loaders[ce].tasks[ft],1):this.setMinTimer(Ut,ce)||(this.clearTimers(Ut),delete this.loaders[ce].tasks[ft],0)))}setDelayTimer(ce,ft){if(ce.delay>0){if(ce.isDelayed)return!0;if(!ce.delayTimer)return ce.isDelayed=!0,ce.delayTimer=setTimeout(()=>{ce.isDelayed=!1,ce.isForeground?this.startLoader(ft,ce.taskId):this.startBackgroundLoader(ft,ce.taskId)},ce.delay),!0}return!1}setMaxTimer(ce,ft){ce.maxTime>ce.minTime&&(clearTimeout(ce.maxTimer),ce.maxTimer=setTimeout(()=>{ce.isForeground?this.stopLoader(ft,ce.taskId):this.stopBackgroundLoader(ft,ce.taskId)},ce.maxTime))}setMinTimer(ce,ft){const Ut=Date.now();return!!(ce.startAt&&ce.startAt+ce.minTime>Ut)&&(ce.minTimer=setTimeout(()=>{ce.isForeground?this.stopLoader(ft,ce.taskId):this.stopBackgroundLoader(ft,ce.taskId)},ce.startAt+ce.minTime-Ut),!0)}}return xe.\u0275fac=function(ce){return new(ce||xe)(h.LFG(yt,8))},xe.\u0275prov=h.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})(),Gt=(()=>{class xe{constructor(ce,ft,Ut){this.domSanitizer=ce,this.changeDetectorRef=ft,this.ngxService=Ut,this.initialized=!1,this.defaultConfig=this.ngxService.getDefaultConfig(),this.bgsColor=this.defaultConfig.bgsColor,this.bgsOpacity=this.defaultConfig.bgsOpacity,this.bgsPosition=this.defaultConfig.bgsPosition,this.bgsSize=this.defaultConfig.bgsSize,this.bgsType=this.defaultConfig.bgsType,this.fastFadeOut=this.defaultConfig.fastFadeOut,this.fgsColor=this.defaultConfig.fgsColor,this.fgsPosition=this.defaultConfig.fgsPosition,this.fgsSize=this.defaultConfig.fgsSize,this.fgsType=this.defaultConfig.fgsType,this.gap=this.defaultConfig.gap,this.loaderId=this.defaultConfig.masterLoaderId,this.logoPosition=this.defaultConfig.logoPosition,this.logoSize=this.defaultConfig.logoSize,this.logoUrl=this.defaultConfig.logoUrl,this.overlayBorderRadius=this.defaultConfig.overlayBorderRadius,this.overlayColor=this.defaultConfig.overlayColor,this.pbColor=this.defaultConfig.pbColor,this.pbDirection=this.defaultConfig.pbDirection,this.pbThickness=this.defaultConfig.pbThickness,this.hasProgressBar=this.defaultConfig.hasProgressBar,this.text=this.defaultConfig.text,this.textColor=this.defaultConfig.textColor,this.textPosition=this.defaultConfig.textPosition}ngOnInit(){this.initializeSpinners(),this.ngxService.bindLoaderData(this.loaderId),this.determinePositions(),this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.logoUrl),this.showForegroundWatcher=this.ngxService.showForeground$.pipe((0,q.h)(ce=>this.loaderId===ce.loaderId)).subscribe(ce=>{this.showForeground=ce.isShow,this.changeDetectorRef.markForCheck()}),this.showBackgroundWatcher=this.ngxService.showBackground$.pipe((0,q.h)(ce=>this.loaderId===ce.loaderId)).subscribe(ce=>{this.showBackground=ce.isShow,this.changeDetectorRef.markForCheck()}),this.foregroundClosingWatcher=this.ngxService.foregroundClosing$.pipe((0,q.h)(ce=>this.loaderId===ce.loaderId)).subscribe(ce=>{this.foregroundClosing=ce.isShow,this.changeDetectorRef.markForCheck()}),this.backgroundClosingWatcher=this.ngxService.backgroundClosing$.pipe((0,q.h)(ce=>this.loaderId===ce.loaderId)).subscribe(ce=>{this.backgroundClosing=ce.isShow,this.changeDetectorRef.markForCheck()}),this.initialized=!0}ngOnChanges(ce){if(!this.initialized)return;const on=ce.logoUrl;(ce.fgsType||ce.bgsType)&&this.initializeSpinners(),this.determinePositions(),on&&(this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.logoUrl))}ngOnDestroy(){this.ngxService.destroyLoaderData(this.loaderId),this.showForegroundWatcher&&this.showForegroundWatcher.unsubscribe(),this.showBackgroundWatcher&&this.showBackgroundWatcher.unsubscribe(),this.foregroundClosingWatcher&&this.foregroundClosingWatcher.unsubscribe(),this.backgroundClosingWatcher&&this.backgroundClosingWatcher.unsubscribe()}initializeSpinners(){this.fgDivs=Array(ht[this.fgsType].divs).fill(1),this.fgSpinnerClass=ht[this.fgsType].class,this.bgDivs=Array(ht[this.bgsType].divs).fill(1),this.bgSpinnerClass=ht[this.bgsType].class}determinePositions(){this.logoTop="initial",this.spinnerTop="initial",this.textTop="initial",this.logoPosition.startsWith("center")?this.logoTop="50%":this.logoPosition.startsWith("top")&&(this.logoTop="30px"),this.fgsPosition.startsWith("center")?this.spinnerTop="50%":this.fgsPosition.startsWith("top")&&(this.spinnerTop="30px"),this.textPosition.startsWith("center")?this.textTop="50%":this.textPosition.startsWith("top")&&(this.textTop="30px"),this.fgsPosition===dt.centerCenter?this.logoUrl&&this.logoPosition===dt.centerCenter?this.text&&this.textPosition===dt.centerCenter?(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - ${this.fgsSize/2}px - 12px - ${this.gap}px)`),this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px - 12px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap}px + ${this.fgsSize/2}px)`)):(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - ${this.fgsSize/2}px - ${this.gap/2}px)`),this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap/2}px)`)):this.text&&this.textPosition===dt.centerCenter&&(this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - 12px - ${this.gap/2}px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.fgsSize/2}px + ${this.gap/2}px)`)):this.logoUrl&&this.logoPosition===dt.centerCenter&&this.text&&this.textPosition===dt.centerCenter&&(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - 12px - ${this.gap/2}px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap/2}px)`))}}return xe.\u0275fac=function(ce){return new(ce||xe)(h.Y36(Ie.H7),h.Y36(h.sBO),h.Y36(mt))},xe.\u0275cmp=h.Xpm({type:xe,selectors:[["ngx-ui-loader"]],inputs:{bgsColor:"bgsColor",bgsOpacity:"bgsOpacity",bgsPosition:"bgsPosition",bgsSize:"bgsSize",bgsTemplate:"bgsTemplate",bgsType:"bgsType",fgsColor:"fgsColor",fgsPosition:"fgsPosition",fgsSize:"fgsSize",fgsTemplate:"fgsTemplate",fgsType:"fgsType",gap:"gap",loaderId:"loaderId",logoPosition:"logoPosition",logoSize:"logoSize",logoUrl:"logoUrl",overlayBorderRadius:"overlayBorderRadius",overlayColor:"overlayColor",pbColor:"pbColor",pbDirection:"pbDirection",pbThickness:"pbThickness",hasProgressBar:"hasProgressBar",text:"text",textColor:"textColor",textPosition:"textPosition"},features:[h.TTD],decls:14,vars:50,consts:[["class","ngx-progress-bar",3,"ngx-position-absolute","ngClass","height","color","loading-foreground","foreground-closing","fast-closing",4,"ngIf"],[1,"ngx-overlay"],["class","ngx-loading-logo",3,"ngClass","src","width","height","top",4,"ngIf"],[1,"ngx-foreground-spinner",3,"ngClass"],[3,"class",4,"ngIf","ngIfElse"],["foregroundTemplate",""],[1,"ngx-loading-text",3,"ngClass"],[1,"ngx-background-spinner",3,"ngClass"],["backgroundTemplate",""],[1,"ngx-progress-bar",3,"ngClass"],[1,"ngx-loading-logo",3,"ngClass","src"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"]],template:function(ce,ft){if(1&ce&&(h.YNc(0,Ee,1,13,"div",0),h.TgZ(1,"div",1),h.YNc(2,X,1,8,"img",2),h.TgZ(3,"div",3),h.YNc(4,le,2,3,"div",4),h.YNc(5,Oe,1,1,"ng-template",null,5,h.W1O),h.qZA(),h.TgZ(7,"div",6)(8,"span"),h._uU(9),h.qZA()()(),h.TgZ(10,"div",7),h.YNc(11,vt,2,3,"div",4),h.YNc(12,ut,1,1,"ng-template",null,8,h.W1O),h.qZA()),2&ce){const Ut=h.MAs(6),on=h.MAs(13);h.Q6J("ngIf",ft.hasProgressBar),h.xp6(1),h.Udp("background-color",ft.overlayColor)("border-radius",ft.overlayBorderRadius),h.ekj("ngx-position-absolute",ft.loaderId!==ft.defaultConfig.masterLoaderId)("loading-foreground",ft.showForeground)("foreground-closing",ft.foregroundClosing)("fast-closing",ft.foregroundClosing&&ft.fastFadeOut),h.xp6(1),h.Q6J("ngIf",ft.logoUrl),h.xp6(1),h.Udp("color",ft.fgsColor)("width",ft.fgsSize,"px")("height",ft.fgsSize,"px")("top",ft.spinnerTop),h.Q6J("ngClass",ft.fgsPosition),h.xp6(1),h.Q6J("ngIf",!ft.fgsTemplate)("ngIfElse",Ut),h.xp6(3),h.Udp("top",ft.textTop)("color",ft.textColor),h.Q6J("ngClass",ft.textPosition),h.xp6(2),h.Oqu(ft.text),h.xp6(1),h.Udp("width",ft.bgsSize,"px")("height",ft.bgsSize,"px")("color",ft.bgsColor)("opacity",ft.bgsOpacity),h.ekj("ngx-position-absolute",ft.loaderId!==ft.defaultConfig.masterLoaderId)("loading-background",ft.showBackground)("background-closing",ft.backgroundClosing)("fast-closing",ft.backgroundClosing&&ft.fastFadeOut),h.Q6J("ngClass",ft.bgsPosition),h.xp6(1),h.Q6J("ngIf",!ft.bgsTemplate)("ngIfElse",on)}},dependencies:[G.O5,G.mk,G.sg,G.tP],styles:['.ngx-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:3px;z-index:99999!important;display:none;color:#00acc1;overflow:hidden}.ngx-progress-bar.loading-foreground[_ngcontent-%COMP%], .ngx-progress-bar.foreground-closing[_ngcontent-%COMP%]{display:block}.ngx-progress-bar.foreground-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s ease-out .5s}.ngx-progress-bar.fast-closing[_ngcontent-%COMP%]{transition:opacity .3s ease-out .3s!important}.ngx-progress-bar[_ngcontent-%COMP%]:before, .ngx-progress-bar[_ngcontent-%COMP%]:after{background-color:currentColor;content:"";display:block;width:100%;height:100%;position:absolute;top:0}.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{transform:translate3d(-100%,0,0)}.ngx-progress-bar-ltr[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_progressBar-slide-ltr 12s ease-out 0s 1 normal;transform:translate3d(-5%,0,0)}.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{transform:translate3d(100%,0,0)}.ngx-progress-bar-rtl[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_progressBar-slide-rtl 12s ease-out 0s 1 normal;transform:translate3d(5%,0,0)}.foreground-closing.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-ltr 1s ease-out 0s 1;transform:translateZ(0)}.fast-closing.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-ltr .6s ease-out 0s 1!important}.foreground-closing.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-rtl 1s ease-out 0s 1;transform:translateZ(0)}.fast-closing.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-rtl .6s ease-out 0s 1!important}@keyframes _ngcontent-%COMP%_progressBar-slide-ltr{0%{transform:translate3d(-100%,0,0)}to{transform:translate3d(-5%,0,0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-rtl{0%{transform:translate3d(100%,0,0)}to{transform:translate3d(5%,0,0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-complete-ltr{0%{transform:translate3d(-75%,0,0)}50%{transform:translateZ(0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-complete-rtl{0%{transform:translate3d(75%,0,0)}50%{transform:translateZ(0)}}.ngx-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99998!important;background-color:#282828cc;cursor:progress;display:none}.ngx-overlay.loading-foreground[_ngcontent-%COMP%], .ngx-overlay.foreground-closing[_ngcontent-%COMP%]{display:block}.ngx-overlay.foreground-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s ease-out .5s}.ngx-overlay.fast-closing[_ngcontent-%COMP%]{transition:opacity .3s ease-out .3s!important}.ngx-overlay[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;margin:0;color:#00acc1}.ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-logo[_ngcontent-%COMP%]{position:fixed;margin:0;width:120px;height:120px}.ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-text[_ngcontent-%COMP%]{position:fixed;margin:0;font-family:sans-serif;font-weight:400;font-size:1.2em;color:#fff}.ngx-background-spinner[_ngcontent-%COMP%]{position:fixed;z-index:99997!important;width:60px;height:60px;margin:0;color:#00acc1;opacity:.6;display:none}.ngx-background-spinner.loading-background[_ngcontent-%COMP%], .ngx-background-spinner.background-closing[_ngcontent-%COMP%]{display:block}.ngx-background-spinner.background-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .7s ease-out}.ngx-background-spinner.fast-closing[_ngcontent-%COMP%]{transition:opacity .4s ease-out!important}.ngx-position-absolute[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-logo[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-text[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute.ngx-progress-bar[_ngcontent-%COMP%]{z-index:99996!important}.ngx-position-absolute.ngx-overlay[_ngcontent-%COMP%]{z-index:99995!important}.ngx-position-absolute.ngx-background-spinner[_ngcontent-%COMP%]{z-index:99994!important}.ngx-position-absolute[_ngcontent-%COMP%]   .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){z-index:99994!important}.top-left[_ngcontent-%COMP%]{top:30px;left:30px}.top-center[_ngcontent-%COMP%]{top:30px;left:50%;transform:translate(-50%)}.top-right[_ngcontent-%COMP%]{top:30px;right:30px}.center-left[_ngcontent-%COMP%]{top:50%;left:30px;transform:translateY(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:30px;transform:translateY(-50%)}.bottom-left[_ngcontent-%COMP%]{bottom:30px;left:30px}.bottom-center[_ngcontent-%COMP%]{bottom:30px;left:50%;transform:translate(-50%)}.bottom-right[_ngcontent-%COMP%]{bottom:30px;right:30px}.sk-ball-scale-multiple[_ngcontent-%COMP%], .sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-scale-multiple[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:100%;opacity:0;animation:_ngcontent-%COMP%_ball-scale-multiple 1s 0s linear infinite}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_ball-scale-multiple{0%{opacity:0;transform:scale(0)}5%{opacity:.75}to{opacity:0;transform:scale(1)}}.sk-ball-spin[_ngcontent-%COMP%], .sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise 1s infinite ease-in-out}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-1.125s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-1.25s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-1.375s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-1.5s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-1.625s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-1.75s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-1.875s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:-2s}@keyframes _ngcontent-%COMP%_ball-spin{0%,to{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.sk-ball-spin-clockwise[_ngcontent-%COMP%], .sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-clockwise[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise 1s infinite ease-in-out}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-.875s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-.75s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-.625s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-.5s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-.375s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-.25s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-.125s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:0s}@keyframes _ngcontent-%COMP%_ball-spin-clockwise{0%,to{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%], .sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%]{font-size:0;width:100%;height:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise-fade-rotating-rotate 6s infinite linear}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise-fade-rotating 1s infinite linear}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-.875s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-.75s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-.625s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-.5s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-.375s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-.25s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-.125s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:0s}@keyframes _ngcontent-%COMP%_ball-spin-clockwise-fade-rotating-rotate{to{transform:rotate(-360deg)}}@keyframes _ngcontent-%COMP%_ball-spin-clockwise-fade-rotating{50%{opacity:.25;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%], .sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0;animation:_ngcontent-%COMP%_ball-spin-fade-rotate 6s infinite linear}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-fade 1s infinite linear}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-1.125s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-1.25s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-1.375s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-1.5s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-1.625s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-1.75s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-1.875s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:-2s}@keyframes _ngcontent-%COMP%_ball-spin-fade-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_ball-spin-fade{0%,to{opacity:1;transform:scale(1)}50%{opacity:.25;transform:scale(.5)}}.sk-chasing-dots[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:absolute;text-align:center;animation:_ngcontent-%COMP%_sk-chasingDots-rotate 2s infinite linear}.sk-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-chasingDots-bounce 2s infinite ease-in-out}.sk-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:auto;bottom:0;animation-delay:-1s}@keyframes _ngcontent-%COMP%_sk-chasingDots-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-chasingDots-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.sk-circle[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-circle-bounceDelay 1.2s infinite ease-in-out both}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:-1.1s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:-1s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:-.9s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5):before{animation-delay:-.8s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6):before{animation-delay:-.7s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7):before{animation-delay:-.6s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8):before{animation-delay:-.5s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9):before{animation-delay:-.4s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10):before{animation-delay:-.3s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11):before{animation-delay:-.2s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12):before{animation-delay:-.1s}@keyframes _ngcontent-%COMP%_sk-circle-bounceDelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.sk-cube-grid[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:33%;height:33%;background-color:currentColor;float:left;animation:_ngcontent-%COMP%_sk-cubeGrid-scaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGrid-scaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}.sk-double-bounce[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;margin:auto}.sk-double-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:currentColor;opacity:.6;position:absolute;top:0;left:0;animation:_ngcontent-%COMP%_sk-doubleBounce-bounce 2s infinite ease-in-out}.sk-double-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-1s}@keyframes _ngcontent-%COMP%_sk-doubleBounce-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.sk-fading-circle[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-fadingCircle-FadeDelay 1.2s infinite ease-in-out both}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:-1.1s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:-1s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:-.9s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5):before{animation-delay:-.8s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6):before{animation-delay:-.7s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7):before{animation-delay:-.6s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8):before{animation-delay:-.5s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9):before{animation-delay:-.4s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10):before{animation-delay:-.3s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11):before{animation-delay:-.2s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12):before{animation-delay:-.1s}@keyframes _ngcontent-%COMP%_sk-fadingCircle-FadeDelay{0%,39%,to{opacity:0}40%{opacity:1}}.sk-folding-cube[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;transform:rotate(45deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:left;width:50%;height:50%;position:relative;transform:scale(1.1)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:currentColor;animation:_ngcontent-%COMP%_sk-foldingCube-angle 2.4s infinite linear both;transform-origin:100% 100%}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:scale(1.1) rotate(90deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:scale(1.1) rotate(270deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:scale(1.1) rotate(180deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:.3s}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:.9s}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:.6s}@keyframes _ngcontent-%COMP%_sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.sk-pulse[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.sk-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-pulse-scaleOut 1s infinite ease-in-out}@keyframes _ngcontent-%COMP%_sk-pulse-scaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}.sk-rectangle-bounce[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;height:100%;width:10%;margin:0 5%;display:inline-block;animation:_ngcontent-%COMP%_sk-rectangleBounce-stretchDelay 1.2s infinite ease-in-out}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-1.1s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-1s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.9s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.8s}@keyframes _ngcontent-%COMP%_sk-rectangleBounce-stretchDelay{0%,40%,to{transform:scaleY(.4)}20%{transform:scaleY(1)}}.sk-rectangle-bounce-party[_ngcontent-%COMP%], .sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-party[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation-name:_ngcontent-%COMP%_rectangle-bounce-party;animation-iteration-count:infinite}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-duration:.43s;animation-delay:-.23s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-duration:.62s;animation-delay:-.32s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-duration:.43s;animation-delay:-.44s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-duration:.8s;animation-delay:-.31s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-duration:.74s;animation-delay:-.24s}@keyframes _ngcontent-%COMP%_rectangle-bounce-party{0%{transform:scaleY(1)}50%{transform:scaleY(.4)}to{transform:scaleY(1)}}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%], .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation:_ngcontent-%COMP%_rectangle-bounce-pulse-out .9s infinite cubic-bezier(.85,.25,.37,.85)}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.9s}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.7s}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.5s}@keyframes _ngcontent-%COMP%_rectangle-bounce-pulse-out{0%{transform:scaley(1)}50%{transform:scaley(.4)}to{transform:scaley(1)}}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%], .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation:_ngcontent-%COMP%_rectangle-bounce-pulse-out-rapid .9s infinite cubic-bezier(.11,.49,.38,.78)}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.9s}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.65s}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.4s}@keyframes _ngcontent-%COMP%_rectangle-bounce-pulse-out-rapid{0%{transform:scaley(1)}80%{transform:scaley(.4)}90%{transform:scaley(1)}}.sk-rotating-plane[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:auto}.sk-rotating-plane[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background-color:currentColor;animation:_ngcontent-%COMP%_sk-rotatePlane 1.2s infinite ease-in-out}@keyframes _ngcontent-%COMP%_sk-rotatePlane{0%{transform:perspective(120px) rotateX(0) rotateY(0)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}to{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}.sk-square-jelly-box[_ngcontent-%COMP%], .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-square-jelly-box[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){position:absolute;left:0;width:100%}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:-25%;z-index:99997;height:100%;border-radius:10%;animation:_ngcontent-%COMP%_square-jelly-box-animate .6s -.1s linear infinite}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){bottom:-9%;height:10%;background:#000;border-radius:50%;opacity:.2;animation:_ngcontent-%COMP%_square-jelly-box-shadow .6s -.1s linear infinite}@keyframes _ngcontent-%COMP%_square-jelly-box-animate{17%{border-bottom-right-radius:10%}25%{transform:translateY(25%) rotate(22.5deg)}50%{border-bottom-right-radius:100%;transform:translateY(50%) scaleY(.9) rotate(45deg)}75%{transform:translateY(25%) rotate(67.5deg)}to{transform:translateY(0) rotate(90deg)}}@keyframes _ngcontent-%COMP%_square-jelly-box-shadow{50%{transform:scaleX(1.25)}}.sk-square-loader[_ngcontent-%COMP%], .sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-square-loader[_ngcontent-%COMP%]{font-size:0;width:100%;height:100%}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background:transparent;border-width:3px;border-radius:0;animation:_ngcontent-%COMP%_square-loader 2s infinite ease}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{display:inline-block;width:100%;vertical-align:top;content:"";background-color:currentColor;animation:_ngcontent-%COMP%_square-loader-inner 2s infinite ease-in}@keyframes _ngcontent-%COMP%_square-loader{0%{transform:rotate(0)}25%{transform:rotate(180deg)}50%{transform:rotate(180deg)}75%{transform:rotate(360deg)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_square-loader-inner{0%{height:0}25%{height:0}50%{height:100%}75%{height:100%}to{height:0}}.sk-three-bounce[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:35%;width:30%;height:30%;background-color:currentColor;border-radius:100%;display:inline-block;animation:_ngcontent-%COMP%_sk-threeBounce-bounceDelay 1.4s infinite ease-in-out both}.bottom-center[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bottom-left[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bottom-right[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:70%!important}.top-center[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .top-left[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .top-right[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:0!important}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_sk-threeBounce-bounceDelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.sk-three-strings[_ngcontent-%COMP%]{width:100%;height:100%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){left:0%;top:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateOne 1s linear infinite;border-bottom:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){right:0%;top:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateTwo 1s linear infinite;border-right:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){right:0%;bottom:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateThree 1s linear infinite;border-top:3px solid currentColor}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}.sk-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;text-align:center}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;width:25%;height:25%;position:absolute;top:0;left:0;animation:_ngcontent-%COMP%_sk-wanderingCubes-cubeMove 1.8s infinite ease-in-out}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.9s}@keyframes _ngcontent-%COMP%_sk-wanderingCubes-cubeMove{25%{transform:translate(290%) rotate(-90deg) scale(.5)}50%{transform:translate(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translate(290%) translateY(290%) rotate(-180deg)}75%{transform:translate(0) translateY(290%) rotate(-270deg) scale(.5)}to{transform:rotate(-360deg)}}'],changeDetection:0}),xe})(),mn=(()=>{class xe{static forRoot(ce){return{ngModule:xe,providers:[{provide:yt,useValue:ce}]}}}return xe.\u0275fac=function(ce){return new(ce||xe)},xe.\u0275mod=h.oAB({type:xe}),xe.\u0275inj=h.cJS({imports:[[G.ez]]}),xe})();const kt=new h.OlP("ngxUiLoaderRouterCustom.config");function Zt(xe){let un,ce;return xe&&(xe.exclude&&(un=xe.exclude.map(ft=>ft.toLowerCase())),xe.excludeRegexp&&(ce=xe.excludeRegexp.map(ft=>new RegExp(ft,"i")))),{strs:un,regExps:ce}}function Cn(xe,un,ce){return!!(un&&-1!==un.findIndex(ft=>xe.toLowerCase().startsWith(ft))||ce&&-1!==ce.findIndex(ft=>ft.test(xe)))}let wn=(()=>{class xe{constructor(ce,ft,Ut,on){if(ce)throw new Error("[ngx-ui-loader] - NgxUiLoaderRouterModule is already loaded. It should be imported in the root `AppModule` only!");let St={loaderId:on.getDefaultConfig().masterLoaderId,showForeground:!0};this.exclude=Zt(ft),ft&&(St={...St,...ft}),Ut.events.subscribe(Fn=>{Fn instanceof be.OD&&(Cn(Fn.url,this.exclude.strs,this.exclude.regExps)||(St.showForeground?on.startLoader(St.loaderId,Ke):on.startBackgroundLoader(St.loaderId,Ke))),(Fn instanceof be.m2||Fn instanceof be.gk||Fn instanceof be.Q3)&&(Cn(Fn.url,this.exclude.strs,this.exclude.regExps)||(St.showForeground?on.stopLoader(St.loaderId,Ke):on.stopBackgroundLoader(St.loaderId,Ke)))})}static forRoot(ce){return{ngModule:xe,providers:[{provide:kt,useValue:ce}]}}}return xe.\u0275fac=function(ce){return new(ce||xe)(h.LFG(xe,12),h.LFG(kt,8),h.LFG(be.F0),h.LFG(mt))},xe.\u0275mod=h.oAB({type:xe}),xe.\u0275inj=h.cJS({}),xe})();const Ln=new h.OlP("ngxUiLoaderHttpCustom.config");let Nn=(()=>{class xe{constructor(ce,ft){this.loader=ft,this.count=0,this.config={loaderId:this.loader.getDefaultConfig().masterLoaderId,showForeground:!1},this.exclude=Zt(ce),ce&&(this.config={...this.config,...ce})}intercept(ce,ft){return Cn(ce.url,this.exclude.strs,this.exclude.regExps)?ft.handle(ce):(this.count++,this.config.showForeground?this.loader.startLoader(this.config.loaderId,Be,this.config):this.loader.startBackgroundLoader(this.config.loaderId,Be,this.config),ft.handle(ce).pipe((0,ge.x)(()=>{this.count--,0===this.count&&(this.config.showForeground?this.loader.stopLoader(this.config.loaderId,Be):this.loader.stopBackgroundLoader(this.config.loaderId,Be))})))}}return xe.\u0275fac=function(ce){return new(ce||xe)(h.LFG(Ln,8),h.LFG(mt))},xe.\u0275prov=h.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),zn=(()=>{class xe{constructor(ce){if(ce)throw new Error("[ngx-ui-loader] - NgxUiLoaderHttpModule is already loaded. It should be imported in the root `AppModule` only!")}static forRoot(ce){return{ngModule:xe,providers:[{provide:Ln,useValue:ce}]}}}return xe.\u0275fac=function(ce){return new(ce||xe)(h.LFG(xe,12))},xe.\u0275mod=h.oAB({type:xe}),xe.\u0275inj=h.cJS({providers:[{provide:ae.TP,useClass:Nn,multi:!0}]}),xe})()},5861:(zt,He,N)=>{function h(G,q,ge,Ie,be,ae,Ee){try{var X=G[ae](Ee),se=X.value}catch(le){return void ge(le)}X.done?q(se):Promise.resolve(se).then(Ie,be)}function z(G){return function(){var q=this,ge=arguments;return new Promise(function(Ie,be){var ae=G.apply(q,ge);function Ee(se){h(ae,Ie,be,Ee,X,"next",se)}function X(se){h(ae,Ie,be,Ee,X,"throw",se)}Ee(void 0)})}}N.d(He,{Z:()=>z})}},zt=>{zt(zt.s=1542)}]);